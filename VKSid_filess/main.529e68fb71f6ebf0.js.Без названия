"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[179],{12638:(z,R,t)=>{var e=t(43623),s=t(54355),h=t(10835),_=t(70882);class i{constructor(me){if(this.config=me,this.window=window,this.window.ng.probe&&this.window.getAllAngularRootElements){const ue=this.window.ng.probe(this.window.getAllAngularRootElements()[0]);this.router=ue.injector.view.root.ngModule._providers.find(Ne=>Ne&&Ne.constructor&&"Router"===Ne.constructor.name);try{this.ngZone=ue.injector.get(this.window.ng.coreTokens.NgZone)}catch(Ne){console.log(Ne)}}else if(this.window.ng.getInjector&&this.window.getAllAngularRootElements&&this.config&&this.config.router&&this.config.ngZone)try{const ue=this.window.ng.getInjector(this.window.getAllAngularRootElements()[0]);this.router=ue.get(this.config.router),this.ngZone=ue.get(this.config.ngZone)}catch(ue){console.log(ue)}}navigate(me){this.ngZone&&this.router&&this.runInZone(()=>{this.router.navigateByUrl(me)})}runInZone(me){this.ngZone&&this.ngZone.run(()=>{me()})}}var r=(()=>((r=r||{}).DISPATCH="DISPATCH",r.JUMP_TO_STATE="JUMP_TO_STATE",r.JUMP_TO_ACTION="JUMP_TO_ACTION",r.REDUX_DEVTOOLS_JUMP="REDUX_DEVTOOLS_JUMP",r.ROUTE_NAVIGATION="ROUTE_NAVIGATION",r.IMPORT_STATE="IMPORT_STATE",r))(),p=t(8239),u=t(40089),a=t(26738),o=t(7778),l=t(12841),c=t(6190),d=t(5469),v=t(36162);const I=[new RegExp("^assets/config/config.prod.json$"),new RegExp("^assets/config/config.staging.json$")],m=[new RegExp("^assets/.*$")];let g=(()=>{class Ee{constructor(ue){this.versionService=ue}shouldBeVersionCached(ue){return m.some(Ie=>Ie.test(ue.url))}shouldBeNeverCached(ue){return I.some(Ie=>Ie.test(ue.url))}intercept(ue,Ie){let Ne=ue;return this.shouldBeNeverCached(ue)?Ne=ue.clone({setParams:{v:Date.now().toString()}}):this.shouldBeVersionCached(ue)&&(Ne=ue.clone({setParams:{v:this.versionService.version}})),Ie.handle(Ne)}}return Ee.\u0275fac=function(ue){return new(ue||Ee)(s.LFG(v.P))},Ee.\u0275prov=s.Yz7({token:Ee,factory:Ee.\u0275fac}),Ee})(),n=(()=>{class Ee{constructor(ue){this.loginService=ue}intercept(ue,Ie){return this.isAuthorizedZoneRequest(ue)&&this.loginService.sessionId?Ie.handle(ue.clone({setHeaders:{Session:this.loginService.sessionId}})):Ie.handle(ue)}isAuthorizedZoneRequest({url:ue}){return ue.includes("/rest")}}return Ee.\u0275fac=function(ue){return new(ue||Ee)(s.LFG(d.r6))},Ee.\u0275prov=s.Yz7({token:Ee,factory:Ee.\u0275fac}),Ee})();var S=t(48701),C=t(40205),T=t(25917),P=t(43190);let A=!1;const M=new RegExp("/api/rest/conference-sessions/([a-z0-9]|-)+/record/start");let N=(()=>{class Ee{shouldBeIntercepted(ue){return M.test(ue.url)&&"POST"===ue.method}throwSomeError(){return A=!1,(0,C._)(new S.UA({error:{type:"none",reason:"FS_LIMIT_RESTRICTION",message:"test message"},status:400}))}intercept(ue,Ie){return A&&this.shouldBeIntercepted(ue)?(console.info(`Request ${ue.method} ${ue.url} was replaced with error`),(0,T.of)(null).pipe((0,P.w)(()=>this.throwSomeError()))):Ie.handle(ue)}}return Ee.\u0275fac=function(ue){return new(ue||Ee)},Ee.\u0275prov=s.Yz7({token:Ee,factory:Ee.\u0275fac}),Ee})();var W=t(12989),b=t(20971),V=t(28728),F=t(911),J=t(75261),H=t(17734),Y=t(24429),ee=t(88002);let X=(()=>{class Ee{constructor(ue){this.loginService=ue}canActivate(ue,Ie){return!!this.loginService.isAuthenticated||(this.loginService.resetLogin(),!1)}}return Ee.\u0275fac=function(ue){return new(ue||Ee)(s.LFG(d.r6))},Ee.\u0275prov=s.Yz7({token:Ee,factory:Ee.\u0275fac,providedIn:"root"}),Ee})();const K=[{path:"login",loadChildren:()=>Promise.all([t.e(910),t.e(592),t.e(324)]).then(t.bind(t,67324)).then(Ee=>Ee.LoginPageModule)},{path:"join",loadChildren:()=>Promise.all([t.e(910),t.e(592),t.e(324)]).then(t.bind(t,67324)).then(Ee=>Ee.LoginPageModule)},{path:"selfregistration",loadChildren:()=>Promise.all([t.e(910),t.e(592),t.e(324)]).then(t.bind(t,67324)).then(Ee=>Ee.LoginPageModule)},{path:"iva",canActivate:[X],children:[{path:"",loadChildren:()=>Promise.all([t.e(592),t.e(300)]).then(t.bind(t,300)).then(Ee=>Ee.IvaPageModule)}]},{path:"**",redirectTo:"login"}];let oe=(()=>{class Ee{}return Ee.\u0275fac=function(ue){return new(ue||Ee)},Ee.\u0275mod=s.oAB({type:Ee}),Ee.\u0275inj=s.cJS({imports:[l.Bz.forRoot(K),l.Bz]}),Ee})();var O=t(89603),U=t(8040),k=t(74075),te=t(1349),fe=t(61860),de=t(60532);const re=new s.OlP("TranslationPrefix"),_e=new s.OlP("TranslationSuffix");function ve(Ee,me,ue){return new de.w(Ee,`${me}/`,ue)}var $=t(27683),Z=t(63237),B=t(10390);let ie=(()=>{class Ee{constructor(ue){this.bannerNotificationsService=ue,this.notificationText$=this.bannerNotificationsService.notificationText$}close(){this.bannerNotificationsService.closeBanner()}}return Ee.\u0275fac=function(ue){return new(ue||Ee)(s.Y36(B.S))},Ee.\u0275cmp=s.Xpm({type:Ee,selectors:[["app-banner-notifications"]],decls:5,vars:3,consts:[[1,"notification-text-container","flex-grow","iva-text_body-1","layout-left-padding_24"],["iva-icon-button","",1,"layout-padding_24",3,"click"],["src","assets/icons/icon16/close.svg"]],template:function(ue,Ie){1&ue&&(s.TgZ(0,"div",0),s._uU(1),s.ALo(2,"async"),s.qZA(),s.TgZ(3,"button",1),s.NdJ("click",function(){return Ie.close()}),s._UZ(4,"svg-icon",2),s.qZA()),2&ue&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,Ie.notificationText$),"\n"))},dependencies:[F.bk9,F.r2H,u.Ov],styles:["[_nghost-%COMP%]{display:flex;align-items:center;justify-content:space-between;background-color:rgb(var(--neutral-color-3));color:rgb(var(--font-gray-1-color));width:100%;min-height:56px;height:56px;max-height:56px}"],changeDetection:0}),Ee})();function G(Ee,me){return(0,p.Z)(function*(){yield Ee.load(),me.startVersionListening()})}let ae=[];function he(Ee,me){return{timezone$:(0,F.Hxy)(Ee.timeZoneCode$.pipe((0,ee.U)(ue=>me.getTimeZoneByCode(ue))))}}"staging"===U.N.name&&(ae=[{provide:a.TP,useClass:N,multi:!0}]);const Oe={get updateRectOnResizeDebounceMS(){return d._Z.settings.RESIZE_THROTTLE_MS/2},get moveThrottleMS(){return d._Z.settings.MOUSE_MOVE_THROTTLE_MS/2}},Ae={get resizeThrottleMS(){return d._Z.settings.RESIZE_THROTTLE_MS}},Me={get resizeThrottleMS(){return d._Z.settings.RESIZE_THROTTLE_MS}},Te={get updateRectOnResizeDebounceMS(){return d._Z.settings.RESIZE_THROTTLE_MS/2}},Re={fileIconRegexMap:function Se(Ee){return function D(Ee,me){const ue={},Ie=Object.keys(Ee);for(const Ne of Ie)Object.defineProperty(ue,Ne,{get:()=>me(Ee,Ne),enumerable:!0});return ue}(d._Z.settings[Ee],(me,ue)=>d._Z.settings[Ee][ue])}("FILES_ICON_REGEXES_MAP")},xe={get resizeThrottleMS(){return d._Z.settings.RESIZE_THROTTLE_MS}};function Le(Ee){return Ee.getBaseHrefFromDOM()}let ye=(()=>{class Ee{}return Ee.\u0275fac=function(ue){return new(ue||Ee)},Ee.\u0275mod=s.oAB({type:Ee,bootstrap:[O.y]}),Ee.\u0275inj=s.cJS({providers:[J.N,X,Z.o,{provide:re,useValue:"assets/i18n"},{provide:_e,useValue:".json"},{provide:F.A3f,useFactory:me=>{const Ie={get resizeThrottleMS(){return d._Z.settings.RESIZE_THROTTLE_MS}};return me.isOnMobileDevice&&(Ie.additionalClass="modal_mobile"),Ie},deps:[$.J]},{provide:F.VTs,useFactory:me=>({maxOpened:me.isOnMobileDevice?2:0}),deps:[$.J]},{provide:l.wN,useClass:k.z,deps:[k.k]},{provide:s.ip1,useFactory:G,deps:[d._Z,v.P],multi:!0},{provide:a.TP,useClass:n,multi:!0},{provide:a.TP,useClass:g,multi:!0},{provide:te.QM,useFactory:he,deps:[V.j8,W.F]},{provide:u.mr,useFactory:Le,deps:[u.lw]},...ae],imports:[oe,o.PW,e.b2,H.yI.forRoot(),fe.m,b.g,F.IR2.forRoot({seekerConfig:Oe,moverConfig:Ae,buttonsGroupConfig:Me,gridConfig:Te,fileIconConfig:Re,dragScrollConfig:xe}),c.aw.forRoot({loader:{provide:c.Zw,useFactory:ve,deps:[a.eN,re,_e]},compiler:{provide:c.k2,useClass:Y.Fq}}),F.Yql.forRoot()]}),Ee})();s.B6R(O.y,function(){return[l.lC,u.O5,ie,F.XFu,F.ORR]},function(){return[u.Ov,c.X$]}),h.C.initializeState({}),U.N.production?(0,s.G48)():(h.C.globalSettings={trackStateHistory:!0},h.C.addExtension(new class f extends h.C{constructor(me){super({trackStateHistory:!0,logStateChanges:!1}),this.config=me,this.window=window,this.require=this.window.require,this.devtoolsExtension=window.__REDUX_DEVTOOLS_EXTENSION__,this.isReact=this.checkIsReact(),this.routeTriggeredByDevTools=!1}init(){this.sync(),this.window.addEventListener("DOMContentLoaded",()=>{this.checkIsAngular()&&(this.angularExtension=new i(this.config)),this.hookRouter()}),this.connect()}connect(me){this.devtoolsExtension&&(this.sub=new _.y(ue=>{const Ie=this.devtoolsExtension.connect(me);return this.devToolsExtensionConnection=Ie,Ie.init(me),Ie.subscribe(Ne=>ue.next(Ne)),Ie.unsubscribe}).subscribe(ue=>this.processDevToolsAction(ue)))}disconnect(){this.devtoolsExtension&&(this.devtoolsExtension.disconnect(),this.sub&&this.sub.unsubscribe())}processDevToolsAction(me){if(me&&me.type===r.DISPATCH)switch(me.payload.type){case r.JUMP_TO_STATE:case r.JUMP_TO_ACTION:if(me.state){const ue=JSON.parse(me.state);ue&&ue.__devTools&&(ue.__devTools.debugging=!0,ue.__devTools.router&&this.navigateToPath(ue),this.setStateFromDevTools(ue,`${ue.__devTools.action} [${r.REDUX_DEVTOOLS_JUMP}]`))}break;case r.IMPORT_STATE:this.loadState(me)}}loadState(me){if(this.disconnect(),this.connect(),me.payload){const ue=me.payload.nextLiftedState;if(ue&&ue.computedStates){ue.computedStates.shift();for(const Ie of ue.computedStates)Ie.state&&Ie.state.__devTools&&this.devToolsExtensionConnection?.send(Ie.state.__devTools.action,Ie.state)}}}navigateToPath(me){const ue=me.__devTools.router.path;if(window.location.pathname!==ue){if(this.routeTriggeredByDevTools=!0,this.config&&this.config.customRouteNavigator)return void this.config.customRouteNavigator.navigate(ue);if(this.checkIsAngular())return void this.angularExtension.navigate(ue);if(this.isReact&&this.config&&this.config.reactRouterHistory)return void this.config.reactRouterHistory.push(ue)}}setStateFromDevTools(me,ue){this.angularExtension?this.angularExtension.runInZone(()=>this.dispatchDevToolsState(me,ue)):this.dispatchDevToolsState(me,ue)}dispatchDevToolsState(me,ue){for(const Ie of h.C.allStoreServices)Ie.setState(me,ue,!1),Ie.dispatchState(me,!1);this.dispatchState(me)}sync(){this.globalStateChanged.subscribe(me=>{this.devToolsExtensionConnection&&(me&&me.__devTools&&me.__devTools.debugging?delete me.__devTools.debugging:this.sendStateToDevTool())})}sendStateToDevTool(){if(this.stateHistory&&this.stateHistory.length){const me=this.stateHistory[this.stateHistory.length-1],{action:ue,endState:Ie}=me;ue.endsWith(r.REDUX_DEVTOOLS_JUMP+"]")||this.devToolsExtensionConnection?.send(ue,{...Ie,__devTools:{...Ie.__devTools,action:ue}})}}hookRouter(){try{const me=window.location.pathname;this.setState({__devTools:{router:{path:me},action:r.ROUTE_NAVIGATION}},`${r.ROUTE_NAVIGATION} [${me}]`),window.history.pushState=(ue=window.history.pushState,function(){const Ie=ue.apply(this,arguments);return window.dispatchEvent(new CustomEvent("pushstate",{detail:window.location.pathname})),window.dispatchEvent(new CustomEvent("locationchange",{detail:window.location.pathname})),Ie}),window.history.replaceState=(ue=>function(){const Ie=ue.apply(this,arguments);return window.dispatchEvent(new CustomEvent("replacestate",{detail:window.location.pathname})),window.dispatchEvent(new CustomEvent("locationchange",{detail:window.location.pathname})),Ie})(window.history.replaceState),window.addEventListener("popstate",()=>{window.dispatchEvent(new CustomEvent("locationchange",{detail:window.location.pathname}))}),window.addEventListener("locationchange",ue=>{if(this.routeTriggeredByDevTools)this.routeTriggeredByDevTools=!1;else{const Ie=ue.detail;this.setState({__devTools:{router:{path:Ie},action:r.ROUTE_NAVIGATION}},`${r.ROUTE_NAVIGATION} [${Ie}]`)}})}catch(me){console.log(me)}var ue}checkIsReact(){return this.window.__REACT_DEVTOOLS_GLOBAL_HOOK__&&this.window.__REACT_DEVTOOLS_GLOBAL_HOOK__._renderers&&this.window.__REACT_DEVTOOLS_GLOBAL_HOOK__._renderers.length||this.window.__REACT_ERROR_OVERLAY_GLOBAL_HOOK__||this.window.React||this.window.require&&(this.require("react")||this.require("React"))}checkIsAngular(){return this.window.ng||this.window.getAllAngularTestabilities}})),e.q6().bootstrapModule(ye).then(()=>{const Ee=new Event("angularInited");dispatchEvent(Ee)}).catch(Ee=>console.error(Ee))},57704:(z,R,t)=>{t.d(R,{BX:()=>f,YS:()=>r,fX:()=>i,sb:()=>u});var e=t(26738),s=t(911),h=t(54355);const _="/api/rest/chats";var i=(()=>((i=i||{}).ON="ON",i.OFF="OFF",i))(),f=(()=>((f=f||{}).ON="ON",f.OFF="OFF",f))(),r=(()=>((r=r||{}).UNREAD_COUNT="UNREAD_COUNT",r.LAST_MESSAGE="LAST_MESSAGE",r))();let u=(()=>{class a{constructor(l){this.http=l}addParticipants(l,c){return this.http.post(`${_}/${l}/participants/add`,c)}turnOnNotifications(l){return this.http.post(`${_}/${l}/allow-notifications`,{})}turnOffNotifications(l){return this.http.post(`${_}/${l}/forbid-notifications`,{})}toggleNotifications(l,c){return c===i.ON?this.turnOnNotifications(l):this.turnOffNotifications(l)}toggleGroupChatHistory(l,c){return c===f.ON?this.turnOnHistory(l):this.turnOffHistory(l)}turnOnHistory(l){return this.http.patch(`${_}/${l}`,{isChatHistoryAccessLimited:!1})}turnOffHistory(l){return this.http.patch(`${_}/${l}`,{isChatHistoryAccessLimited:!0})}clearChatHistory(l){return this.http.post(`${_}/${l}/clear-history`,{})}createGroupChat(l){return this.http.post(`${_}/create-group-chat`,l)}getChat(l,c){const d=(0,s.SId)(c,[void 0]);return c.requestedData&&(d.requestedData=c.requestedData.map(v=>v.toString())),this.http.get(`${_}/${l}`,{params:d})}deleteChat(l){return this.http.delete(`${_}/${l}`)}updateChat(l,c){return this.http.patch(`${_}/${l}`,c)}editMessage(l,c,d){return this.http.patch(`${_}/${l}/messages/${c}`,{message:d})}forwardMessages(l,c){return this.http.post(`${_}/forward-messages`,{forwardMessageIds:l,toChatRoomIds:c})}findAttachment(l,c){return this.http.post(`${_}/${l}/chat-attachments/find-by-criteria`,c)}getMessages(l,c){const d=new e.LE({fromObject:{...c}});return this.http.get(`${_}/${l}/messages`,{params:d})}getMessagesChanges(l,c){const d=new e.LE({fromObject:{...c}});return this.http.get(`${_}/${l}/messages/changes`,{params:d})}getUserStarredMessages(l,c){const d=new e.LE({fromObject:{...c}});return this.http.get(`${_}/${l}/messages/starred`,{params:d})}getMutedChats(){return this.http.get(`${_}/muted-chat-ids`)}getP2PChat(l){const c=new e.LE({fromObject:{...l}});return this.http.get(`${_}/p2p`,{params:c})}getUsersPresenceStatuses(l){return this.http.post("/api/rest/contacts/presences/find-for-users",l)}getChats(l){const c=(0,s.SId)(l,[void 0]);return l.requestedData&&(c.requestedData=l.requestedData.map(d=>d.toString())),this.http.get(`${_}`,{params:c})}searchChats(l){const c=(0,s.SId)(l,[void 0]);return l.requestedData&&(c.requestedData=l.requestedData.map(d=>d.toString())),this.http.get(`${_}/search`,{params:c})}deleteMessage(l,c){return this.http.delete(`${_}/${l}/messages/${c}`)}deleteMessageAttachment(l,c){return this.http.delete(`${_}/${l}/chat-attachments/${c}`)}deleteMessageList(l,c){return this.http.post(`${_}/${l}/messages/remove`,c)}removeParticipants(l,c){return this.http.post(`${_}/${l}/participants/remove`,c)}removeParticipant(l,c){return this.removeParticipants(l,[c])}sendAudioMessage(l,c){return this.http.post(`${_}/${l}/send-audio-message`,c)}sendMessage(l,c){return this.http.post(`${_}/${l}/send-message`,c)}toggleNotificationsFromUser(l,c){return this.http.post(`${_}/p2p-chat-notifications`,{interlocutor:l,allowNotifications:c})}starMessageList(l,c){return this.http.post(`${_}/${l}/star-messages`,c)}unstarMessageList(l,c){return this.http.post(`${_}/${l}/unstar-messages`,c)}sendTyping(l){return this.http.post(`${_}/${l}/typing`,{})}updateChatParticipant(l,c,d){return this.http.patch(`${_}/${l}/participants/${c}`,{role:d})}notifyAboutRead(l,c){return this.http.post(`${_}/${l}/last-read-at`,{lastReadAt:c})}}return a.\u0275fac=function(l){return new(l||a)(h.LFG(e.eN))},a.\u0275prov=h.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()},30014:(z,R,t)=>{t.d(R,{C:()=>i});var e=t(911),s=t(93470),h=t(54355),_=t(26738);let i=(()=>{class f{constructor(p){this.http=p}getParticipant(p,u,a){const o=(0,e.SId)(a);return this.http.get(`/api/rest/conference-sessions/${p}/participants/${u}`,{params:o})}updateParticipant(p,u,a){return this.http.patch(`${s.C}/${p}/participants/${u}/settings`,a)}disconnectParticipants(p,u){return this.http.post(`${s.C}/${p}/participants/disconnect`,u)}removeParticipants(p,u){return this.http.post(`${s.C}/${p}/participants/remove`,u)}handUp(p,u){return this.http.post(`/api/rest/conference-sessions/${p}/participants/${u}/hand-up`,{})}handDown(p,u){return this.http.post(`/api/rest/conference-sessions/${p}/participants/${u}/hand-down`,{})}helpRequestOn(p){return this.http.post(`/api/rest/conference-sessions/${p}/media/request-attention`,{})}helpRequestOff(p){return this.http.post(`/api/rest/conference-sessions/${p}/media/revoke-attention-request`,{})}findParticipants(p,u){const a=(0,e.SId)(u,[void 0]);return this.http.get(`${s.C}/${p}/participants/find`,{params:a})}}return f.\u0275fac=function(p){return new(p||f)(h.LFG(_.eN))},f.\u0275prov=h.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()},62731:(z,R,t)=>{t.d(R,{x:()=>r});var e=t(93470),s=t(5469),h=t(911),_=t(54355),i=t(26738);let r=(()=>{class p{constructor(a){this.http=a}getPublicDocuments(a,o={}){const l=(0,h.SId)(o,[void 0,null]);return this.http.get(`/api/rest/public/conference-sessions/${a}/documents`,{params:l})}createDirectory(a,o,l){return this.http.post(`${e.C}/${a}/documents/${o}/create-directory`,{name:l})}getPathToDirectory(a,o){return this.http.get(`${e.C}/${a}/documents/${o}/path`)}createDocument(a,o,l){return this.http.post(`${e.C}/${a}/documents/${o}/create-document-for/${l}`,{})}deleteDocumentOrDirectory(a,o){return this.http.delete(`${e.C}/${a}/documents/${o}`)}updateDocument(a,o,l){return this.http.patch(`${e.C}/${a}/documents/${o}`,{...l})}canUpload(a,o){return this.http.get(`/api/rest/conference-sessions/${a}/documents/can-upload`,{params:{size:o.toString()}})}getDocumentConvertedPages(a,o,l=0,c=s._Z.settings.DOCUMENT_CONVERTED_PAGES_REQUEST_LIMIT){const d=(0,h.SId)({offset:l,limit:c});return this.http.get(`${e.C}/${a}/documents/${o}/pages`,{params:d})}getDirectoryContent(a,o,l){const c=(0,h.SId)(l,[void 0,null]);return this.http.get(`${e.C}/${a}/documents/${o}`,{params:c})}uploadDocument(a){return this.http.post(`${e.C}/resources/${a}`,{})}}return p.\u0275fac=function(a){return new(a||p)(_.LFG(i.eN))},p.\u0275prov=_.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()},93470:(z,R,t)=>{t.d(R,{C:()=>r,u:()=>p});var e=t(37569),s=t(5469),h=t(911),_=t(89603),i=t(54355),f=t(26738);const r="/api/rest/conference-sessions";let p=(()=>{class u{constructor(o){this.http=o}joinAsLoggedIn(o,l,c){const d=l;return l.supportedProtocols?.length||(d.supportedProtocols=[e.Dg.WEBRTC]),l.tokenId=l.tokenId||_.J,this.http.post(`${r}/${o}/join`,d,{headers:c?{ForwardToken:c}:void 0})}joinToLobby(o,l,c,d){const v={eventBusId:o};return c&&(v.ticketInfo={ticketLink:c,passcode:d}),this.http.post(`${r}/${l}/lobby/join`,v)}leave(o){return this.http.post(`${r}/${o}/leave`,{})}leaveViaBeacon(o){return navigator.sendBeacon(`${r}/${o}/leave`)}leaveLobby(o){return this.http.post(`${r}/${o}/lobby/leave`,{})}leaveLobbyViaBeacon(o){return navigator.sendBeacon(`${r}/${o}/lobby/leave`)}getConferenceMediaInfo(o){return this.http.get(`${r}/${o}/media/info`)}getConferenceSessionInfoByToken(o){return this.http.get("/api/rest/public/conference-sessions",{params:{token:o}})}getConferenceSessionPublicInfoByParams(o,l){return this.http.get("/api/rest/public/conference-sessions",{params:{conferenceId:o,sessionNumber:l.toString()}})}getConferenceSessionPublic(o){return this.http.get(`/api/rest/public/conference-sessions/${o}`)}getConferenceSessionPersonalInfo(o){return this.http.get(`/api/rest/conference-sessions/${o}`)}getConferencePersonalInfo(o,l){return this.http.get("/api/rest/conference-sessions/periodical",{params:{conferenceId:o,sessionNumber:l.toString()}})}setMediaState(o,l,c){return this.http.post(`${r}/${o}/media/media-state`,{mediaState:l,streamType:c})}setMediaProfile(o,l){return this.http.post(`${r}/${o}/media/media-profile`,{profileIndex:l})}setTranslationDirection(o,l){return this.http.post(`${r}/${o}/media/translation-direction`,{language:l})}setBroadcastLanguage(o,l){return this.http.post(`${r}/${o}/media/broadcast-language`,{language:l})}updateConferenceSession(o,l){return this.http.patch(`${r}/${o}`,l)}startScreenDemonstration(o){return this.http.post(`${r}/${o}/demonstration/screenshare/start`,{})}stopScreenDemonstration(o){return this.http.post(`${r}/${o}/demonstration/screenshare/stop`,{})}addParticipants(o,l){return this.http.post(`${r}/${o}/participants/add`,l)}setLayout(o,l){return this.http.post(`${r}/${o}/media/layout`,{layoutPreset:l})}getJoinData(o){return this.http.get(`${r}/${o}/join-data`)}getDocumentConvertedPages(o,l,c=0,d=s._Z.settings.DOCUMENT_CONVERTED_PAGES_REQUEST_LIMIT){const v=(0,h.SId)({offset:c,limit:d});return this.http.get(`${r}/${o}/documents/${l}/pages`,{params:v})}canUpload(o,l){return this.http.get(`/api/rest/conference-sessions/${o}/documents/can-upload`,{params:{size:l.toString()}})}createDocument(o,l,c){return this.http.post(`${r}/${o}/documents/${l}/create-document-for/${c}`,{})}updateDocument(o,l,c){return this.http.patch(`${r}/${o}/documents/${l}`,{name:c})}startRecording(o){return this.http.post(`/api/rest/conference-sessions/${o}/record/start`,{})}stopRecording(o){return this.http.post(`/api/rest/conference-sessions/${o}/record/stop`,{})}startTranscription(o){return this.http.post(`/api/rest/conference-sessions/${o}/transcription/start`,{})}stopTranscription(o){return this.http.post(`/api/rest/conference-sessions/${o}/transcription/stop`,{})}stopConferenceSession(o){return this.http.post(`/api/rest/conference-sessions/${o}/stop`,{})}startDocumentDemonstration(o,l,c,d){return this.http.post(`/api/rest/conference-sessions/${o}/demonstration/document/start`,{...d,pageIndex:c,documentId:l})}updateDocumentDemonstration(o,l,c,d){return this.http.patch(`/api/rest/conference-sessions/${o}/demonstration/document/state`,{...d,pageIndex:c,documentId:l})}stopDocumentDemonstration(o){return this.http.post(`/api/rest/conference-sessions/${o}/demonstration/document/stop`,{})}updatePointerPosition(o,l){return this.http.patch(`/api/rest/conference-sessions/${o}/demonstration/document/cursor`,l)}getJoinInfo(o){const l=(0,h.SId)({conferenceNumber:o});return this.http.get("/api/rest/public/conference-sessions/join-info",{params:l})}getOriginalLanguageSignalUrl(o){return this.http.get(`/api/rest/conference-sessions/${o}/media/public-audio-stream`,{responseType:"text"})}startConferenceSession(o){return this.http.post(`/api/rest/conference-sessions/${o}/start`,{})}getPublicParticipants(o,l=0,c=s._Z.settings.LANDING_PAGE_PUBLIC_PARTICIPANTS_LIMIT){const d=(0,h.SId)({offset:l,limit:c});return this.http.get(`/api/rest/public/conference-sessions/${o}/participants`,{params:d})}reportParticipantMediaEquipment(o,l){return this.http.post(`/api/rest/conference-sessions/${o}/media/equipment`,{...l})}setReaction(o,l,c){return this.http.post(`/api/rest/conference-sessions/${o}/participants/${l}/set-reaction`,{reaction:c})}getRegistrationQuestionnaire(o){return this.http.get(`/api/rest/public/conference-sessions/${o}/questionnaire`)}checkUserEmail(o,l){return this.http.post(`/api/rest/public/conference-sessions/${o}/self-registration/check-email`,{email:l})}}return u.\u0275fac=function(o){return new(o||u)(i.LFG(f.eN))},u.\u0275prov=i.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()},31585:(z,R,t)=>{t.d(R,{A:()=>f});var e=t(911),s=t(93470),h=t(54355),_=t(26738);const i="/api/rest/conferences";let f=(()=>{class r{constructor(u){this.http=u}findConferenceSessions(u){const a=(0,e.SId)(u);return this.http.get("/api/rest/conference-sessions/sessions",{params:a})}findRooms(u){const a=(0,e.SId)(u);return this.http.get("/api/rest/conference-sessions/rooms",{params:a})}respondOnConferenceSessionInvitation(u,a){return this.http.post(`${s.C}/${u}/respond-on-invitation`,{response:a})}respondOnConferenceInvitation(u,a){return this.http.post(`${i}/${u}/respond-on-invitation`,{response:a})}deleteConference(u){return this.http.delete(`${i}/${u}`)}deleteConferenceSession(u){return this.http.delete(`${s.C}/${u}`)}createConference(u){return this.http.post("/api/rest/conferences",u)}quickStartConference(u){return this.http.post("/api/rest/conferences/start-now",u)}createRoom(u){return this.http.post("/api/rest/rooms",u)}getConferenceTemplates(){return this.http.get("/api/rest/conference-templates")}}return r.\u0275fac=function(u){return new(u||r)(h.LFG(_.eN))},r.\u0275prov=h.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})()},89984:(z,R,t)=>{t.d(R,{V:()=>i});var e=t(911),s=t(54355),h=t(26738);const _="/api/rest/contacts";let i=(()=>{class f{constructor(p){this.http=p}getContacts(p){const u=p?(0,e.SId)(p):{};return this.http.get(_,{params:u})}getContactPresences(p){const u=p?(0,e.SId)(p):{};return this.http.get(`${_}/presences`,{params:u})}getProfilesPresences(p){return this.http.post(`${_}/presences/find-for-users`,p)}removeContact(p){return this.http.delete(`${_}/${p}`)}updateContact(p,u){return this.http.patch(`${_}/${p}`,u)}getContactTags(){return this.http.get(`${_}/tags`)}getContactInvitations(p){const u=(0,e.SId)(p);return this.http.get(`${_}/invitations`,{params:u})}approveContactsInvitations(p){return this.http.post(`${_}/invite`,p)}inviteContacts(p){return this.approveContactsInvitations(p)}rejectContactsInvitations(p){return this.http.post(`${_}/invitations/reject`,p)}createNoteContact(p){return this.http.post(`${_}/create-note`,p)}}return f.\u0275fac=function(p){return new(p||f)(s.LFG(h.eN))},f.\u0275prov=s.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()},60986:(z,R,t)=>{t.d(R,{B:()=>h});var e=t(54355),s=t(26738);let h=(()=>{class _{constructor(f){this.http=f}findInterlocutors(f){return this.http.post("/api/rest/interlocutors/find",f)}getInterlocutorByProfileId(f){return this.http.get(`/api/rest/interlocutors/profile/${f}`)}getInterlocutorByContactId(f){return this.http.get(`/api/rest/interlocutors/contact/${f}`)}}return _.\u0275fac=function(f){return new(f||_)(e.LFG(s.eN))},_.\u0275prov=e.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})()},55803:(z,R,t)=>{t.d(R,{O:()=>_});var e=t(26738),s=t(88002),h=t(54355);let _=(()=>{class i{constructor(r){this.http=r}login(r){return this.http.post("/api/rest/login",r,{responseType:"json",observe:"response"})}verifyTwoFaCode(r,p){return this.http.post(`/api/rest/2fa/${r}/verify`,{oneTimePassword:p})}renewFaChallenge(r){return this.http.post(`/api/rest/2fa/${r}/renew`,{})}logout(r){return this.http.post("/api/rest/logout",{redirectUrl:r},{responseType:"text"})}loginAsGuest(r){return this.http.post("/api/rest/login-as-guest",r)}getSessionInfo(){return this.http.get("/api/rest/session/info").pipe((0,s.U)(r=>({sessionId:r.sessionId,user:r.user,diskUtilizationInfo:r.diskUtilizationInfo,clientIp:r.clientIp,hasAdminAccess:r.hasAdminAccess,timestamp:r.timestamp})))}loginWithToken(r){return this.http.post("/api/rest/login-with-token",{token:r})}requestPasswordRecovery(r){return this.http.post("/api/rest/public/profiles/password-recovery/request-recovery",{userIdentifier:r})}setRecoveredPassword(r,p){return this.http.post(`/api/rest/public/profiles/password-recovery/${r}/change-password`,{newPassword:p})}getPasswordRecoveryInfo(r){return this.http.get(`/api/rest/public/profiles/password-recovery/${r}`)}getExternalLoginUrl(r,p){let u=new e.LE;return u=u.set("providerId",r),p&&(u=u.set("redirectUrl",p)),this.http.get(`/api/rest/login-url?${u}`,{responseType:"text"})}validatePassword(r,p){return this.http.post("/api/rest/public/profiles/validate-password",{recoveryTokenId:p,password:r})}}return i.\u0275fac=function(r){return new(r||i)(h.LFG(e.eN))},i.\u0275prov=h.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()},39040:(z,R,t)=>{t.d(R,{f:()=>i});var e=t(93470),s=t(911),h=t(54355),_=t(26738);let i=(()=>{class f{constructor(p){this.http=p}getParticipantsGroups(p,u){const a=(0,s.SId)(u,[void 0]);return this.http.get(`${e.C}/${p}/groups`,a)}createParticipantsGroups(p,u){return this.http.post(`${e.C}/${p}/groups/create`,{distributionType:u.distributionType,groups:u.groups})}activateParticipantsGroups(p,u){return this.http.post(`${e.C}/${p}/groups/activate`,u)}deactivateParticipantsGroups(p,u){return this.http.post(`${e.C}/${p}/groups/deactivate`,u)}getGroupParticipants(p,u){const a=(0,s.SId)(u,[void 0]);return this.http.get(`${e.C}/${p}/participants/find`,{params:a})}updateGroup(p,u){return this.http.patch(`${e.C}/${p}`,u)}extendGroupsDuration(p,u){return this.http.post(`${e.C}/${p}/groups/extend-duration`,u)}removeGroups(p,u){return this.http.post(`${e.C}/${p}/groups/remove`,u)}moveParticipants(p,u){return this.http.post(`${e.C}/${p}/groups/move`,u)}removeParticipantsFromGroupAndEvent(p,u){return this.http.post(`${e.C}/${p}/participants/remove`,u)}}return f.\u0275fac=function(p){return new(p||f)(h.LFG(_.eN))},f.\u0275prov=h.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()},5688:(z,R,t)=>{t.d(R,{K:()=>h});var e=t(54355),s=t(26738);let h=(()=>{class _{constructor(f){this.http=f}getProfile(f){return this.http.get(`/api/rest/profiles/${f}`)}updateProfile(f,r){return this.http.patch(`/api/rest/profiles/${f}`,r)}setPassword(f,r,p){return this.http.post(`/api/rest/profiles/${f}/change-password`,{oldPassword:r,newPassword:p})}}return _.\u0275fac=function(f){return new(f||_)(e.LFG(s.eN))},_.\u0275prov=e.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})()},86207:(z,R,t)=>{t.d(R,{g:()=>h});var e=t(54355),s=t(26738);let h=(()=>{class _{constructor(f){this.http=f}createResource(f,r){return this.http.post("/api/rest/resources/create",{name:f,shared:r})}uploadResourceChunk$(f,r,p,u,a){return this.http.post(`/api/rest/resources/${f}`,r,{headers:{chunkBegin:p.toString(),chunkEnd:u.toString(),resourceSize:a.toString()}})}commitResource(f){return this.http.post(`/api/rest/resources/${f}/commit`,{})}}return _.\u0275fac=function(f){return new(f||_)(e.LFG(s.eN))},_.\u0275prov=e.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})()},35337:(z,R,t)=>{t.d(R,{R:()=>i});var e=t(5469),s=t(911),h=t(54355),_=t(26738);let i=(()=>{class f{constructor(p){this.http=p}getFiles(p){const u=(0,s.SId)(p,[void 0,null]);return this.http.get("/api/rest/disk",{params:u})}getDocumentConvertedPages(p,u=0,a=e._Z.settings.DOCUMENT_CONVERTED_PAGES_REQUEST_LIMIT){const o=(0,s.SId)({offset:u,limit:a},[void 0]);return this.http.get(`/api/rest/documents/${p.nodeId}/pages`,{params:o})}deleteFile(p){return this.http.delete(`/api/rest/documents/${p}`)}}return f.\u0275fac=function(p){return new(p||f)(h.LFG(_.eN))},f.\u0275prov=h.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()},89603:(z,R,t)=>{t.d(R,{J:()=>$,y:()=>Z});var e=t(8239),s=t(40089),h=t(87881),_=t(12841),i=t(5469),f=t(27683),r=t(32588),p=t(29878),u=t(53457),a=t(14661),o=t(48701),l=t(89466),c=t(97057),d=t(911),m=(t(78320),t(26215)),g=t(9112),E=t(45435),n=t(88002),S=t(46782),C=t(2135),P=t(77463),L=(t(38573),t(51011),t(54355)),N=t(22153),W=t(10390),b=t(89017),V=t(96959),D=t(84717),F=t(99649),J=t(28728),H=t(97684),Y=t(12989),ee=t(51890),X=t(96498),K=t(63237),oe=t(39026);function O(B,ie){1&B&&L._UZ(0,"iva-spinner")}function U(B,ie){if(1&B&&(L.TgZ(0,"div",2),L.ALo(1,"async"),L._UZ(2,"iva-spinner",3),L.TgZ(3,"h2",4),L._uU(4),L.ALo(5,"translate"),L.qZA()()),2&B){const G=L.oxw();L.ekj("happy-new-year",L.lcZ(1,3,G.isNewYear$)),L.xp6(4),L.hij("",L.lcZ(5,5,"LOADING"),"\u2026")}}function k(B,ie){1&B&&L._UZ(0,"app-banner-notifications")}function te(B,ie){if(1&B&&(L.TgZ(0,"div",6),L.YNc(1,k,1,0,"app-banner-notifications",0),L.TgZ(2,"div",7),L._UZ(3,"router-outlet"),L.qZA()()),2&B){const G=ie.$implicit;L.xp6(1),L.Q6J("ngIf",G)}}function fe(B,ie){if(1&B&&(L.ynx(0),L.YNc(1,te,4,1,"div",5),L.ALo(2,"async"),L.BQk()),2&B){const G=L.oxw();L.xp6(1),L.Q6J("ngWithAs",L.lcZ(2,1,G.isNotificationsBannerShown$))}}const de="adaptive",re="with-banner",ve="SHOW_MODAL_ON_APP_INIT",$=(0,P.Z)().toString();let Z=(()=>{class B{constructor(G,ae,he,Se,Oe,Ae,Me,Te,Re,xe,Le,ye,Ee,me,ue,Ie,Ne,Ve,je,ze,He,we,Fe,$e,Je,be,Xe,qe,ke){this.baseHref=G,this.document=ae,this.appStoreService=he,this.bannerNotificationsService=Se,this.broadcastChannelService=Oe,this.cometService=Ae,this.elementRef=Me,this.eventParticipantReportStoreService=Te,this.eventReportStoreService=Re,this.eventsReportStoreService=xe,this.fullscreen=Le,this.globalSpinnerService=ye,this.happyNewYearService=Ee,this.loginService=me,this.mobileSupportService=ue,this.overlayService=Ie,this.reportsStoreService=Ne,this.router=Ve,this.systemSettingsStoreService=je,this.tabletsSupportService=ze,this.timeZoneService=He,this.toastr=we,this.userSessionStoreService=Fe,this.virtualBackgroundDbService=$e,this.destroy$=Je,this.faviconService=be,this.appInitService=Xe,this.appService=qe,this.themeService=ke,this.isNewYear$=this.happyNewYearService.isNewYear$,this.isInitialDataFetching$=new m.X(!0),this.isSpinnerShown$=new m.X(!1),this.isGlobalSpinnerShow$=this.globalSpinnerService.isGlobalSpinnerShow$,this.isAdaptive$=this.router.events.pipe((0,E.h)(Be=>Be instanceof _.m2),(0,n.U)(({urlAfterRedirects:Be})=>Be),(0,n.U)(Be=>i._Z.settings.ADAPTIVE_PAGE_URL_PREFIXES.some(et=>Be.startsWith(et)))),this.isNotificationsBannerShown$=this.bannerNotificationsService.isNotificationsBannerShown$,this.screenOrientation$=this.mobileSupportService.orientation$,this.isiOS=!1,this.handleMobileDevicesSupport(),this.initVirtualBackgroundDb(),this.listenBranding(),this.appService.setIsInConference()}handleMobileDevicesSupport(){this.mobileSupportService.setMobileMode(this.mobileSupportService.isOnMobileDevice),this.mobileSupportService.setTabletMode(),this.initDefaultVhValue(),this.handleMobileRotation(),this.handleiOSBlur(),this.handleiOS(),this.handleBlockVhCount()}ngOnInit(){this.themeService.setTheme(d.Q2A.LIGHT),this.fullscreen.applyFullscreenClassWhenEnabled(),this.appInitService.init(),this.listenInitialDataReceived(),this.listenTimezone(),this.listenIsAdaptive(),this.listenNotificationBanner(),this.listenExternalAuthError(),this.listenOnLogin(),this.listenOnLogout(),this.showMessageOnInit()}listenInitialDataReceived(){this.appInitService.initialDataReceived$.subscribe(G=>{G&&this.isInitialDataFetching$.next(!1)})}listenOnLogin(){this.loginService.onLogin$.subscribe(G=>{this.cometService.createConnectionIfNotExists(this.loginService.sessionId),this.broadcastChannelService.postMessageToBroadcast("login",{currentLoginInfo:G.current,prevLoginInfo:G.prev}),!G.prev&&!this.loginService.isGuest&&this.appInitService.fetchSessionInfo().subscribe(ae=>{this.appInitService.updateSessionInfo(ae)})})}listenOnLogout(){this.loginService.onLogout$.subscribe(()=>{this.cometService.destroyConnection(),localStorage.removeItem(i._Z.settings.CONFERENCE_DRAFT_LOCAL_STORE_NAME),localStorage.removeItem(i._Z.settings.CONFERENCE_EDIT_DRAFT_LOCAL_STORE_NAME);const G=[...Object.values(a.G),...Object.values(u.M),...Object.values(p.j)];(0,o.xK)(G),this.reportsStoreService.setInitialState(),this.eventsReportStoreService.setInitialState(),this.eventReportStoreService.setInitialState(),this.eventParticipantReportStoreService.setInitialState()})}listenNotificationBanner(){this.isNotificationsBannerShown$.subscribe(G=>{G?this.elementRef.nativeElement.classList.add(re):this.elementRef.nativeElement.classList.remove(re)})}listenIsAdaptive(){this.isAdaptive$.subscribe(G=>{G?this.elementRef.nativeElement.classList.add(de):this.elementRef.nativeElement.classList.remove(de)})}initDefaultVhValue(){(this.mobileSupportService.isMobileModeEnabled||this.mobileSupportService.isTablet)&&this.document.documentElement.style.setProperty("--vh",`${this.mobileSupportService.vhValue}px`)}handleMobileRotation(){this.screenOrientation$.pipe((0,S.R)(this.destroy$)).subscribe(G=>{(this.document.body.classList.contains(f.i.PORTRAIT.toLowerCase())||this.document.body.classList.contains(f.i.LANDSCAPE.toLowerCase()))&&(this.document.body.classList.remove(f.i.LANDSCAPE.toLowerCase(),f.i.PORTRAIT.toLowerCase()),this.elementRef.nativeElement.classList.remove(f.i.LANDSCAPE.toLowerCase(),f.i.PORTRAIT.toLowerCase())),this.document.body.classList.add(`${G.toLowerCase()}`),this.elementRef.nativeElement.classList.add(`${G.toLowerCase()}`)}),this.mobileSupportService.vhValue$.pipe((0,S.R)(this.destroy$)).subscribe()}listenExternalAuthError(){const G=C(location.href),ae=C.qs.parse(G.query);ae[r.VF]&&(this.toastr.error({translationKey:"SYSTEM_LOGIN.EXTERNAL_AUTH_COMMON_ERROR"}),console.error(`External auth raw error: ${ae[r.VF]}`),this.router.navigate([],{queryParams:{...ae,[r.VF]:null},queryParamsHandling:"merge"}))}showMessageOnInit(){const G=localStorage.getItem(ve);G&&(this.overlayService.openModal(d.ebs,G,{modalClass:"app-init-message-modal"}),localStorage.removeItem(ve))}listenTimezone(){this.userSessionStoreService.timeZoneCode$.subscribe(G=>this.timeZoneService.setTimeZone(G))}setIsInConference(){const G=!!new URLSearchParams(window.location.search).get("conferenceSessionId");this.appStoreService.setUserIsInConference(G)}initVirtualBackgroundDb(){var G=this;return(0,e.Z)(function*(){yield G.virtualBackgroundDbService.openDb(),yield G.virtualBackgroundDbService.updateImages()})()}handleiOSBlur(){(0,c.qY)()?.os!==l.OS.IOS&&!this.mobileSupportService.isTablet||(document.body.addEventListener("focus",Se=>{"INPUT"==Se.target.tagName.toUpperCase()&&(document.body.style.overflow="hidden",document.body.style.position="fixed",setTimeout(()=>window.scrollTo(0,-window.innerHeight)))},{capture:!0}),document.body.addEventListener("blur",Se=>{"INPUT"==Se.target.tagName.toUpperCase()&&(document.body.style.removeProperty("position"),setTimeout(()=>window.scrollTo(0,-window.innerHeight)))},{capture:!0}))}handleiOS(){const G=(0,c.qY)(),ae=this.mobileSupportService.isTablet;this.isiOS=G?.os===l.OS.IOS&&!navigator?.userAgent.includes(l.OS.IOS)||ae}handleBlockVhCount(){this.mobileSupportService.blockVhCount$.pipe((0,h.sL)()).subscribe(G=>{G||null===G?(this.document.documentElement.style.removeProperty("--vh"),this.tabletsSupportService.patchStylesIfNeeded(),this.tabletsSupportService.shouldPatchStyles()&&this.document.body.style.removeProperty("overflow")):(this.initDefaultVhValue(),this.tabletsSupportService.patchStylesIfNeeded())})}listenBranding(){(0,g.aj)([this.systemSettingsStoreService.branding$,this.systemSettingsStoreService.systemInfo$]).pipe((0,E.h)(([G,ae])=>!!ae),(0,S.R)(this.destroy$)).subscribe(()=>{this.faviconService.updateFavicon()})}}return B.\u0275fac=function(G){return new(G||B)(L.Y36(s.mr),L.Y36(s.K0),L.Y36(N.I),L.Y36(W.S),L.Y36(i.q4),L.Y36(i.y_),L.Y36(L.SBq),L.Y36(p.a),L.Y36(u.S),L.Y36(a.c),L.Y36(b.n),L.Y36(V.N),L.Y36(D.V),L.Y36(i.r6),L.Y36(f.J),L.Y36(d.Bi9),L.Y36(F.k),L.Y36(_.F0),L.Y36(J.Ph),L.Y36(H.Eb),L.Y36(Y.F),L.Y36(d._Wo),L.Y36(J.j8),L.Y36(ee.N),L.Y36(d.z23),L.Y36(X.X),L.Y36(K.o),L.Y36(oe.z),L.Y36(d.fYy))},B.\u0275cmp=L.Xpm({type:B,selectors:[["app-root"]],hostVars:2,hostBindings:function(G,ae){2&G&&L.ekj("ios",ae.isiOS)},features:[L._Bn([d.z23])],decls:6,vars:9,consts:[[4,"ngIf"],["class","layout-column layout-fill-page layout-align-center-center container",3,"happy-new-year",4,"ngIf"],[1,"layout-column","layout-fill-page","layout-align-center-center","container"],["inline",""],[1,"layout-top-margin_16"],["class","layout-column layout-fill-page fill-page",4,"ngWith","ngWithAs"],[1,"layout-column","layout-fill-page","fill-page"],[1,"layout","flex-grow"]],template:function(G,ae){1&G&&(L.YNc(0,O,1,0,"iva-spinner",0),L.ALo(1,"async"),L.YNc(2,U,6,7,"div",1),L.ALo(3,"async"),L.YNc(4,fe,3,3,"ng-container",0),L.ALo(5,"async")),2&G&&(L.Q6J("ngIf",L.lcZ(1,3,ae.isGlobalSpinnerShow$)),L.xp6(2),L.Q6J("ngIf",L.lcZ(3,5,ae.isSpinnerShown$)),L.xp6(2),L.Q6J("ngIf",!L.lcZ(5,7,ae.isInitialDataFetching$)))},styles:["[_ngcontent-%COMP%]:root{--100vh: 100vh;--100vw: 100vw}[_nghost-%COMP%]{display:flex;overflow:hidden;width:100%}[_nghost-%COMP%]:not(.adaptive){min-width:720px}[_nghost-%COMP%]:not(.adaptive):not(.with-banner){min-height:600px}[_nghost-%COMP%]:not(.adaptive).with-banner{min-height:656px}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]{background-repeat:repeat;background-size:213.1px 115.2px;background-color:rgb(var(--neutral-color-2))}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]:not(.happy-new-year){background-image:url(pattern-light.7f173a9dbd5fd31a.svg)}[_nghost-%COMP%]   .container.happy-new-year[_ngcontent-%COMP%]{background-image:url(holidays-pattern.7aab8935c1aad039.svg);background-size:105px 87px}.mobile-view   [_nghost-%COMP%]{min-width:100vw;width:100vw;max-width:100vw;overflow-y:auto}.mobile-view   [_nghost-%COMP%]:not(.adaptive){height:100vh;min-height:100vh;height:100svh;min-height:100svh}.mobile-view   .landscape[_nghost-%COMP%]{position:fixed;height:100%;min-height:100%}.mobile-view   [_nghost-%COMP%]   .fill-page[_ngcontent-%COMP%]{min-height:100%;min-width:100%}"]}),B})()},223:(z,R,t)=>{t.d(R,{t:()=>_});var e=t(54355),s=t(911),h=t(6190);let _=(()=>{class i{constructor(r){this.modalRef=r}tryPlay(){this.modalRef.close()}}return i.\u0275fac=function(r){return new(r||i)(e.Y36(s.aiK))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-need-play-modal"]],decls:12,vars:9,consts:[[1,"modal-card"],[1,"title"],["iva-button","",3,"click"]],template:function(r,p){1&r&&(e.TgZ(0,"div",0)(1,"header")(2,"span",1),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"section"),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"footer")(9,"button",2),e.NdJ("click",function(){return p.tryPlay()}),e._uU(10),e.ALo(11,"translate"),e.qZA()()()),2&r&&(e.xp6(3),e.hij(" ",e.lcZ(4,3,"CONFERENCE_SESSION.NEED_PLAY_MODAL.HEADER")," "),e.xp6(3),e.hij(" ",e.lcZ(7,5,"CONFERENCE_SESSION.NEED_PLAY_MODAL.TEXT")," "),e.xp6(4),e.Oqu(e.lcZ(11,7,"OK")))},dependencies:[s.r0F,h.X$],styles:["[_nghost-%COMP%]   .modal-card[_ngcontent-%COMP%]{max-width:400px}"],changeDetection:0}),i})()},70291:(z,R,t)=>{t.d(R,{LG:()=>i,nx:()=>r,xU:()=>f});var e=t(54355),s=t(28728);function h(p,u){1&p&&e._UZ(0,"app-main-video")}function _(p,u){if(1&p&&e._UZ(0,"app-pip-container",3),2&p){const a=e.oxw();e.Q6J("presentation",a.presentation)("mediaRoomState",a.mediaRoomState)}}var i=(()=>((i=i||{}).MAIN_CONTENT="MAIN_CONTENT",i.ADDITIONAL_CONTENT="ADDITIONAL_CONTENT",i))(),f=(()=>((f=f||{}).MAIN="MAIN",f.PIP="PIP",f))();let r=(()=>{class p{get isPip(){return this.videoSourcePlace===f.PIP}get isSmallPip(){return!!this.conferenceSessionStore.openedPanes.length}constructor(a){this.conferenceSessionStore=a,this.detectWindowResize=!0,this.showSubInfo=!1,this.useSmallTexts=!1,this.VIDEO_SOURCE=i}}return p.\u0275fac=function(a){return new(a||p)(e.Y36(s.mK))},p.\u0275cmp=e.Xpm({type:p,selectors:[["app-video-switcher"]],hostVars:4,hostBindings:function(a,o){2&a&&e.ekj("pip-video",o.isPip)("small-pip",o.isSmallPip)},inputs:{videoSource:"videoSource",videoSourcePlace:"videoSourcePlace",presentation:"presentation",mediaRoomState:"mediaRoomState",detectWindowResize:"detectWindowResize",showSubInfo:"showSubInfo",useSmallTexts:"useSmallTexts"},decls:3,vars:3,consts:[[3,"ngSwitch"],[4,"ngSwitchCase"],[3,"presentation","mediaRoomState",4,"ngSwitchCase"],[3,"presentation","mediaRoomState"]],template:function(a,o){1&a&&(e.ynx(0,0),e.YNc(1,h,1,0,"app-main-video",1),e.YNc(2,_,1,2,"app-pip-container",2),e.BQk()),2&a&&(e.Q6J("ngSwitch",o.videoSource),e.xp6(1),e.Q6J("ngSwitchCase",o.VIDEO_SOURCE.MAIN_CONTENT),e.xp6(1),e.Q6J("ngSwitchCase",o.VIDEO_SOURCE.ADDITIONAL_CONTENT))},styles:["app-main-video{display:flex;width:100%;height:100%}app-pip-container{display:flex}app-video-switcher.pip-video,app-video-switcher.pip-video video{max-width:min(20vw,320px);min-width:90px;max-height:min(20vh,320px);min-height:90px}.mobile-view.portrait app-video-switcher.pip-video,.mobile-view.portrait app-video-switcher.pip-video video{min-height:128px;min-width:128px;max-height:20vh;max-width:35vw}.mobile-view.portrait app-video-switcher.pip-video.small-pip,.mobile-view.portrait app-video-switcher.pip-video.small-pip video,.mobile-view.portrait app-video-switcher.pip-video video.small-pip,.mobile-view.portrait app-video-switcher.pip-video video.small-pip video{min-height:85.3333333333px;min-width:85.3333333333px;max-height:13.3333333333vh;max-width:23.3333333333vw}.mobile-view.landscape app-video-switcher.pip-video,.mobile-view.landscape app-video-switcher.pip-video video{min-height:128px;min-width:128px;max-height:35vh;max-width:20vw}.mobile-view.landscape app-video-switcher.pip-video.small-pip,.mobile-view.landscape app-video-switcher.pip-video.small-pip video,.mobile-view.landscape app-video-switcher.pip-video video.small-pip,.mobile-view.landscape app-video-switcher.pip-video video.small-pip video{min-height:85.3333333333px;min-width:85.3333333333px;max-height:23.3333333333vh;max-width:13.3333333333vw}.as-main,.as-main>*{max-width:100%;max-height:100%;width:100%}\n"],encapsulation:2,changeDetection:0}),p})()},8040:(z,R,t)=>{t.d(R,{N:()=>e});const e={production:!0,name:"prod",locales:["en-US","ru"],defaultLocale:"en-US"}},88584:(z,R,t)=>{t.d(R,{A:()=>r,U:()=>p});var e=t(46451),s=t(911),h=t(25917),_=t(88002),i=t(24826);const f=()=>{};function r(u){return{name:u.name,conversionState:u.conversionState,created:u.createdOn,modified:u.createdOn,nodeId:u.id,resource:{resourceId:u.resourceId,name:u.name,size:u.fileSize,mimeType:u.mimeType,metadata:{height:u.metaData?.height,width:u.metaData?.width}}}}const p=(u,a)=>({theme:s.Q2A.DARK,currentDocument$:(0,s.Hxy)(u.openedDocument$),allDocuments$:(0,s.Hxy)(u.currentChatMessages$.pipe((0,_.U)(o=>o?.filter(l=>!!l.attachment&&!!(0,i.X)(l.attachment)).map(l=>l.attachment).map(r)))),setCurrentDocument:u.setOpenedDocumentId.bind(u),currentDocumentPages$:(0,s.Hxy)(u.openedDocumentPages$),canDownload$:o=>(0,h.of)(!0),viewMode$:(0,s.Hxy)((0,h.of)(e.p2.WIDESCREEN)),setViewMode:f,isPointerShown$:(0,s.Hxy)((0,h.of)(!1)),setPointerHidden:f,setPointerVisible:f,setPointerPosition:f,getDocumentType:o=>a.getMimeTypeDocumentType(o.resource?.mimeType),presentation$:(0,s.Hxy)((0,h.of)(null)),isOpenedFileDemonstrating$:(0,s.Hxy)((0,h.of)(!1)),canDemonstrateCurrentDocument$:(0,s.Hxy)((0,h.of)(!1)),startDemonstration:f,stopDemonstration:f,updateDemonstration:f,setInitialDemonstrationCoordinates:f,videoDemonstrateMediaStream$:(0,s.Hxy)((0,h.of)(null)),videoDemonstratePlay:()=>(0,h.of)(),videoDemonstratePause:()=>(0,h.of)(),videoDemonstrateSetCurrentTime:o=>(0,h.of)(),getVideoDemonstrateCurrentTime:()=>0,isNextDocumentPagesFetching$:(0,s.Hxy)((0,h.of)(!1)),isNextDocumentPagesFetchingUntil$:(0,s.Hxy)((0,h.of)(!1)),fetchNextDocumentPagesUntil$:()=>(0,h.of)(void 0),allowRMB$:(0,s.Hxy)((0,h.of)(!1)),videoAutoplay$:(0,s.Hxy)((0,h.of)(!0))})},59544:(z,R,t)=>{t.d(R,{h0:()=>de,je:()=>Z,yv:()=>re});var e=t(54355),s=t(8207),h=t(42827),_=t(8568),i=t(26215),f=t(9112),r=t(88002),p=t(45435),u=t(46782),a=t(911),o=t(30083),l=t(43839),c=t(25916),d=t(5469),v=t(6190),I=t(57704),m=t(99141),g=t(60570),E=t(84460),n=t(54490),S=t(40089),C=t(76652);const T=["contextMenu"];function P(B,ie){if(1&B&&e._UZ(0,"app-participant-icon",27),2&B){const G=e.oxw().ngIf,ae=e.oxw();e.Q6J("avatarResourceId",(null==G?null:G.chatAvatar)||null)("name",ae.chatName)("size",128)("onlineStatus",ae.chatOnlineStatus)}}function A(B,ie){if(1&B){const G=e.EpF();e.TgZ(0,"app-change-avatar",28),e.NdJ("onAvatarUploaded",function(he){e.CHM(G);const Se=e.oxw(2);return e.KtG(Se.onAvatarUploaded.emit(he))}),e.qZA()}if(2&B){const G=e.oxw().ngIf,ae=e.oxw();e.Q6J("ignoreNewYear",!0)("avatarName",ae.chatName)("avatarResourceId",(null==G?null:G.chatAvatar)||"")("canChangeAvatar",ae.canEditGroupInfo)("scope",ae.CHAT_FILES_SCOPE)}}function M(B,ie){if(1&B&&(e.TgZ(0,"div",29),e._uU(1),e.qZA()),2&B){const G=e.oxw(2);e.Q6J("tooltip",G.chatName),e.xp6(1),e.hij(" ",G.chatName," ")}}function L(B,ie){if(1&B){const G=e.EpF();e.TgZ(0,"iva-editable-text",30),e.NdJ("valueChange",function(he){e.CHM(G);const Se=e.oxw(2);return e.KtG(Se.changeGroupChatName(he))}),e.qZA()}if(2&B){const G=e.oxw(2);e.Q6J("value",G.chatTitle)("textClass","iva-text_h1")("validator",G.validateName)("displayType",G.DISPLAY_TYPE.TEXTAREA)("maxLength",1024)("shouldUseEllipsis",!1)("wordBreak",!0)("wideMode",!0)}}function N(B,ie){if(1&B&&(e.ynx(0),e._UZ(1,"app-online-text-status",31),e.BQk()),2&B){const G=e.oxw(2);e.xp6(1),e.Q6J("onlineStatus",G.chatOnlineStatus)}}function W(B,ie){if(1&B){const G=e.EpF();e.TgZ(0,"button",32),e.NdJ("click",function(){e.CHM(G);const he=e.oxw(2);return e.KtG(he.startGroupChat())}),e.ALo(1,"translate"),e._UZ(2,"svg-icon",33),e.qZA()}2&B&&e.Q6J("tooltip",e.lcZ(1,1,"CHATS.CHAT_INFO.ACTIONS.START_GROUP_CHAT"))}function b(B,ie){if(1&B&&(e.TgZ(0,"div",21)(1,"span",22),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"span",24),e._uU(5),e.qZA()()),2&B){const G=e.oxw(3);e.xp6(2),e.Oqu(e.lcZ(3,2,"CHATS.CHAT_INFO.EMAIL")),e.xp6(3),e.Oqu(null==G.interlocutorInfo?null:G.interlocutorInfo.email)}}function V(B,ie){if(1&B&&(e.TgZ(0,"div",21)(1,"span",22),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"span",24),e._uU(5),e.qZA()()),2&B){const G=e.oxw(3);e.xp6(2),e.Oqu(e.lcZ(3,2,"CHATS.CHAT_INFO.ADDITIONAL_CONTACT")),e.xp6(3),e.Oqu(null==G.interlocutorInfo?null:G.interlocutorInfo.phone)}}function D(B,ie){if(1&B){const G=e.EpF();e.TgZ(0,"div",20)(1,"a",34),e.NdJ("click",function(){e.CHM(G);const he=e.oxw(2);return e.KtG(he.showProfile())}),e._uU(2),e.ALo(3,"translate"),e._UZ(4,"svg-icon",35),e.qZA(),e.YNc(5,b,6,4,"div",36),e.YNc(6,V,6,4,"div",36),e.qZA()}if(2&B){const G=e.oxw(2);e.xp6(2),e.hij(" ",e.lcZ(3,3,"CHATS.CHAT_INFO.SHOW_PROFILE")," "),e.xp6(3),e.Q6J("ngIf",null==G.interlocutorInfo?null:G.interlocutorInfo.email),e.xp6(1),e.Q6J("ngIf",null==G.interlocutorInfo?null:G.interlocutorInfo.phone)}}function F(B,ie){if(1&B){const G=e.EpF();e.TgZ(0,"iva-toggle",23),e.NdJ("ngModelChange",function(he){e.CHM(G);const Se=e.oxw(2);return e.KtG(Se.toggleChatHistoryAccess(he))}),e.TgZ(1,"span",24),e._uU(2),e.ALo(3,"translate"),e.qZA()()}if(2&B){const G=e.oxw().ngIf;e.Q6J("ngModel",!(null!=G&&G.isChatHistoryAccessLimited)),e.xp6(2),e.Oqu(e.lcZ(3,2,"CHATS.CHAT_INFO.CHAT_HISTORY"))}}function J(B,ie){if(1&B){const G=e.EpF();e.TgZ(0,"button",45),e.NdJ("click",function(){e.CHM(G);const he=e.oxw(3);return e.KtG(he.emitAdditionRequest())}),e.ALo(1,"translate"),e._UZ(2,"svg-icon",46),e.qZA()}2&B&&e.Q6J("tooltip",e.lcZ(1,1,"CHATS.CHAT_INFO.ADD_USERS"))}function H(B,ie){if(1&B){const G=e.EpF();e.TgZ(0,"button",59),e.NdJ("click",function(he){e.CHM(G);const Se=e.oxw().$implicit,Oe=e.oxw(4);return e.KtG(Oe.setPointToContextMenu(he,Se))}),e._UZ(1,"svg-icon",60),e.qZA()}}function Y(B,ie){if(1&B){const G=e.EpF();e.TgZ(0,"button",61),e.NdJ("click",function(){e.CHM(G);const he=e.oxw().$implicit,Se=e.oxw(4);return e.KtG(Se.emitUserRemoveRequested(he.id))}),e.ALo(1,"translate"),e._UZ(2,"svg-icon",62),e.qZA()}2&B&&e.Q6J("tooltip",e.lcZ(1,1,"CHATS.CHAT_INFO.REMOVE_FROM_CHAT.TOOLTIP"))}function ee(B,ie){if(1&B){const G=e.EpF();e.TgZ(0,"li",49)(1,"div",50),e.NdJ("click",function(){const Se=e.CHM(G).$implicit,Oe=e.oxw(4);return e.KtG(Oe.showNotSelfProfile(Se.id))})("contextmenu",function(he){const Oe=e.CHM(G).$implicit,Ae=e.oxw(4);return e.KtG(Ae.setPointToContextMenu(he,Oe,!0))}),e._UZ(2,"app-participant-icon",51),e.TgZ(3,"div",52),e._UZ(4,"span",53),e.ALo(5,"highlight"),e.TgZ(6,"span",54),e._uU(7),e.qZA()()(),e.TgZ(8,"div",55)(9,"span",56),e._uU(10),e.qZA(),e.YNc(11,H,2,0,"button",57),e.YNc(12,Y,3,3,"button",58),e.qZA()()}if(2&B){const G=ie.$implicit,ae=e.oxw(4);let he,Se;e.ekj("participants__list-item_self",ae.selfProfileId===G.id),e.xp6(2),e.Q6J("avatarResourceId",null!==(he=G.avatar)&&void 0!==he?he:null)("name",G.name)("lazyLoadAvatar",!0)("size",48)("onlineStatus",null!==(Se=G.onlineStatus)&&void 0!==Se?Se:ae.OnlineStatus.NONE),e.xp6(2),e.Q6J("innerHTML",e.Dn7(5,14,G.name,ae.searchValue,!0),e.oJD),e.xp6(3),e.Oqu(G.additionalContact),e.xp6(2),e.ekj("participants__list-item-role_owner",ae.isUserOwner(G.role)),e.xp6(1),e.hij(" ",ae.getUserRole(G)," "),e.xp6(1),e.Q6J("ngIf",ae.isActionsVisible(G.id)),e.xp6(1),e.Q6J("ngIf",ae.canDeleteUsersFromChat(G))}}function X(B,ie){if(1&B&&(e.TgZ(0,"ul",47),e.YNc(1,ee,13,18,"li",48),e.ALo(2,"async"),e.qZA()),2&B){const G=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,2,G.filteredUsers$))("ngForTrackBy",G.trackById)}}function K(B,ie){1&B&&(e.TgZ(0,"div",63)(1,"span",64),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&B&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"CHATS.CHAT_INFO.NO_USERS_FOUND")))}const oe=function(B){return{usersCount:B}};function O(B,ie){if(1&B){const G=e.EpF();e.TgZ(0,"div",37)(1,"div",38)(2,"span",39),e._uU(3),e.ALo(4,"translate"),e.ALo(5,"async"),e.qZA(),e.TgZ(6,"div",40)(7,"app-search",41),e.NdJ("searchValueChange",function(he){e.CHM(G);const Se=e.oxw(2);return e.KtG(Se.onSearchValueChange(he))})("close",function(){e.CHM(G);const he=e.oxw(2);return e.KtG(he.onSearchClose())})("cleared",function(){e.CHM(G);const he=e.oxw(2);return e.KtG(he.onSearchCleared())}),e.ALo(8,"translate"),e.qZA(),e.YNc(9,J,3,3,"button",42),e.qZA()(),e.YNc(10,X,3,4,"ul",43),e.ALo(11,"async"),e.YNc(12,K,4,3,"ng-template",null,44,e.W1O),e.qZA()}if(2&B){const G=e.MAs(13),ae=e.oxw(2);let he;e.xp6(3),e.hij(" ",e.xi3(4,6,"CHATS.CHAT_INFO.PARTICIPANTS_IN_GROUP_CHAT",e.VKq(15,oe,e.lcZ(5,9,ae.usersCount$)))," "),e.xp6(4),e.Q6J("searchSize","m")("placeholder",e.lcZ(8,11,"CHATS.CHAT_INFO.GROUP_CHAT_USERS_SEARCH_PLACEHOLDER")),e.xp6(2),e.Q6J("ngIf",ae.isAdminOrOwner),e.xp6(1),e.Q6J("ngIf",null==(he=e.lcZ(11,13,ae.filteredUsers$))?null:he.length)("ngIfElse",G)}}function U(B,ie){if(1&B){const G=e.EpF();e.TgZ(0,"div",7)(1,"div",8)(2,"div",9),e.YNc(3,P,1,4,"app-participant-icon",10),e.qZA(),e.YNc(4,A,1,5,"ng-template",null,11,e.W1O),e.YNc(6,M,2,2,"div",12),e.YNc(7,L,1,8,"ng-template",null,13,e.W1O),e.YNc(9,N,2,1,"ng-container",14),e.TgZ(10,"div",15)(11,"button",16),e.NdJ("click",function(){e.CHM(G);const he=e.oxw();return e.KtG(he.goToChat())}),e.ALo(12,"translate"),e._UZ(13,"svg-icon",17),e.qZA(),e.YNc(14,W,3,3,"button",18),e.qZA()(),e.YNc(15,D,7,5,"div",19),e.TgZ(16,"div",20)(17,"div",21)(18,"span",22),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"iva-toggle",23),e.NdJ("ngModelChange",function(he){const Oe=e.CHM(G).ngIf;return e.KtG(!(Oe.muted=he))})("ngModelChange",function(he){e.CHM(G);const Se=e.oxw();return e.KtG(Se.toggleChatNotifications(he))}),e.TgZ(22,"span",24),e._uU(23),e.ALo(24,"translate"),e.qZA()(),e.YNc(25,F,4,4,"iva-toggle",25),e.qZA()(),e.YNc(26,O,14,17,"div",26),e.qZA()}if(2&B){const G=ie.ngIf,ae=e.MAs(5),he=e.MAs(8),Se=e.oxw();e.xp6(3),e.Q6J("ngIf",Se.isP2pChat)("ngIfElse",ae),e.xp6(3),e.Q6J("ngIf",!Se.canEditGroupInfo)("ngIfElse",he),e.xp6(3),e.Q6J("ngIf",Se.isP2pChat),e.xp6(2),e.Q6J("tooltip",e.lcZ(12,13,"CHATS.CHAT_INFO.ACTIONS.MESSAGE")),e.xp6(3),e.Q6J("ngIf",Se.isP2pChat),e.xp6(1),e.Q6J("ngIf",!(null!=G&&G.isGroupChat)),e.xp6(4),e.Oqu(e.lcZ(20,15,"CHATS.CHAT_INFO.CHAT_SETTINGS")),e.xp6(2),e.Q6J("ngModel",!G.muted),e.xp6(2),e.Oqu(e.lcZ(24,17,"CHATS.CHAT_INFO.NOTIFICATIONS")),e.xp6(2),e.Q6J("ngIf",(null==G?null:G.isGroupChat)&&Se.isAdminOrOwner),e.xp6(1),e.Q6J("ngIf",!Se.isP2pChat)}}function k(B,ie){if(1&B){const G=e.EpF();e.TgZ(0,"div",4),e.NdJ("click",function(){e.CHM(G);const he=e.oxw();return e.KtG(he.makeUserAdmin())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&B&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"CHATS.CHAT_INFO.USER_CONTEXT_ACTIONS.MAKE_ADMIN")," "))}function te(B,ie){if(1&B){const G=e.EpF();e.TgZ(0,"div",65),e.NdJ("click",function(){e.CHM(G);const he=e.oxw();return e.KtG(he.makeUserOwner())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&B&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"CHATS.CHAT_INFO.USER_CONTEXT_ACTIONS.MAKE_OWNER")," "))}function fe(B,ie){if(1&B){const G=e.EpF();e.TgZ(0,"div",65),e.NdJ("click",function(){e.CHM(G);const he=e.oxw();return e.KtG(he.makeUserRegular())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&B&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"CHATS.CHAT_INFO.USER_CONTEXT_ACTIONS.REMOVE_AS_ADMIN")," "))}var de=(()=>((de=de||{}).SHOW_PROFILE="SHOW_PROFILE",de.SEND_MESSAGE="SEND_MESSAGE",de.MAKE_ADMIN="MAKE_ADMIN",de.MAKE_OWNER="MAKE_OWNER",de.MAKE_REGULAR="MAKE_REGULAR",de))(),re=(()=>((re=re||{}).HISTORY="HISTORY",re.NOTIFICATIONS="NOTIFICATIONS",re))();let Z=(()=>{class B{get chat(){return this.chat$.value}constructor(G,ae,he,Se,Oe,Ae){this.currentChatService=G,this.loginService=ae,this.translateService=he,this.chatApiService=Se,this.overlayService=Oe,this.destroy$=Ae,this.OnlineStatus=h.Y,this.chatTitle="",this.dropdownUser=null,this.chat$=new i.X(null),this.selfProfileId=this.loginService.profileId,this.interlocutorInfo=null,this.changeChatInfoState=new e.vpe,this.userAdditionRequested=new e.vpe,this.userRemoveRequested=new e.vpe,this.userContextAction=new e.vpe,this.chatInfoSettingsAction=new e.vpe,this.closeChatInfo=new e.vpe,this.toggleNotificationsAction=new e.vpe,this.updateChatInfo=new e.vpe,this.onAvatarUploaded=new e.vpe,this.openProfileById=new e.vpe,this.CHAT_FILES_SCOPE="CHAT_FILE_SCOPE",this.trackById=(Me,Te)=>Te.id,this.searchValue$=new i.X(null),this.users$=new i.X([]),this.filteredUsers$=(0,f.aj)([this.users$,this.searchValue$]).pipe((0,r.U)(([Me,Te])=>(null===Te&&(Te=""),Me.filter(Re=>Re.name.toLowerCase().includes(Te.toLowerCase())||Re.additionalContact?.toLowerCase().includes(Te.toLowerCase())))),(0,r.U)(Me=>{if(0===Me.length)return Me;const Te=Me.find(Ee=>Ee.id===this.loginService.profileId),Re=Me.find(Ee=>Ee.role===s.yP.OWNER),xe=Te?.id===Re?.id,Le=[];Te&&Le.push(Te),Re&&!xe&&Le.push(Re);const ye=Me.filter(Ee=>Ee.id!==Te?.id&&Ee.id!==Re?.id);return ye.sort((Ee,me)=>(0,o.d)(Ee.name,me.name,Ee.role,me.role)),Le.concat(ye)})),this.usersCount$=this.filteredUsers$.pipe((0,r.U)(Me=>Me.length)),this.ownerProfileId$=new i.X(null),this.isMakeAdminActionVisible$=new i.X(!0),this.isMakeOwnerActionVisible$=new i.X(!0),this.removeAsAdminVisible$=new i.X(!1),this.validateName=Me=>{const Te=Me?.trim();return Te&&Te.length>=1&&Te.length<=1024?null:this.translateService.instant("FORMS_ERRORS__MAX_MIN_LENGTH",{max:1024,min:1})},this.DISPLAY_TYPE=a.FOL}get searchValue(){return this.searchValue$.value}get isP2pChat(){return!this.chat?.isGroupChat}set chat(G){if(!G)return;this.chat$.next(G),this.chatTitle=this.chatName;const ae=G?.users,he=ae?.map(Se=>Se.profileId);this.chatApiService.getUsersPresenceStatuses(he??[]).subscribe(Se=>{this.users$.next(this.mapChatUsersToListItems(ae??[],Se))},()=>{this.users$.next(this.mapChatUsersToListItems(ae??[]))}),this.users$.next(this.mapChatUsersToListItems(ae??[])),this.ownerProfileId$.next(G?.users.find(Se=>Se.role===s.yP.OWNER)?.profileId??null)}get p2pUser(){return this.chat?.users?.find(G=>G.profileId!==this.loginService.profileId)}get p2pStatus(){return this.chat?.p2pStatus}get chatOnlineStatus(){return this.currentChatService.getChatOnlineStatus(this.chat)}get selfRole(){const G=this.loginService.profileId;return this.chat?.users.find(ae=>ae.profileId===G)?.role}get isOwner(){return this.selfRole===s.yP.OWNER}get isAdmin(){return this.selfRole===s.yP.ADMIN}get isAdminOrOwner(){return this.isAdmin||this.isOwner}get canEditGroupInfo(){return!this.isP2pChat&&(this.isOwner||this.isAdmin)}get chatName(){if(!this.chat)return"";if(this.chat.name)return this.chat.name;const{isGroupChat:G,users:ae}=this.chat;return(0,l.e)(G,ae,this.loginService.profileId)}showGallery(){this.changeChatInfoState.emit(_.P.GALLERY)}isActionsVisible(G){return this.loginService.profileId!==G}showProfile(G){const ae=(0,a.Hxy)(this.users$).value,he=this.loginService.profileId;let Se=G;G||(Se=this.dropdownUser?ae?.find(Oe=>Oe.id===this.dropdownUser.id)?.id:ae?.find(Oe=>Oe.id!==he)?.id),Se&&this.openProfileById.emit(Se)}mapChatUsersToListItems(G,ae){const he=[],Se={};return ae?.forEach(Oe=>{Se[Oe.profileId]=Oe.presenceStatus}),G.forEach(Oe=>{he.push({avatar:Oe.avatar,name:Oe.name,id:Oe.profileId,additionalContact:"",role:Oe.role,onlineStatus:Se?Se[Oe.profileId]:h.Y.NONE,type:Oe.type})}),he}onSearchValueChange(G){this.searchValue$.next(G)}onSearchClose(){this.searchValue$.next(null)}onSearchCleared(){this.searchValue$.next("")}emitAdditionRequest(){this.userAdditionRequested.emit()}emitUserRemoveRequested(G){this.userRemoveRequested.emit(G)}setPointToContextMenu(G,ae,he=!1){G.preventDefault(),(!he||ae.id!==this.loginService.profileId)&&this.openContextMenu({user:ae,point:{x:G.clientX,y:G.clientY}})}openContextMenu({user:G,point:ae}){const he=this.loginService.profileId;this.dropdownUser=G,this.contextMenu.reference=ae,this.isMakeAdminActionVisible$.next(G.role!==s.yP.ADMIN&&this.isOwner&&G.type!==s.tP.BOT),this.isMakeOwnerActionVisible$.next(this.isOwner&&G.type!==s.tP.BOT),this.removeAsAdminVisible$.next(G.role===s.yP.ADMIN&&this.ownerProfileId$.value===he),this.contextMenu.show()}hideContextMenu(){this.contextMenu.hide(),this.dropdownUser=null}openUserProfile(){this.openProfileById.emit(this.dropdownUser.id),this.hideContextMenu()}goToChatWith(){this.userContextAction.emit({type:de.SEND_MESSAGE,user:this.dropdownUser.id}),this.hideContextMenu()}makeUserAdmin(){this.userContextAction.emit({type:de.MAKE_ADMIN,user:this.dropdownUser.id}),this.hideContextMenu()}makeUserOwner(){this.openMakingOwnerConfirmationModal$().subscribe(()=>{this.userContextAction.emit({type:de.MAKE_OWNER,user:this.dropdownUser.id}),this.hideContextMenu()})}makeUserRegular(){this.userContextAction.emit({type:de.MAKE_REGULAR,user:this.dropdownUser.id}),this.hideContextMenu()}startGroupChat(){this.emitAdditionRequest()}toggleChatNotifications(G){this.chatInfoSettingsAction.emit({type:re.NOTIFICATIONS,value:G})}toggleChatHistoryAccess(G){this.chatInfoSettingsAction.emit({type:re.HISTORY,value:G})}goToChat(){this.closeChatInfo.emit()}toggleNotifications(G){this.toggleNotificationsAction.emit(G)}changeAccessRightToChatHistory(G){this.updateChatInfo.emit({isChatHistoryAccessLimited:!G})}changeGroupChatName(G){this.updateChatInfo.emit({name:G})}getUserRole(G){return this.isUserBot(G.type)?this.translateService.instant("CHATS.ROLES.BOT"):G.role===s.yP.REGULAR?"":this.translateService.instant(`CHATS.ROLES.${G.role}`)}isUserOwner(G){return G===s.yP.OWNER}isUserBot(G){return G===s.tP.BOT}canDeleteUsersFromChat(G){return(this.isAdmin||this.isOwner)&&this.loginService.profileId!==G.id&&G.role!==s.yP.OWNER}openMakingOwnerConfirmationModal$(){return this.overlayService.openModal(a.YV9,{title:this.translateService.instant("CHATS.CHAT_INFO.MAKE_OWNER.DIALOG_TITLE"),text:this.translateService.instant("CHATS.CHAT_INFO.MAKE_OWNER.DIALOG_TEXT",{userName:this.dropdownUser?.name}),okText:this.translateService.instant("CHATS.CHAT_INFO.MAKE_OWNER.DIALOG_CONFIRM")}).afterClosed$.pipe((0,p.h)(G=>!!G.data),(0,r.U)(G=>!!G.data),(0,u.R)(this.destroy$))}showNotSelfProfile(G){G!==this.loginService.profileId&&this.showProfile(G)}}return B.\u0275fac=function(G){return new(G||B)(e.Y36(c.g),e.Y36(d.r6),e.Y36(v.sK),e.Y36(I.sb),e.Y36(a.Bi9),e.Y36(a.z23))},B.\u0275cmp=e.Xpm({type:B,selectors:[["app-chat-info-common"]],viewQuery:function(G,ae){if(1&G&&e.Gf(T,5),2&G){let he;e.iGM(he=e.CRH())&&(ae.contextMenu=he.first)}},inputs:{interlocutorInfo:"interlocutorInfo",chat:"chat"},outputs:{changeChatInfoState:"changeChatInfoState",userAdditionRequested:"userAdditionRequested",userRemoveRequested:"userRemoveRequested",userContextAction:"userContextAction",chatInfoSettingsAction:"chatInfoSettingsAction",closeChatInfo:"closeChatInfo",toggleNotificationsAction:"toggleNotificationsAction",updateChatInfo:"updateChatInfo",onAvatarUploaded:"onAvatarUploaded",openProfileById:"openProfileById"},decls:17,vars:18,consts:[["class","flex-grow common-info",4,"ngIf"],["dropdownWidth","auto","onClosed","onContextMenuClosed()"],["contextMenu",""],[1,"dropdown-container","app-chat-moderation-messages_context-menu"],["iva-size","m",1,"dropdown-item",3,"click"],["iva-size","m","class","dropdown-item",3,"click",4,"ngIf"],["iva-size","m","class","dropdown-item layout-row",3,"click",4,"ngIf"],[1,"flex-grow","common-info"],[1,"common-info__chat-profile"],[1,"common-info__chat-avatar","layout-bottom-margin_16"],[3,"avatarResourceId","name","size","onlineStatus",4,"ngIf","ngIfElse"],["groupChatAvatarTmpl",""],["class","common-info__chat-name layout-bottom-margin_8",3,"tooltip",4,"ngIf","ngIfElse"],["editGroupNameTmpl",""],[4,"ngIf"],[1,"layout","common-info__quick-actions"],["iva-round-button","","size","l","color","user-defined","type","button","titlePosition","bottom",1,"common-info__quick-actions-button",3,"tooltip","click"],["src","assets/icons/icon24/message.svg"],["iva-round-button","","class","layout-left-margin_24 common-info__quick-actions-button","size","l","color","user-defined","type","button","titlePosition","bottom",3,"tooltip","click",4,"ngIf"],["class","layout-column common-info__additional-info-block",4,"ngIf"],[1,"layout-column","common-info__additional-info-block"],[1,"layout-column","common-info__contact-info-preview-block"],[1,"common-info__contact-info-preview-title"],[1,"layout-top-margin_8",3,"ngModel","ngModelChange"],[1,"common-info__contact-info-preview-value"],["class","layout-top-margin_8",3,"ngModel","ngModelChange",4,"ngIf"],["class","layout-column participants__wrapper",4,"ngIf"],[3,"avatarResourceId","name","size","onlineStatus"],[3,"ignoreNewYear","avatarName","avatarResourceId","canChangeAvatar","scope","onAvatarUploaded"],[1,"common-info__chat-name","layout-bottom-margin_8",3,"tooltip"],[1,"common-info__chat-name","layout-bottom-margin_8",3,"value","textClass","validator","displayType","maxLength","shouldUseEllipsis","wordBreak","wideMode","valueChange"],[1,"common-info__chat-profile-status","layout-bottom-margin_16",3,"onlineStatus"],["iva-round-button","","size","l","color","user-defined","type","button","titlePosition","bottom",1,"layout-left-margin_24","common-info__quick-actions-button",3,"tooltip","click"],["src","assets/icons/icon24/add-people.svg"],["iva-link-button","",1,"common-info__nested-section-link",3,"click"],["src","assets/icons/icon16/corner-right.svg"],["class","layout-column common-info__contact-info-preview-block",4,"ngIf"],[1,"layout-column","participants__wrapper"],[1,"layout-column","participants__search-wrapper"],[1,"layout-top-margin_16","layout-bottom-margin_16","participants__search-users-amount"],[1,"participants__search"],[3,"searchSize","placeholder","searchValueChange","close","cleared"],["iva-round-button","","class","layout-left-margin_16","size","m",3,"tooltip","click",4,"ngIf"],["class","participants__list",4,"ngIf","ngIfElse"],["noUsersFoundTmpl",""],["iva-round-button","","size","m",1,"layout-left-margin_16",3,"tooltip","click"],["src","assets/icons/icon16/plus-small.svg"],[1,"participants__list"],["class","participants__list-item",3,"participants__list-item_self",4,"ngFor","ngForOf","ngForTrackBy"],[1,"participants__list-item"],[1,"participants__list-item-info-wrapper",3,"click","contextmenu"],[1,"layout-right-margin_8","participants__list-item-avatar",3,"avatarResourceId","name","lazyLoadAvatar","size","onlineStatus"],[1,"layout-column"],[1,"participants__list-item-title","layout-right-padding_16",3,"innerHTML"],[1,"participants__list-item-subtitle"],[1,"participants__list-item-controls-wrapper"],[1,"participants__list-item-role"],["iva-icon-button","","class","layout-left-margin_16","size","s",3,"click",4,"ngIf"],["iva-icon-button","","class","layout-left-margin_16","size","s","tooltipPosition","top",3,"tooltip","click",4,"ngIf"],["iva-icon-button","","size","s",1,"layout-left-margin_16",3,"click"],["src","assets/icons/icon16/3-dots.svg"],["iva-icon-button","","size","s","tooltipPosition","top",1,"layout-left-margin_16",3,"tooltip","click"],["src","assets/icons/icon16/close.svg"],[1,"participants__no-users-found"],[1,"participants__no-users-found-text"],["iva-size","m",1,"dropdown-item","layout-row",3,"click"]],template:function(G,ae){1&G&&(e.YNc(0,U,27,19,"div",0),e.ALo(1,"async"),e.TgZ(2,"iva-dropdown",1,2)(4,"div",3)(5,"div",4),e.NdJ("click",function(){return ae.showProfile()}),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"div",4),e.NdJ("click",function(){return ae.goToChatWith()}),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.YNc(11,k,3,3,"div",5),e.ALo(12,"async"),e.YNc(13,te,3,3,"div",6),e.ALo(14,"async"),e.YNc(15,fe,3,3,"div",6),e.ALo(16,"async"),e.qZA()()),2&G&&(e.Q6J("ngIf",e.lcZ(1,6,ae.chat$)),e.xp6(6),e.hij(" ",e.lcZ(7,8,"CHATS.CHAT_INFO.USER_CONTEXT_ACTIONS.TO_PROFILE")," "),e.xp6(3),e.hij(" ",e.lcZ(10,10,"CHATS.CHAT_INFO.USER_CONTEXT_ACTIONS.SEND_MESSAGE")," "),e.xp6(2),e.Q6J("ngIf",e.lcZ(12,12,ae.isMakeAdminActionVisible$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(14,14,ae.isMakeOwnerActionVisible$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(16,16,ae.removeAsAdminVisible$)))},dependencies:[a.qsc,a.r2H,a.JOL,a.xeS,a.bk9,a.n$2,a.i9q,m.D,g.X,E.U,n.g,S.sg,S.O5,C.JJ,C.On,a.SgB,S.Ov,v.X$],styles:["[_nghost-%COMP%]{min-width:0;min-height:0;overflow-y:auto}[_nghost-%COMP%]   .common-info[_ngcontent-%COMP%]{padding:32px 24px;display:flex;flex-flow:column nowrap}[_nghost-%COMP%]   .common-info__chat-profile[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}[_nghost-%COMP%]   .common-info__chat-profile-status[_ngcontent-%COMP%]{color:rgb(var(--font-gray-1-color));text-align:center}[_nghost-%COMP%]   .common-info__chat-avatar[_ngcontent-%COMP%]{position:relative}[_nghost-%COMP%]   .common-info__chat-avatar[_ngcontent-%COMP%]:hover   .common-info__chat-avatar-overlay[_ngcontent-%COMP%]{opacity:1}[_nghost-%COMP%]   .common-info__chat-avatar-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;opacity:0;cursor:pointer;width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;background-color:rgba(var(--neutral-color-7),var(--transparency-60));border-radius:50%}[_nghost-%COMP%]   .common-info__chat-avatar-overlay[_ngcontent-%COMP%]   svg-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{fill:rgb(var(--white-100))}[_nghost-%COMP%]   .common-info__chat-avatar-overlay[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{color:rgb(var(--white-100));font-size:12px;line-height:1.33;letter-spacing:normal;font-weight:400;text-align:center}[_nghost-%COMP%]   .common-info__chat-name[_ngcontent-%COMP%]{font-size:22px;font-weight:600;line-height:1.27;letter-spacing:0;text-align:center;word-break:break-word}[_nghost-%COMP%]   .common-info__quick-actions-button[_ngcontent-%COMP%]{border:none;background:rgb(var(--neutral-color-2))}[_nghost-%COMP%]   .common-info__quick-actions-button[_ngcontent-%COMP%]   svg-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{fill:rgb(var(--font-brand-color))}[_nghost-%COMP%]   .common-info__additional-info-block[_ngcontent-%COMP%]{margin:18px 0 0;display:grid;grid-auto-flow:row;grid-gap:16px 0}[_nghost-%COMP%]   .common-info__additional-info-block[_ngcontent-%COMP%]   .common-info__nested-section-link[_ngcontent-%COMP%]{display:flex;align-items:center}[_nghost-%COMP%]   .common-info__additional-info-block[_ngcontent-%COMP%]   .common-info__nested-section-link[_ngcontent-%COMP%]   svg-icon[_ngcontent-%COMP%]{margin-left:4px}[_nghost-%COMP%]   .common-info__additional-info-block[_ngcontent-%COMP%]   .common-info__nested-section-link[_ngcontent-%COMP%]   svg-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{fill:rgb(var(--link-color))}[_nghost-%COMP%]   .common-info__contact-info-preview-block[_ngcontent-%COMP%]{border-bottom:1px solid rgba(var(--black-100),var(--transparency-5));padding:0 0 8px}[_nghost-%COMP%]   .common-info__contact-info-preview-title[_ngcontent-%COMP%]{color:rgb(var(--font-gray-1-color));margin-bottom:6px}[_nghost-%COMP%]   .common-info__contact-info-preview-value[_ngcontent-%COMP%]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}[_nghost-%COMP%]   .common-info[_ngcontent-%COMP%]   .participants__list-item[_ngcontent-%COMP%]{display:flex;flex-flow:row nowrap;align-items:center;justify-content:space-between;padding:16px;border-bottom:1px solid rgba(var(--black-100),var(--transparency-5));flex-grow:0;max-width:100%}[_nghost-%COMP%]   .common-info[_ngcontent-%COMP%]   .participants__list-item-info-wrapper[_ngcontent-%COMP%]{display:flex;flex-flow:row nowrap;align-items:center;min-width:0;width:100%;cursor:pointer}[_nghost-%COMP%]   .common-info[_ngcontent-%COMP%]   .participants__list-item_self[_ngcontent-%COMP%]   .participants__list-item-info-wrapper[_ngcontent-%COMP%]{cursor:default}[_nghost-%COMP%]   .common-info[_ngcontent-%COMP%]   .participants__list-item-title[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:100%;width:100%}[_nghost-%COMP%]   .common-info[_ngcontent-%COMP%]   .participants__list-item-subtitle[_ngcontent-%COMP%]{color:rgb(var(--font-gray-1-color))}[_nghost-%COMP%]   .common-info[_ngcontent-%COMP%]   .participants__list-item-controls-wrapper[_ngcontent-%COMP%]{display:flex;flex-flow:row nowrap}[_nghost-%COMP%]   .common-info[_ngcontent-%COMP%]   .participants__list-item-role[_ngcontent-%COMP%]{color:rgb(var(--font-gray-1-color))}[_nghost-%COMP%]   .common-info[_ngcontent-%COMP%]   .participants__list-item-role_owner[_ngcontent-%COMP%]{color:rgb(var(--font-brand-color))}[_nghost-%COMP%]   .common-info[_ngcontent-%COMP%]   .participants__search[_ngcontent-%COMP%]{display:flex;flex-flow:row nowrap}[_nghost-%COMP%]   .common-info[_ngcontent-%COMP%]   .participants__search[_ngcontent-%COMP%]   app-search[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .common-info[_ngcontent-%COMP%]   .participants__no-users-found[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:16px}[_nghost-%COMP%]   .common-info[_ngcontent-%COMP%]   .participants__no-users-found-text[_ngcontent-%COMP%]{color:rgb(var(--font-gray-1-color))}"],changeDetection:0}),B})()},8568:(z,R,t)=>{t.d(R,{G:()=>P,P:()=>T});var e=t(54355),s=t(5469),h=t(45435),_=t(57057),i=t(88002),f=t(43190),r=t(15257),p=t(46782),u=t(26215),a=t(911),o=t(59544),l=t(8207),c=t(42827),d=t(25916),v=t(60986),I=t(62241),m=t(17911),g=t(89984);function E(A,M){if(1&A){const L=e.EpF();e.TgZ(0,"app-chat-info-common",5),e.NdJ("changeChatInfoState",function(W){e.CHM(L);const b=e.oxw();return e.KtG(b.changeChatInfoState(W))})("userAdditionRequested",function(){e.CHM(L);const W=e.oxw();return e.KtG(W.onUserAdditionRequested())})("userRemoveRequested",function(W){e.CHM(L);const b=e.oxw();return e.KtG(b.onUserRemoveRequested(W))})("userContextAction",function(W){e.CHM(L);const b=e.oxw();return e.KtG(b.onUserContextAction(W))})("chatInfoSettingsAction",function(W){e.CHM(L);const b=e.oxw();return e.KtG(b.onChatInfoSettingsAction(W))})("toggleNotificationsAction",function(W){e.CHM(L);const b=e.oxw();return e.KtG(b.toggleNotifications(W))})("updateChatInfo",function(W){e.CHM(L);const b=e.oxw();return e.KtG(b.updateChatInfo(W))})("closeChatInfo",function(){e.CHM(L);const W=e.oxw();return e.KtG(W.close())})("openProfileById",function(W){e.CHM(L);const b=e.oxw();return e.KtG(b.openProfileById.emit(W))})("onAvatarUploaded",function(W){e.CHM(L);const b=e.oxw();return e.KtG(b.onAvatarUploaded(W))}),e.ALo(1,"async"),e.ALo(2,"async"),e.qZA()}if(2&A){const L=e.oxw();e.Q6J("chat",e.lcZ(1,2,L.currentChat$))("interlocutorInfo",e.lcZ(2,4,L.p2pContact$))}}function n(A,M){1&A&&e._UZ(0,"app-chat-info-gallery")}function S(A,M){if(1&A){const L=e.EpF();e.TgZ(0,"app-interlocutor-info",7),e.NdJ("closeInfo",function(){e.CHM(L);const W=e.oxw(2);return e.KtG(W.close())})("contactChanged",function(W){const V=e.CHM(L).ngIf,D=e.oxw(2);return e.KtG(D.onContactChanged(W,V))})("planEvent",function(){e.CHM(L);const W=e.oxw(2);return e.KtG(W.planEvent())}),e.ALo(1,"async"),e.qZA()}if(2&A){const L=M.ngIf,N=e.oxw(2);e.Q6J("interlocutor",L)("canCreateConference",e.lcZ(1,3,N.canCreateConference$))("isReadonly",!0)}}function C(A,M){if(1&A&&(e.ynx(0),e.YNc(1,S,2,5,"app-interlocutor-info",6),e.ALo(2,"async"),e.BQk()),2&A){const L=e.oxw();e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,L.p2pContact$))}}var T=(()=>((T=T||{}).DEFAULT="DEFAULT",T.GALLERY="GALLERY",T.PROFILE="PROFILE",T.CONTACT="CONTACT",T))();let P=(()=>{class A{set profileIdToOpen(L){L&&this.getContactToOpen(L)}set chatIdToOpen(L){this.chatIdToOpen$.next(L)}constructor(L,N,W,b,V,D,F,J){this.currentChatService=L,this.loginService=N,this.interlocutorsApiService=W,this.destroy$=b,this.chatStoreService=V,this.contactsService=D,this.contactsApiService=F,this.toastr=J,this.ChatInfoState=T,this.ACCEPT_FILE_TYPES=s._Z.settings.PROFILE_AVATAR_UPLOAD_ALLOWED_ACCEPT_STRINGS.join(","),this.canCreateConference$=this.contactsService.canCreateConference$,this.chatInfoState=T.DEFAULT,this.p2pContact$=new u.X(null),this.closeChatInfo=new e.vpe,this.openProfileById=new e.vpe,this.chatIdToOpen$=new u.X(void 0),this.currentChat$=this.currentChatService.currentChat$,this.getP2PProfile()}getContactToOpen(L){this.interlocutorsApiService.getInterlocutorByProfileId(L).pipe((0,h.h)(N=>!!N),(0,_.M)(this.currentChat$),(0,i.U)(([N,W])=>({...N,onlineStatus:W?.p2pStatus||c.Y.UNKNOWN}))).subscribe(N=>this.p2pContact$.next(N))}get getAdditionalActionsMenu(){const L=(0,a.Hxy)(this.currentChat$).value;if(!L)return[];let N=[];const W=this.loginService.profileId,V=L?.users.find(ee=>ee.profileId===W)?.role===l.yP.OWNER,D={title:"CHATS.CONTEXT_MENU.LEAVE_CHAT",onClick:()=>this.leaveChat()},F={title:"CHATS.CONTEXT_MENU.CLEAR_CHAT_HISTORY",onClick:()=>this.clearHistory()},J={title:"CHATS.CONTEXT_MENU.DELETE_CHAT",onClick:()=>this.deleteChat()};return L?.isGroupChat&&N.push(D),(!L?.isGroupChat||V)&&N.push(J),(!L?.isGroupChat||V)&&N.push(F),N}close(){this.closeChatInfo.emit()}changeChatInfoState(L){this.chatInfoState=L}onUserAdditionRequested(){this.currentChatService.openAddParticipantsModal()}getP2PProfile(){this.currentChat$.pipe((0,h.h)(L=>!L?.isGroupChat),(0,i.U)(L=>{const N=this.loginService.profileId;return L?.users.find(b=>b.profileId!==N)?.profileId}),(0,h.h)(L=>!!L),(0,f.w)(L=>this.interlocutorsApiService.getInterlocutorByProfileId(L)),(0,h.h)(L=>!!L),(0,_.M)(this.currentChat$),(0,i.U)(([L,N])=>({...L,onlineStatus:N?.p2pStatus||c.Y.UNKNOWN})),(0,r.q)(1),(0,p.R)(this.destroy$)).subscribe(L=>this.p2pContact$.next(L))}onUserContextAction(L){switch(L.type){case o.h0.SHOW_PROFILE:break;case o.h0.SEND_MESSAGE:this.sendMessageToUser(L.user);break;case o.h0.MAKE_OWNER:this.makeUserOwner(L.user);break;case o.h0.MAKE_ADMIN:this.makeUserAdmin(L.user);break;case o.h0.MAKE_REGULAR:this.makeUserRegular(L.user)}}onUserRemoveRequested(L){const N=(0,a.Hxy)(this.currentChat$).value.id;this.currentChatService.removeParticipantFromGroupChat(N,L)}makeUserAdmin(L){const N=(0,a.Hxy)(this.currentChat$).value.id;this.currentChatService.changeUserRoleInChat(N,L,l.yP.ADMIN)}makeUserOwner(L){const N=(0,a.Hxy)(this.currentChat$).value.id;this.currentChatService.changeUserRoleInChat(N,L,l.yP.OWNER)}makeUserRegular(L){const N=(0,a.Hxy)(this.currentChat$).value.id;this.currentChatService.changeUserRoleInChat(N,L,l.yP.REGULAR)}sendMessageToUser(L){this.contactsService.getOrCreateChat({profile:{profileId:L}})}toggleNotifications(L){const N=this.chatStoreService.currentChatId;N&&this.currentChatService.toggleNotifications(N,L)}onChatInfoSettingsAction(L){const N=(0,a.Hxy)(this.currentChatService.currentChat$).value;if(N)switch(L.type){case o.yv.NOTIFICATIONS:this.currentChatService.toggleNotifications(N.id,L.value);break;case o.yv.HISTORY:this.currentChatService.toggleGroupChatHistoryAccess(N.id,L.value)}}onAvatarUploaded(L){const N=this.chatStoreService.currentChatId;N&&this.currentChatService.updateChatAvatar(N,L)}clearHistory(){const L=this.chatStoreService.currentChatId;L&&this.currentChatService.clearHistory(L)}deleteChat(){const L=this.chatStoreService.currentChatId;L&&this.currentChatService.deleteChat(L)}updateChatInfo(L){const N=this.chatStoreService.currentChatId;N&&this.currentChatService.updateChatInfo(N,L)}planEvent(){this.contactsService.planEventWithInterlocutor(this.p2pContact$.value)}leaveChat(){const L=this.chatStoreService.currentChat,N=this.loginService.profileId,W=L?.users.find(V=>V.role===l.yP.OWNER)?.profileId,b=!!N&&!!W&&N===W;L?.id&&this.currentChatService.leaveChat(L.id,b)}onContactChanged(L,N){N.contact?.contactId&&this.contactsApiService.updateContact(N.contact.contactId,L).pipe((0,p.R)(this.destroy$)).subscribe(()=>{},()=>this.toastr.error({translationKey:"CONTACTS_PAGE.ERRORS.UPDATE_CONTACT_COMMON"}))}}return A.\u0275fac=function(L){return new(L||A)(e.Y36(d.g),e.Y36(s.r6),e.Y36(v.B),e.Y36(a.z23),e.Y36(I.s),e.Y36(m.P),e.Y36(g.V),e.Y36(a._Wo))},A.\u0275cmp=e.Xpm({type:A,selectors:[["app-chat-info"]],inputs:{chatInfoState:"chatInfoState",profileIdToOpen:"profileIdToOpen",chatIdToOpen:"chatIdToOpen"},outputs:{closeChatInfo:"closeChatInfo",openProfileById:"openProfileById"},features:[e._Bn([a.z23])],decls:6,vars:6,consts:[[1,"chat-info"],[3,"headerState","additionalActions","closeChatInfo","changeChatInfoState"],[3,"ngSwitch"],[3,"chat","interlocutorInfo","changeChatInfoState","userAdditionRequested","userRemoveRequested","userContextAction","chatInfoSettingsAction","toggleNotificationsAction","updateChatInfo","closeChatInfo","openProfileById","onAvatarUploaded",4,"ngSwitchCase"],[4,"ngSwitchCase"],[3,"chat","interlocutorInfo","changeChatInfoState","userAdditionRequested","userRemoveRequested","userContextAction","chatInfoSettingsAction","toggleNotificationsAction","updateChatInfo","closeChatInfo","openProfileById","onAvatarUploaded"],[3,"interlocutor","canCreateConference","isReadonly","closeInfo","contactChanged","planEvent",4,"ngIf"],[3,"interlocutor","canCreateConference","isReadonly","closeInfo","contactChanged","planEvent"]],template:function(L,N){1&L&&(e.TgZ(0,"div",0)(1,"app-chat-info-header",1),e.NdJ("closeChatInfo",function(){return N.close()})("changeChatInfoState",function(b){return N.changeChatInfoState(b)}),e.qZA(),e.ynx(2,2),e.YNc(3,E,3,6,"app-chat-info-common",3),e.YNc(4,n,1,0,"app-chat-info-gallery",4),e.YNc(5,C,3,3,"ng-container",4),e.BQk(),e.qZA()),2&L&&(e.xp6(1),e.Q6J("headerState",N.chatInfoState)("additionalActions",N.getAdditionalActionsMenu),e.xp6(1),e.Q6J("ngSwitch",N.chatInfoState),e.xp6(1),e.Q6J("ngSwitchCase",N.ChatInfoState.DEFAULT),e.xp6(1),e.Q6J("ngSwitchCase",N.ChatInfoState.GALLERY),e.xp6(1),e.Q6J("ngSwitchCase",N.ChatInfoState.CONTACT))},styles:["[_nghost-%COMP%]{height:100%;width:100%;background-color:rgb(var(--white-100));display:flex;flex-flow:column nowrap;flex:1 1 100%;min-width:0}[_nghost-%COMP%]   .chat-info[_ngcontent-%COMP%]{display:flex;flex-flow:column nowrap;flex:inherit;min-width:0;min-height:0}"],changeDetection:0}),A})()},38689:(z,R,t)=>{t.d(R,{c:()=>e});const e="ARROW_LEFT__ARROW_RIGHT"},59820:(z,R,t)=>{t.d(R,{n:()=>c});var e=t(911),s=t(45435),h=t(88002),_=t(87519),i=t(19773),f=t(46782),r=t(15257),p=t(54355),u=t(26738);let a=(()=>{class d{constructor(I){this.http=I}getDocumentInfo(I){return this.http.get(`/api/rest/documents/${I}`)}getRootFolderInfo(){return this.http.get("/api/rest/documents/root-directory")}getFolderFiles(I){return this.http.get(`/api/rest/documents/${I}/list-documents`)}}return d.\u0275fac=function(I){return new(I||d)(p.LFG(u.eN))},d.\u0275prov=p.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})();var o=t(73859),l=t(32352);let c=(()=>{class d extends e.z23{constructor(I,m,g){super(),this.documentApiService=I,this.filesStore=m,this.resourceUrlService=g,this.currentFolderId$=this.filesStore.folder$.pipe((0,s.h)(E=>!!E),(0,h.U)(E=>E.id),(0,_.x)()),this.parentFolderId$=this.filesStore.folder$.pipe((0,s.h)(E=>!!E),(0,h.U)(E=>E.parentFolderId),(0,_.x)()),this.currentFolderInfo$=this.filesStore.folder$,this.currentFolderFiles$=this.filesStore.files$,this.visitedFolders=[]}init(){this.documentApiService.getRootFolderInfo().subscribe(I=>{this.filesStore.setCurrentFolder(I)}),this.collectVisitedFolders(),this.handleFolderChange()}handleFolderChange(){this.currentFolderId$.pipe((0,s.h)(I=>!!I),(0,i.zg)(I=>this.documentApiService.getFolderFiles(I)),(0,f.R)(this.destroy$)).subscribe(I=>this.filesStore.setFiles(I))}setFolder(I){this.filesStore.setCurrentFolder(I)}goToParentFolder(){this.currentFolderInfo$.pipe((0,r.q)(1),(0,s.h)(I=>!!I)).subscribe(I=>{const m=this.visitedFolders.find(g=>g.id===I?.parentFolderId);this.setFolder(m)})}openFile(I){this.filesStore.setOpenedFile(I)}downloadFile(I){const g=I.name,E=this.resourceUrlService.getResourceUrl(I.resource.resourceId,{size:void 0,asAttachment:!0});(0,e.LRf)(E,g)}collectVisitedFolders(){this.currentFolderInfo$.pipe((0,s.h)(I=>!!I),(0,s.h)(I=>!this.visitedFolders.some(({id:m})=>m===I.id)),(0,f.R)(this.destroy$)).subscribe(I=>{this.visitedFolders.push(I)})}}return d.\u0275fac=function(I){return new(I||d)(p.LFG(a),p.LFG(o.K),p.LFG(l.Z))},d.\u0275prov=p.Yz7({token:d,factory:d.\u0275fac}),d})()},66111:(z,R,t)=>{t.d(R,{U:()=>e});const e=[{title:"SETTINGS__HEADER__SECTION_STATS__EVENT_PARTICIPANT_REPORT.PARTICIPANT_SESSIONS.GRID.ENTER_DATE",value:"enterDate",isDisabled:!0},{title:"SETTINGS__HEADER__SECTION_STATS__EVENT_PARTICIPANT_REPORT.PARTICIPANT_SESSIONS.GRID.LEAVE_DATE",value:"leaveDate",isDisabled:!0},{title:"SETTINGS__HEADER__SECTION_STATS__EVENT_PARTICIPANT_REPORT.PARTICIPANT_SESSIONS.GRID.DURATION",value:"duration",isDisabled:!0},{title:"SETTINGS__HEADER__SECTION_STATS__EVENT_PARTICIPANT_REPORT.PARTICIPANT_SESSIONS.GRID.USER_AGENT",value:"userAgent",isDisabled:!0},{title:"SETTINGS__HEADER__SECTION_STATS__EVENT_PARTICIPANT_REPORT.PARTICIPANT_SESSIONS.GRID.IP_ADDRESS",value:"ipAddress"},{title:"SETTINGS__HEADER__SECTION_STATS__EVENT_PARTICIPANT_REPORT.PARTICIPANT_SESSIONS.GRID.LEAVE_REASON",value:"leaveReason"}]},39137:(z,R,t)=>{t.d(R,{U:()=>e});const e=[{title:"SETTINGS__HEADER__SECTION_STATS__EVENT_REPORT.GRID.NAME",value:"name",isDisabled:!0},{title:"SETTINGS__HEADER__SECTION_STATS__EVENT_REPORT.GRID.EMAIL",value:"email",isDisabled:!0},{title:"SETTINGS__HEADER__SECTION_STATS__EVENT_REPORT.GRID.ROLE",value:"role",isDisabled:!0},{title:"SETTINGS__HEADER__SECTION_STATS__EVENT_REPORT.GRID.PRESENCE_STATUS",value:"wasOnConference",isDisabled:!0},{title:"SETTINGS__HEADER__SECTION_STATS__EVENT_REPORT.GRID.ID",value:"profileId"},{title:"SETTINGS__HEADER__SECTION_STATS__EVENT_REPORT.GRID.INVITATION_STATUS",value:"invitationStatus"},{title:"SETTINGS__HEADER__SECTION_STATS__EVENT_REPORT.GRID.RESPONSE_TO_INVITATION",value:"inviteResponseType"},{title:"SETTINGS__HEADER__SECTION_STATS__EVENT_REPORT.GRID.FIRST_JOIN_DATE",value:"firstJoinDate"},{title:"SETTINGS__HEADER__SECTION_STATS__EVENT_REPORT.GRID.LAST_LEAVE_DATE",value:"lastLeaveDate"},{title:"SETTINGS__HEADER__SECTION_STATS__EVENT_REPORT.GRID.STAYING_TIME",value:"totalDuration"},{title:"SETTINGS__HEADER__SECTION_STATS__EVENT_REPORT.GRID.ENGAGEMENT_RATE",value:"engagement"}]},14145:(z,R,t)=>{t.d(R,{N:()=>e});const e=[{title:"SETTINGS__HEADER__SECTION_STATS__EVENTS_REPORT.GRID.NAME",value:"name",isDisabled:!0},{title:"SETTINGS__HEADER__SECTION_STATS__EVENTS_REPORT.GRID.START_DATE",value:"startDate",isDisabled:!0},{title:"SETTINGS__HEADER__SECTION_STATS__EVENTS_REPORT.GRID.ROLE",value:"role",isDisabled:!0},{title:"SETTINGS__HEADER__SECTION_STATS__EVENTS_REPORT.GRID.ID",value:"conferenceSessionId"},{title:"SETTINGS__HEADER__SECTION_STATS__EVENTS_REPORT.GRID.FIRST_JOIN_DATE",value:"firstJoinDate"},{title:"SETTINGS__HEADER__SECTION_STATS__EVENTS_REPORT.GRID.LAST_LEAVE_DATE",value:"lastLeaveDate"},{title:"SETTINGS__HEADER__SECTION_STATS__EVENTS_REPORT.GRID.ENGAGEMENT",value:"engagement"}]},92672:(z,R,t)=>{t.d(R,{E:()=>e});const e=[{title:"SETTINGS__HEADER__SECTION_STATS__EVENTS_REPORT.COMMON_DATA.TOTAL_COUNT",value:"totalCount",isDisabled:!0},{title:"SETTINGS__HEADER__SECTION_STATS__EVENTS_REPORT.COMMON_DATA.AVERAGE_PARTICIPANTS_COUNT",value:"averageVisitedParticipantsCount"},{title:"SETTINGS__HEADER__SECTION_STATS__EVENTS_REPORT.COMMON_DATA.INVITATION_PARTICIPANTS_RATIO",value:"invitedAndVisitedParticipantsRatio"},{title:"SETTINGS__HEADER__SECTION_STATS__EVENTS_REPORT.COMMON_DATA.REGISTRATION_PARTICIPANTS_RATIO",value:"registeredAndVisitedParticipantsRatio"},{title:"SETTINGS__HEADER__SECTION_STATS__EVENTS_REPORT.COMMON_DATA.GUEST_PARTICIPANTS_RATIO",value:"guestParticipantsRatio"},{title:"SETTINGS__HEADER__SECTION_STATS__EVENTS_REPORT.COMMON_DATA.ENGAGEMENT",value:"engagement"}]},48112:(z,R,t)=>{t.d(R,{U:()=>e});const e=[{title:"SETTINGS__HEADER__SECTION_STATS__EVENTS_REPORT.GRID.NAME",value:"name",isDisabled:!0},{title:"SETTINGS__HEADER__SECTION_STATS__EVENTS_REPORT.GRID.TYPE",value:"conferenceType",isDisabled:!0},{title:"SETTINGS__HEADER__SECTION_STATS__EVENTS_REPORT.GRID.START_DATE",value:"startDate",isDisabled:!0},{title:"SETTINGS__HEADER__SECTION_STATS__EVENTS_REPORT.GRID.DURATION",value:"duration",isDisabled:!0},{title:"SETTINGS__HEADER__SECTION_STATS__EVENTS_REPORT.GRID.ID",value:"conferenceSessionId"},{title:"SETTINGS__HEADER__SECTION_STATS__EVENTS_REPORT.GRID.END_DATE",value:"endDate"},{title:"SETTINGS__HEADER__SECTION_STATS__EVENTS_REPORT.GRID.UNIQUE_PARTICIPANTS",value:"visitedParticipantsCount"},{title:"SETTINGS__HEADER__SECTION_STATS__EVENTS_REPORT.GRID.INVITED_PARTICIPANTS_WHO_ATTENDED_THE_EVENT",value:"invitedAndVisitedParticipantsCount"},{title:"SETTINGS__HEADER__SECTION_STATS__EVENTS_REPORT.GRID.REGISTERED_USERS_WHO_PARTICIPATED_IN_THE_EVENT",value:"registeredAndVisitedParticipantsCount"},{title:"SETTINGS__HEADER__SECTION_STATS__EVENTS_REPORT.GRID.UNIQUE_GUESTS",value:"guestParticipantsCount"},{title:"SETTINGS__HEADER__SECTION_STATS__EVENTS_REPORT.GRID.PARTICIPANT_ENGAGEMENT",value:"engagement"}]},34922:(z,R,t)=>{t.d(R,{e:()=>f});var e=t(46451),s=t(911),h=t(25917),_=t(88002);const i=()=>{},f=(r,p,u)=>({theme:s.Q2A.DARK,currentDocument$:(0,s.Hxy)(r.openedDocument$.pipe((0,_.U)(a=>a?u.documentDTOToDocumentViewing(a):null))),allDocuments$:(0,s.Hxy)(r.documentsList$.pipe((0,_.U)(a=>a.map(u.documentDTOToDocumentViewing)))),setCurrentDocument:r.setOpenedDocumentId.bind(r),currentDocumentPages$:(0,s.Hxy)(r.currentDocumentPages$),canDownload$:()=>(0,h.of)(!0),viewMode$:(0,s.Hxy)((0,h.of)(e.p2.WIDESCREEN)),setViewMode:i,isPointerShown$:(0,s.Hxy)((0,h.of)(!1)),setPointerHidden:i,setPointerVisible:i,setPointerPosition:i,getDocumentType:a=>u.getMimeTypeDocumentType(a.resource?.mimeType),presentation$:(0,s.Hxy)((0,h.of)(null)),isOpenedFileDemonstrating$:(0,s.Hxy)((0,h.of)(!1)),canDemonstrateCurrentDocument$:(0,s.Hxy)((0,h.of)(!1)),startDemonstration:i,stopDemonstration:i,updateDemonstration:i,setInitialDemonstrationCoordinates:i,videoDemonstrateMediaStream$:(0,s.Hxy)((0,h.of)(null)),videoDemonstratePlay:()=>(0,h.of)(),videoDemonstratePause:()=>(0,h.of)(),videoDemonstrateSetCurrentTime:a=>(0,h.of)(),getVideoDemonstrateCurrentTime:()=>0,isNextDocumentPagesFetching$:(0,s.Hxy)(r.isNextDocumentPagesFetching$),isNextDocumentPagesFetchingUntil$:(0,s.Hxy)(r.isNextDocumentPagesFetchingUntil$),fetchNextDocumentPagesUntil$:p.fetchNextDocumentPagesUntil$.bind(p),allowRMB$:(0,s.Hxy)((0,h.of)(!1)),videoAutoplay$:(0,s.Hxy)((0,h.of)(!0))})},74075:(z,R,t)=>{t.d(R,{k:()=>h,z:()=>_});var e=t(12841),s=t(54355);let h=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class _ extends e.OC{constructor(f){super(),this.ivaRouteReuseStrategyService=f}shouldReuseRoute(f,r){const p=void 0===this.ivaRouteReuseStrategyService.shouldReuse?f.data.shouldReuse:this.ivaRouteReuseStrategyService.shouldReuse;return void 0===p?super.shouldReuseRoute(f,r):p}}},13963:(z,R,t)=>{t.d(R,{C:()=>e});var e=(()=>((e=e||{}).MD5="MD5",e.HEX_HASH="HEX_HASH",e))()},84635:(z,R,t)=>{t.d(R,{Cb:()=>s,hE:()=>h,rJ:()=>e});var e=(()=>((e=e||{}).UNSENT="UNSENT",e.SENT="SENT",e.ERROR="ERROR",e.DELIVERED="DELIVERED",e.NOT_MODERATED="NOT_MODERATED",e.NONE="NONE",e.ALL_READ="ALL_READ",e.PARTLY_READ="PARTLY_READ",e))(),s=(()=>((s=s||{}).SYSTEM="SYSTEM",s.SIMPLE="SIMPLE",s.AUDIO="AUDIO",s.LAST_READ="LAST_READ",s))(),h=(()=>((h=h||{}).ADD_PARTICIPANTS="ADD_PARTICIPANTS",h.CALL_TRANSFERRED_FROM_P2P_CHAT="CALL_TRANSFERRED_FROM_P2P_CHAT",h.CALL_TRANSFERRED_TO_GROUP_CHAT="CALL_TRANSFERRED_TO_GROUP_CHAT",h.CHAT_CALL_DECLINED="CHAT_CALL_DECLINED",h.CHAT_CALL_ENDED="CHAT_CALL_ENDED",h.CHAT_CALL_STARTED="CHAT_CALL_STARTED",h.CLEAR_CHAT="CLEAR_CHAT",h.CREATE_CHAT="CREATE_CHAT",h.LEAVE_CHAT="LEAVE_CHAT",h.NONE="NONE",h.REMOVE_PARTICIPANTS="REMOVE_PARTICIPANTS",h))()},8207:(z,R,t)=>{t.d(R,{VN:()=>e,tP:()=>h,yP:()=>s});var e=(()=>((e=e||{}).INACTIVE="INACTIVE",e.DIALING="DIALING",e.ACTIVE="ACTIVE",e))(),s=(()=>((s=s||{}).OWNER="OWNER",s.ADMIN="ADMIN",s.REGULAR="REGULAR",s))(),h=(()=>((h=h||{}).REGISTERED_USER="REGISTERED_USER",h.GUEST_USER="GUEST_USER",h.BOT="BOT",h))()},30450:(z,R,t)=>{t.d(R,{r:()=>e});var e=(()=>((e=e||{}).AUTO="AUTO",e.MANUALLY="MANUALLY",e))()},87177:(z,R,t)=>{t.d(R,{$q:()=>s,oG:()=>u,ry:()=>r,Kv:()=>p,YI:()=>i,Tv:()=>d,Jm:()=>h,Br:()=>f,Um:()=>v,FS:()=>o,Uj:()=>a,M6:()=>e,Wo:()=>g,gA:()=>I});var e=(()=>((e=e||{}).NOT_MODERATED="NOT_MODERATED",e.APPROVED="APPROVED",e.REJECTED="REJECTED",e))();const s=[e.REJECTED,e.NOT_MODERATED,e.APPROVED];var h=(()=>((h=h||{}).SESSION_TIMED_OUT="SESSION_TIMED_OUT",h.USER_CONNECTING_OTHER_EVENT="USER_CONNECTING_OTHER_EVENT",h.USER_KICKED="USER_KICKED",h.CONFERENCE_FINISHED="CONFERENCE_FINISHED",h.MEDIA_SERVER_OVERLOADED="MEDIA_SERVER_OVERLOADED",h.MEDIA_SERVER_SHUTDOWN="MEDIA_SERVER_SHUTDOWN",h))(),i=(()=>((i=i||{}).EQUITABLE_CONVERSATION="EQUITABLE_CONVERSATION",i.WEBINAR="WEBINAR",i))(),f=(()=>((f=f||{}).NONE="NONE",f.APPROVE="APPROVE",f.REJECT="REJECT",f.MAYBE="MAYBE",f))(),r=(()=>((r=r||{}).AUTO="AUTO",r.MANUALLY="MANUALLY",r))(),p=(()=>((p=p||{}).NO_STARTED="NO_STARTED",p.ACTIVE="ACTIVE",p.PAUSE="PAUSE",p.STOPPED="STOPPED",p))(),u=(()=>((u=u||{}).ATTENDEE="ATTENDEE",u.MODERATOR="MODERATOR",u.SPEAKER="SPEAKER",u.INTERPRETER="INTERPRETER",u))(),a=(()=>((a=a||{}).LIVESTREAM="LIVESTREAM",a.WEBINAR_MAIN_DATA="WEBINAR_MAIN_DATA",a.WEBINAR_ADDITIONAL_DATA="WEBINAR_ADDITIONAL_DATA",a.VNCSTREAM="VNCSTREAM",a))(),o=(()=>((o=o||{}).UNKNOWN="UNKNOWN",o.TIMEOUT="TIMEOUT",o.USER_LOGOUT="USER_LOGOUT",o.KICKED="KICKED",o.API_CALL="API_CALL",o.ACCOUNT_DELETED="ACCOUNT_DELETED",o.ACCOUNT_BLOCKED="ACCOUNT_BLOCKED",o))(),d=(()=>((d=d||{}).DOCUMENT="DOCUMENT",d.DIRECTORY="DIRECTORY",d))(),v=(()=>((v=v||{}).USER_LEAVING_EVENT="USER_LEAVING_EVENT",v.USER_CONNECTING_OTHER_EVENT="USER_CONNECTING_OTHER_EVENT",v))(),I=(()=>((I=I||{}).OFF="OFF",I.LOW="LOW",I.HIGH="HIGH",I))(),g=(()=>((g=g||{}).MODERATOR_INTERRUPT="MODERATOR_INTERRUPT",g.USER_INTERRUPT="USER_INTERRUPT",g))()},59600:(z,R,t)=>{t.d(R,{$Y:()=>v,AV:()=>m,D5:()=>u,E_:()=>h,Li:()=>e,Tt:()=>_,bh:()=>d,dk:()=>o,eV:()=>c,gC:()=>I,r8:()=>f,sb:()=>r,vs:()=>l,wd:()=>i,zU:()=>g});var e=(()=>((e=e||{}).SPEAKER_OTHER="SPEAKER_OTHER",e.RECORD_ACCESS="RECORD_ACCESS",e.DOWNLOAD_DOCUMENTS="DOWNLOAD_DOCUMENTS",e.UPLOAD_DOCUMENT="UPLOAD_DOCUMENT",e.BOARD_DRAWING="BOARD_DRAWING",e.CHAT_SEND_WITHOUT_PREMODERATION="CHAT_SEND_WITHOUT_PREMODERATION",e.POLLING_CREATION="POLLING_CREATION",e.INVITING_PARTICIPANTS="INVITING_PARTICIPANTS",e.MODERATOR_OTHER="MODERATOR_OTHER",e.SEND_REQUEST_REMOTE_ACCESS="SEND_REQUEST_REMOTE_ACCESS",e.DEMONSTRATE_DOCUMENTS="DEMONSTRATE_DOCUMENTS",e.PUBLISH_HTTP_REFERENCE_IN_CHAT="PUBLISH_HTTP_REFERENCE_IN_CHAT",e.PUBLISH_MESSAGES_IN_CHAT="PUBLISH_MESSAGES_IN_CHAT",e.DOWNLOAD_RECORD="DOWNLOAD_RECORD",e.DOWNLOAD_TRANSCRIPTION="DOWNLOAD_TRANSCRIPTION",e.RECEIVE_MEDIA="RECEIVE_MEDIA",e))(),h=(()=>((h=h||{}).ANYONE="ANYONE",h.INVITED_OR_REGISTERED="INVITED_OR_REGISTERED",h.INVITED="INVITED",h))(),_=(()=>((_=_||{}).DAILY="DAILY",_.WEEKLY="WEEKLY",_.MONTHLY="MONTHLY",_))(),i=(()=>((i=i||{}).SUNDAY="SUNDAY",i.MONDAY="MONDAY",i.TUESDAY="TUESDAY",i.WEDNESDAY="WEDNESDAY",i.THURSDAY="THURSDAY",i.FRIDAY="FRIDAY",i.SATURDAY="SATURDAY",i))();const f=[i.MONDAY,i.TUESDAY,i.WEDNESDAY,i.THURSDAY,i.FRIDAY],r=[i.MONDAY,i.TUESDAY,i.WEDNESDAY,i.THURSDAY,i.FRIDAY,i.SATURDAY,i.SUNDAY];var u=(()=>((u=u||{}).ALL_PARTICIPANTS="ALL_PARTICIPANTS",u.ONLY_MODERATORS="ONLY_MODERATORS",u))(),a=(()=>((a=a||{}).HIDE_HAND_UP="HIDE_HAND_UP",a.HIDE_POLL="HIDE_POLL",a.RECORD_AUTO_START="RECORD_AUTO_START",a.TRANSCRIBE_AT_START="TRANSCRIBE_AT_START",a.HIDE_DOCUMENTS="HIDE_DOCUMENTS",a.HIDE_WHITEBOARD="HIDE_WHITEBOARD",a.HIDE_DESKTOPSHARING="HIDE_DESKTOPSHARING",a.HIDE_RECORDING="HIDE_RECORDING",a.HIDE_TRANSCRIPTION="HIDE_TRANSCRIPTION",a.REQUIRE_RTMP_FOR_WEBINAR_VIEWERS="REQUIRE_RTMP_FOR_WEBINAR_VIEWERS",a.FORCE_STOP="FORCE_STOP",a.SIMULTANEOUS_INTERPRETATION="SIMULTANEOUS_INTERPRETATION",a.GROUPS="GROUPS",a.NOTIFICATION_CONNECTING_DISCONNECTING_PARTICIPANT="NOTIFICATION_CONNECTING_DISCONNECTING_PARTICIPANT",a))(),o=(()=>((o=o||{}).LOBBY_ROOM="LOBBY_ROOM",o.MUTE_EXTERNAL_NOTIFICATIONS="MUTE_EXTERNAL_NOTIFICATIONS",o.CLEAR_ROOM_RESOURCES_AFTER_PARTICIPANTS_EXIT="CLEAR_ROOM_RESOURCES_AFTER_PARTICIPANTS_EXIT",o.ALWAYS_SHOW_PARTICIPANT_IN_STAGE="ALWAYS_SHOW_PARTICIPANT_IN_STAGE",o.ACTIVE_SPEAKER_INDICATION="ACTIVE_SPEAKER_INDICATION",o.SELF_REGISTRATION="SELF_REGISTRATION",o.REACTIONS="REACTIONS",o))();const l={...a,...o},c=[l.SIMULTANEOUS_INTERPRETATION,l.LOBBY_ROOM,l.ALWAYS_SHOW_PARTICIPANT_IN_STAGE,l.GROUPS,l.ACTIVE_SPEAKER_INDICATION,l.REACTIONS,l.SELF_REGISTRATION],d=[l.SIMULTANEOUS_INTERPRETATION,l.LOBBY_ROOM,l.ALWAYS_SHOW_PARTICIPANT_IN_STAGE,l.GROUPS,l.ACTIVE_SPEAKER_INDICATION,l.CLEAR_ROOM_RESOURCES_AFTER_PARTICIPANTS_EXIT,l.REACTIONS,l.SELF_REGISTRATION];var v=(()=>((v=v||{}).DEFAULT="DEFAULT",v.WHITEBOARD_DEMONSTRATION="WHITEBOARD_DEMONSTRATION",v.DOCUMENT_DEMONSTRATION="DOCUMENT_DEMONSTRATION",v.SCREENSHARE_DEMONSTRATION="SCREENSHARE_DEMONSTRATION",v.VIDEOFILE_DEMONSTRATION="VIDEOFILE_DEMONSTRATION",v))(),I=(()=>((I=I||{}).NONE="NONE",I.AUDIO="AUDIO",I.VIDEO="VIDEO",I.AUDIO_VIDEO="AUDIO_VIDEO",I))(),m=(()=>((m=m||{}).WEB="WEB",m.VVoIP="VVoIP",m))(),g=(()=>((g=g||{}).SPEAKER="SPEAKER",g.SCREENSHARE="SCREENSHARE",g))()},94982:(z,R,t)=>{t.d(R,{F:()=>e,l:()=>s});var e=(()=>((e=e||{}).SPEAKER_OR_MODERATOR="SPEAKER_OR_MODERATOR",e.NOT_CONNECTED="NOT_CONNECTED",e.INVITED="INVITED",e.UNMAPPED_TO_GROUPS="UNMAPPED_TO_GROUPS",e))(),s=(()=>((s=s||{}).NAME="NAME",s.ROLE="ROLE",s))()},23726:(z,R,t)=>{t.d(R,{_:()=>e});var e=(()=>((e=e||{}).NAME="NAME",e.SIZE="SIZE",e.CHANGED_DATE="CHANGED_DATE",e))()},77323:(z,R,t)=>{t.d(R,{Mk:()=>f,bA:()=>s,oi:()=>h,vd:()=>_,wY:()=>e});var e=(()=>((e=e||{}).DOCUMENT="DOCUMENT",e.DIRECTORY="DIRECTORY",e))(),s=(()=>((s=s||{}).NOT_SUPPORTED="NOT_SUPPORTED",s.COMPLETED="COMPLETED",s.IN_PROGRESS="IN_PROGRESS",s.FAILED="FAILED",s))(),h=(()=>((h=h||{}).DOCUMENT="DOCUMENT",h.MESSAGE_ATTACHMENT="MESSAGE_ATTACHMENT",h.USER_LOGO="USER_LOGO",h.EVENT_LOGO="EVENT_LOGO",h.CONVERTED_PAGE="CONVERTED_PAGE",h.WHITEBOARD_IMAGE="WHITEBOARD_IMAGE",h.WHITEBOARD_BACKGROUND_IMAGE="WHITEBOARD_BACKGROUND_IMAGE",h.DOMAIN_LOGO="DOMAIN_LOGO",h.UNCOMMITTED_RESOURCE="UNCOMMITTED_RESOURCE",h.CHAT_LOGO="CHAT_LOGO",h.SYSTEM_RESOURCE="SYSTEM_RESOURCE",h.CRASH_REPORT="CRASH_REPORT",h.METADATA_RESOURCE="METADATA_RESOURCE",h.TRANSCRIPT="TRANSCRIPT",h.RECORD="RECORD",h))(),_=(()=>((_=_||{}).DOCUMENT="DOCUMENT",_.CONFERENCE="CONFERENCE",_.AVATAR="AVATAR",_.EVENT_LOGO="EVENT_LOGO",_.DOMAIN="DOMAIN",_.SYSTEM="SYSTEM",_.CHAT="CHAT",_.SITECALL="SITECALL",_))(),f=(()=>((f=f||{}).READ_ONLY="READ_ONLY",f.DOWNLOAD="DOWNLOAD",f.PUBLIC="PUBLIC",f))()},73400:(z,R,t)=>{t.d(R,{N:()=>e});var e=(()=>((e=e||{}).CALL_REQUEST="CALL_REQUEST",e))()},31652:(z,R,t)=>{t.d(R,{Ah:()=>_,JG:()=>g,KS:()=>E,_z:()=>p,bs:()=>I,dU:()=>S,f5:()=>d,ic:()=>n,qk:()=>r,tP:()=>l,vP:()=>h,vZ:()=>v,wH:()=>m});var e=t(87177),s=t(59600);const h="OWNER",_={[s.zU.SCREENSHARE]:"screenShareStreamInfo",[s.zU.SPEAKER]:"speakerStreamInfo"},i=[e.oG.ATTENDEE,e.oG.INTERPRETER,e.oG.SPEAKER,e.oG.MODERATOR],f=[{weigth:0,state:s.gC.NONE},{weigth:1,state:s.gC.VIDEO},{weigth:2,state:s.gC.AUDIO},{weigth:2,state:s.gC.AUDIO_VIDEO}];function r(P){return P?.webMediaInfo||P?.vvoipMediaInfo}function p(P,A){return r(P)?.[_[A]]}function o(P){return P.map(M=>i.indexOf(M)).sort((M,L)=>L-M)[0]??0}function l(P,A){return P===A.profileId?h:function a(P){const A=o(P);return A>0?i[A]:void 0}(A.roles)}function c(P,A){const M=l(P,A);return M===h?1/0:i.indexOf(M)}function d(P,A,M){const L=c(P,A),N=c(P,M);return void 0!==L&&void 0===N?-1:void 0===L&&void 0!==N?1:L===N?A.name>M.name?1:M.name>A.name?-1:0:N-L}function v(P,A){const M=o(A.roles)-o(P.roles);return 0===M?0:M/Math.abs(M)}function I(P,A){const M=C(A)-C(P);return 0===M?0:M/Math.abs(M)}function m(P,A){const M=+!!P.webMediaInfo?.handState;return+!!A.webMediaInfo?.handState-M}function g(P,A){return P.name>A.name?1:A.name>P.name?-1:0}function E(P,A){const N=(P.webMediaInfo?.createdDate||P.vvoipMediaInfo?.createdDate)-(A.webMediaInfo?.createdDate||A.vvoipMediaInfo?.createdDate);return N<0?1:N<0?-1:0}function n(P,A){return P.profileId<A.profileId?1:A.profileId>P.profileId?-1:0}function S(P,A){const M=[...P];return M.sort((L,N)=>{for(const W of A){const b=W(L,N);if(0!==W(L,N))return b}return 0}),M}function C(P){const A=function T(P){const A=[s.gC.AUDIO_VIDEO,s.gC.AUDIO].includes(P.vvoipMediaInfo?.speakerStreamInfo.state||P.webMediaInfo?.speakerStreamInfo.state),M=[s.gC.AUDIO_VIDEO,s.gC.VIDEO].includes(P.vvoipMediaInfo?.speakerStreamInfo.state||P.webMediaInfo?.speakerStreamInfo.state),L=[s.gC.AUDIO_VIDEO,s.gC.AUDIO].includes(P.mediaState),N=[s.gC.AUDIO_VIDEO,s.gC.VIDEO].includes(P.mediaState);return A&&L&&(!M||!N)?s.gC.AUDIO:M&&N&&(!A||!L)?s.gC.VIDEO:A&&L&&M&&N?s.gC.AUDIO_VIDEO:s.gC.NONE}(P);return f.find(M=>M.state===A)?.weigth||0}},68053:(z,R,t)=>{t.d(R,{J:()=>e});var e=(()=>((e=e||{}).LIKE="LIKE",e.DISLIKE="DISLIKE",e.QUESTION="QUESTION",e.FIRE="FIRE",e))()},27944:(z,R,t)=>{t.d(R,{C:()=>s,w:()=>e});var e=(()=>((e=e||{}).TEXT="TEXT",e.ELLIPSE="ELLIPSE",e.RECTANGLE="RECTANGLE",e.IMAGE="IMAGE",e))(),s=(()=>((s=s||{}).ADD="ADD",s.DELETE="DELETE",s.CHANGE="CHANGE",s))()},3178:(z,R,t)=>{t.d(R,{h:()=>e});var e=(()=>((e=e||{})[e.CONTACT_INFO=0]="CONTACT_INFO",e[e.SEARCH_CONTACT=1]="SEARCH_CONTACT",e[e.CREATE_CONTACT=2]="CREATE_CONTACT",e))()},23e3:(z,R,t)=>{t.d(R,{x:()=>e});var e=(()=>((e=e||{}).FOREIGN_CONTACT="FOREIGN_CONTACT",e.COMPANY_CONTACT="COMPANY_CONTACT",e.NOTE_CONTACT="NOTE_CONTACT",e.DIRECTORY_USER="DIRECTORY_USER",e.DOMAIN_USER="DOMAIN_USER",e.GUEST_USER="GUEST_USER",e.CHAT_BOT="CHAT_BOT",e))()},95525:(z,R,t)=>{t.d(R,{q:()=>s});var e=t(76133);const s=[{title:"SIMULTANEOUS_INTERPRETATION.LANGUAGES.ORIGINAL",language:e.S.ORIGINAL,icon:"assets/icons/icon24/planet.svg"},{title:"SIMULTANEOUS_INTERPRETATION.LANGUAGES.RUSSIAN",language:e.S.RUSSIAN,icon:"assets/icons/icon24/flags/russian.svg"},{title:"SIMULTANEOUS_INTERPRETATION.LANGUAGES.ENGLISH",language:e.S.ENGLISH,icon:"assets/icons/icon24/flags/english.svg"},{title:"SIMULTANEOUS_INTERPRETATION.LANGUAGES.FRENCH",language:e.S.FRENCH,icon:"assets/icons/icon24/flags/french.svg"},{title:"SIMULTANEOUS_INTERPRETATION.LANGUAGES.DEUTSCH",language:e.S.DEUTSCH,icon:"assets/icons/icon24/flags/deutsch.svg"},{title:"SIMULTANEOUS_INTERPRETATION.LANGUAGES.SPANISH",language:e.S.SPANISH,icon:"assets/icons/icon24/flags/spanish.svg"},{title:"SIMULTANEOUS_INTERPRETATION.LANGUAGES.PORTUGUESE",language:e.S.PORTUGUESE,icon:"assets/icons/icon24/flags/portuguese.svg"},{title:"SIMULTANEOUS_INTERPRETATION.LANGUAGES.ITALIAN",language:e.S.ITALIAN,icon:"assets/icons/icon24/flags/italian.svg"},{title:"SIMULTANEOUS_INTERPRETATION.LANGUAGES.TURKISH",language:e.S.TURKISH,icon:"assets/icons/icon24/flags/turkish.svg"},{title:"SIMULTANEOUS_INTERPRETATION.LANGUAGES.ARABIC",language:e.S.ARABIC,icon:"assets/icons/icon24/flags/arabic.svg"},{title:"SIMULTANEOUS_INTERPRETATION.LANGUAGES.HEBREW",language:e.S.HEBREW,icon:"assets/icons/icon24/flags/hebrew.svg"},{title:"SIMULTANEOUS_INTERPRETATION.LANGUAGES.HINDI",language:e.S.HINDI,icon:"assets/icons/icon24/flags/hindi.svg"},{title:"SIMULTANEOUS_INTERPRETATION.LANGUAGES.CHINESE",language:e.S.CHINESE,icon:"assets/icons/icon24/flags/chinese.svg"},{title:"SIMULTANEOUS_INTERPRETATION.LANGUAGES.JAPANESE",language:e.S.JAPANESE,icon:"assets/icons/icon24/flags/japanese.svg"},{title:"SIMULTANEOUS_INTERPRETATION.LANGUAGES.KOREAN",language:e.S.KOREAN,icon:"assets/icons/icon24/flags/korean.svg"}]},46554:(z,R,t)=>{t.d(R,{I:()=>e});var e=(()=>((e=e||{}).MIN_LENGTH="MIN_LENGTH",e.MAX_LENGTH="MAX_LENGTH",e.CLASSES="CLASSES",e.UPPER_LETTERS="UPPER_LETTERS",e.LOWER_LETTERS="LOWER_LETTERS",e.DIGITS="DIGITS",e.OTHER_SYMBOLS="OTHER_SYMBOLS",e.REPEAT_SYMBOLS="REPEAT_SYMBOLS",e.PREVIOUS_PASS_SYMBOLS="PREVIOUS_PASS_SYMBOLS",e.PALINDROME="PALINDROME",e.PREVIOUS_PASS_HISTORY="PREVIOUS_PASS_HISTORY",e.NUMBER_OF_ATTEMPTS_EXCEEDED="NUMBER_OF_ATTEMPTS_EXCEEDED",e))()},42827:(z,R,t)=>{t.d(R,{Y:()=>e});var e=(()=>((e=e||{}).CONFERENCE_ONLINE="CONFERENCE_ONLINE",e.CONFERENCE_OFFLINE="CONFERENCE_OFFLINE",e.IN_CALL="IN_CALL",e.IN_EVENT="IN_EVENT",e.ONLINE="ONLINE",e.OFFLINE="OFFLINE",e.UNKNOWN="UNKNOWN",e.NONE="NONE",e.BOT="BOT",e))()},76133:(z,R,t)=>{t.d(R,{S:()=>e});var e=(()=>((e=e||{}).ORIGINAL="ORIGINAL",e.RUSSIAN="RUSSIAN",e.ENGLISH="ENGLISH",e.FRENCH="FRENCH",e.DEUTSCH="DEUTSCH",e.SPANISH="SPANISH",e.PORTUGUESE="PORTUGUESE",e.ITALIAN="ITALIAN",e.TURKISH="TURKISH",e.ARABIC="ARABIC",e.HEBREW="HEBREW",e.HINDI="HINDI",e.CHINESE="CHINESE",e.JAPANESE="JAPANESE",e.KOREAN="KOREAN",e))()},72556:(z,R,t)=>{t.d(R,{A:()=>e});var e=(()=>((e=e||{}).NAME="NAME",e.SIZE="SIZE",e.CREATION_DATE="CREATION_DATE",e))()},37569:(z,R,t)=>{t.d(R,{Dg:()=>e,W6:()=>i,js:()=>s});var e=(()=>((e=e||{}).RTMP="RTMP",e.WEBRTC="WEBRTC",e.SIP="SIP",e.H323="H323",e.S4B="S4B",e.RTSP="RTSP",e))(),s=(()=>((s=s||{}).LOWEST="LOWEST",s.LOW="LOW",s.NORMAL="NORMAL",s.FINE="FINE",s.FINEST="FINEST",s))(),i=(()=>((i=i||{}).DEFAULT="DEFAULT",i.ALTERNATIVE1="ALTERNATIVE1",i.ALTERNATIVE2="ALTERNATIVE2",i))()},37399:(z,R,t)=>{t.d(R,{Ak:()=>i,PJ:()=>h,uy:()=>e});var e=(()=>((e=e||{}).ADMIN="ADMIN",e.SUPER_ADMIN="SUPER_ADMIN",e.USER="USER",e.OPERATOR="OPERATOR",e.ADMIN_IVCS="ADMIN_IVCS",e.DOMAIN_ADMIN="DOMAIN_ADMIN",e.SECURITY_SERVICE="SECURITY_SERVICE",e.CHIEF_OPERATOR="CHIEF_OPERATOR",e.CHIEF_SYSTEM_ADMINISTRATOR="CHIEF_SYSTEM_ADMINISTRATOR",e))(),h=(()=>((h=h||{}).PUBLIC="PUBLIC",h.AUTHORIZED="AUTHORIZED",h.NOBODY="NOBODY",h))(),i=(()=>((i=i||{}).INSTANT_MESSAGING="INSTANT_MESSAGING",i))()},1349:(z,R,t)=>{t.d(R,{QM:()=>m,ik:()=>g});var e=t(54355),s=t(52249),h=t(93433),_=t(86204),i=t(33170),f=t(911),r=t(9112),p=t(88002),u=t(84680),a=t(6190);const d="dayName",v={default:{en:"MM.dd",ru:"dd.MM"},expanded:{en:"MMM d",ru:"d MMM"},full:{en:"MM.dd.yyyy",ru:"dd.MM.yyyy"},short:{en:"d MMM",ru:"d MMM"}},I={default:"HH:mm",expanded:"HH:mm:ss",full:"HH:mm:ss:ddd",shortTime:"shortTime",longTime:"longTime"},m=new e.OlP("TIMEZONE_PROXY");let g=(()=>{class n{constructor(C,T,P){this.timezoneProxy=C,this.localeService=T,this.translate=P}transform(C,T="",P={}){return(0,r.aj)([this.timezoneProxy.timezone$,this.localeService.currentDateFnsLocale$,this.localeService.currentLocale$]).pipe((0,p.U)(([A,M])=>this.doTransform(M,A,C,T,P)))}transformInstant(C,T,P={}){return this.doTransform(this.localeService.currentDateFnsLocale$.value,this.timezoneProxy.timezone$.value,C,T,P)}generateDateMask(C,T){return"ru"===C?v[T].ru:v[T].en}generateTimeMask(C,T){if("shortTime"===C||"longTime"===C){const P=f.IjF.createDate(T);return this.getTranslatedTime(P.hours,P.minutes,C)}return I[C]}getTranslatedTime(C,T,P){let A,M;return"shortTime"===P?(A=this.translate.instant("HOURS_SHORT"),M=this.translate.instant("MINUTES_SHORT"),`'${C} ${A} ${T} ${M}'`):"longTime"===P?(A=this.translate.instant("HOURS",{hours:C}),M=this.translate.instant("MINUTES",{minutes:T}),`'${A} ${M}'`):""}generateMask(C,T,P,A){let M="";return P&&(M+=this.generateDateMask(C?.code,P)),A&&("number"==typeof T&&(T=new Date(T)),M+=` ${this.generateTimeMask(A,T)}`),M}doTransform(C,T,P,A="",M={}){if(null==P)return null;f.IjF.setTargetTimezoneOffset(T.offset);const L=f.IjF.createDate(P),N=f.IjF.toUtcDate(L),W=this.getDayName(L??P);return M.replaceWithDayName&&W?W:(A||!M.dateFormat&&!M.timeFormat?(A=function E(n,S,C){return n=new Date(n),(0,h.Z)(n)&&C.todayFormat?C.todayFormat:(0,_.Z)(n)&&C.yesterdayFormat?C.yesterdayFormat:(0,i.Z)(n)&&C.tomorrowFormat?C.tomorrowFormat:(0,f.lLz)(n)&&C.currentYearFormat?C.currentYearFormat:S}(N,A,M),A.includes(d)&&(A=A.replace(d,`'${W}'`))):A=this.generateMask(C,P,M.dateFormat,M.timeFormat),(0,s.Z)(f.IjF.toDate(f.IjF.createDate(N+(new Date).getTimezoneOffset()*f.wnR)),A,{locale:C}))}getDayName(C){const T=f.IjF.createDate(C);return f.IjF.isToday(T)?this.translate.instant("TODAY"):f.IjF.isYesterday(T)?this.translate.instant("YESTERDAY"):f.IjF.isTomorrow(T)?this.translate.instant("TOMORROW"):""}}return n.\u0275fac=function(C){return new(C||n)(e.Y36(m,16),e.Y36(u.OL,16),e.Y36(a.sK,16))},n.\u0275pipe=e.Yjl({name:"formatDate",type:n,pure:!0}),n})()},51468:(z,R,t)=>{t.d(R,{JJ:()=>o});var e=t(88002),s=t(911),h=t(52249),_=t(54355),i=t(84680),f=t(6190);const r="longDateTime",p="shortDateTime",u="longTime",a="shortTime";let o=(()=>{class l{get locale(){return this.localeService.currentDateFnsLocale$.value}get locale$(){return this.localeService.currentDateFnsLocale$.asObservable()}constructor(d,v){this.localeService=d,this.translate=v}transform(d,v,I){if(null==d)return;const m=this.getDate(d,v);switch(I){case r:return this.locale$.pipe((0,e.U)(()=>this.getLongDateTime(m)));case p:return this.locale$.pipe((0,e.U)(()=>this.getShortDateTime(m)));case u:return this.locale$.pipe((0,e.U)(()=>this.getLongTime(m)));case a:return this.locale$.pipe((0,e.U)(()=>this.getShortTime(m)));default:return this.locale$.pipe((0,e.U)(g=>this.formatDate(m.originalTimestamp,I,g)))}}transformInstant(d,v,I){if(null==d)return;const m=this.getDate(d,v);switch(I){case r:return this.getLongDateTime(m);case p:return this.getShortDateTime(m);case u:return this.getLongTime(m);case a:return this.getShortTime(m);default:return this.formatDate(m.originalTimestamp,I)}}formatDate(d,v,I){const m=new Date(d);m.setTime(m.getTime()+m.getTimezoneOffset()*s.wnR);const g=new UtcDate(m);return(0,h.Z)(g,v,{locale:I})}getDate(d,v){let I;switch(v){case"h":I=d*s.ZC3;break;case"m":I=d*s.wnR;break;case"s":I=d*s.cK$;break;case"ms":I=d}return{days:Math.floor(I/36e5/24),hours:Math.floor(I/36e5%24),minutes:Math.floor(I/1e3/60%60),seconds:Math.floor(I/1e3%60),originalTimestamp:I}}getLongDateTime(d){const v=d.days,I=d.hours,m=d.minutes;return`${v?this.translate.instant("DAYS",{days:v}):""} ${I?this.translate.instant("HOURS",{hours:I}):""} ${m?this.translate.instant("MINUTES",{minutes:m}):""}`}getShortDateTime(d){const v=this.translate.instant("DAYS_SHORT"),I=d.days,m=I?`${I} ${v}`:"",g=this.translate.instant("HOURS_SHORT"),E=d.hours,n=E?`${E} ${g}`:"",S=this.translate.instant("MINUTES_SHORT");return`${m} ${n} ${d.minutes?`${d.minutes} ${S}`:""}`}getLongTime(d){const v=this.getAllHours(d),I=d.minutes;return`${v?this.translate.instant("HOURS",{hours:v}):""} ${I?this.translate.instant("MINUTES",{minutes:I}):""}`}getShortTime(d){const v=this.translate.instant("HOURS_SHORT"),I=this.getAllHours(d),m=I?`${I} ${v}`:"",g=this.translate.instant("MINUTES_SHORT");return`${m} ${d.minutes?`${d.minutes} ${g}`:""}`}getAllHours(d){return d.hours+24*d.days}}return l.\u0275fac=function(d){return new(d||l)(_.Y36(i.OL,16),_.Y36(f.sK,16))},l.\u0275pipe=_.Yjl({name:"formatDuration",type:l,pure:!0}),l})()},29514:(z,R,t)=>{t.d(R,{_:()=>r});var e=t(26215),s=t(8040);const _={EXPERIMENTAL_FEATURES:!1,HAPPY_NEW_YEAR:void 0,EMBED_CONFERENCE:!0,SHOW_NAVIGATION_MENU_WHEN_CONFERENCE_IN_WIDE_MODE:!1,SHOW_PIP_MODE_FOR_CONFERENCE_COLLAPSE:!1,CHECK_BROWSER_SUPPORT:!0,LOG_ENABLED:!1,WEBRTC_CLIENT_LOG_ENABLED:!1,IGNORE_UDP_ICE_CANDIDATES:!1,IGNORE_LOG_FOR_MESSAGES:["ParticipantSoundActivityChangeEvent","ClusterUsageChangedEvent","Heartbeat","LicenseUsageChangedEvent","SystemAlertsCounterChangedEvent"],SESSION_ID_COOKIE_NAME:"su.ivcs.session",LOGIN_TOKEN_COOKIE_NAME:"loginTokenId",AUTH_TOKEN_COOKIE_NAME:"AU_TOK",SID_TOKEN_COOKIE_NAME:"SID_TOK",USER_INFO_LOCAL_STORAGE_NAME:"userInfo",HEARTBEAT_RECONNECT_INTERVAL_MS:3e4,COMET_MAX_RECONNECT_INTERVAL_MS:1e4,COMET_RECONNECT_RANDOM_INTERVAL_START_MS:0,COMET_RECONNECT_RANDOM_INTERVAL_STOP_MS:1e3,COMET_RECONNECT_INTERVAL_STEP_MS:1e3,SYSTEM_SETTINGS_KEY_WEBRTC_CANDIDATE_DISCOVERY_TIMEOUT:"WEBRTC_CANDIDATE_DISCOVERY_TIMEOUT",WEBRTC_CANDIDATE_DISCOVERY_TIMEOUT_DEFAULT:1e3,WEBRTC_RECONNECT_TIMOUT_MS:1e3,WEBRTC_CAMERA_EXPECTED_ASPECT_RATIO:1.77777778,WEBRTC_FETCH_STATISTICS_INTERVAL_MS:1e3,MS_IN_SECOND:1e3,SEC_IN_MIN:60,CONFERENCE_TIMER_UPDATE_INTERVAL_MS:3e4,HEADER_FOOTER_HIDE_INTERVAL_MS:3e3,MOUSE_MOVE_THROTTLE_MS:100,INPUT_THROTTLE_MS:300,LOCAL_SEARCH_INPUT_THROTTLE_MS:100,AUDIO_VOLUME_FETCH_THROTTLE_MS:200,RESIZE_THROTTLE_MS:100,VIDEO_PLAYER_SEEK_THROTTLE_MS:100,VIDEO_PLAYER_FETCH_PROGRESS_UPDATE_INTERVAL_MS:500,VIDEO_PLAYER_PREVIEW_WIDTH:100,VIDEO_PLAYER_DEFAULT_VOLUME:.5,VIDEO_PLAYER_KEYDOWN_THROTTLE_MS:200,VIDEO_PLAYER_HIDE_CONTROL_PANEL_TIMEOUT_MS:3e3,MIN_PIP_DOCUMENT_FACTOR:.2,SYSTEM_SETTINGS_KEY_SHOW_CONFERENCE_DESCRIPTION:"UI_CONFERENCE_DESCRIPTION",SYSTEM_SETTINGS_KEY_PASS_CRACKING_PROTECTION_PERIOD:"PASS_CRACKING_PROTECTION_PERIOD",SYSTEM_SETTINGS_KEY_MAX_UPLOAD_FILE_SIZE_IN_MB:"MAX_UPLOAD_FILE_SIZE_IN_MB",CONFERENCE_CHAT_PAGE_SIZE:50,CONFERENCE_CHAT_STORE_LIMIT:1e3,CONFERENCE_CHAT_SEND_TYPING_INTERVAL_MS:4500,CONFERENCE_CHAT_SHOW_TYPING_INTERVAL_MS:5200,CONFERENCE_CHAT_MAX_MESSAGE_LENGTH:2048,CONFERENCE_CHAT_MAX_MESSAGE_TOOLTIP_SHOW_INTERVAL_MS:2e3,CONFERENCE_CHAT_AVATAR_SIZE_FACTOR:3,CONFERENCE_CHAT_MODERATION_REJECT_MESSAGE_CANCEL_INTERVAL_MS:3e3,CONFERENCE_SESSION_ADD_PARTICIPANTS_CHUNK_SIZE:500,CONFERENCE_SESSION_ADD_PARTICIPANTS_LIMIT:300,CONFERENCE_SESSION_ADD_PARTICIPANTS_LIMIT_WARNING:250,CONFERENCE_SESSION_PARTICIPANT_LIST_PAGE_SIZE:50,CONFERENCE_SESSION_PARTICIPANT_LIST_PARTICIPANT_SETTINGS_UPDATE_INTERVAL_MS:1e3,CONFERENCE_SESSION_PARTICIPANT_LIST_SETTINGS_UPDATE_INTERVAL_MS:1500,CONFERENCE_SESSION_TRANSLATE_AUDIO_SEPARATELY:!0,CONFERENCE_SESSION_PASSCODE_MIN_LENGTH:4,CONFERENCE_SESSION_PASSCODE_MAX_LENGTH:8,CONFERENCE_SESSION_PASSCODE_REGEXP:"^d+$",CONFERENCE_SESSION_PASSCODE_KEY_REGEXP:"^d+$",CONFERENCE_SESSION_CONFERENCE_NUMBER_PARTS_LENGTH:3,CONFERENCE_SESSION_FILES_LIST_PAGE_SIZE:20,CONFERENCE_SESSION_FILES_CAN_UPLOAD_FAKE_UPLOAD_INTERVAL_MS:300,CONFERENCE_SESSION_FILES_MAX_AMOUNT_ON_MULTI_UPLOAD:10,CONFERENCE_SESSION_FILES_DEMONSTRABLE_COUNT:11,CONFERENCE_SESSION_FILES_DEMONSTRABLE_ACCEPT_STRINGS:["image/gif","image/pjpeg","image/jpeg","image/png","image/apng","image/bmp","video/*","audio/*","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain","application/rtf","application/x-rtf","text/richtext","application/mspowerpoint","application/powerpoint","application/vnd.ms-powerpoint","application/x-mspowerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/excel","application/vnd.ms-excel","application/x-excel","application/x-msexcel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.oasis.opendocument.text"],MAX_UPLOAD_FILES_AMOUNT_PER_SESSION:20,CONFERENCE_SESSION_FILES_IMAGE_REGEXES:["^image/(gif|pjpeg|jpeg|png|apng|bmp)$"],CONFERENCE_SESSION_FILES_VIDEO_REGEXES:["^video/.+$"],CONFERENCE_SESSION_FILES_AUDIO_REGEXES:["^audio/.+$"],CONFERENCE_SESSION_FILES_APPLICATION_REGEXES:["^application/octet-stream$","^application/x-dosexec$"],CONFERENCE_SESSION_FILES_DOCUMENT_REGEXES:["^application/pdf$","^application/msword$","^application/vnd.openxmlformats-officedocument.wordprocessingml.document$","^text/plain$","^application/rtf$","^application/x-rtf$","^text/richtext$","^application/mspowerpoint$","^application/powerpoint$","^application/vnd.ms-powerpoint$","^application/x-mspowerpoint$","^application/vnd.openxmlformats-officedocument.presentationml.presentation$","^application/excel$","^application/vnd.ms-excel$","^application/x-excel$","^application/x-msexcel$","^application/vnd.openxmlformats-officedocument.spreadsheetml.sheet$","^application/vnd.oasis.opendocument.text$"],CONFERENCE_SESSION_FILES_FILE_CHUNK_UPLOAD_ATTEMPTS:3,CONFERENCE_SESSION_FILES_FILE_CHUNK_SIZE_BYTES:524288,CONFERENCE_SESSION_FILES_MAX_LAST_SHOWN_UPLOADS:3,CONFERENCE_SESSION_SMALL_SCREEN_WIDTH:720,CONFERENCE_SESSION_SMALL_CONFERENCE_CENTER_PANEL_WIDTH:720,CONFERENCE_SESSION_SMALL_CONFERENCE_RIGHT_PANEL_WIDTH:950,CONFERENCE_SESSION_FORWARD_INTERVAL_S:10,CONFERENCE_SESSION_RECONNECT_WHEN_NO_ICE_CANDIDATES_FOUND:!1,CONFERENCE_SESSION_STOP_WHEN_NO_ICE_CANDIDATES_FOUND:!1,CONFERENCE_HEADER_TITLE_MAX_LENGTH:500,CONFERENCE_FILE_NAME_MIN_LENGTH:1,CONFERENCE_FILE_NAME_MAX_LENGTH:255,CONFERENCE_FILE_NAME_VALIDATION_TOOLTIP_SHOW_INTERVAL_MS:3e3,CONFERENCE_FILE_DEMONSTRATION_POINTER_POSITION_UPDATE_THROTTLE_MS:500,VERSION_CHECKING_INTERVAL_S:1800,TIME_TO_APPLY_NEW_VERSION_S:10,TOASTR_TIMEOUT_MS:7e3,TOASTR_EXTENDED_TIMEOUT_MS:3e3,DOCUMENT_VIEWER_ZOOM_STEPS:[.1,.25,.5,.75,1,1.25,1.5,2,3,5,7,10],FILES_ICON_REGEXES_MAP:{acrobat:"^application/pdf$",archive:"application/(x-rar-compressed|x-7z-compressed|zip)$",audio:"^audio/.*$",doc:["^text/plain$","^application/(msword|vnd.openxmlformats-officedocument.wordprocessingml.document|plain|rtf|x-rtf|richtext)$"],html:"^text/html$",image:"^image/.*$",ppt:"^application/(mspowerpoint|powerpoint|vnd.ms-powerpointx-mspowerpoint|vnd.openxmlformats-officedocument.presentationml.presentation)$",video:"^video/.*$",xls:"^application/(excel|vnd.ms-excel|x-excel|x-msexcel|vnd.openxmlformats-officedocument.spreadsheetml.sheet)$"},DOCUMENT_CONVERTED_PAGES_REQUEST_LIMIT:100,LANDING_PAGE_CAROUSEL_PARTICIPANTS_LIMIT:10,LANDING_PAGE_PUBLIC_PARTICIPANTS_LIMIT:20,LANDING_PAGE_PREVIEW_FILES_LIMIT:10,LANDING_PAGE_PUBLIC_FILES_LIMIT:20,MAIN_SPINNER_SHOW_INTERVAL_MS:500,CONFERENCES_PAGE_SIZE:30,CONFERENCES_PARTICIPANTS_LIST_PAGE_SIZE:30,CONFERENCES_FS_ITEMS_PAGE_SIZE:30,CONFERENCES_PAGE_HIDE_TOP_CONFERENCE_INTERVAL_MS:1500,CONFERENCES_PAGE_PERIODICAL_CONFERENCES_FETCH_LIMIT:100,CONFERENCES_PAGE_SCROLL_NEAR_BY_NOW_CONFERENCE_THRESHOLD_ITEMS_COUNT:2,CONFERENCE_DRAFT_TIME_PRESET_STEP_MIN:15,CONFERENCE_DRAFT_MIN_DURATION_S:300,EXTRA_SMALL_SCREEN_WIDTH:720,SMALL_SCREEN_WIDTH:960,SMALL_MEDIUM_SCREEN_WIDTH:1024,MEDIUM_SCREEN_WIDTH:1280,LARGE_SCREEN_WIDTH:1920,ROOMS_PAGE_SCROLL_TO_TOP_THRESHOLD_ITEMS_COUNT:2,MEDIA_DEVICE_CHANGE_THROTTLE_MS:1e3,PROFILE_AVATAR_UPLOAD_ALLOWED_MIME_TYPES_REGEXES:["^image/(pjpeg|jpeg|png|apng)$"],PROFILE_AVATAR_UPLOAD_ALLOWED_ACCEPT_STRINGS:["image/pjpeg","image/jpeg","image/png","image/apng"],CONFERENCE_DRAFT_PREVIEW_IMAGE_ALLOWED_MIME_TYPES_REGEXES:["^image/(pjpeg|jpeg|png|bmp)$"],CONFERENCE_DRAFT_PREVIEW_IMAGE_ALLOWED_ACCEPT_EXTENSIONS:["image/pjpeg","image/jpeg","image/png","image/bmp"],CONFERENCE_DRAFT_PREVIEW_IMAGE_ALLOWED_WIDTH_HEIGHT:{WIDTH:2048,HEIGHT:2048},SYSTEM_SETTINGS_KEY_WEBRTC_SIMULCAST:"WEBRTC_SIMULCAST",SYSTEM_SETTINGS_KEY_MIN_PASSWORD_LENGTH:"MIN_PASSWORD_LENGTH",ADAPTIVE_PAGE_URL_PREFIXES:["/login","/join"],CONTACTS_PAGE_SIZE:50,CONTACTS_INVITATIONS_PAGE_SIZE:20,CONTACTS_PRESENCES_PAGE_SIZE:1e3,MIN_CONTACT_REQUESTS_SHOWN_COUNT:4,CONFERENCE_EDIT_DRAFT_FETCH_ALL_PARTICIPANTS_PAGE_SIZE:200,CONFERENCE_DRAFT_LOCAL_STORE_NAME:"CONFERENCE_DRAFT",CONFERENCE_EDIT_DRAFT_LOCAL_STORE_NAME:"CONFERENCE_EDIT_DRAFT",ROOM_DRAFT_LOCAL_STORE_NAME:"ROOM_DRAFT",ROOM_EDIT_DRAFT_LOCAL_STORE_NAME:"ROOM_EDIT_DRAFT",CONFERENCE_CALLING_INTERVAL_S:30,CONFERENCE_CALLING_VOLUME_CHANGE_INTERVAL_MS:10,CONFERENCE_CALLING_VOLUME_CHANGE_STEP:.001,CONFERENCE_CALLING_START_VOLUME:.1,CONFERENCE_CALLING_END_VOLUME:1,HAPPY_NEW_YEAR_START_DAY:1,HAPPY_NEW_YEAR_START_MONTH:12,HAPPY_NEW_YEAR_END_DAY:5,HAPPY_NEW_YEAR_END_MONTH:1,HAPPY_NEW_YEAR_CHECK_INTERVAL_S:120,CONFERENCE_NOTIFICATIONS_ENABLED:!1,DEFAULT_NOTIFICATIONS_COUNT:3,DEFAULT_NOTIFICATION_LIFETIME_MS:5e3,DEFAULT_REACTION_LIFETIME_MS:3e3,SYSTEM_NOTIFICATION_SHOWTIME_MS:3e3,REPORTS_ROWS_PER_PAGE:[10,25,50],CONFERENCE_SESSION_ALLOWED_TIME_TO_START_MIN:30,CONFERENCE_SESSION_RESET_SOUND_ACTIVITY_INTERVAL_MS:1200,DEFAULT_FLV_BUFFER_SIZE_MS:1e3,FLV_RECONNECT_INTERVAL_MS:500,SHOW_FLV_STATS:!1,SHOW_FLV_STATS_THROTTLE_MS:1e3,DEMONSTRATE_VIDEO_CURRENT_TIME_UPDATE_INTERVAL_MS:500,DEFAULT_AVATARS_COLOR_ALGORITHM:t(13963).C.MD5,CONFERENCE_SESSION_VIDEO_FILES_DEMONSTRABLE_ACCEPT_EXTENSIONS:["mkv","mov","avi","mp4","flv","3gp"],CONFERENCE_SESSION_VIDEO_FILES_DEMONSTRABLE_ACCEPT_MIME_TYPES:["video/x-matroska","video/quicktime","video/x-msvideo","video/mp4","video/x-flv","video/3gpp"],CONFERENCE_SESSION_CONNECT_MAIN_MEDIA:!0,PARTICIPANTS_GROUPS_DURATION_START_IN_MIN:1,PARTICIPANTS_GROUPS_CREATE_DURATION_START_IN_MIN:5,PARTICIPANTS_GROUPS_DURATION_END_IN_MIN:60,PARTICIPANTS_GROUPS_CREATE_DURATION_END_IN_MIN:120,PARTICIPANTS_GROUPS_DURATION_STEP_IN_MIN:5,PARTICIPANTS_GROUPS_DEFAULT_DURATION_IN_MIN:15,PARTICIPANTS_GROUPS_DEFAULT_DURATION_IN_MS:9e5,PARTICIPANTS_GROUPS_MIN_ADDITIONAL_DURATION_IN_MS:6e4,PARTICIPANTS_GROUPS_MIN_START_DURATION_IN_MS:3e5,PARTICIPANTS_GROUPS_MAX_ADDITIONAL_DURATION_IN_MS:36e5,PARTICIPANTS_GROUPS_MAX_DURATION_IN_MS:72e5,PARTICIPANTS_GROUPS_MIN_GROUP_NAME_LENGTH:1,PARTICIPANTS_GROUPS_MAX_GROUP_NAME_LENGTH:255,PARTICIPANTS_GROUPS_MAX_GROUPS_AMOUNT:50,PARTICIPANTS_GROUPS_PARTICIPANTS_PAGE_AMOUNT:200,PARTICIPANTS_GROUPS_LOADING_INTERVAL:10,PARTICIPANTS_GROUPS__DEFAULT_GROUPS_COUNT:3,CONFERENCE_SESSION_WHITEBOARD_BOOK_PAGE_SIZE:50,CONFERENCE_SESSION_WHITEBOARD_BOOK_PAGES_PAGE_SIZE:50,CONFERENCE_SESSION_WHITEBOARD_MAX_ZOOM_PERCENT:1e3,CONFERENCE_SESSION_WHITEBOARD_MIN_ZOOM_PERCENT:100,CONFERENCE_SESSION_WHITEBOARD_ZOOM_STEP:.25,CONFERENCE_SESSION_WHITEBOARD_MAX_BOOK_NAME_LENGTH:255,CONFERENCE_SESSION_WHITEBOARD_ELEMENT_CHANGED_DEBOUNCE_MS:100,CONFERENCE_SESSION_WHITEBOARD_FETCH_PAGE_SHAPES_DELAY_MS:300,CONFERENCE_SESSION_WHITEBOARD_VIEWPORT_CHANGED_DEBOUNCE_MS:300,CONFERENCE_SESSION_WHITEBOARD_IMAGE_ACCEPT_STRINGS:["image/gif","image/pjpeg","image/jpeg","image/png","image/apng","image/bmp"],CONFERENCE_SESSION_INQUIRIES_PAGE_SIZE:20,SYSTEM_SETTINGS_KEY__DEFAULT_PROFILE_WEBRTC:"DEFAULT_PROFILE_WEBRTC",STORAGE_MANAGEMENT_FILES_LIST_PAGE_SIZE:50,CHAT_MAX_MESSAGE_LENGTH:2e3,CHAT_MAX_NAME_LENGTH:1024,CHAT_TIME_GAP_BETWEEN_MESSAGES_IN_MONOLOG:3e5,CHAT_MESSAGE_EDIT_TIME_LIMIT:36e5,CHAT_PARTICIPANTS_LIMIT:256,CHAT_MESSAGES_OFFSET:50,MAX_VISIBLE_MESSAGES_COUNT:100,MAX_STORED_MESSAGES_COUNT:200,MAX_LOADED_MESSAGES_FROM_STORE:50,CONFERENCE_SESSION_SHOW_VIRTUAL_BACKGROUND_DEBUG_VIEW:!1,CONFERENCE_SESSION_SHOW_VIRTUAL_BACKGROUND_SEGMENTATION_WIDTH:256,CONFERENCE_SESSION_SHOW_VIRTUAL_BACKGROUND_SEGMENTATION_HEIGHT:144,CONFERENCE_SESSION_VIRTUAL_BG_IMAGE_ACCEPT_STRINGS:["image/gif","image/pjpeg","image/jpeg","image/png","image/apng","image/bmp"],CONFERENCE_SESSION_VIRTUAL_BG_BLUR_RADIUS_PX:16,CONFERENCE_SESSION_VIRTUAL_BG_IMG_RESIZE_QUALITY:.7,CONFERENCE_SESSION_VIRTUAL_BG_IMG_RESIZE_MAX_HEIGHT_PX:450,CONFERENCE_SESSION_VIRTUAL_BG_IMG_RESIZE_MAX_WIDTH_PX:800,CONFERENCE_SESSION_VIRTUAL_BG_IMG_MAX_SIZE_MB:20,CONFERENCE_SESSION_VIRTUAL_BG_IMG_MAX_COUNT:10,CONFERENCE_SESSION_VIRTUAL_BG_PREVIEW_FPS:30,CONFERENCE_SESSION_ENABLE_CHAT_PROFILING:!1,CONFERENCE_SESSION_SHOW_LOG_FOR_MEDIA_ELEMENT_PLAY_CONTROL:!1,CONFERENCE_SESSION_CHAT_MESSAGES_THROTTLE_TIME_MS:500,CHAT_LIST_PAGE_SIZE:20,PASSCODE_NUMBERS_COUNT:6};var i=t(54355),f=t(26738);class r{static get settings(){return r.settings$.value}constructor(u){this.http=u}load(){const u=`assets/config/config.${s.N.name}.json`;return new Promise((a,o)=>{this.http.get(u).toPromise().then(l=>{r.settings$.next(new Proxy({..._,...l},{defineProperty:(c,d,v)=>(r.settings$.next({...r.settings,[d]:v.value}),!0)})),Object.defineProperty(window,"settings",{get:()=>r.settings}),a()}).catch(l=>{o(`Could not load config file '${u}': ${JSON.stringify(l)}`)})})}}r.settings$=new e.X(_),r.\u0275fac=function(u){return new(u||r)(i.LFG(f.eN))},r.\u0275prov=i.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})},63237:(z,R,t)=>{t.d(R,{o:()=>W});var e=t(26215),s=t(59193),h=t(25917),_=t(35758),i=t(28728),f=t(911),r=t(40089),p=t(5304),u=t(15257),a=t(68307),o=t(43190),l=t(88002),c=t(54355),d=t(24710),v=t(26738);let I=(()=>{class b{constructor(D){this.http=D}getSystemInfo(){return this.http.get("/api/rest/public/system/info")}getMediaSettings(){return this.http.get("/api/rest/public/system/media-info")}}return b.\u0275fac=function(D){return new(D||b)(c.LFG(v.eN))},b.\u0275prov=c.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();var m=t(75266),g=t(75261),E=t(59499),n=t(30395),S=t(97684),C=t(1114),T=t(32588),P=t(6190),A=t(22153),M=t(55803);let W=(()=>{class b{constructor(D,F,J,H,Y,ee,X,K,oe,O,U,k,te,fe,de,re,_e,ve,$){this.baseHref=D,this.document=F,this.loginService=J,this.systemApiService=H,this.systemSettingsStoreService=Y,this.commonErrorService=ee,this.cookieService=X,this.mediaSourceStoreService=K,this.virtualBackgroundService=oe,this.themeService=O,this.broadcastChannelService=U,this.tabletsSupportService=k,this.cometService=te,this.ngZone=fe,this.routesService=de,this.overlayService=re,this.translateService=_e,this.appStoreService=ve,this.loginApiService=$,this._initialDataReceived$=new e.X(!1),this.initialDataReceived$=this._initialDataReceived$.asObservable(),this.themeService.setTheme(f.Q2A.LIGHT)}init(){this.initServices(),this.processInitialData()}fetchSessionInfo(){return this.loginApiService.getSessionInfo().pipe((0,p.K)(D=>401===D.status?this.loginApiService.loginWithToken(this.loginService.loginToken).pipe((0,p.K)(F=>(F.status>=400&&F.status<500&&(this.loginService.flushLoginData(),window.location.pathname.includes("join")||this.routesService.goToLogin()),s.E))):s.E))}updateSessionInfo(D){const F=this.loginService.loginToken;F&&(this.loginService.setLoginInfo({...D,loginToken:F}),this.loginService.setSessionId(D.sessionId)),this.loginService.setSessionInfo(D)}processInitialData(){this.getInitialData().pipe((0,u.q)(1),(0,a.b)(D=>this.setInitialData(...D)),(0,o.w)(D=>this.loginService.isAuthenticated?this.fetchSessionInfo().pipe((0,l.U)(F=>(this.updateSessionInfo(F),D))):(0,h.of)(D))).subscribe(D=>{this.setInitialData(...D)},D=>this.commonErrorService.handleErrors(D),()=>{this._initialDataReceived$.next(!0)})}getInitialData(){return(0,_.D)([this.systemApiService.getSystemInfo(),this.systemApiService.getMediaSettings()])}setInitialData(D,F){document.title=D.domain.fullName||document.title,this.systemSettingsStoreService.setSystemInfo(D),localStorage.setItem(i.Rp,JSON.stringify({img:D.domain.bigLogo,mainPageImg:D.domain.logo,name:D.domain.fullName})),this.systemSettingsStoreService.setMediaInfo(F),this.processInitialMicCamSettings(),this._initialDataReceived$.next(!0)}processInitialMicCamSettings(){const D=this.systemSettingsStoreService.getSystemSettingAsBoolean("ENABLE_CAMERA_ON_ENTER"),F=void 0!==D&&D,J=this.systemSettingsStoreService.getSystemSettingAsBoolean("ENABLE_MICROPHONE_ON_ENTER"),H=void 0===J||J,Y=this.cookieService.get(i.Du),ee=this.cookieService.get(i.P4);Y||ee?this.mediaSourceStoreService.setDevicesTurnOnStart("true"===Y,"true"===ee):this.mediaSourceStoreService.setDevicesTurnOnStart(H,F)}initServices(){this.virtualBackgroundService.init(),this.appStoreService.initUpdater(),this.broadcastChannelService.createBroadcast("login",this.processOnLogin.bind(this)),this.tabletsSupportService.init()}processOnLogin(D){const F=D.data,J=F.prevLoginInfo?.user.profileId;if(J!==F.currentLoginInfo.user.profileId)if(F.currentLoginInfo.user.isRegisteredUser){localStorage.setItem("SHOW_MODAL_ON_APP_INIT",this.translateService.instant("SYSTEM_LOGIN.LOGIN_IN_ANOTHER_TAB",{userName:F.currentLoginInfo.user.name}));const X=this.baseHref.endsWith("/")?this.baseHref:`${this.baseHref}/`;window.location.href=`${X}iva/home`}else this.loginService.flushLoginInfoCache(),this.cometService.destroyConnection(),this.ngZone.run(()=>this.routesService.goToLogin()),this.overlayService.openModal(f.ebs,this.translateService.instant("SYSTEM_LOGIN.LOGIN_AS_GUEST_IN_ANOTHER_TAB"))}}return b.\u0275fac=function(D){return new(D||b)(c.LFG(r.mr),c.LFG(r.K0),c.LFG(d.r),c.LFG(I),c.LFG(i.Ph),c.LFG(m.f),c.LFG(g.N),c.LFG(i.YY),c.LFG(E.U),c.LFG(f.fYy),c.LFG(n.q),c.LFG(S.Eb),c.LFG(C.y),c.LFG(c.R0b),c.LFG(T._D),c.LFG(f.Bi9),c.LFG(P.sK),c.LFG(A.I),c.LFG(M.O))},b.\u0275prov=c.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})()},39026:(z,R,t)=>{t.d(R,{z:()=>h});var e=t(54355),s=t(22153);let h=(()=>{class _{constructor(f){this.appStoreService=f}setIsInConference(){const f=!!new URLSearchParams(window.location.search).get("conferenceSessionId");this.appStoreService.setUserIsInConference(f)}}return _.\u0275fac=function(f){return new(f||_)(e.LFG(s.I))},_.\u0275prov=e.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})()},10390:(z,R,t)=>{t.d(R,{S:()=>r});var e=t(29514),s=t(88002),h=t(96736),_=t(9112),i=t(54355),f=t(28728);let r=(()=>{class p{constructor(a,o){this.bannerNotificationsStoreService=a,this.homeStoreService=o,this.conferenceSession$=this.homeStoreService.activeConferenceSession$,this.isConferenceSessionRunning$=this.conferenceSession$.pipe((0,s.U)(l=>!!l&&!l.room)),this.isNotificationsBannerShown$=(0,_.aj)([this.bannerNotificationsStoreService.isNotificationsBannerShown$,this.isConferenceSessionRunning$,e._.settings$]).pipe((0,s.U)(([l,c,d])=>l&&!c&&d.EXPERIMENTAL_FEATURES),(0,h.h)(!1)),this.notificationText$=this.bannerNotificationsStoreService.notificationText$}closeBanner(){this.bannerNotificationsStoreService.setIsNotificationBannerShown(!1)}}return p.\u0275fac=function(a){return new(a||p)(i.LFG(f.D_),i.LFG(f.hh))},p.\u0275prov=i.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()},30395:(z,R,t)=>{t.d(R,{q:()=>s});var e=t(54355);let s=(()=>{class h{constructor(){this.broadcasts={}}createBroadcast(i,f){if(!window.BroadcastChannel)return void console.warn("BroadcastChannel is not supported");const r=new BroadcastChannel(i);r.onmessage=f,this.broadcasts[i]=r}postMessageToBroadcast(i,f){this.broadcasts[i]?.postMessage(f)}closeBroadcast(i){this.broadcasts[i]?.close()}ngOnDestroy(){Object.values(this.broadcasts).forEach(i=>i?.close())}}return h.\u0275fac=function(i){return new(i||h)},h.\u0275prov=e.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),h})()},89017:(z,R,t)=>{t.d(R,{n:()=>c});var e=t(97057),s=t(911),h=t(22759),_=t(33637),i=t(88002),f=t(39761),r=t(47349),p=t(45435),u=t(59746),a=t(97684),o=t(54355);const l="iva-full-screen";let c=(()=>{class d{get isFullscreen(){return!!this.isFullscreen$.value}get isSafari(){const I=(0,e.qY)();return I?.name===a.Rd||I?.name===a.Vc}constructor(I){this.tabletsSupportService=I,this.fullscreenChangeEventName=this.isSafari?"webkitfullscreenchange":"fullscreenchange",this.isFullscreen$=(0,s.Hxy)((0,h.R)(document,this.fullscreenChangeEventName).pipe((0,i.U)(()=>!!document.fullscreenElement||!!document.webkitFullscreenElement),(0,f.O)(!1),(0,r.d)(1))),this.handleFullscreenChangeOnSafari()}applyFullscreenClassWhenEnabled(){this.isFullscreen$.subscribe(I=>{I?document.body.classList.add(l):document.body.classList.remove(l)})}toggle(I){this.isSafari?this.toggleFullscreenOnSafari():this.isFullscreen?document.exitFullscreen():(I||document.documentElement).requestFullscreen()}setOn(I){this.isFullscreen||(I||document.documentElement).requestFullscreen()}setOff(){this.isFullscreen&&document.exitFullscreen()}toggleFullscreenOnSafari(){document.webkitFullscreenElement?document.webkitCancelFullScreen():document.documentElement.webkitRequestFullscreen()}handleFullscreenChangeOnSafari(){this.isFullscreen$.pipe((0,p.h)(()=>this.isSafari),(0,u.QV)(_.P)).subscribe(()=>{this.tabletsSupportService.patchStylesIfNeeded()})}}return d.\u0275fac=function(I){return new(I||d)(o.LFG(a.Eb))},d.\u0275prov=o.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()},27090:(z,R,t)=>{t.d(R,{J:()=>h,d:()=>_});var e=t(54355),s=t(87225);const h="CHAT_FILE_SCOPE";let _=(()=>{class i{constructor(r){this.uploadService=r}uploadAttachment$(r,p){return this.uploadService.upload$(h,r,p)}abortUpload(r){this.uploadService.abortUpload(r)}}return i.\u0275fac=function(r){return new(r||i)(e.LFG(s.C))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})()},25916:(z,R,t)=>{t.d(R,{g:()=>X});var e=t(57704),s=t(45435),h=t(88002),_=t(39761),i=t(59328),f=t(43190),r=t(46782),p=t(15257),u=t(26215),a=t(9112),o=t(25917),l=t(59193),c=t(84635),d=t(26614),v=t(77463),I=t(5469),m=t(911),g=t(8207),E=t(12297),n=t(87590),S=t(27598),C=t(30083),T=t(42827),P=t(63295),A=t(8568),M=t(2996),L=t(28970),N=t(33569),W=t(54355),b=t(62241),V=t(27090),D=t(6190),F=t(28728),J=t(32588);var ee=(()=>((ee=ee||{}).RELATED_MESSAGE_DELETED="RELATED_MESSAGE_DELETED",ee))();let X=(()=>{class K extends m.z23{constructor(O,U,k,te,fe,de,re,_e,ve,$,Z){super(),this.chatStore=O,this.chatApi=U,this.loginService=k,this.chatFilesService=te,this.translate=fe,this.toastr=de,this.overlayService=re,this.systemSettingsStoreService=_e,this.userSessionStoreService=ve,this.routes=$,this.cometService=Z,this.lastReadAtSystemMessage$=new u.X(null),this.monologuedMessages$=(0,a.aj)([this.lastReadAtMessage$,this.chatStore.currentChatMessages$.pipe((0,s.h)(Boolean),(0,h.U)(B=>this.processAvatarShowState(B)))]).pipe((0,h.U)(([B,ie])=>{let G=B&&ie.findIndex(Ae=>Ae.createdAt>B?.createdAt);null!==G&&G>0&&(G+=2),G&&G>-1&&(G=Math.max(G-1,0));const ae=1===ie.length&&ie[0].type===c.Cb.SYSTEM,he=B&&ie.every(Ae=>Ae.createdAt>B.createdAt)&&!ae;if(B&&ae)return this.setLastReadStamp(null),ie;const Oe=!!B&&!ae||G&&G>-1;if(he)return[B,...ie];if(Oe&&G&&G>=0&&B){const Ae=ie.slice(0,G),Me=ie.slice(G);return[...Ae,B,...Me]}return ie})),this.currentChatId$=this.chatStore.currentChatId$,this.currentChat$=this.chatStore.currentChat$,this.messageTimeGap=I._Z.settings.CHAT_TIME_GAP_BETWEEN_MESSAGES_IN_MONOLOG,this.currentChatLastReadStamp$=this.currentChat$.pipe((0,h.U)(B=>({currentChat:B,selfProfileId:this.loginService.profileId})),(0,h.U)(({currentChat:B,selfProfileId:ie})=>B?.users?.find(G=>G.profileId===ie)?.lastReadAt)),this.currentChatDraft$=this.chatStore.currentChatDraft$,this.currentChatChanged$=this.chatStore.currentChat$.pipe((0,_.O)(null),(0,i.G)(),(0,s.h)(([B,ie])=>!!ie&&B?.id!==ie?.id),(0,h.U)(([B,ie])=>ie)),this.handleMessageSuccess=(B,ie,G)=>{this.chatStore.removeClientMessage(B,ie);const ae=this.createServerMessageFromDto(G),he={...this.chatStore.currentChat},Se={...this.chatStore.getChat(B)},Oe=G.createdAt;he&&(he.unreadMessagesCount=0,he.users=[...he.users.map(Ae=>Ae.profileId===this.loginService.profileId?{...Ae,lastReadAt:Oe}:Ae)],this.chatStore.setCurrentChat(he)),Se&&(Se.unreadMessagesCount=0,Se.users=[...Se.users.map(Ae=>Ae.profileId===this.loginService.profileId?{...Ae,lastReadAt:Oe}:Ae)],this.chatStore.addOrUpdateChat(B,Se)),this.addChatMessage(B,ae)},this.handleMessageError=(B,ie,G,ae)=>{if(0===ae||!navigator.onLine||504===ae)return this.cometService.createNewConnection(this.loginService.sessionId),this.listenCometOnConnected(),void this.toastr.error({translationKey:"COMMON_ERRORS.LOST_CONNECTION"});let he;this.chatStore.updateChatMessage(B,ie.id,{status:c.rJ.ERROR}),he=G===ee.RELATED_MESSAGE_DELETED?"CHATS.ERRORS.RELATED_MESSAGE_DELETED":"CHATS.ERRORS.COMMON",this.toastr.error({translationKey:he})}}get monologuedMessages(){return(0,m.Hxy)(this.monologuedMessages$).value}get lastReadAtMessage$(){return this.lastReadAtSystemMessage$}fetchMessagesForward$(){const O=this.chatStore.currentChatMeta,U=this.chatStore.currentChatId;if(!O.hasNextPageOnBottom||O.isFetching)return(0,o.of)(null);this.chatStore.setChatMeta(U,{isFetching:!0});const k=this.chatStore.currentChatMessages,te=this.chatStore.getLastDtoMessage(U);return this.chatApi.getMessages(U,{dateFrom:te.createdAt+1,orderAsc:!0,size:100}).pipe((0,h.U)(fe=>{const re=k.concat(fe.data.map(ve=>({...ve,status:c.rJ.DELIVERED,hasAvatar:!0}))).slice(-200),_e=k[0].createdAt!==re[0].createdAt;return this.setChatMessages(U,re),this.chatStore.setChatMeta(U,{isFetching:!1,hasNextPageOnBottom:fe.hasNext,hasNextPageOnTop:_e||O.hasNextPageOnTop}),{timestamp:te.createdAt,messages:this.chatStore.getChatMessagesByChatId(U)}}))}fetchMessagesBackward$(){const O=this.chatStore.currentChatMeta,U=this.chatStore.currentChatId;if(!O.hasNextPageOnTop||O.isFetching)return(0,o.of)(null);Object.assign({},O).isFetching=!0,this.chatStore.setChatMeta(U,{isFetching:!0});const te=this.chatStore.currentChatMessages,fe=this.chatStore.getFirstDtoMessage(U);return this.chatApi.getMessages(U,{dateFrom:fe.createdAt-1,orderAsc:!1,size:100}).pipe((0,h.U)(de=>{de.data.reverse();const _e=[...de.data,...te].slice(0,201),ve=te[te.length-1].createdAt!==_e[te.length-1].createdAt;return this.setChatMessages(U,_e),this.chatStore.setChatMeta(U,{isFetching:!1,hasNextPageOnBottom:ve||O.hasNextPageOnBottom,hasNextPageOnTop:de.hasNext}),{timestamp:fe.createdAt,messages:this.chatStore.getChatMessagesByChatId(U)}}))}fetchMessagesByReply$(O){const U=this.chatStore.currentChatId,k={...this.chatStore.getChatMeta(U)};return U&&k.hasNextPageOnTop&&!k.isFetching?(k.isFetching=!0,this.chatStore.setChatMeta(U,k),(0,a.aj)([this.chatApi.getMessages(U,{dateFrom:+O.createdAt,orderAsc:!1}),this.chatApi.getMessages(U,{dateFrom:+O.createdAt+1,orderAsc:!0})]).pipe((0,s.h)(([te,fe])=>!!te&&!!fe),(0,h.U)(([te,fe])=>{te.data.reverse();const de={...this.chatStore.currentChatMeta};de&&(de.hasNextPageOnTop=te.hasNext,de.hasNextPageOnBottom=fe.hasNext,de.isFetching=!1,this.chatStore.setChatMeta(U,de));const re=te.data.concat(fe.data);return this.setChatMessages(U,re),{timestamp:O.createdAt,messages:this.chatStore.getChatMessagesByChatId(U)}}))):(0,o.of)(null)}fetchLastPage$(){const O=this.chatStore.currentChatMeta;if(!O||O.isFetching)return(0,o.of)(null);const U=this.chatStore.currentChatId;return this.chatApi.getMessages(U,{orderAsc:!1,dateFrom:Date.now(),size:200}).pipe((0,h.U)(k=>{const te=this.chatStore.currentChatMeta;te&&(te.hasNextPageOnTop=k.hasNext,this.chatStore.setChatMeta(U,te)),k.data.reverse(),this.setChatMessages(U,k.data);const fe=this.chatStore.getChatMessagesByChatId(U);return{timestamp:fe[fe.length-1].createdAt,messages:fe}}))}fetchInitialPage$(){return this.currentChatChanged$.pipe((0,h.U)(O=>({currentChat:O,lastReadAt:O?.users?.find(U=>U.profileId===this.loginService.profileId)?.lastReadAt})),(0,s.h)(({lastReadAt:U})=>!!U),(0,f.w)(({currentChat:O,lastReadAt:U})=>this.fetchInitialMessagesBase$(O.id,U)))}fetchInitialMessagesBase$(O,U){return(0,a.aj)([this.chatApi.getMessages(O,{orderAsc:!1,dateFrom:U,size:100}),this.chatApi.getMessages(O,{orderAsc:!0,dateFrom:U+1,size:100})]).pipe((0,h.U)(k=>({messages:k,chatId:O,lastReadStamp:U})),(0,h.U)(({messages:k,chatId:te,lastReadStamp:fe})=>{const de=k[0],re=k[1],_e=de.totalCount??0,ve=re.totalCount??0,$=this.chatStore.currentChatMeta,Z=this.chatStore.currentChat;return $&&($.hasNextPageOnTop=de.hasNext,$.hasNextPageOnBottom=re.hasNext,$.totalMessagesAmount=ve+_e,this.chatStore.chatExists(te)&&this.chatStore.setChatMeta(te,$)),Z&&(Z.totalMessagesCount=de.totalCount+re.totalCount,this.chatStore.setCurrentChat(Z)),this.setChatMessages(te,[...de.data.reverse(),...re.data].map(this.createServerMessageFromDto)),{messages:this.chatStore.getChatMessagesByChatId(te),lastReadAt:fe}}))}updateUnreadMessagesTimestamp(O,U){return this.chatApi.notifyAboutRead(O,U)}sendMessage(O){const U=this.chatStore.getDraft(O),k=this.createMessageStubFromDraft(U);k.status=c.rJ.SENT;const te=!!k.attachment;this.addChatMessage(O,k),te?this.sendWithAttachment(O,U,k):this.sendWithoutAttachment(O,U,k)}processAvatarShowState(O){return O.map((U,k,te)=>(U.hasAvatar=this.shouldShowFieldInMonologue(U,te[k+1]),U.showAuthorName=this.shouldShowFieldInMonologue(U,te[k-1]),U))}createLastReadMessageStamp(O=0){return{status:c.rJ.NONE,type:c.Cb.LAST_READ,hasAvatar:!1,message:"",attachment:"",author:"",authorAvatar:"",authorName:"",chatRoomId:"",chatRoomName:"",createdAt:O,deleted:!1,edited:!1,forwardMessageAuthor:"",forwardMessageAuthorName:"",forwardMessageCreatedAt:0,id:"",isGroupChat:!1,updatedAt:0,starred:!1,repliedOn:void 0,originalMessage:void 0,editedMessageId:void 0,editedMessageAttachment:void 0,originalMessageWasDeleted:!1,originalMessageCreatedAt:void 0}}editMessage(O){const U=this.chatStore.getDraft(O);this.chatApi.editMessage(O,U.editedMessageId,U.message).subscribe(()=>{},()=>{this.toastr.error(this.translate.instant("UNKNOWN_SERVER_ERROR"))}),this.chatStore.resetChatDraft(O)}shouldShowFieldInMonologue(O,U){if(!U)return!0;const k=Math.abs(U.createdAt-O.createdAt)<this.messageTimeGap,te=O.author===U.author;return!(te&&(!te||U.type!==c.Cb.SYSTEM)&&k&&(0,E.Z)(O.createdAt,U.createdAt))}checkMessageAvatar(O,U,k){const te=k[U+1];if(!te)return!0;const fe=Math.abs(te.createdAt-O.createdAt)<this.messageTimeGap;return te.author!==O.author||!(fe&&(0,E.Z)(te.createdAt,O.createdAt))}checkMessageAuthorName(O,U,k){const te=k[U-1];if(!te)return!0;const fe=Math.abs(O.createdAt-te.createdAt)<this.messageTimeGap;return te.author!==O.author||!(fe&&(0,E.Z)(te.createdAt,O.createdAt))}deleteMessage(O,U){this.openConfirmationModal(this.translate.instant("CHATS.MESSAGE_DELETING.TITLE"),this.translate.instant("CHATS.MESSAGE_DELETING.TEXT"),this.translate.instant("CHATS.MESSAGE_DELETING.SUBMIT")).pipe((0,f.w)(()=>this.chatApi.deleteMessage(O,U))).subscribe(()=>this.toastr.info(this.translate.instant("CHATS.MESSAGE_REMOVED")))}createP2PChat(O,U=!1){const k=this.loginService.profileId;let te;this.chatApi.getP2PChat(O).pipe((0,f.w)(fe=>(te=fe.users.find(de=>de.profileId!==k),te?this.chatApi.getUsersPresenceStatuses([te.profileId]).pipe((0,h.U)(de=>({room:fe,status:de}))):(0,o.of)({room:fe,status:null}))),(0,r.R)(this.destroy$)).subscribe(fe=>{fe.status?.length&&(fe.room.p2pStatus=fe.status[0].presenceStatus),te&&(fe.room.chatAvatar=te.avatar);const de=(0,M.c)([fe.room],this.loginService.profileId)[fe.room.id];this.chatStore.addOrUpdateChat(de.id,de),this.chatStore.setCurrentChatId(fe.room.id),U&&this.routes.goToChats(fe.room.id)},fe=>{this.toastr.error(this.translate.instant("CHATS.ERRORS.CREATION"))})}openAddParticipantsModal(O){const U=O??(0,m.Hxy)(this.currentChat$).value,k=U?.users.map(fe=>fe.profileId);this.overlayService.openModal(n.M,{hasVVoIPSupport:!1,searchContext:{contextType:"CHAT_ROOM",contextId:U?.id||""},extraSelectedInterlocutorIds:k,hideImport:!0,isChat:!0}).afterClosed$.pipe((0,s.h)(fe=>!!fe?.data?.apply),(0,r.R)(this.destroy$)).subscribe(fe=>{const de=fe?.data;if(!de)return;const re=de.interlocutors.map(_e=>(0,L.eO)(_e));this.addParticipantsToGroupChat(U.id,re)})}addParticipantsToGroupChat(O,U){this.chatApi.addParticipants(O,U).subscribe(()=>{this.chatStore.setCurrentChatId(O)},k=>this.toastr.error(this.translate.instant("CHATS.ERRORS.CREATION")))}removeParticipantFromGroupChat(O,U){this.openConfirmationModal(this.translate.instant("CHATS.CHAT_INFO.REMOVE_FROM_CHAT.DIALOG_TITLE"),this.translate.instant("CHATS.CHAT_INFO.REMOVE_FROM_CHAT.DIALOG_TEXT"),this.translate.instant("CHATS.CHAT_INFO.REMOVE_FROM_CHAT.DIALOG_CONFIRM")).pipe((0,f.w)(()=>this.chatApi.removeParticipant(O,U))).subscribe(()=>{},k=>this.toastr.error(this.translate.instant("UNKNOWN_SERVER_ERROR")))}changeUserRoleInChat(O,U,k){this.chatApi.updateChatParticipant(O,U,k).subscribe(()=>{},te=>this.toastr.error(this.translate.instant("CHATS.ERRORS.CREATION")))}mapSystemMessage(O){if(O?.type!==c.Cb.SYSTEM)return null;const U=O?.systemMessageInfo?.author?.name,k=O.systemMessageInfo?.users?.map(de=>de.name).join(", ");let te="";switch(O?.systemMessageInfo?.messageType){case c.hE.ADD_PARTICIPANTS:te=this.translate.instant("CHATS.SYSTEM.ADD_PARTICIPANTS",{authorName:U,addedNames:k});break;case c.hE.REMOVE_PARTICIPANTS:te=this.translate.instant("CHATS.SYSTEM.REMOVE_PARTICIPANTS",{authorName:U,removedNames:k});break;case c.hE.CALL_TRANSFERRED_FROM_P2P_CHAT:te=this.translate.instant("CHATS.SYSTEM.CALL_TRANSFERRED_FROM_P2P_CHAT");break;case c.hE.CALL_TRANSFERRED_TO_GROUP_CHAT:te=this.translate.instant("CHATS.SYSTEM.CALL_TRANSFERRED_TO_GROUP_CHAT");break;case c.hE.CHAT_CALL_DECLINED:te=this.translate.instant("CHATS.SYSTEM.CHAT_CALL_DECLINED");break;case c.hE.CREATE_CHAT:const de=(k??"").split(", ").sort(S.m2),re=de.length>1;let ve="";ve=de.length>3?this.translate.instant("CHATS.SYSTEM.CREATE_GROUP_CHAT_LONG",{authorName:U,addedNames:de.splice(0,2).join(", "),rest:de.length--}):re?this.translate.instant("CHATS.SYSTEM.CREATE_GROUP_CHAT",{authorName:U,addedNames:k}):this.translate.instant("CHATS.SYSTEM.CREATE_CHAT",{authorName:U}),te=ve;break;case c.hE.LEAVE_CHAT:te=this.translate.instant("CHATS.SYSTEM.LEAVE_CHAT",{authorName:U});break;case c.hE.CHAT_CALL_STARTED:te=this.translate.instant("CHATS.SYSTEM.CHAT_CALL_STARTED",{authorName:U});break;case c.hE.CHAT_CALL_ENDED:te=this.translate.instant("CHATS.SYSTEM.CHAT_CALL_ENDED",{authorName:U});break;case c.hE.CLEAR_CHAT:te=this.translate.instant("CHATS.SYSTEM.CLEAR_CHAT",{authorName:U})}return te}setLastReadStamp(O){this.lastReadAtSystemMessage$.next(O)}openConfirmationModal(O,U,k){return this.overlayService.openModal(m.YV9,{title:O,text:U,okText:k,showHeaderCloseButton:!0}).afterClosed$.pipe((0,s.h)(te=>!!te.data),(0,h.U)(te=>te.data),(0,r.R)(this.destroy$))}leaveChat(O,U=!1){const k=this.loginService.profileId;if(O&&k)return this.overlayService.openModal(P.n,{isOwner:U}).afterClosed$.pipe((0,s.h)(te=>!!te.data),(0,h.U)(te=>te.data),(0,s.h)(te=>te!==P.e.CANCEL),(0,f.w)(te=>te===P.e.LEAVE?this.chatApi.removeParticipants(O,[k]):(te===P.e.TRANSFER&&(this.chatStore.setChatViewMode({selectedChat:O,mode:d.ej.CHAT_INFO}),this.chatStore.setChatInfoMode(A.P.DEFAULT)),l.E)),(0,r.R)(this.destroy$)).subscribe(()=>{},te=>{console.error(te)})}clearHistory(O){this.openConfirmationModal(this.translate.instant("CHATS.CLEARING.TITLE"),this.translate.instant("CHATS.CLEARING.TEXT"),this.translate.instant("CHATS.CLEARING.OK_BUTTON_TEXT")).pipe((0,f.w)(()=>this.chatApi.clearChatHistory(O))).subscribe(()=>{},U=>{this.toastr.error({translationKey:"CHATS.CLEARING.ERROR_TEXT"})})}deleteChat(O){this.openConfirmationModal(this.translate.instant("CHATS.DELETION.TITLE"),this.translate.instant("CHATS.DELETION.TEXT"),this.translate.instant("CHATS.DELETION.OK_BUTTON_TEXT")).pipe((0,f.w)(()=>this.chatApi.deleteChat(O))).subscribe(()=>{},U=>{this.toastr.error({translationKey:"CHATS.DELETION.ERROR_TEXT"})})}toggleNotifications(O,U){this.chatApi.toggleNotifications(O,U?e.fX.ON:e.fX.OFF).subscribe(()=>{},k=>{})}toggleGroupChatHistoryAccess(O,U){this.chatApi.toggleGroupChatHistory(O,U?e.BX.ON:e.BX.OFF).subscribe(()=>{let k=this.chatStore.getChat(O);k.isChatHistoryAccessLimited=!U,this.chatStore.addOrUpdateChat(O,k)},k=>{})}updateChatInfo(O,U){this.chatApi.updateChat(O,U).subscribe(()=>{let k=this.chatStore.getChat(O);k&&(k={...k,...U},this.chatStore.addOrUpdateChat(k.id,k))},()=>{})}updateChatAvatar(O,U){this.chatApi.updateChat(O,{chatAvatar:U}).pipe((0,r.R)(this.destroy$)).subscribe(()=>{let k=this.chatStore.getChat(O);k&&(k={...k,chatAvatar:U},this.chatStore.addOrUpdateChat(k.id,k))},()=>this.toastr.error(this.translate.instant("UNKNOWN_SERVER_ERROR")))}canAttachFile(O){if(!O)return!1;const U=this.systemSettingsStoreService.getSystemSettingAsNumber(I._Z.settings.SYSTEM_SETTINGS_KEY_MAX_UPLOAD_FILE_SIZE_IN_MB);if(U&&O.size>1024*U*1024)return this.toastr.error({translationKey:"CHATS.FILES.FILE_SIZE_ERROR",translationParams:{size:U}}),!1;const te=this.userSessionStoreService.sessionInfo.diskUtilizationInfo.diskSpaceLimit;return!(te&&O.size>te&&(this.toastr.error({translationKey:"CHATS.FILES.DISK_SPACE_LIMIT_EXCEEDED"}),1))}getChatOnlineStatus(O){return!O||O.isGroupChat?T.Y.NONE:O.users.find(U=>U.profileId!==this.loginService.profileId)?.type===g.tP.BOT?T.Y.BOT:O.p2pStatus||T.Y.NONE}listenCometOnConnected(){this.cometService.onConnected$.pipe((0,s.h)(Boolean),(0,p.q)(1)).subscribe(this.restartChats.bind(this))}restartChats(){const O=this.chatStore.currentChatId;this.chatStore.setInitialState(),(0,a.aj)([this.chatStore.chatsList$,this.chatStore.chatsMeta$]).pipe((0,s.h)(([U,k])=>!(!U||(0,N.Z)(U)||!k||(0,N.Z)(k))),(0,p.q)(1)).subscribe(U=>{O&&this.chatStore.setCurrentChatId(O)})}sendWithoutAttachment(O,U,k){this.chatApi.sendMessage(O,{message:U.message.toString().trim(),replyOn:this.chatStore.getReplyOn(O)?.id}).subscribe(te=>this.handleMessageSuccess(O,k,te),te=>this.handleMessageError(O,k,te.error.reason,te.status)),this.chatStore.resetChatDraft(O)}sendWithAttachment(O,U,k){this.chatFilesService.uploadAttachment$(U.attachment,k.attachmentUploadId).pipe((0,f.w)(te=>{const fe={},de=U.message?.toString()?.trim(),re=U?.repliedOn?.id;return de&&(fe.message=de),re&&(fe.replyOn=re),te&&(fe.attachmentId=te),this.chatApi.sendMessage(O,fe)})).subscribe(te=>this.handleMessageSuccess(O,k,te),te=>this.handleMessageError(O,k,te.error.reason,te.status)),this.chatStore.resetChatDraft(O)}createMessageStubFromDraft(O){const U=this.chatStore.currentChatId,k=+new Date;return{id:(0,v.Z)(),attachment:O.attachment,message:O.message,repliedOn:O.repliedOn,createdAt:k,author:this.loginService.profileId,chatRoomId:U,authorName:this.loginService.selfInterlocutor?.name??"",deleted:!1,chatRoomName:this.chatStore.getChatName(U),edited:!1,starred:!1,updatedAt:k,type:O.type,authorAvatar:"",forwardMessageAuthor:"",forwardMessageAuthorName:"",forwardMessageCreatedAt:k,isGroupChat:!1,status:c.rJ.UNSENT,hasAvatar:!0,editedMessageId:void 0,originalMessage:void 0,editedMessageAttachment:O.editedMessageAttachment,originalMessageWasDeleted:!1,originalMessageCreatedAt:void 0}}createServerMessageFromDto(O){return{...O,hasAvatar:!0,status:c.rJ.DELIVERED}}setChatMessages(O,U){const k=this.getParticipantsLastReadAt(O),te=(0,C.r)(U,k);this.chatStore.setMessagesByChat(O,te)}addChatMessage(O,U){const k=this.getParticipantsLastReadAt(O),te=(0,C.r)([U],k);this.chatStore.addMessage(O,te[0])}getParticipantsLastReadAt(O){return this.chatStore.getChat(O)?.users.filter(U=>U.profileId!==this.loginService.profileId).map(U=>U.lastReadAt)??[]}}return K.\u0275fac=function(O){return new(O||K)(W.LFG(b.s),W.LFG(e.sb),W.LFG(I.r6),W.LFG(V.d),W.LFG(D.sK),W.LFG(m._Wo),W.LFG(m.Bi9),W.LFG(F.Ph),W.LFG(F.j8),W.LFG(J._D),W.LFG(I.y_))},K.\u0275prov=W.Yz7({token:K,factory:K.\u0275fac}),K})()},2996:(z,R,t)=>{function e(s,h,_,i){const f={};return s.forEach(r=>{if(f[r.id]=r,i?.find(o=>o===r.id)&&(r.muted=!0),r.isGroupChat)return r;const u=_?.find(o=>(r.users??[]).map(l=>l.profileId).includes(o.profileId));u&&(r.p2pStatus=u.presenceStatus);const a=r.users.find(o=>o.profileId!==h);return a&&(r.chatAvatar=a.avatar),r}),f}t.d(R,{c:()=>e})},1114:(z,R,t)=>{t.d(R,{y:()=>a});var e=t(26215),s=t(79765),h=t(70882),_=t(45435),i=t(88002),f=t(94612),r=t(77463),p=t(29514),u=t(54355);let a=(()=>{class o{get eventBusId(){return this._eventBusId}get serverSentEvent$(){return this._serverSentEvent$}get lastSequenceNumber(){return this._lastSequenceNumber}get hasConnection(){return!!this.connection}constructor(c){this.zone=c,this.isConnected$=new e.X(!1),this.onConnected$=this.isConnected$.pipe((0,_.h)(d=>!!d)),this.onDisconnected$=this.isConnected$.pipe((0,_.h)(d=>!d)),this._serverSentEvent$=new s.xQ,this.onMessagesSkipped=new s.xQ,this.connection=null,this.subscriptions=[],this.heartbeatTimeoutId=null,this.reconnectTimeoutId=null,this.reconnectTimeoutMs=Math.random()*p._.settings.COMET_RECONNECT_RANDOM_INTERVAL_STOP_MS+p._.settings.COMET_RECONNECT_RANDOM_INTERVAL_START_MS,window.addEventListener("beforeunload",()=>{this.eventSource?.close()})}createConnectionIfNotExists(c){this.connection||this.createConnection(c)}createNewConnection(c){this.connection&&this.destroyConnection(),this.createConnection(c)}createConnection(c){if(this.connection)throw new Error("Attempt to create more than single connection");this._eventBusId=(0,r.Z)(),this.connection=this.getServerSentEvent(c,this._eventBusId),this.subscriptions.push(this.connection.subscribe(d=>this.handleEvent(d),()=>this.handleError(c))),this.subscriptions.push(this.getEventByClass$("Heartbeat").subscribe(()=>{this.heartbeatTimeoutId&&window.clearTimeout(this.heartbeatTimeoutId),this.addHeartbeatReconnectTimeout(c)})),this.addHeartbeatReconnectTimeout(c)}handleEvent(c){if(this.ignoreLog(c)||(console.log(`Serverside event: ${c._class}`),console.dir(c)),"NumberedMessage"===c._class)if(c.message){this.ignoreLog(c)||(console.log(`Inside NumberedMessage: ${c.message._class}`),console.dir(c)),"BulkMessage"===c.message._class&&c.message.events.forEach(v=>{this.ignoreLog(v)||(console.log(`Inside BulkMessage: ${v._class}`),console.dir(v))});const d=c.sequenceNumber;d>this._lastSequenceNumber+1?(console.log(`Detected skipped messages. serverSequenceNumber: ${d}, lastSequenceNumber: ${this._lastSequenceNumber} `),this.onMessagesSkipped.next({serverSequenceNumber:d,lastSequenceNumber:this._lastSequenceNumber})):d<this._lastSequenceNumber+1?console.log(`Re-received message occurred. serverSequenceNumber: ${d}, lastSequenceNumber: ${this._lastSequenceNumber} `):this._lastSequenceNumber=c.sequenceNumber}else console.log("Inside NumberedMessage: Sync message"),this._lastSequenceNumber=c.sequenceNumber,this.isConnected$.next(!0);this.zone.run(()=>this._serverSentEvent$.next(c))}handleError(c){this.isConnected$.next(!1),console.error("Error during obtaining event from EventSource"),this.reconnectTimeoutId&&window.clearTimeout(this.reconnectTimeoutId),this.updateReconnectInterval(),this.reconnectTimeoutId=window.setTimeout(()=>this.createNewConnection(c),this.reconnectTimeoutMs)}destroyConnection(){this.subscriptions.forEach(c=>c.unsubscribe()),this.subscriptions=[],this.connection=null,this.eventSource?.close(),this.isConnected$.next(!1),this.heartbeatTimeoutId&&window.clearTimeout(this.heartbeatTimeoutId),this.reconnectTimeoutId&&window.clearTimeout(this.reconnectTimeoutId)}getEventByClass$(c){return this._serverSentEvent$.pipe((0,_.h)(d=>d._class===c),(0,i.U)(d=>d))}getChildNumberedEventByClass$(c){return this._serverSentEvent$.pipe((0,_.h)(d=>"NumberedMessage"===d._class&&!!d.message),(0,i.U)(d=>"BulkMessage"===d.message?._class?d.message.events.filter(I=>I._class===c||"*"===c):d.message?._class===c||"*"===c?[d.message]:[]),(0,f.b)(d=>d))}updateReconnectInterval(){this.reconnectTimeoutMs>=p._.settings.COMET_MAX_RECONNECT_INTERVAL_MS||(this.reconnectTimeoutMs+=p._.settings.COMET_RECONNECT_INTERVAL_STEP_MS)}addHeartbeatReconnectTimeout(c){this.heartbeatTimeoutId=window.setTimeout(()=>this.createNewConnection(c),p._.settings.HEARTBEAT_RECONNECT_INTERVAL_MS)}getServerSentEvent(c,d){return this.eventSource=new EventSource(`/comet?session=${c}&busId=${d}&engine=ServerSentEvents&serializer=json`),new h.y(I=>{this.eventSource.onmessage=m=>{this.zone.run(()=>{let g;try{g=JSON.parse(m.data)}catch{console.error(`Cannot parse event: ${m.data}`)}I.next(g)})},this.eventSource.onerror=m=>{this.zone.run(()=>I.error(m))}})}ignoreLog(c){return p._.settings.IGNORE_LOG_FOR_MESSAGES.includes("message"in c&&c.message?c.message._class:c._class)}}return o.\u0275fac=function(c){return new(c||o)(u.LFG(u.R0b))},o.\u0275prov=u.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},75266:(z,R,t)=>{t.d(R,{f:()=>_});var e=t(54355),s=t(24710),h=t(911);let _=(()=>{class i{constructor(r,p){this.loginService=r,this.toastr=p}handleErrors(r){401!==r.status?this.toastr.error(502!==r.status?503!==r.status?504!==r.status?400!==r.status&&500!==r.status&&501!==r.status&&505!==r.status?{translationKey:"UNKNOWN_SERVER_ERROR"}:{translationKey:"COMMON_ERRORS.UNEXPECTED_ERROR"}:{translationKey:"COMMON_ERRORS.LOST_CONNECTION"}:{translationKey:"COMMON_ERRORS.SERVER_NOT_RESPOND"}:{translationKey:"COMMON_ERRORS.SERVER_UNAVAILABLE"}):this.loginService.resetLogin()}}return i.\u0275fac=function(r){return new(r||i)(e.LFG(s.r),e.LFG(h._Wo))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()},94994:(z,R,t)=>{t.d(R,{O:()=>f});var e=t(77323),s=t(13001),h=t(46451),_=t(84882),i=t(54355);let f=(()=>{class r{getMimeTypeDocumentType(u){const a=u||"";return(0,_.Z)(s.xh,o=>o.map(l=>new RegExp(l)).some(l=>l.test(a)))||h._o.UNSUPPORTED}documentDTOToDocumentViewing(u){const a=u.conversionState;return{...u,conversionState:a}}canDownload(u){return u.type!==e.wY.DIRECTORY&&[e.Mk.DOWNLOAD,e.Mk.PUBLIC].includes(u.availability)}}return r.\u0275fac=function(u){return new(u||r)},r.\u0275prov=i.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})()},46237:(z,R,t)=>{t.d(R,{z:()=>f});var e=t(88002),s=t(39761),h=t(54355),_=t(32352),i=t(28728);let f=(()=>{class r{constructor(u,a){this.resourceUrlService=u,this.systemSettingsStoreService=a,this.companyLogoLoginPageSrc$=this.systemSettingsStoreService.stateChanged.pipe((0,e.U)(o=>o?.systemInfo.domain.bigLogo),(0,s.O)(JSON.parse(localStorage.getItem("HeaderSettingsLocalStorageKey"))?.img),(0,e.U)(o=>o?this.resourceUrlService.getResourceUrl(o):null)),this.companyLogoMainPageSrc$=this.systemSettingsStoreService.stateChanged.pipe((0,e.U)(o=>o?.systemInfo.domain.logo),(0,s.O)(JSON.parse(localStorage.getItem("HeaderSettingsLocalStorageKey"))?.mainPageImg),(0,e.U)(o=>o?this.resourceUrlService.getResourceUrl(o):null)),this.companyName$=this.systemSettingsStoreService.stateChanged.pipe((0,e.U)(o=>o?.systemInfo.domain.fullName||null))}}return r.\u0275fac=function(u){return new(u||r)(h.LFG(_.Z),h.LFG(i.Ph))},r.\u0275prov=h.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})()},27789:(z,R,t)=>{t.d(R,{A:()=>l});var e=t(87177),s=t(59600),h=t(49062),_=t(911),i=t(9112),f=t(88002),r=t(87519),p=t(54355),u=t(77097),a=t(24710),o=t(28728);let l=(()=>{class c{get conferenceSessionStore(){return this.conferenceSessionStoreService.state}get conferenceMediaInfo(){return this.conferenceSessionStore?.conferenceMediaInfo}get selfParticipant(){return this.getSelfParticipantByStore(this.conferenceSessionStore)}get selfPermissions(){return this.selfParticipant?.permissions??[]}get hasPermissionsToTranslate(){return!!this.conferenceSessionStore&&this.hasPermissionsToTranslateByStore(this.conferenceSessionStore)}get hasPermissionsToReceiveMedia(){return this.selfPermissions.includes(s.Li.RECEIVE_MEDIA)}get hasPermissionsToDownloadRecords(){return this.selfPermissions.includes(s.Li.DOWNLOAD_RECORD)}get hasPermissionsToDownloadTranscription(){return this.selfPermissions.includes(s.Li.DOWNLOAD_TRANSCRIPTION)}get hasPermissionsToInviteParticipants(){return this.selfPermissions.includes(s.Li.INVITING_PARTICIPANTS)}get hasPermissionsToUploadFiles(){return this.selfPermissions.includes(s.Li.UPLOAD_DOCUMENT)}get hasPermissionsToDownloadsFiles(){return this.selfPermissions.includes(s.Li.DOWNLOAD_DOCUMENTS)}get selfDefaultPermissions(){return this.getDefaultPermissions(this.selfParticipant.roles[0])}get isSelfParticipantModerator(){return!!this.selfParticipant?.roles?.includes(e.oG.MODERATOR)}get isAudioEnabled(){return this.getIsAudioEnabledByStore(this.conferenceSessionStoreService.state)}get isVideoEnabled(){return this.getIsVideoEnabledByStore(this.conferenceSessionStoreService.state)}get isGroupConference(){return this.isGroupConferenceByStore(this.conferenceSessionStoreService.state)}get hasGroupConferenceFeature(){return!!this.conferenceSessionStore.conferenceMediaInfo?.conferenceSession.features?.includes(s.vs.GROUPS)}get hasPermissionToControlSlides(){const v=this.selfPermissions;return!!v&&v?.includes(s.Li.BOARD_DRAWING)}get hasPermissionsToDemonstrateScreen(){return this.selfPermissions.includes(s.Li.DEMONSTRATE_DOCUMENTS)}get hasPermissionToSendUrlInMessage(){return this.selfPermissions.includes(s.Li.PUBLISH_HTTP_REFERENCE_IN_CHAT)}get hasCharModeration(){return!this.selfPermissions.includes(s.Li.CHAT_SEND_WITHOUT_PREMODERATION)}constructor(v,I,m){this.conferenceSessionStoreService=v,this.loginService=I,this.systemSettingsStore=m,this.selfParticipant$=this.conferenceSessionStoreService.stateChanged.pipe((0,f.U)(g=>this.getSelfParticipantByStore(g)),(0,_.yvm)(!1)),this.selfPermissions$=this.selfParticipant$.pipe((0,f.U)(g=>g?.permissions??[])),this.hasPermissionToSendMessage$=this.selfPermissions$.pipe((0,f.U)(g=>g.includes(s.Li.PUBLISH_MESSAGES_IN_CHAT))),this.hasPermissionsToTranslate$=this.conferenceSessionStoreService.stateChanged.pipe((0,f.U)(g=>this.hasPermissionsToTranslateByStore(g))),this.hasPermissionsToReceiveMedia$=this.selfPermissions$.pipe((0,f.U)(g=>g.includes(s.Li.RECEIVE_MEDIA)),(0,r.x)(),(0,_.yvm)(!1)),this.hasPermissionsToDownloadRecords$=this.selfPermissions$.pipe((0,f.U)(g=>g.includes(s.Li.DOWNLOAD_RECORD))),this.hasPermissionsToDownloadTranscription$=this.selfPermissions$.pipe((0,f.U)(g=>g.includes(s.Li.DOWNLOAD_TRANSCRIPTION))),this.hasPermissionsToInviteParticipants$=this.selfPermissions$.pipe((0,f.U)(g=>g.includes(s.Li.INVITING_PARTICIPANTS))),this.hasPermissionsToUploadFiles$=this.selfPermissions$.pipe((0,f.U)(g=>g.includes(s.Li.UPLOAD_DOCUMENT))),this.hasPermissionsToDownloadsFiles$=this.selfPermissions$.pipe((0,f.U)(g=>g.includes(s.Li.DOWNLOAD_DOCUMENTS))),this.isRootGroupParticipantModerator$=this.conferenceSessionStoreService.rootGroupParticipant$.pipe((0,f.U)(g=>!!g?.roles?.includes(e.oG.MODERATOR))),this.isSelfParticipantModerator$=this.conferenceSessionStoreService.stateChanged.pipe((0,f.U)(()=>this.isSelfParticipantModerator)),this.isGroupConference$=this.conferenceSessionStoreService.stateChanged.pipe((0,f.U)(this.isGroupConferenceByStore.bind(this)),(0,r.x)()),this.canShareLink$=(0,i.aj)([this.conferenceSessionStoreService.conferenceMediaInfo$,this.isGroupConference$,this.isSelfParticipantModerator$]).pipe((0,f.U)(([g,E,n])=>(n||g?.conferenceSession?.sharingLevel===s.D5.ALL_PARTICIPANTS)&&!E)),this.canCreatePolls$=this.selfPermissions$.pipe((0,f.U)(g=>g.includes(s.Li.POLLING_CREATION))),this.isAudioEnabled$=this.conferenceSessionStoreService.stateChanged.pipe((0,f.U)(g=>this.getIsAudioEnabledByStore(g))),this.isVideoEnabled$=this.conferenceSessionStoreService.stateChanged.pipe((0,f.U)(g=>this.getIsVideoEnabledByStore(g))),this.canRecordConference$=this.conferenceSessionStoreService.stateChanged.pipe((0,f.U)(this.canRecordConference.bind(this)),(0,r.x)()),this.canTranscriptConference$=this.conferenceSessionStoreService.stateChanged.pipe((0,f.U)(this.canTranscriptConference.bind(this)),(0,r.x)()),this.canHandUp$=this.conferenceSessionStoreService.stateChanged.pipe((0,f.U)(this.canHandUp.bind(this)),(0,r.x)()),this.canExitFromGroup$=this.conferenceSessionStoreService.stateChanged.pipe((0,f.U)(this.canExitFromGroup.bind(this)),(0,r.x)()),this.isConferenceStarted$=this.conferenceSessionStoreService.stateChanged.pipe((0,f.U)(this.isConferenceStartedByStore.bind(this)),(0,r.x)()),this.isRoomConference$=this.conferenceSessionStoreService.stateChanged.pipe((0,f.U)(this.isRoomConferenceByStore.bind(this)),(0,r.x)()),this.shouldHideDesktopSharing$=this.conferenceSessionStoreService.stateChanged.pipe((0,f.U)(g=>this.getHideDesktopSharing(g))),this.shouldHideDocuments$=this.conferenceSessionStoreService.stateChanged.pipe((0,f.U)(g=>this.getHideDocument(g)),(0,_.yvm)(!1)),this.hasPermissionsToDemonstrateScreen$=this.selfPermissions$.pipe((0,f.U)(g=>g.includes(s.Li.DEMONSTRATE_DOCUMENTS))),this.hasChatModeration$=this.selfPermissions$.pipe((0,f.U)(g=>!g.includes(s.Li.CHAT_SEND_WITHOUT_PREMODERATION)))}getDefaultPermissions(v){let I;const{attendeePermissions:m,interpreterPermissions:g,moderatorPermissions:E,speakerPermissions:n}=this.conferenceSessionStoreService.conferenceMediaInfo.conferenceSession;switch(v){case e.oG.INTERPRETER:I=g;break;case e.oG.MODERATOR:I=E;break;case e.oG.SPEAKER:I=n;break;default:I=m}return I}getSelfParticipantIsOwner(v){return this.selfParticipant?.profileId===v?.conferenceMediaInfo?.conferenceSession.ownerProfileId}getSelfParticipantByStore(v){return v?.conferenceMediaInfo?.participants?.find(I=>I.profileId===this.loginService.loginInfo?.user.profileId)}hasPermissionsToTranslateByStore(v){const I=this.getSelfParticipantByStore(v);return!!(v?.conferenceMediaInfo?.conferenceSession?.conferenceType!==e.YI.WEBINAR||I?.roles?.includes(e.oG.MODERATOR)||I?.roles?.includes(e.oG.INTERPRETER)||I?.roles?.includes(e.oG.SPEAKER))}canRecordConference(v){const I=v?.conferenceMediaInfo?.conferenceSession.state!==e.Kv.NO_STARTED,m=v?.conferenceMediaInfo?.conferenceSession.features?.includes(s.vs.RECORD_AUTO_START),g=v?.conferenceMediaInfo?.conferenceSession.features?.includes(s.vs.HIDE_RECORDING);return I&&this.isSelfParticipantModerator&&!m&&!g}canTranscriptConference(v){const I=v?.conferenceMediaInfo?.conferenceSession.state!==e.Kv.NO_STARTED,m=v?.conferenceMediaInfo?.conferenceSession.features?.includes(s.vs.TRANSCRIBE_AT_START),g="true"===this.systemSettingsStore.getSystemSetting("EVENT_TRANSCRIPT");return I&&this.isSelfParticipantModerator&&!m&&g}canHandUp(v){const I=v?.conferenceMediaInfo?.conferenceSession.state!==e.Kv.NO_STARTED,m=!v?.conferenceMediaInfo?.conferenceSession.features?.includes(s.vs.HIDE_HAND_UP);return I&&m}canExitFromGroup(v){return v?.conferenceMediaInfo?.conferenceSession.state!==e.Kv.NO_STARTED&&this.isSelfParticipantModerator&&!0}isConferenceStartedByStore(v){return v?.conferenceMediaInfo?.conferenceSession.state!==e.Kv.NO_STARTED}isRoomConferenceByStore(v){return!!v?.conferenceMediaInfo?.conferenceSession.room}isGroupConferenceByStore(v){return!!v?.conferenceMediaInfo?.conferenceSession.groupedBy}getIsVideoEnabledByStore(v){const I=this.getSelfParticipantByStore(v);return[s.gC.AUDIO_VIDEO,s.gC.VIDEO].includes(I?.mediaState)&&this.hasPermissionsToTranslateByStore(v)}getIsAudioEnabledByStore(v){const I=this.getSelfParticipantByStore(v);return[s.gC.AUDIO_VIDEO,s.gC.AUDIO].includes(I?.mediaState)&&this.hasPermissionsToTranslateByStore(v)}canOperateMediaStatus$(v){return this.isSelfParticipantModerator$.pipe((0,f.U)(I=>I&&!this.isProfileIdOwner(v?.profileId)&&!this.isProfileIsSelf(v?.profileId)))}isProfileIdOwner(v){return!!v&&v===this.conferenceMediaInfo?.conferenceSession.ownerProfileId}isProfileIsSelf(v){return!!v&&v===this.loginService.profileId}canRemoveParticipant$(v){return this.isSelfParticipantModerator$.pipe((0,f.U)(I=>this.canRemoveParticipant(I,v)))}canRemoveParticipant(v,I){return v&&!this.isProfileIsSelf(I?.profileId)&&!this.isProfileIdOwner(I?.profileId)&&!this.isGroupConference}canMoveParticipant$(v){return this.isSelfParticipantModerator$.pipe((0,f.U)(I=>this.canMoveParticipant(I,v)))}canMoveParticipant(v,I){return v&&!this.isProfileIsSelf(I?.profileId)&&(this.hasGroupConferenceFeature||this.isGroupConference)}canChangeParticipantName$(v){return this.isSelfParticipantModerator$.pipe((0,f.U)(I=>this.canChangeParticipantName(I,v)))}canChangeParticipantName(v,I){return this.loginService.isGuest?v&&!I?.isRegisteredUser&&I?.profileId!==this.loginService.profileId:v&&!I?.isRegisteredUser||I?.profileId===this.loginService.profileId}canDisconnectParticipant$(v){return this.isSelfParticipantModerator$.pipe((0,f.U)(I=>this.canDisconnectParticipant(I,v)))}canDisconnectParticipant(v,I){return v&&!!I&&(0,h.DC)(I)&&!this.isProfileIsSelf(I?.profileId)}hasSimultaneousInterpretation(v){return!!v?.conferenceMediaInfo?.conferenceSession.features?.includes(s.vs.SIMULTANEOUS_INTERPRETATION)}isParticipantInConnected$(v){return this.conferenceSessionStoreService.participants$.pipe((0,f.U)(I=>!!I.find(m=>m.participantId===v.participantId)))}getHideDesktopSharing(v){return!!v?.conferenceMediaInfo?.conferenceSession.features?.includes(s.vs.HIDE_DESKTOPSHARING)}getHideDocument(v){return!!v?.conferenceMediaInfo?.conferenceSession.features?.includes(s.vs.HIDE_DOCUMENTS)}}return c.\u0275fac=function(v){return new(v||c)(p.LFG(u.mK),p.LFG(a.r),p.LFG(o.Ph))},c.\u0275prov=p.Yz7({token:c,factory:c.\u0275fac}),c})()},61616:(z,R,t)=>{t.d(R,{A:()=>d});var e=t(97591),s=t(85422),h=t(911),_=t(9112),i=t(45435),f=t(46782),r=t(59328),p=t(54355),u=t(89017),a=t(34330),o=t(16858),l=t(96699),c=t(10824);let d=(()=>{class v extends h.z23{constructor(m,g,E,n,S){super(),this.browserFullscreenService=m,this.pageSizeService=g,this.homeStoreService=E,this.conferencesStoreService=n,this.roomsStoreService=S}init(){this.handleFullscreen(),this.handleSmallScreen(),this.handleDraftConference(),this.handleDraftRoom(),this.handleConferences(),this.handleRooms()}avoidNotPipMode(){this.homeStoreService.conferenceSessionOpenMode!==s.l.PIP&&this.homeStoreService.setConferenceSessionOpenMode(s.l.PIP)}avoidWideMode(){this.homeStoreService.conferenceSessionOpenMode===s.l.WIDE&&this.homeStoreService.setConferenceSessionOpenMode(this.pageSizeService.isSmallScreen$.value?s.l.PIP:s.l.INLINE)}handleControlPanelOpenModeChange(m){this.homeStoreService.setConferenceSessionOpenMode(this.pageSizeService.isSmallScreen$.value&&m===s.l.INLINE?s.l.PIP:m)}handleFullscreen(){this.browserFullscreenService.isFullscreen$.pipe((0,i.h)(m=>m),(0,f.R)(this.destroy$)).subscribe(()=>this.homeStoreService.setConferenceSessionOpenMode(s.l.WIDE))}handleSmallScreen(){(0,_.aj)([this.pageSizeService.isSmallScreen$,this.homeStoreService.conferenceSessionOpenMode$.pipe((0,r.G)())]).pipe((0,i.h)(([m,[g,E]])=>m&&g!==E&&E===s.l.INLINE),(0,f.R)(this.destroy$)).subscribe(()=>this.homeStoreService.setConferenceSessionOpenMode(s.l.WIDE))}handleDraftConference(){this.conferencesStoreService.infoViewMode$.pipe((0,r.G)()).pipe((0,i.h)(([m,g])=>m!==g&&g===e.D.DRAFT),(0,i.h)(()=>!!this.homeStoreService.activeConferenceSessionId),(0,f.R)(this.destroy$)).subscribe(()=>{this.homeStoreService.setConferenceSessionOpenMode(s.l.PIP)})}handleDraftRoom(){this.roomsStoreService.infoViewMode$.pipe((0,r.G)()).pipe((0,i.h)(([m,g])=>m!==g&&g===e.D.DRAFT),(0,i.h)(()=>!!this.homeStoreService.activeConferenceSessionId),(0,f.R)(this.destroy$)).subscribe(()=>{this.homeStoreService.setConferenceSessionOpenMode(s.l.PIP)})}handleConferences(){(0,_.aj)([this.conferencesStoreService.infoViewMode$,this.conferencesStoreService.selectedConferenceItemId$.pipe((0,r.G)())]).pipe((0,i.h)(([m,[g,E]])=>[e.D.INFO,e.D.EDIT_SINGLE].includes(m)&&g!==E&&!!E),(0,i.h)(()=>this.homeStoreService.conferenceSessionOpenMode===s.l.INLINE),(0,f.R)(this.destroy$)).subscribe(()=>{this.homeStoreService.setConferenceSessionOpenMode(s.l.PIP)})}handleRooms(){(0,_.aj)([this.roomsStoreService.infoViewMode$,this.roomsStoreService.selectedConferenceItemId$.pipe((0,r.G)())]).pipe((0,i.h)(([m,[g,E]])=>[e.D.INFO,e.D.EDIT_SINGLE].includes(m)&&g!==E),(0,i.h)(()=>this.homeStoreService.conferenceSessionOpenMode===s.l.INLINE),(0,f.R)(this.destroy$)).subscribe(()=>{this.homeStoreService.setConferenceSessionOpenMode(s.l.PIP)})}}return v.\u0275fac=function(m){return new(m||v)(p.LFG(u.n),p.LFG(a.g),p.LFG(o.h),p.LFG(l.r),p.LFG(c._))},v.\u0275prov=p.Yz7({token:v,factory:v.\u0275fac}),v})()},62152:(z,R,t)=>{t.d(R,{e:()=>_,q:()=>i});var e=t(75079),s=t(97380),h=t(79671);function _(f,r){let p=[...f];for(let u of r)p=u.value?(0,e.Z)([...p,u.permission]):(0,s.Z)(p,u.permission);return p}function i(f,r,p){return(0,h.Z)(r,p).findIndex(u=>u===f)>=0}},17541:(z,R,t)=>{t.d(R,{M:()=>h});var e=t(69158),s=t(45435);class h{constructor(i,f,r){this.conferenceDraftFsDeltaService=i,this.loginService=f,this.toastr=r,this.listenSessionChanged()}getDraftFromLocalStorage(i){const f=localStorage.getItem(i);if(!f)return null;let r=null;try{r=JSON.parse(f)}catch{console.error("Error during parse saved conference draft")}return r}setDraftToLocalStorage(i,f){f?localStorage.setItem(i,JSON.stringify(f)):localStorage.removeItem(i)}checkDraftFilesExpired(){const i=this.resetDraftFsItems(),f=this.resetEditDraftFsItems();(i||f)&&this.toastr.info({translationKey:this.getToastrMessage()})}listenSessionChanged(){this.loginService.sessionIdChanged$.pipe((0,s.h)(i=>!!i.prev&&i.current&&i.prev!==i.current)).subscribe(()=>{this.checkDraftFilesExpired()})}resetDraftFsItems(){const i=this.getDraft();return!(!i||!i.fsItems?.length||i.sessionId===this.loginService.sessionId||(i.fsItems=[],this.setDraft(i),0))}resetEditDraftFsItems(){const i=this.getEditDraft();if(!i||i.sessionId===this.loginService.sessionId)return!1;const r=this.conferenceDraftFsDeltaService.modulePrefix,p=this.conferenceDraftFsDeltaService.modulePostfix;this.conferenceDraftFsDeltaService.modulePrefix=this.getModulePrefix(),this.conferenceDraftFsDeltaService.modulePostfix=e.fo.FS_ITEMS;const u=this.conferenceDraftFsDeltaService.getFSItemsDraftDelta();return u.forEach(a=>a.addedFSItems=[]),this.conferenceDraftFsDeltaService.updateFSItemsDelta(u),this.conferenceDraftFsDeltaService.modulePrefix=r,this.conferenceDraftFsDeltaService.modulePostfix=p,!0}}},70667:(z,R,t)=>{t.d(R,{p:()=>v});var e=t(87177),s=t(94982),h=t(23726),_=t(73400),i=t(5469),f=t(97591),r=t(911),p=t(9112),u=t(25917),a=t(88002),o=t(68939),l=t(46782),c=t(68307),d=t(43190);class v extends r.z23{get conferences(){return this.conferences$.value}get currentDirectoryInfo(){const m=this.conferencesLikeStoreService.currentDirectoryPath;return m[m.length-1]}get selectedConferenceRootFolderId(){return this.selectedConferenceRootFolderId$.value||null}get selectedConference(){return this.selectedConference$.value}get participantFilterType(){const m=this.selectedConference;if(m?.settings.conferenceType===e.YI.WEBINAR){const g=m.personalParticipationInfo.conferenceSessionRoles??[];return!g.length||g.includes(e.oG.ATTENDEE)?s.F.SPEAKER_OR_MODERATOR:s.F.INVITED}return s.F.INVITED}get currentFolderId(){return this.conferencesLikeStoreService.currentDirectoryId||this.selectedConference?.rootFolderId||null}constructor(m,g,E,n,S,C,T,P,A){super(),this.conferenceParticipantsListApiService=m,this.conferenceSessionFilesApiService=g,this.userSessionStoreService=E,this.conferencesApiService=n,this.conferenceSessionApiService=S,this.conferencesLikeStoreService=C,this.homeStoreService=T,this.loginService=P,this.toastr=A,this.currentDirectoryInfo$=this.conferencesLikeStoreService.currentDirectoryPath$.pipe((0,a.U)(M=>M[M.length-1])),this.canCreateConference$=this.userSessionStoreService.canCreateConference$,this.selectedConference$=(0,r.Hxy)((0,p.aj)([this.conferencesLikeStoreService.selectedConferenceItemId$,this.conferencesLikeStoreService.conferences$]).pipe((0,a.U)(([M,L])=>L.find(N=>N.id===M)))),this.selectedConferenceRootFolderId$=(0,r.Hxy)(this.selectedConference$.pipe((0,a.U)(M=>M?.rootFolderId))),this.limit=i._Z.settings.CONFERENCES_PAGE_SIZE,this.participantsLimit=i._Z.settings.CONFERENCES_PARTICIPANTS_LIST_PAGE_SIZE,this.fsItemsLimit=i._Z.settings.CONFERENCES_FS_ITEMS_PAGE_SIZE,this.now=Date.now()}isConferenceModerator(m){return!!m.personalParticipationInfo.conferenceRoles?.includes(e.oG.MODERATOR)}isConferenceSessionModerator(m){return!!m?.personalParticipationInfo.conferenceSessionRoles?.includes(e.oG.MODERATOR)}canEditConference(m){return!!m&&m.state!==e.Kv.STOPPED&&this.isConferenceModerator(m)}canEditConferenceSession(m){return!!m&&m.state!==e.Kv.STOPPED&&this.isConferenceSessionModerator(m)}canEditConference$(m){return m?this.conferences$.pipe((0,a.U)(g=>g.find(({id:E})=>E===m.id)),(0,a.U)(g=>this.canEditConference(g))):(0,u.of)(!1)}canEditConferenceSession$(m){return m?this.conferences$.pipe((0,a.U)(g=>g.find(({id:E})=>E===m.id)),(0,a.U)(g=>this.canEditConferenceSession(g))):(0,u.of)(!1)}canDeleteConference(m){return!!m&&(this.isConferenceModerator(m)||this.isConferenceSessionModerator(m))}canDeleteConference$(m){return m?this.conferences$.pipe((0,a.U)(g=>g.find(({id:E})=>E===m.id)),(0,a.U)(g=>this.canDeleteConference(g))):(0,u.of)(!1)}goToDraft(){this.setSelectedConference(null),this.conferencesLikeStoreService.setInfoViewMode(f.D.DRAFT)}goToInfo(){this.conferencesLikeStoreService.setInfoViewMode(f.D.INFO)}fetchConferenceTemplates(){this.conferencesLikeStoreService.setIsTemplatesFetching(!0),this.conferencesApiService.getConferenceTemplates().pipe((0,o.x)(()=>this.conferencesLikeStoreService.setIsTemplatesFetching(!1)),(0,l.R)(this.destroy$)).subscribe(m=>{this.conferencesLikeStoreService.setTemplates(m),this.conferencesLikeStoreService.setIsTemplatesFetched(!0)})}fetchConferenceSessionData$(){const m=this.selectedConference,g=this.conferencesLikeStoreService.startTransactionPositive("conferences__update-conference-session-id");return m.conferenceSessionId&&m.rootFolderId?(0,u.of)({conferenceSessionId:m.conferenceSessionId,rootFolderId:m.rootFolderId}):this.conferenceSessionApiService.getConferencePersonalInfo(m.conferenceId,m.sessionNumber).pipe((0,c.b)(n=>{g.updateConference(S=>S.conferenceId===m.conferenceId&&S.sessionNumber===m.sessionNumber,S=>({...S,conferenceSessionId:n.conferenceSessionId,rootFolderId:n.rootFolderId}),"conferences__set-conference-session-id-and-root_folder_id"),g.setSelectedConferenceSessionId(n.conferenceSessionId),g.commit()}),(0,a.U)(n=>({conferenceSessionId:n.conferenceSessionId,rootFolderId:n.rootFolderId})))}fetchParticipantsFirstPage(){this.conferencesLikeStoreService.setParticipants([]);const m={offset:0,limit:this.participantsLimit,participantFilterType:this.participantFilterType,sortField:s.l.ROLE,requestedData:[_.N.CALL_REQUEST]};this.conferencesLikeStoreService.setIsParticipantsFirstPageFetching(!0);const g=E=>this.conferenceParticipantsListApiService.findParticipants(E,m).pipe((0,o.x)(()=>this.conferencesLikeStoreService.setIsParticipantsFirstPageFetching(!1)));this.fetchConferenceSessionData$().pipe((0,d.w)(E=>g(E.conferenceSessionId)),(0,l.R)(this.destroy$)).subscribe(E=>{this.conferencesLikeStoreService.setTotalParticipantsCount(E.totalCount),this.conferencesLikeStoreService.setHasParticipantsNextPage(E.hasNext),this.conferencesLikeStoreService.setParticipants(E.data)},()=>this.toastr.error({translationKey:"CONFERENCES__LIST__CONFERENCE_INFO__PARTICIPANTS_LIST__ERRORS__COMMON_ERROR"}))}fetchParticipantsNextPage(){const m=this.selectedConference,g={offset:this.conferencesLikeStoreService.participants.length,limit:this.participantsLimit,participantFilterType:this.participantFilterType,sortField:s.l.ROLE};this.conferencesLikeStoreService.setIsParticipantsNextPageFetching(!0),this.conferenceParticipantsListApiService.findParticipants(m.conferenceSessionId,g).pipe((0,o.x)(()=>this.conferencesLikeStoreService.setIsParticipantsNextPageFetching(!1)),(0,l.R)(this.destroy$)).subscribe(E=>{this.conferencesLikeStoreService.setHasParticipantsNextPage(E.hasNext),this.conferencesLikeStoreService.appendParticipants(E.data)},()=>this.toastr.error({translationKey:"CONFERENCES__LIST__CONFERENCE_INFO__PARTICIPANTS_LIST__ERRORS__COMMON_ERROR"}))}fetchFsItemsFirstPage(m){this.conferencesLikeStoreService.setIsFsItemsFirstPageFetching(!0);const g={offset:0,limit:this.fsItemsLimit,sortField:h._.NAME},E=(n,S)=>this.conferenceSessionFilesApiService.getDirectoryContent(n,S,g).pipe((0,o.x)(()=>this.conferencesLikeStoreService.setIsFsItemsFirstPageFetching(!1)));this.fetchConferenceSessionData$().pipe((0,d.w)(n=>E(n.conferenceSessionId,m||n.rootFolderId)),(0,l.R)(this.destroy$)).subscribe(n=>{this.conferencesLikeStoreService.setHasFsItemsNextPage(n.hasNext),this.conferencesLikeStoreService.setTotalFsItemsCount(n.totalCount),this.conferencesLikeStoreService.setFsItems(n.data)},()=>this.toastr.error({translationKey:"CONFERENCES__LIST__CONFERENCE_INFO__FILES__ERRORS__COMMON_ERROR"}))}fetchFsItemsNextPage(){const m=this.selectedConference,g={offset:this.conferencesLikeStoreService.fsItems.length,limit:this.fsItemsLimit,sortField:h._.NAME};this.conferencesLikeStoreService.setIsFsItemsNextPageFetching(!0),this.conferenceSessionFilesApiService.getDirectoryContent(m.conferenceSessionId,this.currentFolderId,g).pipe((0,o.x)(()=>this.conferencesLikeStoreService.setIsFsItemsNextPageFetching(!1)),(0,l.R)(this.destroy$)).subscribe(E=>{this.conferencesLikeStoreService.setHasFsItemsNextPage(E.hasNext),this.conferencesLikeStoreService.appendFsItems(E.data)},()=>this.toastr.error({translationKey:"CONFERENCES__LIST__CONFERENCE_INFO__FILES__ERRORS__COMMON_ERROR"}))}setSelectedConference(m){const g=this.conferencesLikeStoreService.startTransactionPositive("conferences__set-selected-conference");g.setParticipants([]),g.setFsItems([]),g.setTotalFsItemsCount(0),g.setSelectedConferenceItemId(m?.id||null),g.setSelectedConferenceSessionId(m?.conferenceSessionId||null),g.setInfoViewMode(f.D.INFO),g.setCurrentDirectoryId(m?.rootFolderId),g.resetCurrentDirectoryPath(),g.commit()}}},55122:(z,R,t)=>{t.d(R,{d:()=>N});var e=t(87177),s=t(69158),h=t(70226),_=t(97591),i=t(35758),f=t(25917),r=t(88002),p=t(43190),u=t(15257),a=t(68307),o=t(5304),l=t(45435),c=t(46782),d=t(68939),v=t(70667),I=t(78519),m=t(54355),g=t(62731),E=t(96699),n=t(78358),S=t(5469),C=t(911),T=t(31585),P=t(93470),A=t(30014),M=t(28728),L=t(16858);let N=(()=>{class W extends v.p{get searchFilterValue(){return this.homeSectionSearchService.getSectionSearchState(I.G.CONFERENCES)}constructor(V,D,F,J,H,Y,ee,X,K,oe,O,U){super(K,V,oe,ee,X,D,O,J,Y),this.conferencesStoreService=D,this.createConferenceDraftService=F,this.overlayService=H,this.homeSectionSearchService=U,this.conferences$=this.conferencesStoreService.conferences$}fetchFirstPage$(){return this.conferencesStoreService.setIsFirstPageFetched(!1),this.conferencesStoreService.setIsFirstPageFetching(!0),this.getDateFrom$().pipe((0,r.U)(V=>this.getFirstPageRequests(V)),(0,p.w)(({beforeFindRequest:V,afterFindRequest:D})=>this.processFetchFirstPage$(V,D)))}fetchFirstPage(){this.fetchFirstPage$().pipe((0,u.q)(1)).subscribe()}processFetchFirstPage$(V,D){return(0,i.D)([this.conferencesApiService.findConferenceSessions(V),this.conferencesApiService.findConferenceSessions(D)]).pipe((0,a.b)(([F,J])=>{this.conferencesStoreService.setHasPreviousPage(F.hasNext),this.conferencesStoreService.setHasNextPage(J.hasNext)}),(0,r.U)(([F,J])=>[...F.data.reverse(),...J.data]),(0,r.U)(F=>this.conferencesStoreService.normalizeConferences(F)),(0,a.b)(F=>this.conferencesStoreService.setConferences(F)),(0,a.b)(()=>this.conferencesStoreService.setIsFirstPageFetched(!0)),(0,o.K)(()=>(this.toastr.error({translationKey:"CONFERENCES__LIST__FETCHING_ERROR"}),(0,f.of)(null))),(0,l.h)(F=>!!F)).pipe((0,c.R)(this.destroy$),(0,d.x)(()=>this.conferencesStoreService.setIsFirstPageFetching(!1)))}getDateFrom$(){const V=this.conferencesStoreService.selectedConferenceSessionId;return V?this.conferenceSessionApiService.getConferenceSessionPublic(V).pipe((0,r.U)(D=>D.startDate+1),(0,o.K)(()=>(0,f.of)(this.now))):(0,f.of)(this.now)}getFirstPageRequests(V){return{beforeFindRequest:{dateTo:0,dateFrom:V,limit:this.limit,orderAsc:!1,nameContains:this.searchFilterValue||""},afterFindRequest:{dateFrom:V+1,limit:this.limit,nameContains:this.searchFilterValue||""}}}fetchNextPage$(){const V={dateFrom:this.conferences[this.conferences.length-1].startDate+1,limit:this.limit,nameContains:this.searchFilterValue||""};return this.conferencesStoreService.setIsNextPageFetching(!0),this.conferencesApiService.findConferenceSessions(V).pipe((0,a.b)(D=>this.conferencesStoreService.setHasNextPage(D.hasNext)),(0,r.U)(D=>this.conferencesStoreService.appendConferences(D.data)),(0,c.R)(this.destroy$),(0,d.x)(()=>this.conferencesStoreService.setIsNextPageFetching(!1)))}fetchPreviousPage$(){const V={dateTo:0,dateFrom:this.conferences[0].startDate-1,limit:this.limit,orderAsc:!1,nameContains:this.searchFilterValue||""};return this.conferencesStoreService.setIsPreviousPageFetching(!0),this.conferencesApiService.findConferenceSessions(V).pipe((0,a.b)(D=>this.conferencesStoreService.setHasPreviousPage(D.hasNext)),(0,r.U)(D=>this.conferencesStoreService.prependConferences(D.data.reverse())),(0,c.R)(this.destroy$),(0,d.x)(()=>this.conferencesStoreService.setIsPreviousPageFetching(!1)))}respondOnConferenceSessionInvitation(V,D){const F=V.personalParticipationInfo.conferenceSessionInviteResponse,J=H=>{this.conferencesStoreService.updateConference(Y=>Y.id===V.id,Y=>(Y.personalParticipationInfo={...Y.personalParticipationInfo,conferenceSessionInviteResponse:H},Y),"respond-on-conference-session-invitation"),this.conferencesStoreService.updateParticipant(Y=>Y.profileId===this.loginService.profileId,Y=>({...Y,inviteResponseType:H}),"respond-on-conference-session-invitation")};J(D),this.conferencesApiService.respondOnConferenceSessionInvitation(V.conferenceSessionId,D).pipe((0,c.R)(this.destroy$)).subscribe(()=>{},()=>{this.toastr.error({translationKey:"CONFERENCES__LIST__ITEM__INVITE_RESPOND_ERROR"}),J(F||e.Br.NONE)})}respondOnConferenceInvitation(V,D){const F=V.personalParticipationInfo.conferenceSessionInviteResponse,J=H=>{this.conferencesStoreService.updateConference(Y=>Y.conferenceId===V.conferenceId,Y=>(Y.personalParticipationInfo={...Y.personalParticipationInfo,conferenceSessionInviteResponse:H,conferenceInviteResponse:H},Y),"respond-on-conference-invitation")};J(D),this.conferencesApiService.respondOnConferenceInvitation(V.conferenceId,D).pipe((0,c.R)(this.destroy$)).subscribe(()=>{},()=>{this.toastr.error({translationKey:"CONFERENCES__LIST__ITEM__INVITE_RESPOND_ERROR"}),J(F||e.Br.NONE)})}isNotRespondedToInvitation(V){return(V.personalParticipationInfo?.conferenceSessionInviteResponse===e.Br.NONE||!V.personalParticipationInfo?.conferenceSessionInviteResponse)&&V.ownerProfileId!==this.loginService.profileId}canChangeInvitationResponse(V){return!(!V.startDate||this.loginService.profileId===V.ownerProfileId||V.personalParticipationInfo.conferenceSessionInviteResponse===e.Br.NONE||V.state===e.Kv.STOPPED)}startEditConference(){alert("Not implemented yet")}startEditConferenceSession(){if(!this.selectedConference)return void console.warn("Cannot go to edit conference due to no one conference is selected");this.conferencesStoreService.setOriginEditDraft(this.selectedConference);const V=this.conferencesStoreService.editDraft;V?V.conferenceSessionId!==this.selectedConference.conferenceSessionId?this.overlayService.openModal(h.q,{header:"CONFERENCES__LIST__EDIT__CONFERENCE_DRAFT_EXIST_MODAL__HEADER",text:"CONFERENCES__LIST__EDIT__CONFERENCE_DRAFT_EXIST_MODAL__TEXT"},{closeOnBackdrop:!1,closeOnEsc:!1,hasBackdrop:!0}).afterClosed$.pipe((0,c.R)(this.destroy$)).subscribe(D=>{switch(D.data){case h.u.PROCEED:this.setSelectedConference(null),this.goToEditConferenceSession();break;case h.u.DELETE:this.conferencesStoreService.setEditDraftAndSave(null),this.createEditDraftAndGoToEditSection(this.selectedConference),this.removeConferenceOnlineDrafts()}}):this.goToEditConferenceSession():this.createEditDraftAndGoToEditSection(this.selectedConference)}goToEditConferenceSession(){const V=this.conferences,D=localStorage.getItem(s.Tz.COMMON_ONLINE_CONFERENCE);if(D){const J=JSON.parse(D).conferenceId,H=V.find(Y=>Y.conferenceId===J);H&&this.setSelectedConference(H)}this.conferencesStoreService.setInfoViewMode(_.D.EDIT_SINGLE)}createEditDraftAndGoToEditSection(V){this.createEditDraft$(V).pipe((0,c.R)(this.destroy$)).subscribe(()=>this.goToEditConferenceSession())}createEditDraft$(V){return this.conferencesStoreService.setIsEditDraftCreating(!0),this.createConferenceDraftService.getEditDraft$(V,!1).pipe((0,a.b)(D=>this.conferencesStoreService.setEditDraft(D)),(0,d.x)(()=>this.conferencesStoreService.setIsEditDraftCreating(!1)),(0,c.R)(this.destroy$))}createDraftAndGoToDraftSection(){this.createConferenceDraftService.getEmptyDraft$().pipe((0,c.R)(this.destroy$)).subscribe(V=>{this.conferencesStoreService.setDraft(V),this.goToDraft()})}removeConferenceOnlineDrafts(){[s.Tz.COMMON_ONLINE_CONFERENCE,s.Tz.ONLINE_CONFERENCE_ITEMS,s.Tz.ONLINE_CONFERENCE_PARTICIPANTS].forEach(D=>localStorage.removeItem(D))}}return W.\u0275fac=function(V){return new(V||W)(m.LFG(g.x),m.LFG(E.r),m.LFG(n.h),m.LFG(S.r6),m.LFG(C.Bi9),m.LFG(C._Wo),m.LFG(T.A),m.LFG(P.u),m.LFG(A.C),m.LFG(M.j8),m.LFG(L.h),m.LFG(I.y))},W.\u0275prov=m.Yz7({token:W,factory:W.\u0275fac}),W})()},30445:(z,R,t)=>{t.d(R,{k:()=>i});var e=t(69158),s=t(76610),h=t(6388),_=t(54355);let i=(()=>{class f extends e.tT{getFSItemsDraftDelta(){const p=this.draftKey,u=localStorage.getItem(p);return u&&p.toLowerCase().includes("items")?new Map(JSON.parse(u)):new Map}updateFSItemsDelta(p){localStorage.setItem(this.draftKey,JSON.stringify(Array.from(p.entries())))}addFSItemToRemoved(p,u){const a=this.getFSItemsDraftDelta(),o=a.get(u);if(!o)return this.createNewDeltaEmptyRecord(u),void this.addFSItemToRemoved(p,u);o.removedFSItems=[...new Set([...o.removedFSItems,p])],o.changedFSItems=o.changedFSItems.filter(l=>(l?.current).nodeId!==p),a.set(u,o),this.updateFSItemsDelta(a)}addFSItemToAdded(p,u){const a=this.getFSItemsDraftDelta(),o=a.get(u);if(!o)return this.createNewDeltaEmptyRecord(u),void this.addFSItemToAdded(p,u);{const l={...p,directoryId:u};o.addedFSItems.push(l),a.set(u,o)}this.updateFSItemsDelta(a)}removeFSItemFromAdded(p,u){const a=this.getFSItemsDraftDelta(),o=a.get(u);o&&(o.addedFSItems=o.addedFSItems.filter(l=>l.resourceId!==p.resourceId),a.set(u,o),this.updateFSItemsDelta(a))}updateJustLoadedFile(p){const{currentDirectoryItems:u,itemToUpdatePair:a,directoryId:o,currentDelta:l}=p,c=u.addedFSItems.findIndex(d=>d.resourceId===a.current?.resourceId);-1!==c&&(a.current.directoryId=u.addedFSItems[c].directoryId,u.addedFSItems[c]=(0,s.Z)(a.current)),l.set(o,u)}updateAlreadyLoadedFile(p){const{currentDirectoryItems:u,itemToUpdatePair:a,directoryId:o,currentDelta:l}=p,c=u.changedFSItems.findIndex(d=>d.current.nodeId===a.current.nodeId);-1!==c?u.changedFSItems[c].current=(0,s.Z)(a.current):u.changedFSItems.push(a),l.set(o,u)}addFSItemToUpdated(p,u){const a=this.getFSItemsDraftDelta(),o=a.get(u);if(!o)return this.createNewDeltaEmptyRecord(u),void this.addFSItemToUpdated(p,u);p?.current?.hasOwnProperty("resourceId")?this.updateJustLoadedFile({itemToUpdatePair:p,directoryId:u,currentDirectoryItems:o,currentDelta:a}):this.updateAlreadyLoadedFile({itemToUpdatePair:p,directoryId:u,currentDirectoryItems:o,currentDelta:a}),this.updateFSItemsDelta(a)}getReadyToUpdateAddedFSList(){const p=this.getFSItemsDraftDelta(),u=[];let a=[];for(const[,o]of p.entries())a=[...a,...o.addedFSItems];return a.forEach(o=>{u.push({name:o.name,availability:o.availability,resourceId:o.resourceId,directoryId:o.directoryId})}),u}getReadyToUpdateUpdatedFSList(){const p=this.getFSItemsDraftDelta();let u=[];const a=[];for(const[,o]of p.entries())u=[...u,...o.changedFSItems];return u.forEach(o=>{(0,h.Z)(o.initial.availability,o.current.availability)||a.push({name:o.current.name,availability:o.current.availability,documentId:o.current.nodeId})}),a}getReadyToUpdateRemovedFSList(){const p=this.getFSItemsDraftDelta();let u=[];for(const[,a]of p.entries())u=[...u,...a.removedFSItems];return u}createNewDeltaEmptyRecord(p){const u=this.getFSItemsDraftDelta();u.set(p,{addedFSItems:[],changedFSItems:[],removedFSItems:[]}),this.updateFSItemsDelta(u)}}return f.\u0275fac=function(){let r;return function(u){return(r||(r=_.n5z(f)))(u||f)}}(),f.\u0275prov=_.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()},89835:(z,R,t)=>{t.d(R,{A:()=>o});var e=t(59600),s=t(21122),h=t(21864),_=t(8815),i=t(911),f=t(34423),r=t(54355),p=t(1349),u=t(51468),a=t(6190);let o=(()=>{class l{constructor(d,v,I){this.formatDate=d,this.formatDuration=v,this.translate=I}getInitialStartTime(){const d=i.IjF.createDate(),v=i.IjF.toUtcDate(i.IjF.startOfDay(d));return i.IjF.toUtcDate(d)-v}getStartTime(d){return d.startTimeIsNow?this.getInitialStartTime():d.startTime}getPeriodicityDescription(d){switch(d.periodicity){case s.ST.SINGLE:return this.getSingleDescription(d);case s.ST.BUSINESS_DAYS:return this.getBusinessDaysDescription(d);case s.ST.DAILY:return this.getDailyDescription(d);case s.ST.WEEKLY:return this.getWeeklyDescription(d);case s.ST.MONTHLY:return this.getMonthlyDescription(d)}}getSingleDescription(d){const v=this.formatDate.transformInstant(new UtcDate(d.startDate),"dd.MM.yyyy",{currentYearFormat:"dd.MM"}),I=this.formatDuration.transformInstant(this.getStartTime(d),"ms","HH:mm"),m=this.getDurationText(d);return this.translate.instant("CONFERENCES__LIST__DRAFT__PERIODICAL_TEXT__SINGLE",{date:v,startTime:I,duration:m})}getBusinessDaysDescription(d){const v=this.formatDuration.transformInstant(this.getStartTime(d),"ms","HH:mm"),I=this.getDurationText(d);return`${this.translate.instant("CONFERENCES__LIST__DRAFT__PERIODICAL_TEXT__BUSINESS_DAYS",{startTime:v,duration:I})}<br>${this.getBusinessDaysDescriptionFirstSessionDate(d)}`}getBusinessDaysDescriptionFirstSessionDate(d){const m=[0,1,2,3,4].map(E=>this.getNextDayOfWeek(new UtcDate(d.startDate),E)).sort((E,n)=>E.getTime()-n.getTime())[0],g=this.formatDate.transformInstant(m,"dd.MM.yyyy",{currentYearFormat:"dd.MM"});return this.translate.instant("CONFERENCES__LIST__DRAFT__PERIODICAL_TEXT__FIRST_SESSION",{date:g})}getDailyDescription(d){const v=this.formatDuration.transformInstant(this.getStartTime(d),"ms","HH:mm"),I=this.getDurationText(d);return`${this.translate.instant("CONFERENCES__LIST__DRAFT__PERIODICAL_TEXT__DAILY",{startTime:v,duration:I})}<br>${this.getDailyDescriptionFirstSessionDate(d)}`}getDailyDescriptionFirstSessionDate(d){const v=this.formatDate.transformInstant(d.startDate,"dd.MM.yyyy",{currentYearFormat:"dd.MM"});return this.translate.instant("CONFERENCES__LIST__DRAFT__PERIODICAL_TEXT__FIRST_SESSION",{date:v})}getWeeklyDescription(d){const v=f.iu.find(T=>T.type===d.weeklyRepeat),I=this.translate.instant(v.title),m=Array(7).fill(0).map((T,P)=>P),g=d.weeklyDays.sort((T,P)=>m.indexOf(T)-m.indexOf(P)).map(T=>this.translateDayOfWeek(T)).join(", "),E=this.formatDuration.transformInstant(this.getStartTime(d),"ms","HH:mm"),n=this.getDurationText(d);return`${this.translate.instant("CONFERENCES__LIST__DRAFT__PERIODICAL_TEXT__WEEKLY",{repeatType:I,days:g,startTime:E,duration:n})}<br>${this.getWeeklyDescriptionFirstSessionDate(d)}`}getWeeklyDescriptionFirstSessionDate(d){const m=d.weeklyDays.map(E=>this.getNextDayOfWeek(new UtcDate(d.startDate),E)).sort((E,n)=>E.getTime()-n.getTime())[0],g=this.formatDate.transformInstant(m,"dd.MM.yyyy",{currentYearFormat:"dd.MM"});return this.translate.instant("CONFERENCES__LIST__DRAFT__PERIODICAL_TEXT__FIRST_SESSION",{date:g})}translateDayOfWeek(d){return this.translate.instant(`SHORT_${e.sb[d]}`)}getNextDayOfWeek(d,v){const I=new UtcDate(d.getTime());return I.setDate(d.getDate()+(7+v-(0,h.Z)(d)+1)%7),I}getDurationText(d){const v=this.getDurationMs(d.duration,d.customDuration),I=Math.floor((v+1)/i.ZC3),m=Math.floor((v-I*i.ZC3)/i.wnR),g=this.translate.instant("HOURS_SHORT"),E=this.translate.instant("MINUTES_SHORT");let C="";return I&&(C+=`${I}${g}`),m&&(C+=` ${m}${E}`),C}getDurationMs(d,v){switch(d){case s.qj.M_30:case s.qj.M_60:case s.qj.M_90:return f.me.find(m=>m.type===d).value;default:return v}}getDurationItemByMs(d){return f.me.find(v=>v.value===d)}getDurationTypeByMs(d){return f.me.find(v=>v.value===d)?.type}getMonthlyDescription(d){switch(d.monthlyRepeatType){case s.e8.DAY:return this.getMonthlyDayDescription(d);case s.e8.DATE:return this.getMonthlyDateDescription(d)}}getMonthlyDayDescription(d){const v=d.monthlyDayNumberRepeat,I=f._f.find(P=>P.type===d.monthlyWeekDayRepeat),m=this.translate.instant(I.title),g=f.e5.find(P=>P.type===d.monthlyRepeat),E=this.translate.instant(g.title).toLowerCase(),n=this.formatDuration.transformInstant(this.getStartTime(d),"ms","HH:mm"),S=this.getDurationText(d);return`${this.translate.instant("CONFERENCES__LIST__DRAFT__PERIODICAL_TEXT__MONTHLY_DAY",{dayNumber:v,weekDay:m,interval:E,startTime:n,duration:S})}<br>${this.getMonthlyDayDescriptionFirstSessionDate(d)}`}getMonthlyDayDescriptionFirstSessionDate(d){const v=new UtcDate(d.startDate),I=+d.monthlyDayNumberRepeat,m=+d.monthlyWeekDayRepeat;let g=v.getMonth(),E=this.getWeeksInMonth(v.getFullYear(),g).map(T=>T.dates).filter(T=>-1!==T[m]),n=E[I-1][m-1];n<(new UtcDate).getDate()&&(g=v.getMonth()+1,E=this.getWeeksInMonth(v.getFullYear(),g).map(T=>T.dates).filter(T=>-1!==T[m]),n=E[I-1][m-1]);const S=new UtcDate(v.getFullYear(),g,n),C=this.formatDate.transformInstant(S,"dd.MM.yyyy",{currentYearFormat:"dd.MM"});return this.translate.instant("CONFERENCES__LIST__DRAFT__PERIODICAL_TEXT__FIRST_SESSION",{date:C})}getWeeksInMonth(d,v){const I=[],m=new UtcDate(d,v,1),E=new UtcDate(d,v+1,0).getDate();let n=(0,h.Z)(m)-1;for(let P=1;P<=E;P++)(0===n||0===I.length)&&I.push([]),I[I.length-1].push(P),n=(n+1)%7;const S=I.filter(P=>!!P.length).map(P=>({start:P[0],end:P[P.length-1],dates:P})),C=S[0].dates;S[0].dates=[...Array(7-C.length).fill(-1),...C];const T=S[S.length-1].dates;return S[S.length-1].dates=[...T,...Array(7-T.length).fill(-1)],S}getMonthlyDateDescription(d){const v=d.monthlyDateRepeat,I=f.e5.find(C=>C.type===d.monthlyRepeat),m=this.translate.instant(I.title).toLowerCase(),g=this.formatDuration.transformInstant(this.getStartTime(d),"ms","HH:mm"),E=this.getDurationText(d);return`${this.translate.instant("CONFERENCES__LIST__DRAFT__PERIODICAL_TEXT__MONTHLY_DATE",{date:v,interval:m,startTime:g,duration:E})}<br>${this.getMonthlyDateDescriptionFirstSessionDate(d)}`}getMonthlyDateDescriptionFirstSessionDate(d){const v=new UtcDate(d.startDate).getDate()>d.monthlyDateRepeat?(0,_.Z)(new UtcDate(d.startDate),1).setDate(d.monthlyDateRepeat):new UtcDate(d.startDate).setDate(d.monthlyDateRepeat),I=this.formatDate.transformInstant(v,"dd.MM.yyyy",{currentYearFormat:"dd.MM"});return this.translate.instant("CONFERENCES__LIST__DRAFT__PERIODICAL_TEXT__FIRST_SESSION",{date:I})}}return l.\u0275fac=function(d){return new(d||l)(r.LFG(p.ik),r.LFG(u.JJ),r.LFG(a.sK))},l.\u0275prov=r.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()},38507:(z,R,t)=>{t.d(R,{H:()=>r});var e=t(5469),s=t(17541),h=t(69158),_=t(54355),i=t(30445),f=t(911);let r=(()=>{class p extends s.M{constructor(a,o,l){super(a,o,l)}getDraft(){return this.getDraftFromLocalStorage(e._Z.settings.CONFERENCE_DRAFT_LOCAL_STORE_NAME)}setDraft(a){this.setDraftToLocalStorage(e._Z.settings.CONFERENCE_DRAFT_LOCAL_STORE_NAME,a)}getEditDraft(){return this.getDraftFromLocalStorage(e._Z.settings.CONFERENCE_EDIT_DRAFT_LOCAL_STORE_NAME)}setEditDraft(a){this.setDraftToLocalStorage(e._Z.settings.CONFERENCE_EDIT_DRAFT_LOCAL_STORE_NAME,a)}getToastrMessage(){return"CONFERENCES__LIST__DRAFT__REMOVE_FS_ITEMS"}getModulePrefix(){return h.Z9.CONFERENCE}}return p.\u0275fac=function(a){return new(a||p)(_.LFG(i.k),_.LFG(e.r6),_.LFG(f._Wo))},p.\u0275prov=_.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()},34423:(z,R,t)=>{t.d(R,{ZJ:()=>f,_f:()=>r,cw:()=>p,e5:()=>i,iu:()=>_,me:()=>h});var e=t(21122),s=t(911);const h=[{name:"30",value:30*s.wnR,type:e.qj.M_30},{name:"60",value:60*s.wnR,type:e.qj.M_60},{name:"90",value:90*s.wnR,type:e.qj.M_90},{name:"",value:0,type:e.qj.CUSTOM}],_=[{type:e.ts.WEEK_1,title:"CONFERENCES__LIST__DRAFT__WEEKLY_REPEAT__WEEK_1"},{type:e.ts.WEEK_2,title:"CONFERENCES__LIST__DRAFT__WEEKLY_REPEAT__WEEK_2"},{type:e.ts.WEEK_3,title:"CONFERENCES__LIST__DRAFT__WEEKLY_REPEAT__WEEK_3"},{type:e.ts.WEEK_4,title:"CONFERENCES__LIST__DRAFT__WEEKLY_REPEAT__WEEK_4"}],i=[{type:e.v.MONTH_1,title:"CONFERENCES__LIST__DRAFT__MONTHLY_REPEAT__MONTH_1"},{type:e.v.MONTH_2,title:"CONFERENCES__LIST__DRAFT__MONTHLY_REPEAT__MONTH_2"},{type:e.v.MONTH_3,title:"CONFERENCES__LIST__DRAFT__MONTHLY_REPEAT__MONTH_3"},{type:e.v.MONTH_4,title:"CONFERENCES__LIST__DRAFT__MONTHLY_REPEAT__MONTH_4"},{type:e.v.MONTH_5,title:"CONFERENCES__LIST__DRAFT__MONTHLY_REPEAT__MONTH_5"},{type:e.v.MONTH_6,title:"CONFERENCES__LIST__DRAFT__MONTHLY_REPEAT__MONTH_6"}],f=[{type:e.LO.MONTH_DAY_NUMBER_1,title:"CONFERENCES__LIST__DRAFT__MONTHLY_REPEAT__MONTH_DAY_NUMBER_1"},{type:e.LO.MONTH_DAY_NUMBER_2,title:"CONFERENCES__LIST__DRAFT__MONTHLY_REPEAT__MONTH_DAY_NUMBER_2"},{type:e.LO.MONTH_DAY_NUMBER_3,title:"CONFERENCES__LIST__DRAFT__MONTHLY_REPEAT__MONTH_DAY_NUMBER_3"},{type:e.LO.MONTH_DAY_NUMBER_4,title:"CONFERENCES__LIST__DRAFT__MONTHLY_REPEAT__MONTH_DAY_NUMBER_4"}],r=[{type:e.jK.MONTH_WEEK_DAY_1,title:"MONDAY"},{type:e.jK.MONTH_WEEK_DAY_2,title:"TUESDAY"},{type:e.jK.MONTH_WEEK_DAY_3,title:"WEDNESDAY"},{type:e.jK.MONTH_WEEK_DAY_4,title:"THURSDAY"},{type:e.jK.MONTH_WEEK_DAY_5,title:"FRIDAY"},{type:e.jK.MONTH_WEEK_DAY_6,title:"SATURDAY"},{type:e.jK.MONTH_WEEK_DAY_7,title:"SUNDAY"}],p=[{name:"CONFERENCES__LIST__DRAFT__PERIODICITY__SINGLE",type:e.ST.SINGLE},{name:"CONFERENCES__LIST__DRAFT__PERIODICITY__BUSINESS_DAYS",type:e.ST.BUSINESS_DAYS},{name:"CONFERENCES__LIST__DRAFT__PERIODICITY__DAILY",type:e.ST.DAILY},{name:"CONFERENCES__LIST__DRAFT__PERIODICITY__WEEKLY",type:e.ST.WEEKLY},{name:"CONFERENCES__LIST__DRAFT__PERIODICITY__MONTHLY",type:e.ST.MONTHLY}]},78358:(z,R,t)=>{t.d(R,{h:()=>L});var e=t(87177),s=t(59600),h=t(94982),_=t(5469),i=t(21122),f=t(21864),r=t(43257),p=t(911),u=t(6388),a=t(70882),o=t(59193),l=t(25917),c=t(40205),d=t(88002),v=t(43190),I=t(7703),m=t(67130),g=t(5304),E=t(68307),n=t(54355),S=t(89835),C=t(30014),T=t(93470),P=t(62731),A=t(96699),M=t(6190);let L=(()=>{class N{constructor(b,V,D,F,J,H,Y){this.conferenceDraftPeriodicityService=b,this.conferenceParticipantsListApiService=V,this.conferenceSessionApiService=D,this.conferenceSessionFilesApiService=F,this.conferencesStoreService=J,this.loginService=H,this.translate=Y,this.isTemplatesFetched$=this.conferencesStoreService.isTemplatesFetched$,this.defaultTemplate$=this.conferencesStoreService.defaultTemplate$}get isTemplatesFetched(){return this.conferencesStoreService.isTemplatesFetched}get templates(){return this.conferencesStoreService.templates}getEmptyDraft$(){return this.defaultTemplate$.pipe((0,d.U)(b=>this.getDraftFromTemplate(b)))}getDraftFromTemplate(b){const V=2*p.ZC3,D=this.conferenceDraftPeriodicityService.getInitialStartTime(),F=i.qj.M_60,J=D+this.conferenceDraftPeriodicityService.getDurationMs(F,V),H=this.loginService.loginInfo,Y=Object.keys(s.vs).reduce((ee,X)=>(ee[X]=b?.features.some(K=>K===X)||!1,ee),{});return{ownerProfileId:this.loginService.profileId,name:this.translate.instant("CONFERENCES__LIST__DRAFT__DEFAULT_NAME"),description:"",startDate:Date.now(),startTime:D,endTime:J,startTimeIsNow:!0,periodicity:i.ST.SINGLE,duration:F,customDuration:V,weeklyDays:[(0,f.Z)(new UtcDate)-1],weeklyRepeat:i.ts.WEEK_1,templateId:this.getDefaultTemplateId(),monthlyRepeat:i.v.MONTH_1,monthlyRepeatType:i.e8.DAY,monthlyWeekDayRepeat:i.jK.MONTH_WEEK_DAY_1,monthlyDayNumberRepeat:i.LO.MONTH_DAY_NUMBER_1,monthlyDateRepeat:1,participants:[{name:H.user.name,avatarResourceId:H.user.avatarResourceId,roles:[e.oG.MODERATOR],interlocutor:{profileId:H.user.profileId},id:H.user.profileId}],fsItems:[],guestPasscode:void 0,speakerPasscode:void 0,sessionId:this.loginService.sessionId,questionnaire:void 0,joinPeriodBeforeStart:b?.joinPeriodBeforeStart??0,features:Y}}getEditDraft$(b,V){return this.getDraftWithPatricians$(b,V).pipe((0,v.w)(D=>this.conferenceSessionApiService.getJoinData(D.conferenceSessionId).pipe((0,d.U)(F=>(D.guestPasscode=F.guestPasscode,D.speakerPasscode=F.speakerPasscode,D)))))}fetchConferenceDraftFsItems$(b,V){return this.conferenceSessionFilesApiService.getDirectoryContent(b,V,{offset:0,sortField:null,orderAsc:!1,limit:_._Z.settings.CONFERENCE_SESSION_FILES_LIST_PAGE_SIZE})}fetchConferenceDraftQuestionnaire(b){return this.conferenceSessionApiService.getRegistrationQuestionnaire(b)}fetchAllParticipants$(b){const V=_._Z.settings.CONFERENCE_EDIT_DRAFT_FETCH_ALL_PARTICIPANTS_PAGE_SIZE;let D=0;const F=()=>{const J=this.conferenceParticipantsListApiService.findParticipants(b,{offset:D,limit:V,participantFilterType:h.F.INVITED,sortField:h.l.ROLE});return D+=V,J};return new a.y(J=>{F().pipe((0,I.jn)(H=>H.hasNext?F():o.E),(0,m.u)((H,Y)=>H.concat(Y.data),[]),(0,g.K)(H=>(J.error(H),(0,l.of)([])))).subscribe(H=>{J.next(H),J.complete()})})}getDefaultTemplateId(){return(this.templates.find(V=>V.isDefault)||this.templates[0])?.conferenceTemplateId}getDraftWithPatricians$(b,V){return this.conferenceSessionApiService.getJoinData(b.conferenceSessionId).pipe((0,d.U)(D=>{const F=this.getDraftWithoutParticipants(b,V);return F.guestPasscode=D.guestPasscode,F.speakerPasscode=D.speakerPasscode,F}),(0,v.w)(D=>this.enrichDraftWithParticipants$(D)),(0,v.w)(D=>this.enrichDraftWithFsItems$(D)),(0,v.w)(D=>this.enrichDraftWithQuestionnaire$(D)))}getDraftWithoutParticipants(b,V){const D=new UtcDate(b.startDate).toDate(),F=(0,r.Z)(D).getTime(),J=D.getTime()-F,H=J+b.duration,Y=this.conferenceDraftPeriodicityService.getDurationTypeByMs(b.duration)||i.qj.CUSTOM,ee=b.duration,X=this.getWeeklyDays(b),K=this.getWeeklyRepeat(b),oe=this.getMonthlyRepeat(b),O=this.getMonthlyRepeatType(b),U=this.getMonthlyWeekDayRepeat(b),k=this.getMonthlyDayNumberRepeat(b),te=this.getMonthlyDateRepeat(b),fe=this.getPeriodicity(b),de=b.conferenceSessionId,re=b.conferenceId,_e=b.settings.features.reduce((ve,$)=>Object.assign(ve,{[$]:!0}),{});return{conferenceSessionId:de,conferenceId:re,ownerProfileId:b.ownerProfileId,name:b.name,description:b.description||"",startDate:F,startTime:J,startTimeIsNow:!1,endTime:H,duration:Y,customDuration:ee,templateId:void 0,participants:[],rootFolderId:b.rootFolderId,weeklyDays:X,weeklyRepeat:K,monthlyRepeat:oe,monthlyRepeatType:O,monthlyWeekDayRepeat:U,monthlyDayNumberRepeat:k,monthlyDateRepeat:te,periodicity:V?fe:i.ST.SINGLE,features:_e,backgroundImageId:b.backgroundImageId,draftSchedule:b.schedule,sessionId:this.loginService.sessionId,questionnaire:void 0,joinPeriodBeforeStart:b.settings.joinPeriodBeforeStart,hasVVoIPSupport:b.settings.hasVVoIPSupport}}getWeeklyDays(b){const V=b.schedule;return V?.periodicityType!==s.Tt.WEEKLY?[(0,f.Z)(new UtcDate)-1]:V.daysOfWeek.map(D=>s.sb.indexOf(D))}getWeeklyRepeat(b){const V=b.schedule;return V?.periodicityType!==s.Tt.WEEKLY?i.ts.WEEK_1:V.weekNumber}getMonthlyRepeat(b){const V=b.schedule;return V?.periodicityType!==s.Tt.MONTHLY?i.v.MONTH_1:V.monthNumber}getMonthlyRepeatType(b){return b.schedule?.dayNumber?i.e8.DATE:i.e8.DAY}getMonthlyWeekDayRepeat(b){const V=b.schedule;return V?.periodicityType!==s.Tt.MONTHLY?i.jK.MONTH_WEEK_DAY_1:V.daysOfWeek?s.sb.indexOf(V.daysOfWeek[0])+1:i.jK.MONTH_WEEK_DAY_1}getMonthlyDayNumberRepeat(b){const V=b.schedule;return V?.periodicityType!==s.Tt.MONTHLY?i.LO.MONTH_DAY_NUMBER_1:V.weekNumber||i.LO.MONTH_DAY_NUMBER_1}getMonthlyDateRepeat(b){const V=b.schedule;return V?.periodicityType!==s.Tt.MONTHLY?1:V.dayNumber}getPeriodicity(b){const V=b.schedule;if(!V)return i.ST.SINGLE;switch(V.periodicityType){case s.Tt.DAILY:return i.ST.DAILY;case s.Tt.WEEKLY:return(0,u.Z)(V.daysOfWeek.sort(),s.r8.sort())?i.ST.BUSINESS_DAYS:i.ST.WEEKLY;case s.Tt.MONTHLY:return i.ST.MONTHLY}}enrichDraftWithParticipants$(b){return this.fetchAllParticipants$(b.conferenceSessionId).pipe((0,d.U)(V=>(b.participants=V.map(D=>this.participantToDraftParticipant(D)),b)))}enrichDraftWithFsItems$(b){return this.fetchConferenceDraftFsItems$(b.conferenceSessionId,b.rootFolderId).pipe((0,d.U)(V=>V.data),(0,E.b)(V=>this.conferencesStoreService.setFsItems(V)),(0,d.U)(()=>b))}enrichDraftWithQuestionnaire$(b){return this.fetchConferenceDraftQuestionnaire(b.conferenceSessionId).pipe((0,d.U)(V=>(b.questionnaire={usageScopes:V.usageScopes,polls:V.polls.map(D=>({pollId:D.pollId,text:D.text,orderNumber:D.orderNumber,required:D.required,answerType:D.answerType,choices:D.choices?D.choices.map(F=>({choiceId:F.choiceId,orderNumber:F.orderNumber,choiceValue:F.choiceValue})):[]}))},b)),(0,g.K)(V=>404===V.status?(0,l.of)(b):(0,c._)(V)))}participantToDraftParticipant(b){return{name:b.name,avatarResourceId:b.avatarResourceId,roles:b.roles,id:b.participantId,interlocutor:{profileId:b.profileId,name:b.name},interpreterLanguagesPair:b.settings?.interpreterLanguagesPair}}}return N.\u0275fac=function(b){return new(b||N)(n.LFG(S.A),n.LFG(C.C),n.LFG(T.u),n.LFG(P.x),n.LFG(A.r),n.LFG(_.r6),n.LFG(M.sK))},N.\u0275prov=n.Yz7({token:N,factory:N.\u0275fac}),N})()},69158:(z,R,t)=>{t.d(R,{Tz:()=>_,Z9:()=>s,fo:()=>h,tT:()=>i});var e=t(54355),s=(()=>((s=s||{}).ROOM="ROOM",s.CONFERENCE="CONFERENCE",s))(),h=(()=>((h=h||{}).PARTICIPANTS="PARTICIPANTS",h.FS_ITEMS="FS_ITEMS",h))(),_=(()=>((_=_||{}).COMMON_OFFLINE_ROOM="ROOM_DRAFT",_.COMMON_ONLINE_ROOM="ROOM_EDIT_DRAFT",_.OFFLINE_ROOM_ITEMS="ROOM_DRAFT-DELTA_FS_ITEMS",_.ONLINE_ROOM_ITEMS="ROOM_EDIT_DRAFT-DELTA_FS_ITEMS",_.OFFLINE_ROOM_PARTICIPANTS="ROOM_DRAFT-DELTA_PARTICIPANTS",_.ONLINE_ROOM_PARTICIPANTS="ROOM_EDIT_DRAFT-DELTA_PARTICIPANTS",_.COMMON_OFFLINE_CONFERENCE="CONFERENCE_DRAFT",_.COMMON_ONLINE_CONFERENCE="CONFERENCE_EDIT_DRAFT",_.OFFLINE_CONFERENCE_ITEMS="CONFERENCE_DRAFT-DELTA_FS_ITEMS",_.ONLINE_CONFERENCE_ITEMS="CONFERENCE_EDIT_DRAFT-DELTA_FS_ITEMS",_.OFFLINE_CONFERENCE_PARTICIPANTS="CONFERENCE_DRAFT-DELTA_PARTICIPANTS",_.ONLINE_CONFERENCE_PARTICIPANTS="CONFERENCE_EDIT_DRAFT-DELTA_PARTICIPANTS",_))();let i=(()=>{class f{constructor(){this._inEditMode=!1,this._modulePrefix=s.CONFERENCE,this._modulePostfix=h.PARTICIPANTS}get inEditMode(){return this._inEditMode}set inEditMode(p){this._inEditMode=p}get modulePrefix(){return this._modulePrefix}set modulePrefix(p){this._modulePrefix=p}get modulePostfix(){return this._modulePostfix}set modulePostfix(p){this._modulePostfix=p}get draftKey(){return`${this.modulePrefix}${this.inEditMode?"_EDIT":""}_DRAFT-DELTA_${this.modulePostfix}`}}return f.\u0275fac=function(p){return new(p||f)},f.\u0275prov=e.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()},17911:(z,R,t)=>{t.d(R,{P:()=>J});var e=t(8239),s=t(87177),h=t(3178),_=t(42827),i=t(5469),f=t(18216),r=t(70226),p=t(97591),u=t(95828),a=t(85422),o=t(28970),l=t(911),c=t(25917),d=t(45435),v=t(88002),I=t(43190),m=t(68939),g=t(46782),E=t(15257),n=t(68307),S=t(78519),C=t(54355),T=t(96699),P=t(55122),A=t(89984),M=t(11038),L=t(78358),N=t(16858),W=t(32588),b=t(6190),V=t(28728),D=t(60986),F=t(25916);let J=(()=>{class H extends l.z23{get searchFilterValue(){return this.homeSectionSearchService.getSectionSearchState(S.G.CONTACTS)}get tagSuggestions(){return this.tagSuggestions$.value||[]}constructor(ee,X,K,oe,O,U,k,te,fe,de,re,_e,ve,$){super(),this.conferencesStoreService=ee,this.homeSectionSearchService=X,this.conferencesService=K,this.contactsApiService=oe,this.contactsStoreService=O,this.createConferenceDraftService=U,this.homeStoreService=k,this.overlayService=te,this.routesService=fe,this.translate=de,this.userSessionStoreService=re,this.interlocutorsApiService=_e,this.toastr=ve,this.chatService=$,this.contactsFetchLimit=i._Z.settings.CONTACTS_PAGE_SIZE,this.invitationsFetchLimit=i._Z.settings.CONTACTS_INVITATIONS_PAGE_SIZE,this.canCreateConference$=this.userSessionStoreService.canCreateConference$,this.searchFilterValue$=this.homeSectionSearchService.getSectionSearchState$(S.G.CONTACTS),this.tagSuggestions$=this.contactsStoreService.tagSuggestions$,this.canDeleteSelectedContact$=this.contactsStoreService.selectedContact$.pipe((0,d.h)(Z=>!!Z),(0,v.U)(Boolean))}fetchEnrichedContacts(ee){return this.contactsApiService.getContacts(ee).pipe((0,I.w)(X=>{const K=X.data.map(oe=>oe.profile?.profileId).filter(oe=>!!oe);return 0===K.length?(0,c.of)([X,[]]):this.contactsApiService.getProfilesPresences(K).pipe((0,v.U)(oe=>[X,oe]))}),(0,v.U)(([X,K])=>{const oe=X.data.map(u.w_);return{hasNext:X.hasNext,data:(0,f.e)(oe,K),totalCount:X.totalCount}}))}fetchFirstPage$(ee){return this.fetchEnrichedContacts({limit:this.contactsFetchLimit,searchCriteria:ee})}fetchFirstPage(){this.contactsStoreService.setIsFirstPageFetching(!0),this.fetchFirstPage$(this.searchFilterValue||"").pipe((0,m.x)(()=>this.contactsStoreService.setIsFirstPageFetching(!1)),(0,g.R)(this.destroy$)).subscribe(ee=>{this.contactsStoreService.setHasNextPage(ee.hasNext),this.contactsStoreService.setContacts(ee.data),this.contactsStoreService.setIsFirstPageFetched(!0),this.contactsStoreService.setTotalCount(ee.totalCount)},()=>this.toastr.error({translationKey:"CONTACTS_PAGE.ERRORS.FETCH_CONTACTS_COMMON"}))}fetchNextPage$(ee,X){return this.fetchEnrichedContacts({limit:this.contactsFetchLimit,searchCriteria:ee,offset:X})}fetchNextPage(){return this.contactsStoreService.setIsNextPageFetching(!0),this.fetchNextPage$(this.searchFilterValue||"",Object.keys(this.contactsStoreService.contacts)?.length).pipe((0,g.R)(this.destroy$),(0,m.x)(()=>this.contactsStoreService.setIsNextPageFetching(!1))).subscribe(ee=>{this.contactsStoreService.setHasNextPage(ee.hasNext),this.contactsStoreService.setTotalCount(ee.totalCount);const X=ee.data.map(u.w_);this.contactsStoreService.appendContacts(X)})}removeContact(ee){const X=ee.contact.contactId,K={title:this.translate.instant("CONTACTS_PAGE.DELETE_CONTACT"),text:this.translate.instant("CONTACTS_PAGE.DO_YOU_WANT_TO_DELETE_CONTACT",{userName:ee.name}),okText:"DELETE"};this.overlayService.openModal(l.YV9,K).afterClosed$.pipe((0,E.q)(1),(0,v.U)(({data:O})=>O),(0,d.h)(O=>O),(0,n.b)(()=>{this.contactsStoreService.removeContact(ee.contact.contactId),this.contactsStoreService.selectedContactId===ee.contact.contactId&&this.contactsStoreService.setSelectedContactId(null)}),(0,I.w)(()=>this.contactsApiService.removeContact(X))).subscribe(()=>{},()=>{this.contactsStoreService.appendContacts([ee])})}getOrCreateChat(ee){const X=ee.profile?.profileId,K=ee.contact?.contactId;this.chatService.createP2PChat(K?{contactId:K}:{profileId:X},!0)}planEventWithInterlocutor(ee){var X=this;this.conferencesStoreService.getSavedDraft()?this.overlayService.openModal(r.q,{text:"CONTACTS_PAGE.DRAFT_EXIST_TEXT",header:"CONTACTS_PAGE.DRAFT_EXIST_HEADER"},{closeOnBackdrop:!1,closeOnEsc:!1,hasBackdrop:!0}).afterClosed$.pipe((0,g.R)(this.destroy$)).subscribe(function(){var K=(0,e.Z)(function*(oe){switch(oe.data){case r.u.PROCEED:X.conferencesService.setSelectedConference(null),yield X.routesService.goToConferences(),X.conferencesStoreService.setInfoViewMode(p.D.DRAFT);break;case r.u.DELETE:X.processPlanEventWithInterlocutor(ee)}});return function(oe){return K.apply(this,arguments)}}()):this.processPlanEventWithInterlocutor(ee)}processPlanEventWithInterlocutor(ee){var X=this;return(0,e.Z)(function*(){X.conferencesService.setSelectedConference(null),yield X.routesService.goToConferencesWithMerge(),X.createConferenceDraftService.getEmptyDraft$().pipe((0,g.R)(X.destroy$)).subscribe(K=>{const O=ee.profile?.avatarResourceId;K.participants.push({id:(0,o.Yw)(ee),interlocutor:(0,o.eO)(ee),avatarResourceId:O,name:ee.name,roles:[s.oG.ATTENDEE]}),X.conferencesStoreService.setDraft(K),X.conferencesService.goToDraft()})})()}selectInvitation(ee){this.contactsStoreService.setSelectedContactId(null),this.contactsStoreService.setSelectedInvitationId((0,u.KO)(ee.interlocutor)),this.contactsStoreService.setInfoViewMode(h.h.CONTACT_INFO),this.homeStoreService.activeConferenceSessionId&&this.homeStoreService.setConferenceSessionOpenMode(a.l.PIP)}selectContact(ee){this.contactsStoreService.setSelectedContactId((0,u.xQ)(ee)),this.contactsStoreService.setSelectedInvitationId(null),this.contactsStoreService.setInfoViewMode(h.h.CONTACT_INFO),this.homeStoreService.activeConferenceSessionId&&this.homeStoreService.setConferenceSessionOpenMode(a.l.PIP)}getAdditionalContactInfo(ee){if(ee.isPartial){const X=(0,u.xQ)(ee);this.contactsStoreService.setIsFullContactInfoLoading(!0),this.interlocutorsApiService.getInterlocutorByContactId(X).pipe((0,m.x)(()=>this.contactsStoreService.setIsFullContactInfoLoading(!1)),(0,g.R)(this.destroy$)).subscribe(K=>this.contactsStoreService.updateContact({...K,isPartial:!1}),()=>this.toastr.error({translationKey:"CONTACTS_PAGE.ERRORS.FETCH_FULL_CONTACT_COMMON"}))}}getContactOnlineStatus(ee){switch(ee?.onlineStatus){case"ONLINE":return _.Y.ONLINE;case"OFFLINE":return _.Y.OFFLINE;case"IN_CALL":return _.Y.IN_CALL;case"IN_EVENT":return _.Y.IN_EVENT;default:return _.Y.UNKNOWN}}fetchTagsSuggestions(){this.contactsStoreService.isTagsSuggestionsFetched$.value||this.contactsApiService.getContactTags().subscribe(ee=>{this.contactsStoreService.setTagSuggestions(ee)})}appendTagsSuggestions(ee){const X=this.tagSuggestions.concat(ee),K=[...new Set(X)];this.contactsStoreService.setTagSuggestions(K)}fetchInvitationsFirstPage(){const X={offset:0,limit:i._Z.settings.MIN_CONTACT_REQUESTS_SHOWN_COUNT+i._Z.settings.CONTACTS_INVITATIONS_PAGE_SIZE,searchCriteria:this.searchFilterValue||""};this.contactsStoreService.setIsInvitationsFirstPageFetching(!1),this.contactsApiService.getContactInvitations(X).pipe((0,m.x)(()=>this.contactsStoreService.setIsInvitationsFirstPageFetching(!1)),(0,g.R)(this.destroy$)).subscribe(K=>{this.contactsStoreService.setInvitations(K.data),this.contactsStoreService.setIsInvitationsFirstPageFetched(!0),this.contactsStoreService.setTotalInvitationsCount(K.totalCount),this.contactsStoreService.setHasInvitationsHasNextPage(K.hasNext)},()=>this.toastr.error({translationKey:"CONTACTS_PAGE.ERRORS.FETCH_INVITATIONS_COMMON"}))}fetchInvitationsNextPage(){const ee=this.contactsStoreService.invitations.length,X=this.contactsStoreService.shownInvitationsCount,O=Math.min(this.contactsStoreService.totalInvitationsCount-X,this.invitationsFetchLimit);if(O<=ee-X)return void this.contactsStoreService.setShownInvitationsCount(X+O);const fe={offset:X,limit:this.invitationsFetchLimit-ee+X,searchCriteria:this.searchFilterValue||""};this.contactsStoreService.setIsInvitationsNextPageFetching(!0),this.contactsApiService.getContactInvitations(fe).pipe((0,m.x)(()=>this.contactsStoreService.setIsInvitationsNextPageFetching(!1)),(0,g.R)(this.destroy$)).subscribe(de=>{this.contactsStoreService.appendInvitations(de.data),this.contactsStoreService.setTotalInvitationsCount(de.totalCount),this.contactsStoreService.setHasInvitationsHasNextPage(de.hasNext),this.contactsStoreService.setShownInvitationsCount(this.contactsStoreService.shownInvitationsCount+de.data.length)},()=>this.toastr.error({translationKey:"CONTACTS_PAGE.ERRORS.FETCH_INVITATIONS_COMMON"}))}approveInvitation(ee){const X=(0,u.KO)(ee.interlocutor);this.contactsStoreService.removeInvitation(X),this.contactsApiService.approveContactsInvitations([X]).subscribe(()=>{},()=>{this.contactsStoreService.prependInvitation(ee),this.toastr.error({translationKey:"CONTACTS_PAGE.INVITATIONS.ERRORS.APPROVE_COMMON"})})}rejectInvitation(ee){const X=(0,u.KO)(ee.interlocutor);this.contactsStoreService.removeInvitation(X),this.contactsApiService.rejectContactsInvitations([X]).subscribe(()=>{},()=>{this.contactsStoreService.prependInvitation(ee),this.toastr.error({translationKey:"CONTACTS_PAGE.INVITATIONS.ERRORS.REJECT_COMMON"})})}approveAllInvitations(){const X=this.contactsStoreService.invitations.map(K=>K.interlocutor.profile.profileId);this.contactsStoreService.setInvitations([]),this.contactsApiService.approveContactsInvitations(X).pipe((0,g.R)(this.destroy$)).subscribe(()=>this.fetchInvitationsNextPage(),()=>this.toastr.error({translationKey:"CONTACTS_PAGE.INVITATIONS.ERRORS.REJECT_COMMON"}))}rejectAllInvitations(){const K=this.contactsStoreService.invitations.slice(0,this.contactsStoreService.shownInvitationsCount-1).map(oe=>oe.interlocutor.profile.profileId);this.contactsStoreService.setInvitations([]),this.contactsApiService.rejectContactsInvitations(K).pipe((0,g.R)(this.destroy$)).subscribe(()=>this.fetchInvitationsNextPage(),()=>this.toastr.error({translationKey:"CONTACTS_PAGE.INVITATIONS.ERRORS.REJECT_COMMON"}))}showMoreInvitations(){this.fetchInvitationsNextPage()}goToSearchContact(){this.contactsStoreService.setInfoViewMode(h.h.SEARCH_CONTACT),this.contactsStoreService.setSelectedContactId(null),this.contactsStoreService.setSelectedInvitationId(null),this.homeStoreService.activeConferenceSessionId&&this.homeStoreService.conferenceSessionOpenMode!==a.l.PIP&&this.homeStoreService.setConferenceSessionOpenMode(a.l.PIP)}goToContactInfo(){this.contactsStoreService.setInfoViewMode(h.h.CONTACT_INFO)}goToCreateContact(){this.contactsStoreService.setInfoViewMode(h.h.CREATE_CONTACT)}}return H.\u0275fac=function(ee){return new(ee||H)(C.LFG(T.r),C.LFG(S.y),C.LFG(P.d),C.LFG(A.V),C.LFG(M.Z),C.LFG(L.h),C.LFG(N.h),C.LFG(l.Bi9),C.LFG(W._D),C.LFG(b.sK),C.LFG(V.j8),C.LFG(D.B),C.LFG(l._Wo),C.LFG(F.g))},H.\u0275prov=C.Yz7({token:H,factory:H.\u0275fac,providedIn:"root"}),H})()},96498:(z,R,t)=>{t.d(R,{X:()=>_});var e=t(54355),s=t(28728);let _=(()=>{class i{get favIcon(){return document.querySelector('link[rel="icon"]')}constructor(r){this.systemSettingsService=r,this.lastCount=0}resetIcon(){this.lastCount=0,this.favIcon.href=this.systemSettingsService.branding.favicon}updateFavicon(){this.resetIcon(),this.lastCount&&this.setCount(this.lastCount)}setCount(r){this.lastCount=r;const p=this.favIcon,u=document.createElement("canvas");u.width=16,u.height=16;const a=u.getContext("2d"),o=document.createElement("img");o.src=p.href,o.onload=()=>{a.drawImage(o,0,0,16,16),a.beginPath();const l=16/3;a.arc(u.width-l,l,l,0,2*Math.PI),a.fillStyle="#FF0000",a.fill(),r<100&&(a.font=(r<10?10:8)+'px "helvetica", sans-serif',a.textAlign="center",a.textBaseline="middle",a.fillStyle="#FFFFFF",a.fillText(r.toString(),u.width-l,l+.5)),p.href=u.toDataURL("image/png")}}}return i.\u0275fac=function(r){return new(r||i)(e.LFG(s.Ph))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()},85665:(z,R,t)=>{t.d(R,{E:()=>u,g:()=>_});var e=t(97057),s=t(70882),h=t(54355),_=(()=>((_=_||{})[_.NONE=0]="NONE",_[_.ERROR=1]="ERROR",_[_.EMPTY=2]="EMPTY",_))();const r=((0,e.qY)(),1e3);let u=(()=>{class a{openFiles$(l="",c=!0,d=_.NONE){const v=document.createElement("input");return v.style.display="none",v.type="file",v.multiple=c,v.accept=l,document.documentElement.appendChild(v),new s.y(I=>{const m=()=>{v.removeEventListener("change",C),window.removeEventListener("focus",T),v.remove(),window.clearInterval(n),window.clearTimeout(S)};let n,S;const C=()=>{},T=()=>{n=window.setInterval(()=>{v.files?.length&&(I.next(v.files),I.complete(),m())},100),S=window.setTimeout(()=>{(()=>{switch(d){case _.NONE:break;case _.ERROR:I.error();break;case _.EMPTY:I.next(new FileList),I.complete()}})(),m()},r)};v.addEventListener("change",C),window.addEventListener("focus",T),v.click()})}}return a.\u0275fac=function(l){return new(l||a)},a.\u0275prov=h.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()},96959:(z,R,t)=>{t.d(R,{N:()=>h});var e=t(26215),s=t(54355);let h=(()=>{class _{constructor(){this._isGlobalSpinnerShow$=new e.X(!1),this.isGlobalSpinnerShow$=this._isGlobalSpinnerShow$.asObservable()}showSpinner(){this._isGlobalSpinnerShow$.next(!0)}hideSpinner(){this._isGlobalSpinnerShow$.next(!1)}}return _.\u0275fac=function(f){return new(f||_)},_.\u0275prov=s.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})()},84717:(z,R,t)=>{t.d(R,{V:()=>i});var e=t(29514),s=t(26215),h=t(87519),_=t(54355);let i=(()=>{class f{constructor(){this._isNewYear$=new s.X(!1),this.isNewYear$=this._isNewYear$.pipe((0,h.x)());const p=e._.settings.HAPPY_NEW_YEAR;void 0===p?(this._isNewYear$.next(this.isNewYear()),this.intervalId=window.setInterval(()=>this._isNewYear$.next(this.isNewYear()),e._.settings.HAPPY_NEW_YEAR_CHECK_INTERVAL_S*e._.settings.MS_IN_SECOND)):this._isNewYear$.next(p)}ngOnDestroy(){clearInterval(this.intervalId)}isNewYear(){const p=e._.settings.HAPPY_NEW_YEAR_START_DAY,u=e._.settings.HAPPY_NEW_YEAR_START_MONTH-1,a=e._.settings.HAPPY_NEW_YEAR_END_DAY,o=e._.settings.HAPPY_NEW_YEAR_END_MONTH-1,l=Date.now(),c=(new Date).getFullYear(),d=new Date(c,u,p,0,0,0),v=new Date(c,o,a,0,0,0);return l>+d||l<+v}}return f.\u0275fac=function(p){return new(p||f)},f.\u0275prov=_.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()},78519:(z,R,t)=>{t.d(R,{G:()=>h,y:()=>_});var e=t(26215),s=t(54355),h=(()=>((h=h||{}).CHATS="chats",h.CONFERENCES="conferences",h.CONTACTS="contacts",h.ROOMS="rooms",h))();let _=(()=>{class i{constructor(){this.searchStateMap=new Map}getSectionSearchState$(r){return this.getOrCreateSearchState(r).asObservable()}getSectionSearchState(r){return this.getOrCreateSearchState(r).value}setSectionSearchState(r,p){const u=this.getOrCreateSearchState(r),a=p&&p.trim();u.next(a)}getOrCreateSearchState(r){let p=this.searchStateMap.get(r);return p||(p=new e.X(null),this.searchStateMap.set(r,p)),p}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()},5469:(z,R,t)=>{t.d(R,{A0:()=>c.A0,UC:()=>a,_Z:()=>e._,q4:()=>r.q,y_:()=>o.y,ym:()=>c.ym,r6:()=>l.r,Uy:()=>d.Uy,uQ:()=>v.u,Sh:()=>c.Sh,PI:()=>d.PI,l2:()=>M,Df:()=>d.Df});var e=t(29514),s=t(79765),h=t(81800),_=t(88002),i=t(47349),f=t(54355),r=t(30395);const p="ACTIVE_SESSION_REQUEST_BROADCAST_NAME",u="ACTIVE_SESSION_RESPONSE_BROADCAST_NAME";let a=(()=>{class L{constructor(W){this.bc=W,this.activeConferenceSessionId$=new s.xQ,this.activeSessionId$=this.activeConferenceSessionId$.pipe((0,h.e)(100),(0,_.U)(b=>b.filter(V=>!!V)[0]||null),(0,i.d)(1)),this.activeBroadcastRequestReceived$=new s.xQ,this.listenForActiveBroadcastRequests(),this.listenForActiveBroadcastResponses()}sendActiveBroadcastRequest(){this.bc.postMessageToBroadcast(p,void 0)}sendActiveBroadcastResponse(W){this.bc.postMessageToBroadcast(u,W)}listenForActiveBroadcastRequests(){this.bc.createBroadcast(p,this.activeSessionBroadcastRequestHandler.bind(this))}listenForActiveBroadcastResponses(){this.bc.createBroadcast(u,this.activeSessionBroadcastResponseHandler.bind(this))}activeSessionBroadcastRequestHandler(){this.activeBroadcastRequestReceived$.next()}activeSessionBroadcastResponseHandler(W){this.activeConferenceSessionId$.next(W.data)}}return L.\u0275fac=function(W){return new(W||L)(f.LFG(r.q))},L.\u0275prov=f.Yz7({token:L,factory:L.\u0275fac,providedIn:"root"}),L})();var o=t(1114),l=t(24710),c=t(3279),d=t(41773),v=t(88601),I=t(46554),m=t(26215),g=t(25917),E=t(5304),n=t(45435),S=t(68939),C=t(55803);const T=[I.I.PREVIOUS_PASS_HISTORY,I.I.MAX_LENGTH,I.I.PREVIOUS_PASS_SYMBOLS,I.I.NUMBER_OF_ATTEMPTS_EXCEEDED],P=[{key:I.I.MIN_LENGTH,value:0,level:0,order:0},{key:I.I.MAX_LENGTH,value:0,level:0,order:1},{key:I.I.CLASSES,value:0,level:0,order:2},{key:I.I.UPPER_LETTERS,value:0,level:1},{key:I.I.LOWER_LETTERS,value:0,level:1},{key:I.I.DIGITS,value:0,level:1},{key:I.I.OTHER_SYMBOLS,value:0,level:1},{key:I.I.REPEAT_SYMBOLS,value:0,level:0},{key:I.I.PREVIOUS_PASS_SYMBOLS,value:0,level:0},{key:I.I.PALINDROME,value:0,level:0,noDot:!0},{key:I.I.PREVIOUS_PASS_HISTORY,value:0,level:0}],A=P.map(L=>L.key);let M=(()=>{class L{constructor(W){this.loginApiService=W,this._requirements$=new m.X([]),this.requirements$=this._requirements$.asObservable(),this._notMatchedRequirements$=new m.X(A),this.notMatchedRequirements$=this._notMatchedRequirements$.asObservable(),this._isLoading$=new m.X(!1),this.isLoading$=this._isLoading$.asObservable()}init(W){this.loginApiService.validatePassword("init",W).pipe((0,E.K)(()=>(0,g.of)(null)),(0,n.h)(b=>!!b),(0,_.U)(b=>b),(0,S.x)(()=>this._isLoading$.next(!1))).subscribe(({passwordComplexityRequirements:b})=>{const V=Object.values(b).filter(({key:J,value:H})=>!(!+H&&"true"!==H||T.includes(J))),D=[],F=[...P];F.forEach((J,H)=>{if(!V.map(X=>X.key).includes(J.key))return;const ee=V.find(X=>X.key===J.key)?.value??0;if(J.value="true"===ee||+ee,J.value)if(J.order)for(let X=H-1;X>=0;X--)F[X].order||D[X].push(J);else D.push([J])}),this._requirements$.next(D)})}validate(W,b){this._isLoading$.next(!0),this.loginApiService.validatePassword(W,b).pipe((0,E.K)(()=>(0,g.of)(null)),(0,n.h)(V=>!!V),(0,_.U)(V=>V),(0,S.x)(()=>this._isLoading$.next(!1))).subscribe(({notMatchedRequirements:V})=>{this._notMatchedRequirements$.next(V)})}resetNotMatchedRequirements(){this._notMatchedRequirements$.next(A)}}return L.\u0275fac=function(W){return new(W||L)(f.LFG(C.O))},L.\u0275prov=f.Yz7({token:L,factory:L.\u0275fac}),L})()},49265:(z,R,t)=>{t.d(R,{a:()=>_});var e=t(23e3),s=t(54355);class h{constructor(f=!0,r=0){this.hasNext=f,this.resultCount=r}}let _=(()=>{class i{constructor(){this.state={FOREIGN_CONTACT:new h,COMPANY_CONTACT:new h,NOTE_CONTACT:new h,DIRECTORY_USER:new h,DOMAIN_USER:new h,GUEST_USER:new h,CHAT_BOT:new h}}setSourceResponseToState(r){r.forEach(p=>{this.state[p.interlocutorType].hasNext=p.hasNext,this.state[p.interlocutorType].resultCount=p.resultCount})}addSourceResponseToState(r){r.forEach(p=>{this.state[p.interlocutorType].hasNext=p.hasNext,this.state[p.interlocutorType].resultCount+=p.resultCount})}dropStateToDefault(){this.state={FOREIGN_CONTACT:new h,COMPANY_CONTACT:new h,NOTE_CONTACT:new h,DIRECTORY_USER:new h,DOMAIN_USER:new h,GUEST_USER:new h,CHAT_BOT:new h}}canLoadMore(){return Object.keys(this.state).some(r=>this.state[r].hasNext)}getInterlocutorsSourcesForRequest(r=!1,p=!1){return Object.keys(this.state).reduce((u,a)=>{if(!r&&a===e.x.CHAT_BOT||!p&&a===e.x.DIRECTORY_USER)return this.state[a].hasNext=!1,u;const o=this.state[a];return o.hasNext&&u.push({offset:o.resultCount,interlocutorType:a}),u},[])}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()},18216:(z,R,t)=>{t.d(R,{e:()=>o,p:()=>l});var e=t(29514),s=t(95828),h=t(25917),_=t(43190),i=t(88002),f=t(77463),r=t(54355),p=t(60986),u=t(89984),a=t(49265);function o(c,d){const v=[...c];for(const I of d){const m=v.find(g=>g.profile?.profileId===I.profileId);m&&(m.onlineStatus=I.presenceStatus)}return v}let l=(()=>{class c{constructor(v,I,m){this.interlocutorsApiService=v,this.contactsApiService=I,this.interlocutorsSourceHelperService=m}fetchEnrichedInterlocutors$(v,I=e._.settings.CONTACTS_PAGE_SIZE,m=!1,g=!1,E=!1){E&&this.interlocutorsSourceHelperService.dropStateToDefault();const n={searchCriteria:v,limit:I,sources:this.interlocutorsSourceHelperService.getInterlocutorsSourcesForRequest(g,m)};return this.interlocutorsApiService.findInterlocutors(n).pipe((0,_.w)(S=>{const C=S.data.map(T=>T.profile?.profileId).filter(T=>!!T);return 0===C.length?(0,h.of)([S,[]]):this.contactsApiService.getProfilesPresences(C).pipe((0,i.U)(T=>[S,T]))}),(0,i.U)(([S,C])=>{const T=S.data.map(s.B8);return this.interlocutorsSourceHelperService.addSourceResponseToState(S.sources),{hasNext:S.sources.some(P=>P.hasNext),data:o(T,C)}}))}mapInterlocutors(v){return v.data.map(I=>({...I,id:this.makeIdForInterlocutor(I)}))}makeIdForInterlocutor(v){return v.profile?.profileId?v.profile.profileId:v.contact?.contactId?v.contact.contactId:v.ldapUser?v.ldapUser.ldapUserId:v.email?v.email:v.phone?v.phone:(0,f.Z)()}makeInvitation(v){return v.contact?.contactId?{contactId:v.contact.contactId}:v.profile?.profileId?{profileId:v.profile.profileId}:v.email?{email:v.email,name:v.name}:v.phone?{phone:v.phone}:(console.warn("ATTENTION!!! NO VALID PARAMS FOR ADD USER"),null)}}return c.\u0275fac=function(v){return new(v||c)(r.LFG(p.B),r.LFG(u.V),r.LFG(a.a))},c.\u0275prov=r.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()},91583:(z,R,t)=>{t.d(R,{I:()=>i});var e=t(26215),s=t(47349),h=t(54355);class _{get isActive(){return this._isActive}get firesCount(){return this._firesCount}constructor(r){this.interval=r,this._isActive=!1,this._firesCount=0,this._onFire$=new e.X(0),this.onFire$=this._onFire$.pipe((0,s.d)(1)),this.intervalId=null}flush(){this._firesCount=0}start(r=!1){return this.stop(),this._isActive=!0,this.intervalId=window.setInterval(()=>{this._firesCount++,this._onFire$.next(this.firesCount)},this.interval),r&&this._onFire$.next(this.firesCount),this}stop(){return this._isActive=!1,this.intervalId&&window.clearInterval(this.intervalId),this}}let i=(()=>{class f{constructor(){this.intervals={}}createTimer(p,u){return this.intervals[p]||(this.intervals[p]=new _(u)),this.intervals[p]}getInterval(p){return this.intervals[p]}startAll(){Object.keys(this.intervals).forEach(p=>this.intervals[p].start())}stopAll(){Object.keys(this.intervals).forEach(p=>this.intervals[p].stop())}}return f.\u0275fac=function(p){return new(p||f)},f.\u0275prov=h.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()},44183:(z,R,t)=>{t.d(R,{H:()=>s});var e=t(54355);let s=(()=>{class h{constructor(){this.sections=[]}capturePriority(i,f,r=!1){let p=this.getSection(i);if(p||(p=this.createSection(i)),null!==p.forced&&p.forced!==f)return!1;const u=p.entities.indexOf(f);return-1!==u&&p.entities.splice(u,1),p.entities.unshift(f),r&&(p.forced=f),!0}releasePriority(i,f){const r=this.getSection(i);return!(!r||0!==r.entities.indexOf(f)||(r.entities.shift(),r.entities.push(f),0))}addPriority(i,f){let r=this.getSection(i);return r||(r=this.createSection(i)),-1===r.entities.indexOf(f)&&(r.entities.push(f),!0)}getPriority(i,f){const r=this.getSection(i);return r?r.entities.indexOf(f):0}isFirstPriority(i,f){return 0===this.getPriority(i,f)}removePriority(i,f){const r=this.getSection(i);if(!r)return!1;const p=r.entities.indexOf(f);return-1!==p&&(r.entities.splice(p,1),!0)}hasSection(i){return!!this.getSection(i)}getSection(i){return this.sections.find(f=>f.name===i)}createSection(i){const f={name:i,forced:null,entities:[]};return this.sections.push(f),f}}return h.\u0275fac=function(i){return new(i||h)},h.\u0275prov=e.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),h})()},84680:(z,R,t)=>{t.d(R,{OL:()=>A});const e=["ru","en-US"];var s=t(78573),h=t(79380),_=t(911),i=t(11467),f=t(26215),r=t(25917),p=t(15257),u=t(46782),a=t(88002),o=t(68307),l=t(5304),c=t(8040),d=t(54355),v=t(75261),I=t(6190),m=t(28728),g=t(5688),E=t(24710);const n="localeName";var C=(()=>((C=C||{}).RU="RU",C.EN="EN",C))();const T={RU:"ru",EN:"en-US"},P=(0,i.Z)(T);let A=(()=>{class M extends _.z23{get currentLocale(){return this._currentLocale}set currentLocale(N){this._currentLocale=N,this.updateLocales$().pipe((0,p.q)(1),(0,u.R)(this.destroy$)).subscribe(()=>{this.updateDateFnsLocale(),this.updateCalendarLocale(),this.saveCurrentLocaleToLocalStore(),this.handleLoadingTranslationErrors(),this._currentLocale$.next(N)})}get supportedBrowserLocale(){switch(navigator.languages[0].toLocaleLowerCase()){case"ru":case"ru-ru":return"ru";default:return c.N.defaultLocale}}get decimalSeparator(){return 1.1.toLocaleString(this.currentLocale).substring(1,2)}constructor(N,W,b,V,D){super(),this.cookieService=N,this.translateService=W,this.systemSettingsStoreService=b,this.profileApiService=V,this.loginService=D,this._currentLocale$=new f.X(null),this.currentLocale$=this._currentLocale$.asObservable(),this._isLanguageFetched$=new f.X(!1),this.isLanguageFetched$=this._isLanguageFetched$.asObservable(),this._currentLocale=c.N.defaultLocale,this.dateFnsLocales=[s.Z,h.Z],this.calendarLocales={"en-US":new _.PhQ,ru:new _.PO8},this.currentDateFnsLocale$=new f.X(void 0),this.DEFAULT_CALENDAR_LOCALE=new _.PO8,this.currentCalendarLocale$=new f.X(this.DEFAULT_CALENDAR_LOCALE),this.canChangeLocale$=this.systemSettingsStoreService.domainSettings$.pipe((0,a.U)(F=>!F.fixedLocale))}setFirstAvailableLocale(...N){const W=N.find(b=>!!b)||this.getSavedLocaleFromLocalStore()||this.supportedBrowserLocale;this.currentLocale=W}saveCurrentLocaleToLocalStore(){localStorage.setItem(n,this._currentLocale),this.cookieService.set("locale",this._currentLocale,365,"/")}getSavedLocaleFromLocalStore(){const N=localStorage.getItem(n);return e.includes(N)?N:null}updateLocales$(){return this.translateService.use(this.currentLocale).pipe((0,o.b)(()=>this._isLanguageFetched$.next(!0)))}updateProfileLocale(N){this.profileApiService.updateProfile(this.loginService.profileId,{locale:P[N]}).subscribe()}getLocaleTypeByLanguage(N){if(N)return T[N]}getLanguageByLocaleType(N){if(N)return P[N]}get backendLocale(){return this.currentLocale===T.RU?C.RU:C.EN}updateDateFnsLocale(){const N=this.dateFnsLocales.find(W=>W.code===this._currentLocale);N||console.error(`Cannot find DateFns locale with code ${this._currentLocale}. Check imports in LocaleService`),this.currentDateFnsLocale$.next(N)}updateCalendarLocale(){const N=this.calendarLocales[this._currentLocale];N||console.error(`Cannot find calendar locale with code ${this._currentLocale}. Check calendarLocales in LocaleService`),this.currentCalendarLocale$.next(N)}handleLoadingTranslationErrors(){this.errorSubscription?.unsubscribe(),this.errorSubscription=this.translateService.loadingTranslations.pipe((0,l.K)(N=>(console.error("Error while loading translations: ",N),(0,r.of)(N)))).subscribe()}}return M.\u0275fac=function(N){return new(N||M)(d.LFG(v.N),d.LFG(I.sK),d.LFG(m.Ph),d.LFG(g.K),d.LFG(E.r))},M.\u0275prov=d.Yz7({token:M,factory:M.\u0275fac,providedIn:"root"}),M})()},24710:(z,R,t)=>{t.d(R,{r:()=>E});var e=t(8239),s=t(40089),h=t(87177),_=t(37399),i=t(6388),f=t(12888),r=t(26215),p=t(79765),u=t(87519),a=t(43190),o=t(45435),l=t(29514),c=t(54355),d=t(1114),v=t(75261),I=t(55803),m=t(32588),g=t(911);let E=(()=>{class n{get isAuthenticated(){return!!this.sessionId}get isExternal(){return!!this.loginInfo?.user?.externalId}get isChatsEnabled(){return!this.loginInfo?.user?.disabledFeatures?.includes(_.Ak.INSTANT_MESSAGING)}get _sessionId(){return this.cookieService.get(l._.settings.SESSION_ID_COOKIE_NAME)}set _sessionId(C){const T=this._sessionId,P=C;C?this.cookieService.set(l._.settings.SESSION_ID_COOKIE_NAME,C,365,"/"):this.cookieService.delete(l._.settings.SESSION_ID_COOKIE_NAME,"/"),console.log(`set cookie: ${l._.settings.SESSION_ID_COOKIE_NAME} = ${C}, '/'`),this._sessionIdChanged$.next({prev:T,current:P})}get sessionId(){return this._sessionId}get _loginToken(){return this.cookieService.get(l._.settings.LOGIN_TOKEN_COOKIE_NAME)||this.cookieService.get(l._.settings.AUTH_TOKEN_COOKIE_NAME)}set _loginToken(C){this.cookieService.set(l._.settings.LOGIN_TOKEN_COOKIE_NAME,C,365,"/"),console.log(`set cookie: ${l._.settings.LOGIN_TOKEN_COOKIE_NAME} = ${C}, '/'`)}get loginToken(){return this._loginToken}get sessionInfo(){return this.sessionInfo$.value}get profileId(){return this.loginInfo?.user.profileId}get isGuest(){return!this.loginInfo?.user.isRegisteredUser}get serverDelta(){return this._serverDelta}get loginInfo(){return this._loginInfo?this._loginInfo:this.localStoreLoginInfo}get localStoreLoginInfo(){const C=localStorage.getItem(l._.settings.USER_INFO_LOCAL_STORAGE_NAME);if(!C)return null;try{return this._loginInfo=JSON.parse(C),this._loginInfo}catch{return console.error("Cannot parse user info from local storage"),null}}get hasFullStatisticsPermission(){const C=this.loginInfo?.user;return[_.uy.OPERATOR,_.uy.ADMIN_IVCS,_.uy.DOMAIN_ADMIN,_.uy.CHIEF_OPERATOR,_.uy.CHIEF_SYSTEM_ADMINISTRATOR].includes(C?.userType)}get selfInterlocutor(){return this._selfInterlocutor}get loginFullUrl(){return(0,f.Z)(`${location.origin}/${this.baseHref}/login`)}constructor(C,T,P,A,M,L){this.baseHref=C,this.cometService=T,this.cookieService=P,this.loginApiService=A,this.routes=M,this.toastr=L,this._sessionIdChanged$=new r.X({prev:null,current:this._sessionId}),this.sessionIdChanged$=this._sessionIdChanged$.pipe((0,u.x)(i.Z)),this._serverDelta=0,this.sessionInfo$=new r.X(null),this._loginInfo=null,this._onLogin$=new p.xQ,this.onLogin$=this._onLogin$.asObservable(),this._onLogout$=new p.xQ,this.onLogout$=this._onLogout$.asObservable(),this.listenForceLogout(),this.listenNeedRefreshEvent()}setSessionId(C){this._sessionId=C}setLoginInfo(C){this._loginInfo=C}setSessionInfo(C){this.sessionInfo$.next(C)}flushLoginInfoCache(){this._loginInfo=null}listenNeedRefreshEvent(){this.cometService.getEventByClass$("NeedRefreshEvent").subscribe(C=>{"USER_SESSION_EXPIRED"===C.reason?this.processUserSessionExpired():(console.warn("Reset login due to NeedRefreshEvent with unknown reason"),this.resetLogin())})}processUserSessionExpired(){if(this.isGuest)return this.toastr.info({translationKey:"FORCE_LOGOUT__COMMON"}),void this.resetLogin();this.loginApiService.loginWithToken(this.loginToken).subscribe(C=>{this.cometService.destroyConnection(),this.login(C)},()=>{this.toastr.error({translationKey:"LOGIN_ERROR.CANNOT_REFRESH_SESSION"}),this.cometService.destroyConnection(),this.resetLogin()})}listenForceLogout(){this.cometService.onConnected$.pipe((0,a.w)(()=>this.cometService.getChildNumberedEventByClass$("LogoutRequestEvent")),(0,o.h)(()=>this.isAuthenticated)).subscribe(C=>{if(this.resetLogin(),!C.reason)return;const T=this.getForceLogoutHRReason(C.reason);this.toastr.info({translationKey:T})})}getForceLogoutHRReason(C){switch(C){case h.FS.KICKED:return"FORCE_LOGOUT__KICKED";case h.FS.ACCOUNT_DELETED:return"FORCE_LOGOUT__ACCOUNT_DELETED";case h.FS.ACCOUNT_BLOCKED:return"FORCE_LOGOUT__ACCOUNT_BLOCKED";default:return"FORCE_LOGOUT__COMMON"}}login(C,T){const P=this.loginInfo;this._serverDelta=Date.now()-C.timestamp,this._sessionId=C.sessionId,this._loginToken=C.loginToken,this._selfInterlocutor=T,this.setLocalStoreLoginInfo(C),this._onLogin$.next({prev:P,current:C})}logout(C=this.loginFullUrl,T=!0){var P=this;return(0,e.Z)(function*(){const A=P.loginInfo;let M;if(T)try{M=yield P.loginApiService.logout(C).toPromise()}catch{}P.flushLoginData(),M?location.href=M:P._onLogout$.next(A)})()}flushLoginData(){this.cookieService.delete(l._.settings.SESSION_ID_COOKIE_NAME,"/"),this.cookieService.delete(l._.settings.LOGIN_TOKEN_COOKIE_NAME,"/"),this.cookieService.delete(l._.settings.AUTH_TOKEN_COOKIE_NAME,"/"),this.cookieService.delete(l._.settings.SID_TOKEN_COOKIE_NAME,"/"),localStorage.removeItem(l._.settings.USER_INFO_LOCAL_STORAGE_NAME),this._loginInfo=null,this._sessionId=null}resetLogin(C=!0){var T=this;return(0,e.Z)(function*(){yield T.logout(T.loginFullUrl,C),T.routes.goToLogin()})()}setLocalStoreLoginInfo(C){localStorage.setItem(l._.settings.USER_INFO_LOCAL_STORAGE_NAME,JSON.stringify(C)),this._loginInfo=C}}return n.\u0275fac=function(C){return new(C||n)(c.LFG(s.mr),c.LFG(d.y),c.LFG(v.N),c.LFG(I.O),c.LFG(m._D),c.LFG(g._Wo))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()},88601:(z,R,t)=>{t.d(R,{u:()=>o});var e=t(223),s=t(29514),h=t(48701),_=t(911),i=t(45435),f=t(16803),r=t(46782),p=t(43190),u=t(54355),a=t(28728);let o=(()=>{class l extends _.z23{constructor(d,v){super(),this.systemSettingsStoreService=d,this.overlayService=v,this.useFakeConnect=!s._.settings.CONFERENCE_SESSION_CONNECT_MAIN_MEDIA,this.mainClient=new h.b2("main-video-stream",this.useFakeConnect),this.pipClient=new h.b2("pip-video-stream"),this.demonstrateClient=new h.IZ("share-video-stream"),this.originalLanguageClient=new h.IZ("original-language-client");let I=this.systemSettingsStoreService.getSystemSettingAsNumber("STREAM_BUFFER_TIME");void 0===I&&(I=s._.settings.DEFAULT_FLV_BUFFER_SIZE_MS/_.cK$),this.mainClient.flvMediaClient.setBufferSizeMax(I),this.pipClient.flvMediaClient.setBufferSizeMax(I),this.mainClient.flvMediaClient.lastState$.pipe((0,i.h)(()=>s._.settings.SHOW_FLV_STATS),(0,f.p)(s._.settings.SHOW_FLV_STATS_THROTTLE_MS),(0,r.R)(this.destroy$)).subscribe(()=>this.mainClient.flvMediaClient.logStats()),this.pipClient.flvMediaClient.lastState$.pipe((0,i.h)(()=>s._.settings.SHOW_FLV_STATS),(0,f.p)(s._.settings.SHOW_FLV_STATS_THROTTLE_MS),(0,r.R)(this.destroy$)).subscribe(()=>this.mainClient.flvMediaClient.logStats()),this.mainClient.flvMediaClient.onError$.pipe((0,i.h)(m=>m?.message===h.NE.FIRST_USER_INTERACTION),(0,p.w)(()=>this.overlayService.openModal(e.t,null,{closeOnBackdrop:!1}).afterClosed$),(0,r.R)(this.destroy$)).subscribe(()=>{this.mainClient.flvMediaClient.handlePlaybackError()})}}return l.\u0275fac=function(d){return new(d||l)(u.LFG(a.Ph),u.LFG(_.Bi9))},l.\u0275prov=u.Yz7({token:l,factory:l.\u0275fac}),l})()},79898:(z,R,t)=>{t.d(R,{C:()=>i,F:()=>_});var e=t(54355),s=t(75261);const h=":::::",_="clientSettings";let i=(()=>{class f{get settings(){const u=decodeURIComponent(this.cookieService.get(_)).split(h),a=this.getNumber(u[4]);let o=null===a?-1:a;return o=Math.min(50===o?1:o,4),{defaultCameraName:this.getString(u[0]),defaultMicrophoneName:this.getString(u[1]),clientMediaState:this.getString(u[2]),defaultAudioLevel:null===this.getNumber(u[3])?-1:this.getNumber(u[3]),defaultMicrophoneLevel:o,defaultEchoCancelation:this.getBoolean(u[5]),currentMediaProfileIndex:this.getString(u[6]),showSettingsAtStart:this.getBoolean(u[7]),clientMediaStateOnEnter:this.getString(u[8]),layoutPreset:this.getString(u[9]),defaultSpeakerName:this.getString(u[10])}}constructor(p){this.cookieService=p}updateSettings(p){const u={...this.settings,...p},a=Object.values(u).join(h);this.cookieService.set(_,encodeURIComponent(a),365,"/")}getString(p){return this.isNull(p)?null:p}getNumber(p){if(this.isNull(p))return null;const u=parseFloat(p);return isNaN(u)?null:u}getBoolean(p){return!this.isNull(p)&&"true"===p}isNull(p){return"null"===p||!p}}return f.\u0275fac=function(p){return new(p||f)(e.LFG(s.N))},f.\u0275prov=e.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()},3279:(z,R,t)=>{t.d(R,{A0:()=>h,Sh:()=>i,ym:()=>_});var e=t(54355),s=t(6190);const h=11,_=14;let i=(()=>{class f{constructor(p){this.translate=p,this.MEDIA_PROFILE_MAP=[{mediaProfileId:11,hint:this.translate.instant("TRANSLATION_QUALITY_ONLY_AUDIO_HINT"),title:this.translate.instant("TRANSLATION_QUALITY_ONLY_AUDIO")},{mediaProfileId:12,hint:this.translate.instant("TRANSLATION_QUALITY_ONLY_LOW_HINT"),title:this.translate.instant("TRANSLATION_QUALITY_ONLY_LOW")},{mediaProfileId:13,hint:this.translate.instant("TRANSLATION_QUALITY_ONLY_MEDIUM_HINT"),title:this.translate.instant("TRANSLATION_QUALITY_ONLY_MEDIUM")},{mediaProfileId:14,hint:this.translate.instant("TRANSLATION_QUALITY_ONLY_HIGH_HINT"),title:this.translate.instant("TRANSLATION_QUALITY_ONLY_HIGH")},{mediaProfileId:15,hint:this.translate.instant("TRANSLATION_QUALITY_ONLY_MAX_HINT"),title:this.translate.instant("TRANSLATION_QUALITY_ONLY_MAX")}]}}return f.\u0275fac=function(p){return new(p||f)(e.LFG(s.sK))},f.\u0275prov=e.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()},41773:(z,R,t)=>{t.d(R,{Df:()=>c,PI:()=>d,Uy:()=>l});var e=t(8239),s=t(75713),h=t(48701),_=t(911),i=t(26215),f=t(79765),r=t(88002),p=t(45435),u=t(54355);const o=["NotAllowedError","PermissionDeniedError"],l=["TrackStartError","NotReadableError"],c=v=>v?v.deviceId:"";let d=(()=>{class v extends _.z23{get devices(){return this.devices$.value}get audioOutputDevices(){return this.audioOutputDevices$.value}get audioInputDevices(){return this.audioInputDevices$.value}get videoInputDevices(){return this.videoInputDevices$.value}get hasAudioDevices(){return this.hasAudioDevices$.value}get hasVideoDevices(){return this.hasVideoDevices$.value}get hasPermissionForAudioDevices(){return this.hasPermissionForAudioDevices$.value}get hasPermissionForVideoDevices(){return this.hasPermissionForVideoDevices$.value}get hasPermissionForDevices(){return this.hasPermissionForAudioDevices&&this.hasPermissionForVideoDevices}get lastErrorConstraints(){return this._lastErrorConstraints}get lastVideoError(){return this._lastVideoError}get lastAudioError(){return this._lastAudioError}get localMediaStream(){return this._localMediaStream$.value}get HRLastError(){return this.getHRError(this._lastAudioError,this._lastVideoError)}get hasAudioTrack(){return this.hasAudioTrack$.value}get hasVideoTrack(){return this.hasVideoTrack$.value}constructor(m){super(),this.overlay=m,this._devices$=new i.X([]),this.devices$=(0,_.Hxy)(this._devices$),this.unknownDevices$=(0,_.Hxy)(this._devices$.pipe((0,r.U)(g=>g.filter(E=>!["audioinput","audiooutput","videoinput"].includes(E.kind))))),this.audioOutputDevices$=(0,_.Hxy)(this._devices$.pipe((0,r.U)(g=>g.filter(E=>"audiooutput"===E.kind)))),this.audioInputDevices$=(0,_.Hxy)(this._devices$.pipe((0,r.U)(g=>g.filter(E=>"audioinput"===E.kind)))),this.videoInputDevices$=(0,_.Hxy)(this._devices$.pipe((0,r.U)(g=>g.filter(E=>"videoinput"===E.kind)))),this.hasAudioDevices$=(0,_.Hxy)(this.audioInputDevices$.pipe((0,r.U)(g=>!!g.length))),this.hasVideoDevices$=(0,_.Hxy)(this.videoInputDevices$.pipe((0,r.U)(g=>!!g.length))),this.hasPermissionForAudioDevices$=(0,_.Hxy)(this.audioInputDevices$.pipe((0,r.U)(g=>g.filter(E=>!!E.label).length>0))),this.hasPermissionForVideoDevices$=(0,_.Hxy)(this.videoInputDevices$.pipe((0,r.U)(g=>g.filter(E=>!!E.label).length>0))),this._lastVideoError=null,this._lastAudioError=null,this._localMediaStream$=new i.X(null),this.localMediaStream$=(0,_.Hxy)(this._localMediaStream$),this._onError$=new f.xQ,this.onError$=this._onError$.asObservable(),this.hasAudioTrack$=(0,_.Hxy)(this.localMediaStream$.pipe((0,r.U)(g=>!!g&&this.hasTrackWithKind(g,"audio")))),this.hasVideoTrack$=(0,_.Hxy)(this.localMediaStream$.pipe((0,r.U)(g=>!!g&&this.hasTrackWithKind(g,"video")))),this.onAudioLevelChanged$=new f.xQ,this.onAccessChanged$=new i.X(!1),this.onAudioProcessHandler=this.onAudioProcess.bind(this),this.inited=!1}init(){var m=this;this.inited||(this.inited=!0,this.showModalOnDevicePermissionDenied(),this.checkDevicesAvailability().then((0,e.Z)(function*(){yield m.enumerateDevices(),m.onAccessChanged$.next(m.hasPermissionForAudioDevices||!m.hasAudioDevices||m.hasPermissionForVideoDevices||!m.hasVideoDevices)})),this.enumerateDevices())}checkDevicesAvailability(){var m=this;return(0,e.Z)(function*(){const g=Date.now(),E=yield m.updateUserMediaStream({audio:!0,video:!0},o);(0,h.X7)(E);const S=Date.now()-g;console.info(`check devices availability via user media finished in ${S}ms`)})()}enumerateDevices(){var m=this;return(0,e.Z)(function*(){const g=(yield navigator.mediaDevices.enumerateDevices()).filter(E=>!["default","communications"].includes(E.deviceId));m._devices$.next(g)})()}attachSinkId(m,g){return(0,e.Z)(function*(){if(m){if(typeof m.sinkId>"u")return void console.error("Browser does not support output device selection.");yield m.setSinkId(g)}})()}hasTrackWithKind(m,g){return!!m.getTracks().find(E=>E.kind===g)}updateUserMediaStream(m,g=null){var E=this;return(0,e.Z)(function*(){const n=yield E.getUserMediaStream(m,g);if(n){const S=n.getTracks();m.audio&&!S.find(C=>"audio"===C.kind)&&console.warn("An error occurred while trying to capture audio"),m.video&&!S.find(C=>"video"===C.kind)&&console.warn("An error occurred while trying to capture video"),(0,h.X7)(E._localMediaStream$.value),E._localMediaStream$.next(n)}return(E._lastVideoError||E._lastAudioError)&&E._onError$.next({lastAudioError:E._lastAudioError,lastVideoError:E._lastVideoError}),n})()}flushMediaStream(){this.localMediaStream&&((0,h.X7)(this.localMediaStream),this._localMediaStream$.next(null))}getUserMediaStream(m,g){var E=this;return(0,e.Z)(function*(){E._lastVideoError=null,E._lastAudioError=null;let n=yield E.tryGetUserMediaStream(m,g);return n||(m.hasOwnProperty("video")&&(n=yield E.tryGetUserMediaStream({video:m.video},g),n)?(yield E.tryGetUserMediaStream({audio:m.audio},g),n):m.hasOwnProperty("audio")&&(n=yield E.tryGetUserMediaStream({audio:m.audio},g),n)?(yield E.tryGetUserMediaStream({video:m.video},g),n):null)})()}isTrackableError(m,g){return!g||g.includes(m?.name)}tryGetUserMediaStream(m,g){var E=this;return(0,e.Z)(function*(){try{return yield navigator.mediaDevices.getUserMedia(m).then(n=>((0,h.kq)().resume(),n))}catch(n){const S=n;return console.error(S),E.isTrackableError(S,g)&&(m.hasOwnProperty("video")&&!m.hasOwnProperty("audio")&&(E._lastVideoError=S),!m.hasOwnProperty("video")&&m.hasOwnProperty("audio")&&(E._lastAudioError=S)),null}})()}startAudioVolumeLevelListening(m){this.stopAudioVolumeLevelListening();const g=(0,h.kq)();this.analyser=g.createAnalyser(),this.audioSource=g.createMediaStreamSource(m),this.scriptProcessor=g.createScriptProcessor(2048,1,1),this.analyser.smoothingTimeConstant=.3,this.analyser.fftSize=1024;const E=g.createGain();return this.audioSource.connect(E),E.connect(this.analyser),this.analyser.connect(this.scriptProcessor),this.scriptProcessor.connect(g.destination),this.scriptProcessor.addEventListener("audioprocess",this.onAudioProcessHandler),E}stopAudioVolumeLevelListening(){this.analyser?.disconnect(),(0,h.X7)(this.audioSource?.mediaStream),this.audioSource?.disconnect(),this.scriptProcessor?.disconnect(),this.scriptProcessor?.removeEventListener("audioprocess",this.onAudioProcessHandler)}getHRError(m,g){const E=[],n=m?this.getHRErrorByKind(m,"audio"):null,S=g?this.getHRErrorByKind(g,"video"):null;return n&&E.push(n),S&&E.push(S),E}getHRErrorByKind(m,g){if(!m)return null;switch(m.name){case"TrackStartError":case"NotReadableError":return"video"===g?"CAM_IS_NOT_READABLE":"MIC_IS_NOT_READABLE";case"NotAllowedError":case"PermissionDeniedError":return"video"===g?"CAM_IS_NOT_PERMITTED":"MIC_IS_NOT_PERMITTED"}}showModalOnDevicePermissionDenied(){this.onError$.pipe((0,p.h)(()=>!this.devicePermissionsModal||this.devicePermissionsModal.isClosed),(0,r.U)(({lastAudioError:m,lastVideoError:g})=>[o.includes(m?.name),o.includes(g?.name)]),(0,p.h)(([m,g])=>m||g)).subscribe(([m,g])=>{this.devicePermissionsModal=this.overlay.openModal(s.C,{audioDenied:m,videoDenied:g})})}onAudioProcess(){if(!this.analyser)return void console.warn("analyser node is note defined");const m=new Uint8Array(this.analyser.frequencyBinCount);this.analyser.getByteFrequencyData(m);let g=0;for(const n of m)n>g&&(g=n);this.onAudioLevelChanged$.next(g/255)}}return v.\u0275fac=function(m){return new(m||v)(u.LFG(_.Bi9))},v.\u0275prov=u.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})()},27683:(z,R,t)=>{t.d(R,{J:()=>E,i:()=>g});var e=t(40089),s=t(97057),h=t(911),_=t(22759),i=t(26215),f=t(88002),r=t(39761),p=t(45435),u=t(68307),a=t(46782),o=t(89466),l=t(54355),g=(()=>((g=g||{}).LANDSCAPE="LANDSCAPE",g.PORTRAIT="PORTRAIT",g))();let E=(()=>{class n extends h.z23{constructor(C){super(),this.document=C,this.orientation$=(0,_.R)(window,"orientationchange",{capture:!0}).pipe((0,f.U)(()=>(this._isLandscapeOrientation.next(this.orientation===g.LANDSCAPE),this.orientation)),(0,r.O)(this.orientation)),this._isLandscapeOrientation=new i.X(!1),this.isLandscapeOrientation$=this._isLandscapeOrientation.asObservable(),this.vhValue$=(0,_.R)(window,"resize").pipe((0,p.h)(()=>this.isMobileModeEnabled||this.isTablet),(0,u.b)(()=>setTimeout(()=>this.document.documentElement.style.removeProperty("--vh"),100)),(0,u.b)(()=>setTimeout(()=>this.document.documentElement.style.setProperty("--vh",`${this.vhValue}px`),100))),this.blockVhCount$=new i.X(!1),this._isMobileModeEnabled$=new i.X(!1),this.isMobileModeEnabled$=this._isMobileModeEnabled$.asObservable(),this._isTablet$=new i.X(!1),this.isTablet$=this._isTablet$.asObservable(),this.lastTouchEnd=0,this.iOSSwipeZoomDisabled$=(0,_.R)(this.document,"touchmove",{passive:!1}).pipe((0,p.h)(T=>T.touches.length>1),(0,a.R)(this.destroy$)),this.iOSDoubleTapZoomDisabled$=(0,_.R)(this.document,"touchend",{passive:!1}).pipe((0,f.U)(T=>({event:T,now:(new Date).getTime()})),(0,a.R)(this.destroy$)),this.iOSZoomDisabledSubscriptions=[]}get isMobileModeEnabled(){return this._isMobileModeEnabled$.value}get isTablet(){return this._isTablet$.value}get isMobileOrTablet(){return this._isMobileModeEnabled$.value||this._isTablet$.value}get orientation(){const C=(0,s.qY)();return(C?.os===o.OS.IOS||C?.os===o.OS.MacOS?0===window.orientation:["portrait-primary","portrait-secondary"].includes(screen.orientation.type))?g.PORTRAIT:g.LANDSCAPE}get vhValue(){return.01*window.innerHeight}get isOnMobileDevice(){const T=(0,s.qY)().os;return["iOS","Android OS","BlackBerry OS","Windows Mobile"].includes(T)}ngOnDestroy(){super.ngOnDestroy()}setMobileMode(C){C!==this.isMobileModeEnabled&&(this._isMobileModeEnabled$.next(C),C?this.setMobileModeOn():this.setMobileModeOff())}setTabletMode(){let T=!1;if(this.isOnMobileDevice){const P=window.innerHeight,A=window.innerWidth;T=P>=720&&A>=600||P>=600&&A>=720}else T=navigator.maxTouchPoints>0&&(0,s.qY)()?.os===o.OS.MacOS;T&&(this._isTablet$.next(!0),this.setMobileModeOff())}setMobileModeOn(){const C=this.isIOS();if(this.setMobileMeta(),this.document.body.classList.add("mobile-view"),this.document.body.style.overflow="hidden",!C)return;const T=this.iOSSwipeZoomDisabled$.subscribe(A=>A.preventDefault()),P=this.iOSDoubleTapZoomDisabled$.subscribe(({event:A,now:M})=>{M-this.lastTouchEnd<=300&&A.preventDefault(),this.lastTouchEnd=M});this.iOSZoomDisabledSubscriptions.push(T,P),this.document.body.classList.add("ios")}setMobileModeOff(){const C=this.isIOS();this.document.body.classList.remove("mobile-view"),this.setDesktopMeta(),C&&(this.iOSZoomDisabledSubscriptions.forEach(T=>T.unsubscribe()),this.document.body.classList.remove("ios"))}isIOS(){const C=(0,s.qY)(),T=this.isTablet;return C?.os===o.OS.IOS&&!navigator?.userAgent.includes(o.OS.IOS)||T}setMobileMeta(){this.removeViewportMeta(),document.head.innerHTML+="\n",document.head.innerHTML+='<meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi">'}setDesktopMeta(){this.removeViewportMeta(),document.head.innerHTML+="\n",document.head.innerHTML+='<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>'}removeViewportMeta(){document.querySelectorAll('meta[name="viewport"]').forEach(C=>C.remove())}}return n.\u0275fac=function(C){return new(C||n)(l.LFG(e.K0))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()},12487:(z,R,t)=>{t.d(R,{U:()=>i});var e=t(8239),s=t(79765),h=t(54355),_=t(12841);let i=(()=>{class f{get isNavigationInProgress(){return this._isNavigationInProgress}constructor(p){this.router=p,this.navigationQueue=[],this._isNavigationInProgress=!1,this._navigationBatchIsFinished$=new s.xQ,this.navigationBatchIsFinished$=this._navigationBatchIsFinished$.asObservable()}queueNavigate(p,u){this.navigationQueue.push({commands:p,extras:u}),this.navigate()}navigate(){var p=this;return(0,e.Z)(function*(){if(p._isNavigationInProgress)return;p._isNavigationInProgress=!0;const u=p.navigationQueue[0].commands,a=p.navigationQueue[0].extras;yield p.router.navigate(u,a),p.navigationQueue.shift(),p._isNavigationInProgress=!1,p.navigationQueue.length?p.navigate():p._navigationBatchIsFinished$.next()})()}}return f.\u0275fac=function(p){return new(p||f)(h.LFG(_.F0))},f.\u0275prov=h.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()},34330:(z,R,t)=>{t.d(R,{g:()=>a});var e=t(911),s=t(88002),h=t(29514),_=t(54355),i=t(50050);const f=h._.settings.EXTRA_SMALL_SCREEN_WIDTH,r=h._.settings.SMALL_SCREEN_WIDTH,p=h._.settings.SMALL_MEDIUM_SCREEN_WIDTH,u=h._.settings.MEDIUM_SCREEN_WIDTH;let a=(()=>{class o{constructor(c){this.breakpointObserver=c,this.isExtraSmallScreen$=(0,e.Hxy)(this.breakpointObserver.observe(`(max-width: ${f}px)`).pipe((0,s.U)(({matches:d})=>d))),this.isSmallScreen$=(0,e.Hxy)(this.breakpointObserver.observe(`(max-width: ${r}px)`).pipe((0,s.U)(({matches:d})=>d))),this.isSmallMediumScreen$=(0,e.Hxy)(this.breakpointObserver.observe(`(max-width: ${p}px)`).pipe((0,s.U)(({matches:d})=>d))),this.isMediumScreen$=(0,e.Hxy)(this.breakpointObserver.observe(`(max-width: ${u}px)`).pipe((0,s.U)(({matches:d})=>d)))}}return o.\u0275fac=function(c){return new(c||o)(_.LFG(i.Yg))},o.\u0275prov=_.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},32352:(z,R,t)=>{t.d(R,{Z:()=>_});var e=t(12888),s=t(54355),h=t(24710);let _=(()=>{class i{constructor(r){this.loginService=r}getResourceUrl(r,p){const u={size:{},asAttachment:!1,serverAddress:"",useDirectStyle:!0,...p},{width:a,height:o}=u.size,l=[],c=this.loginService.sessionId;c&&l.push(`session=${c}`),a&&l.push(`width=${a}`),o&&l.push(`height=${o}`),u.asAttachment&&l.push("contentDisposition=ATTACHMENT");const d=l.join("&"),v=l.length?d:"",I=u.serverAddress?(0,e.Z)(u.serverAddress,{removeTrailingSlash:!0}):"";return u.useDirectStyle?this.getDirectStyle(I,r,v):this.getRestUrl(I,r,v)}getRestUrl(r,p,u){return`${r}/api/rest/resources/${p}?${u}`}getDirectStyle(r,p,u){return`${r}/services/resource?resourceId=${p}&${u}`}}return i.\u0275fac=function(r){return new(r||i)(s.LFG(h.r))},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()},19342:(z,R,t)=>{t.d(R,{n:()=>I});var e=t(87177),s=t(94982),h=t(5469),_=t(70882),i=t(59193),f=t(25917),r=t(88002),p=t(7703),u=t(67130),a=t(5304),o=t(59600),l=t(54355),c=t(30014),d=t(10824),v=t(6190);let I=(()=>{class m{get isTemplatesFetched(){return this.roomsStoreService.isTemplatesFetched}get templates(){return this.roomsStoreService.templates}constructor(E,n,S,C){this.conferenceParticipantsListApiService=E,this.loginService=n,this.roomsStoreService=S,this.translate=C,this.isTemplatesFetched$=this.roomsStoreService.isTemplatesFetched$,this.defaultTemplate$=this.roomsStoreService.defaultTemplate$}getEmptyDraft$(){return this.defaultTemplate$.pipe((0,r.U)(E=>this.getDraftFromTemplate(E)))}getDraftFromTemplate(E){const n=this.loginService.loginInfo,S=Object.keys(o.vs).reduce((C,T)=>(C[T]=E?.features.some(P=>P===T)||!1,C),{});return{ownerProfileId:this.loginService.profileId,name:this.translate.instant("ROOMS__LIST__DRAFT__DEFAULT_NAME"),description:"",participants:[{name:n.user.name,avatarResourceId:n.user.avatarResourceId,roles:[e.oG.MODERATOR],interlocutor:{profileId:n.user.profileId},id:n.user.profileId}],fsItems:[],templateId:this.getDefaultTemplateId(),features:S,sessionId:this.loginService.sessionId}}getDefaultTemplateId(){return(this.templates.find(n=>n.isDefault)||this.templates[0])?.conferenceTemplateId}getEditDraft$(E){return this.getDraftWithPatricians$(E)}getDraftWithPatricians$(E){const n=this.getDraftWithoutParticipants(E);return this.enrichDraftWithParticipants$(n)}getDraftWithoutParticipants(E){const n=E.conferenceSessionId,S=E.settings.features.reduce((T,P)=>Object.assign(T,{[P]:!0}),{});return{conferenceSessionId:n,backgroundImageId:E.backgroundImageId,ownerProfileId:E.ownerProfileId,name:E.name,description:E.description||"",templateId:void 0,participants:[],features:S,sessionId:this.loginService.sessionId,hasVVoIPSupport:E.settings.hasVVoIPSupport}}fetchAllParticipants$(E){const n=h._Z.settings.CONFERENCE_EDIT_DRAFT_FETCH_ALL_PARTICIPANTS_PAGE_SIZE;let S=0;const C=()=>{const T=this.conferenceParticipantsListApiService.findParticipants(E,{offset:S,limit:n,participantFilterType:s.F.INVITED,sortField:s.l.ROLE});return S+=n,T};return new _.y(T=>{C().pipe((0,p.jn)(P=>P.hasNext?C():i.E),(0,u.u)((P,A)=>P.concat(A.data),[]),(0,a.K)(P=>(T.error(P),(0,f.of)([])))).subscribe(P=>{T.next(P),T.complete()})})}enrichDraftWithParticipants$(E){return this.fetchAllParticipants$(E.conferenceSessionId).pipe((0,r.U)(n=>(E.participants=n.map(S=>this.participantToDraftParticipant(S)),E)))}participantToDraftParticipant(E){return{name:E.name,avatarResourceId:E.avatarResourceId,roles:E.roles,id:E.participantId,interpreterLanguagesPair:E.settings.interpreterLanguagesPair,interlocutor:{profileId:E.profileId,name:E.name}}}}return m.\u0275fac=function(E){return new(E||m)(l.LFG(c.C),l.LFG(h.r6),l.LFG(d._),l.LFG(v.sK))},m.\u0275prov=l.Yz7({token:m,factory:m.\u0275fac}),m})()},80127:(z,R,t)=>{t.d(R,{O:()=>r});var e=t(5469),s=t(17541),h=t(69158),_=t(54355),i=t(30445),f=t(911);let r=(()=>{class p extends s.M{constructor(a,o,l){super(a,o,l)}getDraft(){return this.getDraftFromLocalStorage(e._Z.settings.ROOM_DRAFT_LOCAL_STORE_NAME)}setDraft(a){this.setDraftToLocalStorage(e._Z.settings.CONFERENCE_DRAFT_LOCAL_STORE_NAME,a)}getEditDraft(){return this.getDraftFromLocalStorage(e._Z.settings.CONFERENCE_EDIT_DRAFT_LOCAL_STORE_NAME)}setEditDraft(a){this.setDraftToLocalStorage(e._Z.settings.CONFERENCE_EDIT_DRAFT_LOCAL_STORE_NAME,a)}getToastrMessage(){return"ROOMS__LIST__DRAFT__REMOVE_FS_ITEMS"}getModulePrefix(){return h.Z9.ROOM}}return p.\u0275fac=function(a){return new(a||p)(_.LFG(i.k),_.LFG(e.r6),_.LFG(f._Wo))},p.\u0275prov=_.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()},36487:(z,R,t)=>{t.d(R,{L:()=>A});var e=t(69158),s=t(70226),h=t(97591),_=t(25917),i=t(68307),f=t(88002),r=t(5304),p=t(45435),u=t(46782),a=t(68939),o=t(15257),l=t(70667),c=t(78519),d=t(54355),v=t(19342),I=t(5469),m=t(911),g=t(10824),E=t(30014),n=t(31585),S=t(93470),C=t(62731),T=t(16858),P=t(28728);let A=(()=>{class M extends l.p{get searchFilterValue(){return this.homeSectionSearchService.getSectionSearchState(c.G.ROOMS)}constructor(N,W,b,V,D,F,J,H,Y,ee,X,K){super(D,H,X,F,J,V,Y,W,ee),this.createRoomDraftService=N,this.overlayService=b,this.roomsStoreService=V,this.homeSectionSearchService=K,this.conferences$=this.roomsStoreService.conferences$}fetchFirstPage$(){return this.roomsStoreService.setIsFirstPageFetched(!1),this.roomsStoreService.setIsFirstPageFetching(!0),this.conferencesApiService.findRooms({nameContains:this.searchFilterValue||""}).pipe((0,i.b)(N=>{this.roomsStoreService.setHasNextPage(N.hasNext)}),(0,f.U)(({data:N})=>[...N]),(0,f.U)(N=>this.roomsStoreService.normalizeConferences(N)),(0,i.b)(N=>this.roomsStoreService.setConferences(N)),(0,i.b)(()=>this.roomsStoreService.setIsFirstPageFetched(!0)),(0,r.K)(()=>(this.toastr.error({translationKey:"CONFERENCES__LIST__FETCHING_ERROR"}),(0,_.of)(null))),(0,p.h)(N=>!!N),(0,u.R)(this.destroy$),(0,a.x)(()=>this.roomsStoreService.setIsFirstPageFetching(!1)))}fetchFirstPage(){this.fetchFirstPage$().pipe((0,o.q)(1)).subscribe()}fetchNextPage$(){const N={limit:this.limit,offset:this.roomsStoreService.conferences$.value?.length,nameContains:this.searchFilterValue||""};return this.roomsStoreService.setIsNextPageFetching(!0),this.conferencesApiService.findRooms(N).pipe((0,i.b)(W=>this.roomsStoreService.setHasNextPage(W.hasNext)),(0,f.U)(W=>this.roomsStoreService.appendConferences(W.data)),(0,u.R)(this.destroy$),(0,a.x)(()=>this.roomsStoreService.setIsNextPageFetching(!1)))}setSelectedConferenceItemId(N){this.roomsStoreService.setSelectedConferenceItemId(N),this.roomsStoreService.setInfoViewMode(h.D.INFO)}startEditRoom(){if(!this.selectedConference)return void console.warn("Cannot go to edit conference due to no one conference is selected");this.roomsStoreService.setOriginEditDraft(this.selectedConference);const N=this.roomsStoreService.editDraft;N?N.conferenceSessionId!==this.selectedConference.conferenceSessionId?this.overlayService.openModal(s.q,{text:"CONFERENCES__LIST__EDIT__ROOM_DRAFT_EXIST_MODAL__TEXT",header:"CONFERENCES__LIST__EDIT__ROOM_DRAFT_EXIST_MODAL__HEADER"},{closeOnBackdrop:!1,closeOnEsc:!1,hasBackdrop:!0}).afterClosed$.pipe((0,u.R)(this.destroy$)).subscribe(W=>{switch(W.data){case s.u.PROCEED:this.setSelectedConference(null),this.goToEditRoom();break;case s.u.DELETE:this.roomsStoreService.setEditDraftAndSave(null),this.createEditDraftAndGoToEditSection(this.selectedConference),this.removeRoomOnlineDrafts()}}):this.goToEditRoom():this.createEditDraftAndGoToEditSection(this.selectedConference)}removeRoomOnlineDrafts(){[e.Tz.COMMON_ONLINE_ROOM,e.Tz.ONLINE_ROOM_ITEMS,e.Tz.ONLINE_ROOM_PARTICIPANTS].forEach(W=>localStorage.removeItem(W))}goToEditRoom(){const N=this.conferences,W=localStorage.getItem(e.Tz.COMMON_ONLINE_ROOM);if(W){const V=JSON.parse(W).conferenceSessionId,D=N.find(F=>F.conferenceSessionId===V);D&&(this.setSelectedConference(D),this.roomsStoreService.setCurrentDirectoryId(D?.rootFolderId??null))}this.roomsStoreService.setInfoViewMode(h.D.EDIT_SINGLE)}createEditDraftAndGoToEditSection(N){this.createEditDraft$(N).pipe((0,u.R)(this.destroy$),(0,o.q)(1)).subscribe(()=>this.goToEditRoom())}createEditDraft$(N){return this.roomsStoreService.setIsEditDraftCreating(!0),this.createRoomDraftService.getEditDraft$(N).pipe((0,i.b)(W=>this.roomsStoreService.setEditDraft(W)),(0,a.x)(()=>this.roomsStoreService.setIsEditDraftCreating(!1)),(0,u.R)(this.destroy$))}createDraftAndGoToDraftSection(){this.createRoomDraftService.getEmptyDraft$().pipe((0,u.R)(this.destroy$)).subscribe(N=>{this.roomsStoreService.setDraft(N),this.goToDraft()})}}return M.\u0275fac=function(N){return new(N||M)(d.LFG(v.n),d.LFG(I.r6),d.LFG(m.Bi9),d.LFG(g._),d.LFG(E.C),d.LFG(n.A),d.LFG(S.u),d.LFG(C.x),d.LFG(T.h),d.LFG(m._Wo),d.LFG(P.j8),d.LFG(c.y))},M.\u0275prov=d.Yz7({token:M,factory:M.\u0275fac}),M})()},32588:(z,R,t)=>{t.d(R,{GG:()=>r,Rg:()=>i,Sf:()=>c,VF:()=>I,Xx:()=>l,_D:()=>m,iV:()=>u,oD:()=>o,pv:()=>p,sP:()=>a});var e=t(85422),s=t(56288),h=t(54355),_=t(12841);const i=["/","iva","home"],f=["/","iva","m-home"],r=["/","iva","home","chats"],p=["/","iva","home","contacts"],u=["/","iva","home","conferences"],a=["/","iva","m-home","conferences"],o=["/","iva","home","rooms"],l=["/","iva","home","files"],c=["/","iva","home","settings"],d=["/","iva","conference","reject"],v=["/","iva","home","conference-reject"],I="extAuthError";let m=(()=>{class g{constructor(n,S){this.activatedRoute=n,this.router=S}goToLogin(n){this.router.navigate(["/","login"],{state:n})}goToHome(n=!1){this.router.navigate(i,{replaceUrl:n})}goToMHome(n=!1){this.router.navigate(f,{replaceUrl:n})}goToChats(n){this.router.navigate(r,{queryParams:{currentChatId:n},queryParamsHandling:"merge"})}goToContacts(){this.router.navigate(p,{queryParams:{}})}goToConferences(){return this.router.navigate(u,{queryParams:{}})}goToMConferences(){return this.router.navigate(a,{queryParams:{}})}goToConferencesWithMerge(){return this.router.navigate(u,{queryParams:{},queryParamsHandling:"merge"})}leaveConference(){const n={...this.activatedRoute.snapshot.queryParams};return delete n.conferenceSessionId,delete n.conferenceSessionOpenMode,this.router.navigate([],{queryParams:n})}leaveMConference(){const n={...this.activatedRoute.snapshot.queryParams};return delete n.conferenceSessionId,delete n.conferenceSessionOpenMode,this.router.navigate(i,{queryParams:n})}goToRooms(){this.router.navigate(o)}moveToRooms(){this.router.navigate(o,{queryParamsHandling:"preserve"})}goToFiles(){this.router.navigate(l)}goToSettings(){this.router.navigate(c)}goToProfile(n=!1){const S={settingsSection:s.Q.PROFILE};n&&(S.conferenceSessionOpenMode=e.l.PIP),this.router.navigate(c,{queryParams:S,queryParamsHandling:"merge"})}goToHomeSettings(){this.router.navigate(c,{queryParams:{conferenceSessionOpenMode:e.l.PIP,settingsSection:s.Q.GENERAL},queryParamsHandling:"merge"})}goToConferenceReject(n,S){return n?this.goToConferenceRejectForUnregisteredUsers(S):this.goToConferenceRejectForRegisteredUsers(S)}goToConferenceRejectForUnregisteredUsers(n){return this.router.navigate(d,{queryParams:n})}goToConferenceRejectForRegisteredUsers(n){return this.router.navigate(v,{queryParams:n})}goToConferenceJoin(n){this.router.navigate(["join"],{queryParams:{token:`t${n}`}})}goToConference(n,S){this.router.navigate([],{queryParams:{conferenceSessionId:n,conferenceSessionOpenMode:S},queryParamsHandling:"merge"})}goToMConference(n,S){this.router.navigate(f,{queryParams:{conferenceSessionId:n,conferenceSessionOpenMode:S},queryParamsHandling:"merge"})}forwardToConference(n,S){this.router.navigate([],{queryParams:{conferenceSessionId:n,conferenceSessionOpenMode:S},queryParamsHandling:"merge",replaceUrl:!0})}goToConferenceInitial(n,S){this.router.navigate(u,{queryParams:{conferenceSessionId:n,conferenceSessionOpenMode:S}})}goToMConferenceInitial(n,S){this.router.navigate(a,{queryParams:{conferenceSessionId:n,conferenceSessionOpenMode:S}})}goToConferenceForUnregisteredUsers(n){this.router.navigate(["/","iva","conference",n],{queryParams:{conferenceSessionId:n}})}goToMConferenceForUnregisteredUsers(n){this.router.navigate(["/","iva","m-conference",n],{queryParams:{conferenceSessionId:n}})}goToLobby(n,S,C){this.router.navigate(u,{queryParams:{lobby:"true",conferenceSessionId:n,token:S,passcode:C,conferenceSessionOpenMode:e.l.WIDE}})}goToContact(n){return this.router.navigate(p,{queryParams:{contactId:n},queryParamsHandling:"merge",replaceUrl:!0})}goToLobbyForUnregisteredUsers(n,S,C){this.router.navigate(["/","iva","conference",n,"lobby"],{queryParams:{token:S,passcode:C}})}goToConferenceNotFound(){this.router.navigate(["join","event-not-found"])}setConferenceSessionOpenMode(n){this.router.navigate([],{queryParams:{conferenceSessionOpenMode:n},queryParamsHandling:"merge"})}setSelectedConferenceItemId(n){this.router.navigate([],{queryParams:{conferenceItemId:n||void 0},queryParamsHandling:"merge"})}}return g.\u0275fac=function(n){return new(n||g)(h.LFG(_.gz),h.LFG(_.F0))},g.\u0275prov=h.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()},48127:(z,R,t)=>{t.d(R,{v:()=>h});var e=t(54355),s=t(24710);let h=(()=>{class _{get now(){return Date.now()-this.loginService.serverDelta}constructor(f){this.loginService=f}}return _.\u0275fac=function(f){return new(f||_)(e.LFG(s.r))},_.\u0275prov=e.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})()},22734:(z,R,t)=>{t.d(R,{p:()=>m});var e=t(5469),s=t(911),h=t(59193),_=t(25917),i=t(68939),f=t(46782),r=t(7703),p=t(68307),u=t(548),a=t(88002),o=t(5304),l=t(45435),c=t(43190),d=t(54355),v=t(82668),I=t(35337);let m=(()=>{class g extends s.z23{get hasNext(){return this.storageManagementStoreService.documents.hasNext}get isNextPageFetching(){return this.storageManagementStoreService.isDocumentsNextPageFetching}constructor(n,S,C){super(),this.storageManagementStoreService=n,this.storageManagementApiService=S,this.toastr=C,this.gridData$=this.storageManagementStoreService.documents$,this.isGridDataFetching$=this.storageManagementStoreService.isDocumentsFetching$,this.isNextPageFetching$=this.storageManagementStoreService.isDocumentsNextPageFetching$,this.searchValue$=this.storageManagementStoreService.searchValue$,this.listenOpenedDocument()}fetchStartData(){const n=this.fetchStartData$();this.storageManagementStoreService.setIsDocumentsFetching(!0),n.pipe((0,i.x)(()=>this.storageManagementStoreService.setIsDocumentsFetching(!1)),(0,f.R)(this.destroy$)).subscribe(S=>this.storageManagementStoreService.setGridData(S))}fetchStartData$(){return this.storageManagementApiService.getFiles({searchCriteria:this.storageManagementStoreService.searchValue,offset:0,sortField:this.storageManagementStoreService.sortField,orderAsc:this.storageManagementStoreService.orderAsc,limit:e._Z.settings.STORAGE_MANAGEMENT_FILES_LIST_PAGE_SIZE})}fetchNextPage$(){return this.storageManagementApiService.getFiles({offset:this.storageManagementStoreService.documents.data.length||0,sortField:this.storageManagementStoreService.sortField,orderAsc:this.storageManagementStoreService.orderAsc,limit:e._Z.settings.STORAGE_MANAGEMENT_FILES_LIST_PAGE_SIZE})}fetchNextPage(){this.hasNext&&(this.storageManagementStoreService.setIsDocumentsNextPageFetching(!0),this.fetchNextPage$().pipe((0,i.x)(()=>this.storageManagementStoreService.setIsDocumentsNextPageFetching(!1)),(0,f.R)(this.destroy$)).subscribe(n=>{this.storageManagementStoreService.appendGridData(n)},()=>this.toastr.error({translationKey:"SETTINGS.STORAGE_MANAGEMENT.DOCUMENTS.ERRORS.COMMON"})))}getFilesBySearch(n){this.storageManagementStoreService.setSearchValue(n),this.fetchStartData()}flushSearch(){this.storageManagementStoreService.setSearchValue("")}fetchNextDocumentPagesUntil$(n){let S=0;return this.storageManagementStoreService.setIsNextDocumentPagesFetchingUntil(!0),this.fetchNextDocumentPages$().pipe((0,r.jn)(T=>(T=>void 0!==n&&!!T&&T.hasNext&&!(S>=(n??0)))(T)?this.fetchNextDocumentPages$():h.E),(0,p.b)(T=>S+=T?.data.length??0),(0,u.h)(1),(0,i.x)(()=>this.storageManagementStoreService.setIsNextDocumentPagesFetchingUntil(!1)),(0,a.U)(()=>{}))}fetchNextDocumentPages$(){const S=this.storageManagementStoreService.openedDocumentId,C=this.storageManagementStoreService.documents.data.find(P=>P.nodeId===S);if(!S)return(0,_.of)(null);const T=this.storageManagementStoreService.currentDocumentPages?.data.length??0;return this.storageManagementStoreService.setIsNextDocumentPagesFetching(!0),this.storageManagementApiService.getDocumentConvertedPages(C,T).pipe((0,p.b)(P=>this.appendOpenedFilePages(P)),(0,o.K)(()=>(this.toastr.error({translationKey:"SETTINGS.STORAGE_MANAGEMENT.DOCUMENTS.ERRORS.FETCH_NEXT_PAGES"}),(0,_.of)(null))),(0,i.x)(()=>this.storageManagementStoreService.setIsNextDocumentPagesFetching(!1)))}appendOpenedFilePages(n){const S=this.storageManagementStoreService.currentDocumentPages;S.data=[...S.data,...n.data],S.hasNext=n.hasNext,this.storageManagementStoreService.setCurrentDocumentPages({...S})}listenOpenedDocument(){this.storageManagementStoreService.openedDocument$.pipe((0,l.h)(n=>!!n),(0,c.w)(n=>this.storageManagementApiService.getDocumentConvertedPages(n)),(0,f.R)(this.destroy$)).subscribe(n=>{this.storageManagementStoreService.setCurrentDocumentPages(n)})}removeFile$(n){return this.storageManagementApiService.deleteFile(n.nodeId).pipe((0,p.b)(()=>this.storageManagementStoreService.setIsDocumentsFetching(!0)),(0,c.w)(()=>this.fetchStartData$()),(0,p.b)(S=>this.storageManagementStoreService.setGridData(S)),(0,i.x)(()=>this.storageManagementStoreService.setIsDocumentsFetching(!1)),(0,f.R)(this.destroy$))}resetOpenedDocumentId(){this.storageManagementStoreService.setOpenedDocumentId(null)}setOpenedDocumentId(n){this.storageManagementStoreService.setOpenedDocumentId(n)}}return g.\u0275fac=function(n){return new(n||g)(d.LFG(v.S),d.LFG(I.R),d.LFG(s._Wo))},g.\u0275prov=d.Yz7({token:g,factory:g.\u0275fac}),g})()},97684:(z,R,t)=>{t.d(R,{Eb:()=>r,Rd:()=>f,Vc:()=>i});var e=t(97057),s=t(54355);const i="safari",f="ios";class r{init(){this.patchStylesIfNeeded(),window.addEventListener("resize",()=>this.patchStylesIfNeeded())}static get isIpadSafari(){return this.browser?.name===f||this.browser?.name===i&&"Mac OS"===this.browser?.os&&navigator.maxTouchPoints>=5&&"ontouchstart"in document}static get isChromeIos(){return"crios"===r.browser?.name}static get isChromeAndroid(){return"chrome"===r.browser?.name&&"Android OS"===r.browser?.os}patchStylesIfNeeded(){if(!this.shouldPatchStyles())return;const{style:u}=document.documentElement;setTimeout(()=>{const a=window.innerHeight;u.setProperty("--100vh",`${a}px`);const o=window.innerWidth;u.setProperty("--100vw",`${o}px`)},100)}shouldPatchStyles(){return r.isIpadSafari||r.isChromeIos||r.isChromeAndroid}}r.browser=(0,e.qY)(),r.\u0275fac=function(u){return new(u||r)},r.\u0275prov=s.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})},12989:(z,R,t)=>{t.d(R,{F:()=>_,G:()=>h});var e=t(911),s=t(54355);const h=e.$Fr[36];let _=(()=>{class i extends e.z23{constructor(){super(...arguments),this.TIME_ZONES=e.$Fr,this.computerRawTimeZone=this.getComputerTimezoneName(),this.computerRawTimeZoneOffset=this.getComputerTimezoneOffset(),this.COMPUTER_TIME_ZONE=this.getNearestTimeZone(this.computerRawTimeZone,this.computerRawTimeZoneOffset)||h}getComputerTimezoneName(){return Intl.DateTimeFormat().resolvedOptions().timeZone}getComputerTimezoneOffset(){return(new Date).getTimezoneOffset()}setTimeZone(r){if(!r)return;const p="string"==typeof r?this.getTimeZoneByCode(r):r;p&&e.mzB.setTimezoneOffset(p.offset)}getTimeZoneByCode(r){return this.TIME_ZONES.find(p=>p.code===r)}getNearestTimeZone(r,p){const u=this.getTimeZoneByCode(r);if(u)return u;const a=this.TIME_ZONES.map(c=>Math.abs(p-c.offset)),o=Math.min(...a),l=a.indexOf(o);return this.TIME_ZONES[l]}localDateToUtc(r){return r-(new Date).getTimezoneOffset()*e.wnR+e.mzB.getTimezoneOffset()*e.wnR}}return i.\u0275fac=function(){let f;return function(p){return(f||(f=s.n5z(i)))(p||i)}}(),i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()},87225:(z,R,t)=>{t.d(R,{C:()=>m});var e=t(911),s=t(26215),h=t(70882),_=t(40205),i=t(88002),f=t(45435),r=t(43190),p=t(15257),u=t(46782),a=t(68307),o=t(74945),l=t(5304),c=t(77463),d=t(29514),v=t(54355),I=t(86207);let m=(()=>{class g extends e.z23{constructor(n){super(),this.resourceApiService=n,this._filesUploadProgresses$=new s.X(new Map([])),this._abortedUploadsIds$=new s.X([]),this.abortedUploadsIds$=this._abortedUploadsIds$.asObservable(),this.filterAndRemoveAbort=S=>()=>{const C=!this._abortedUploadsIds$.value.includes(S);return C||this.removeAbort(S),C}}getFilesUploadProgresses$(n){return this._filesUploadProgresses$.pipe((0,i.U)(S=>S.get(n)))}getFilesUploadProgresses(n){return this._filesUploadProgresses$.value.get(n)}isAborted(n){return this._abortedUploadsIds$.value.includes(n)}isAborted$(n){return this.abortedUploadsIds$.pipe((0,i.U)(S=>S.includes(n)))}updateResourceUploadProgress(n,S,C,T,P){const A=new Map(this._filesUploadProgresses$.value),M=new Map(A.get(n)||[]);M.set(S,{transferred:P,file:T,resourceId:C}),A.set(n,M),this._filesUploadProgresses$.next(A)}removeAbort(n){const S=this._abortedUploadsIds$.value.indexOf(n);if(-1===S)return;const C=this._abortedUploadsIds$.value.slice();C.splice(S,1),this._abortedUploadsIds$.next(C),this.removeResourceUploadProgress(n)}removeResourceUploadProgress(n){const S=new Map(this._filesUploadProgresses$.value),C=Array.from(S.entries()).find(([,T])=>Array.from(T.keys()).includes(n));if(C){const T=C[0],P=new Map(C[1]);P.delete(n),S.set(T,P),this._filesUploadProgresses$.next(S)}}upload$(n,S,C=(0,c.Z)(),T=!0){const P=this.filterAndRemoveAbort(C);return this.resourceApiService.createResource(S.name,!0).pipe((0,f.h)(()=>P()),(0,r.w)(A=>this.uploadResource$(n,C,A,S,T).pipe((0,i.U)(()=>A))))}uploadResource$(n,S,C,T,P=!0){const A=d._.settings.CONFERENCE_SESSION_FILES_FILE_CHUNK_SIZE_BYTES,M=Math.ceil(T.size/A);return new h.y(L=>{this.updateResourceUploadProgress(n,S,C,T,0);let W,N=0;if(this._abortedUploadsIds$.pipe((0,f.h)(D=>D.includes(S)),(0,p.q)(1),(0,u.R)(this.destroy$)).subscribe(()=>{W?.unsubscribe(),this.removeAbort(C),L.complete()}),this._abortedUploadsIds$.value.includes(S))return;const V=()=>{const D=N*A,F=Math.min((N+1)*A,T.size);W=this.uploadResourceChunk$(C,T,D,F).pipe((0,a.b)(()=>this.updateResourceUploadProgress(n,S,C,T,F)),(0,p.q)(1),(0,u.R)(this.destroy$)).subscribe(()=>{if(N++,N>=M)return P&&this.removeResourceUploadProgress(S),L.next(),void L.complete();V()},L.error)};V()})}uploadResourceChunk$(n,S,C,T){const P=S.slice(C,T),A=d._.settings.CONFERENCE_SESSION_FILES_FILE_CHUNK_UPLOAD_ATTEMPTS;return this.resourceApiService.uploadResourceChunk$(n,P,C,T,S.size).pipe((0,o.X)(A-1),(0,l.K)(M=>(this.removeResourceUploadProgress(n),(0,_._)(M))))}abortUpload(n){this._abortedUploadsIds$.value.includes(n)||(this._abortedUploadsIds$.next([...this._abortedUploadsIds$.value,n]),this.removeResourceUploadProgress(n))}}return g.\u0275fac=function(n){return new(n||g)(v.LFG(I.g))},g.\u0275prov=v.Yz7({token:g,factory:g.\u0275fac}),g})()},69261:(z,R,t)=>{t.d(R,{RJ:()=>F,ZI:()=>m,dj:()=>g});var e=t(29514),s=t(54355),h=t(28728);const o="://(\\w+:{0,1}\\w*@)?(\\S+)(:[0-9]+)?(\\/|\\/([\\w#!:.?+=&%@!\\-\\/]))?$",l=new RegExp("^(rtsp)"+o,"i"),c=new RegExp("^(rtmp)"+o,"i"),d=new RegExp("^(vnc)"+o,"i"),m="[-a-z0-9!#$&'*+\\/=?^_`{|}~]+(\\.[-a-z0-9!#$&'*+\\/=?^_`{|}~]+)*@[-a-z0-9!#$&'*+\\/=?^_`{|}~]{1,63}(\\.[-a-z0-9!#$&'*+\\/=?^_`{|}~]{1,63})*(\\.[a-z]{2,8})",g=new RegExp(m,"i"),E=new RegExp(`^${m}$`,"i"),n=/^(\+{0,})(\d{0,})([(]{1}\d{1,3}[)]{0,}){0,}(\s?\d+|\+\d{2,3}\s{1}\d+|\d+){1}[\s|-]?\d+([\s|-]?\d+){1,2}(\s){0,}$/i,S="[-a-z0-9 !#$%&'*+/=?^_`{|}~\\\\]",C="[-a-z0-9]",T="[a-z0-9]("+S+"*(\\."+S+"+)*\\.?[a-z0-9])?",M="#[0-9*#]+",b=`^${"("+T+"@)?(((25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(25[0-5]|2[0-4]\\d|[01]?\\d\\d?)(\\:[0-9]{1,5})?){1}("+M+")?"}$`,V=new RegExp(`^${"("+T+"@)?([a-z0-9]"+C+"{0,61}[a-z0-9](\\.[a-z0-9]"+C+"{0,61}[a-z0-9])+(\\:[0-9]{1,5})?){1}("+M+")?"}$`,"i"),D=new RegExp(b,"i");let F=(()=>{class J{constructor(Y){this.systemSettingsStoreService=Y}isValidPhoneOfVoip(Y){return this.isValidPhone(Y)||this.isValidVoip(Y)}isValidPhone(Y){const ee=Y.replace(/[^0-9]/g,"");return Y.length>2?n.test(Y)&&!!ee&&ee.length>=this.systemSettingsStoreService.systemInfo.domain.minPhoneLength&&ee.length<=this.systemSettingsStoreService.systemInfo.domain.maxPhoneLength:!!ee&&ee.length>=this.systemSettingsStoreService.systemInfo.domain.minPhoneLength&&ee.length<=this.systemSettingsStoreService.systemInfo.domain.maxPhoneLength}isValidEmail(Y){return E.test(Y)}isValidVoip(Y){if(!this.startsWithVVoIPPrefix(Y))return!1;const ee=this.getAddressWithoutPrefix(Y);return!(ee.length<6||ee.length>255)&&(V.test(ee)||D.test(ee)||this.isValidRtspLikeAddress(Y))}getAddressWithoutPrefix(Y){const ee=Y.indexOf("://")>-1?Y.indexOf("://")+3:Y.indexOf(":")+1;return 0===ee||ee>7?Y:Y.substring(ee)}isValidRtspLikeAddress(Y){return l.test(Y)||c.test(Y)||d.test(Y)}validatePasscode(Y){const ee=e._.settings.CONFERENCE_SESSION_PASSCODE_MIN_LENGTH,X=e._.settings.CONFERENCE_SESSION_PASSCODE_MAX_LENGTH,K=new RegExp(e._.settings.CONFERENCE_SESSION_PASSCODE_REGEXP);return!Y||Y.length>=ee&&Y.length<=X&&K.test(Y)}startsWithVVoIPPrefix(Y){return this.startsWithSipPrefix(Y)||this.startsWithH323Prefix(Y)||this.startsWithS4BPrefix(Y)||this.startsWithRtmpPrefix(Y)||this.startsWithRtspPrefix(Y)||this.startsWithVncPrefix(Y)}startsWithSipPrefix(Y){return!!Y&&(Y.startsWith("sip:")||Y.startsWith("sips:"))}startsWithH323Prefix(Y){return!!Y&&Y.startsWith("h323:")}startsWithS4BPrefix(Y){return!!Y&&Y.startsWith("s4b:")}startsWithRtmpPrefix(Y){return!!Y&&Y.startsWith("rtmp:")}startsWithRtspPrefix(Y){return!!Y&&Y.startsWith("rtsp:")}startsWithVncPrefix(Y){return!!Y&&Y.startsWith("vnc:")}}return J.\u0275fac=function(Y){return new(Y||J)(s.LFG(h.Ph))},J.\u0275prov=s.Yz7({token:J,factory:J.\u0275fac,providedIn:"root"}),J})()},36162:(z,R,t)=>{t.d(R,{P:()=>u});var e=t(8239),s=t(26738),h=t(93336),_=t(26215),i=t(4147),f=t(29514),r=t(54355),p=t(911);let u=(()=>{class a{get version(){return this._version}constructor(l,c){this.http=l,this.overlayService=c,this._isVersionFetching$=new _.X(!1),this.isVersionFetching$=this._isVersionFetching$.asObservable(),this._version=i.i8,this.intervalId=null,this.isWindowOpened=!1,Object.defineProperty(window,"version",{writable:!1,value:this._version})}startVersionListening(){this._version?(this.stopVersionListening(),this.intervalId=window.setInterval(this.checkVersion.bind(this),f._.settings.VERSION_CHECKING_INTERVAL_S*f._.settings.MS_IN_SECOND)):console.warn("Application version is not defined. Check package.json")}stopVersionListening(){null!==this.intervalId&&window.clearTimeout(this.intervalId)}isLastVersion(){var l=this;return(0,e.Z)(function*(){return(yield l.fetchVersion())===l.version})()}checkVersion(){var l=this;return(0,e.Z)(function*(){if(l.isWindowOpened)return;const c=yield l.fetchVersion();c!==l.version&&(l.isWindowOpened=!0,l.overlayService.openModal(h.o,c).afterClosed$.asObservable().subscribe(()=>l.isWindowOpened=!1))})()}fetchVersion(){return this._isVersionFetching$.next(!0),new Promise((l,c)=>{this.http.get("VERSION.md",{headers:new s.WM({Accept:"text/html, application/xhtml+xml, */*","Content-Type":"application/x-www-form-urlencoded","Cache-Control":"no-cache, no-store, must-revalidate, post-check=0, pre-check=0",Pragma:"no-cache",Expires:"0"}),responseType:"text"}).toPromise().then(d=>l(d.trim())).catch(d=>{c(`Could not load VERSION.md file': ${JSON.stringify(d)}`)}).finally(()=>this._isVersionFetching$.next(!1))})}}return a.\u0275fac=function(l){return new(l||a)(r.LFG(s.eN),r.LFG(p.Bi9))},a.\u0275prov=r.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()},87548:z=>{var t,R=(t=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0,typeof __filename<"u"&&(t=t||__filename),function(e){var h,_,s={};s.ready=new Promise(function(y,w){h=y,_=w});var f,i={};for(f in s)s.hasOwnProperty(f)&&(i[f]=s[f]);var l,a,o,r=[],p="./this.program",u=function(y,w){throw w};a="object"==typeof window,o="function"==typeof importScripts,l="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;var m,g,d="";a||l||o?(a||o)&&(o?d=self.location.href:typeof document<"u"&&document.currentScript&&(d=document.currentScript.src),t&&(d=t),d=0!==d.indexOf("blob:")?d.substr(0,d.lastIndexOf("/")+1):"",o&&(g=function(y){var w=new XMLHttpRequest;return w.open("GET",y,!1),w.responseType="arraybuffer",w.send(null),new Uint8Array(w.response)}),m=function(y,w,ce){var pe=new XMLHttpRequest;pe.open("GET",y,!0),pe.responseType="arraybuffer",pe.onload=function(){200==pe.status||0==pe.status&&pe.response?w(pe.response):ce()},pe.onerror=ce,pe.send(null)}):(g=function(w){var ce;return"function"==typeof readbuffer?new Uint8Array(readbuffer(w)):(function W(y,w){y||Ee("Assertion failed: "+w)}("object"==typeof(ce=read(w,"binary"))),ce)},typeof scriptArgs<"u"?r=scriptArgs:typeof arguments<"u"&&(r=arguments),"function"==typeof quit&&(u=function(y){quit(y)}),typeof print<"u"&&(typeof console>"u"&&(console={}),console.log=print,console.warn=console.error=typeof printErr<"u"?printErr:print));var P,C=s.print||console.log.bind(console),T=s.printErr||console.warn.bind(console);for(f in i)i.hasOwnProperty(f)&&(s[f]=i[f]);i=null,s.arguments&&(r=s.arguments),s.thisProgram&&(p=s.thisProgram),s.quit&&(u=s.quit),s.wasmBinary&&(P=s.wasmBinary);var A=s.noExitRuntime||!0;"object"!=typeof WebAssembly&&Ee("no native wasm support detected");var M,H,Y,ee,oe,L=!1,b=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function V(y,w,ce){for(var pe=w+ce,ge=w;y[ge]&&!(ge>=pe);)++ge;if(ge-w>16&&y.subarray&&b)return b.decode(y.subarray(w,ge));for(var j="";w<ge;){var le=y[w++];if(128&le){var q=63&y[w++];if(192!=(224&le)){var se=63&y[w++];if((le=224==(240&le)?(15&le)<<12|q<<6|se:(7&le)<<18|q<<12|se<<6|63&y[w++])<65536)j+=String.fromCharCode(le);else{var Ce=le-65536;j+=String.fromCharCode(55296|Ce>>10,56320|1023&Ce)}}else j+=String.fromCharCode((31&le)<<6|q)}else j+=String.fromCharCode(le)}return j}function J(y,w){return y%w>0&&(y+=w-y%w),y}function te(y){H=y,s.HEAP8=Y=new Int8Array(y),s.HEAP16=new Int16Array(y),s.HEAP32=oe=new Int32Array(y),s.HEAPU8=ee=new Uint8Array(y),s.HEAPU16=new Uint16Array(y),s.HEAPU32=new Uint32Array(y),s.HEAPF32=new Float32Array(y),s.HEAPF64=new Float64Array(y)}var de,re=[],_e=[],ve=[],$=[],Te=0,Re=null,xe=null;function Ee(y){s.onAbort&&s.onAbort(y),T(y+=""),L=!0,y="abort("+y+"). Build with -s ASSERTIONS=1 for more info.";var w=new WebAssembly.RuntimeError(y);throw _(w),w}function me(y,w){return String.prototype.startsWith?y.startsWith(w):0===y.indexOf(w)}s.preloadedImages={},s.preloadedAudios={};function Ie(y){return me(y,"data:application/octet-stream;base64,")}function Ve(y){return me(y,"file://")}function je(y){try{if(y==e&&P)return new Uint8Array(P);if(g)return g(y);throw"both async and sync fetching of the wasm failed"}catch(w){Ee(w)}}function we(y){for(;y.length>0;){var w=y.shift();if("function"!=typeof w){var ce=w.func;"number"==typeof ce?void 0===w.arg?de.get(ce)():de.get(ce)(w.arg):ce(void 0===w.arg?null:w.arg)}else w(s)}}Ie(e)||(e=function v(y){return s.locateFile?s.locateFile(y,d):d+y}(e));var be;function $e(){return A||!1}function ot(y){try{return M.grow(y-H.byteLength+65535>>>16),te(M.buffer),1}catch{}}be=l?function(){var y=process.hrtime();return 1e3*y[0]+y[1]/1e6}:typeof dateNow<"u"?dateNow:function(){return performance.now()};var We={};function Ke(){if(!Ke.strings){var w={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:p||"./this.program"};for(var ce in We)w[ce]=We[ce];var pe=[];for(var ce in w)pe.push(ce+"="+w[ce]);Ke.strings=pe}return Ke.strings}var Ge,Qe={mappings:{},buffers:[null,[],[]],printChar:function(y,w){var ce=Qe.buffers[y];0===w||10===w?((1===y?C:T)(V(ce,0)),ce.length=0):ce.push(w)},varargs:void 0,get:function(){return Qe.varargs+=4,oe[Qe.varargs-4>>2]},getStr:function(y){var w=function D(y,w){return y?V(ee,y,w):""}(y);return w},get64:function(y,w){return y}},at={a:function Je(){Ee()},n:function ke(y,w){var ce;if(0===y)ce=Date.now();else{if(1!==y&&4!==y)return function qe(y){oe[dt()>>2]=y}(28),-1;ce=be()}return oe[w>>2]=ce/1e3|0,oe[w+4>>2]=ce%1e3*1e3*1e3|0,0},i:function Be(y,w){Ee("To use dlopen, you need to use Emscripten's linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")},d:function et(y,w){Ee("To use dlopen, you need to use Emscripten's linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")},h:function st(){return 2147483648},l:function it(y,w,ce){ee.copyWithin(y,w,w+ce)},m:function _t(y){var w=ee.length,ce=2147483648;if(y>ce)return!1;for(var pe=1;pe<=4;pe*=2){var ge=w*(1+.2/pe);if(ge=Math.min(ge,y+100663296),ot(Math.min(ce,J(Math.max(y,ge),65536))))return!0}return!1},o:function Ze(y){for(var w=be();be()-w<y;);},p:function ut(y,w){var ce=0;return Ke().forEach(function(pe,ge){var j=w+ce;oe[y+4*ge>>2]=j,function F(y,w,ce){for(var pe=0;pe<y.length;++pe)Y[w++>>0]=y.charCodeAt(pe);ce||(Y[w>>0]=0)}(pe,j),ce+=pe.length+1}),0},f:function ht(y,w){var ce=Ke();oe[y>>2]=ce.length;var pe=0;return ce.forEach(function(ge){pe+=ge.length+1}),oe[w>>2]=pe,0},j:function pt(y){!function x(y,w){(!w||!$e()||0!==y)&&($e()||(s.onExit&&s.onExit(y),L=!0),u(y,new ne(y)))}(y)},g:function gt(y){return 0},k:function ft(y,w,ce,pe,ge){},b:function Et(y,w,ce,pe){for(var ge=0,j=0;j<ce;j++){for(var le=oe[w+8*j>>2],q=oe[w+(8*j+4)>>2],se=0;se<q;se++)Qe.printChar(y,ee[le+se]);ge+=q}return oe[pe>>2]=ge,0},c:function mt(){return 6},e:function St(){return 28}},dt=(function He(){var y={a:at};function w(le,q){s.asm=le.exports,te((M=s.asm.q).buffer),de=s.asm.D,function Ae(y){_e.unshift(y)}(s.asm.r),function ye(y){if(Te--,s.monitorRunDependencies&&s.monitorRunDependencies(Te),0==Te&&(null!==Re&&(clearInterval(Re),Re=null),xe)){var w=xe;xe=null,w()}}()}function ce(le){w(le.instance)}function pe(le){return function ze(){if(!P&&(a||o)){if("function"==typeof fetch&&!Ve(e))return fetch(e,{credentials:"same-origin"}).then(function(y){if(!y.ok)throw"failed to load wasm binary file at '"+e+"'";return y.arrayBuffer()}).catch(function(){return je(e)});if(m)return new Promise(function(y,w){m(e,function(ce){y(new Uint8Array(ce))},w)})}return Promise.resolve().then(function(){return je(e)})}().then(function(q){return WebAssembly.instantiate(q,y)}).then(le,function(q){T("failed to asynchronously prepare wasm: "+q),Ee(q)})}if(function Le(y){Te++,s.monitorRunDependencies&&s.monitorRunDependencies(Te)}(),s.instantiateWasm)try{return s.instantiateWasm(y,w)}catch(le){return T("Module.instantiateWasm callback failed with error: "+le),!1}(function ge(){return P||"function"!=typeof WebAssembly.instantiateStreaming||Ie(e)||Ve(e)||"function"!=typeof fetch?pe(ce):fetch(e,{credentials:"same-origin"}).then(function(le){return WebAssembly.instantiateStreaming(le,y).then(ce,function(se){return T("wasm streaming compile failed: "+se),T("falling back to ArrayBuffer instantiation"),pe(ce)})})})().catch(_)}(),s.___wasm_call_ctors=function(){return(s.___wasm_call_ctors=s.asm.r).apply(null,arguments)},s._getModelBufferMemoryOffset=function(){return(s._getModelBufferMemoryOffset=s.asm.s).apply(null,arguments)},s._getInputMemoryOffset=function(){return(s._getInputMemoryOffset=s.asm.t).apply(null,arguments)},s._getInputHeight=function(){return(s._getInputHeight=s.asm.u).apply(null,arguments)},s._getInputWidth=function(){return(s._getInputWidth=s.asm.v).apply(null,arguments)},s._getInputChannelCount=function(){return(s._getInputChannelCount=s.asm.w).apply(null,arguments)},s._getOutputMemoryOffset=function(){return(s._getOutputMemoryOffset=s.asm.x).apply(null,arguments)},s._getOutputHeight=function(){return(s._getOutputHeight=s.asm.y).apply(null,arguments)},s._getOutputWidth=function(){return(s._getOutputWidth=s.asm.z).apply(null,arguments)},s._getOutputChannelCount=function(){return(s._getOutputChannelCount=s.asm.A).apply(null,arguments)},s._loadModel=function(){return(s._loadModel=s.asm.B).apply(null,arguments)},s._runInference=function(){return(s._runInference=s.asm.C).apply(null,arguments)},s.___errno_location=function(){return(dt=s.___errno_location=s.asm.E).apply(null,arguments)});function ne(y){this.name="ExitStatus",this.message="Program terminated with exit("+y+")",this.status=y}function Q(y){function w(){Ge||(Ge=!0,s.calledRun=!0,!L&&(function G(){we(_e)}(),function ae(){we(ve)}(),h(s),s.onRuntimeInitialized&&s.onRuntimeInitialized(),function Se(){if(s.postRun)for("function"==typeof s.postRun&&(s.postRun=[s.postRun]);s.postRun.length;)y=s.postRun.shift(),$.unshift(y);var y;we($)}()))}y=y||r,Te>0||(function ie(){if(s.preRun)for("function"==typeof s.preRun&&(s.preRun=[s.preRun]);s.preRun.length;)y=s.preRun.shift(),re.unshift(y);var y;we(re)}(),Te>0)||(s.setStatus?(s.setStatus("Running..."),setTimeout(function(){setTimeout(function(){s.setStatus("")},1),w()},1)):w())}if(xe=function y(){Ge||Q(),Ge||(xe=y)},s.run=Q,s.preInit)for("function"==typeof s.preInit&&(s.preInit=[s.preInit]);s.preInit.length>0;)s.preInit.pop()();return Q(),s.ready});z.exports=R},42036:z=>{var t,R=(t=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0,typeof __filename<"u"&&(t=t||__filename),function(e){var h,_,s={};s.ready=new Promise(function(Q,x){h=Q,_=x});var f,i={};for(f in s)s.hasOwnProperty(f)&&(i[f]=s[f]);var l,a,o,r=[],p="./this.program",u=function(Q,x){throw x};a="object"==typeof window,o="function"==typeof importScripts,l="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;var m,g,d="";a||l||o?(a||o)&&(o?d=self.location.href:typeof document<"u"&&document.currentScript&&(d=document.currentScript.src),t&&(d=t),d=0!==d.indexOf("blob:")?d.substr(0,d.lastIndexOf("/")+1):"",o&&(g=function(Q){var x=new XMLHttpRequest;return x.open("GET",Q,!1),x.responseType="arraybuffer",x.send(null),new Uint8Array(x.response)}),m=function(Q,x,y){var w=new XMLHttpRequest;w.open("GET",Q,!0),w.responseType="arraybuffer",w.onload=function(){200==w.status||0==w.status&&w.response?x(w.response):y()},w.onerror=y,w.send(null)}):(g=function(x){var y;return"function"==typeof readbuffer?new Uint8Array(readbuffer(x)):(function W(Q,x){Q||ye("Assertion failed: "+x)}("object"==typeof(y=read(x,"binary"))),y)},typeof scriptArgs<"u"?r=scriptArgs:typeof arguments<"u"&&(r=arguments),"function"==typeof quit&&(u=function(Q){quit(Q)}),typeof print<"u"&&(typeof console>"u"&&(console={}),console.log=print,console.warn=console.error=typeof printErr<"u"?printErr:print));var P,A,C=s.print||console.log.bind(console),T=s.printErr||console.warn.bind(console);for(f in i)i.hasOwnProperty(f)&&(s[f]=i[f]);i=null,s.arguments&&(r=s.arguments),s.thisProgram&&(p=s.thisProgram),s.quit&&(u=s.quit),s.wasmBinary&&(P=s.wasmBinary),s.noExitRuntime&&(A=s.noExitRuntime),"object"!=typeof WebAssembly&&ye("no native wasm support detected");var M,H,Y,ee,oe,L=!1,b=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function V(Q,x,y){for(var w=x+y,ce=x;Q[ce]&&!(ce>=w);)++ce;if(ce-x>16&&Q.subarray&&b)return b.decode(Q.subarray(x,ce));for(var pe="";x<ce;){var ge=Q[x++];if(128&ge){var j=63&Q[x++];if(192!=(224&ge)){var le=63&Q[x++];if((ge=224==(240&ge)?(15&ge)<<12|j<<6|le:(7&ge)<<18|j<<12|le<<6|63&Q[x++])<65536)pe+=String.fromCharCode(ge);else{var q=ge-65536;pe+=String.fromCharCode(55296|q>>10,56320|1023&q)}}else pe+=String.fromCharCode((31&ge)<<6|j)}else pe+=String.fromCharCode(ge)}return pe}function J(Q,x){return Q%x>0&&(Q+=x-Q%x),Q}function te(Q){H=Q,s.HEAP8=Y=new Int8Array(Q),s.HEAP16=new Int16Array(Q),s.HEAP32=oe=new Int32Array(Q),s.HEAPU8=ee=new Uint8Array(Q),s.HEAPU16=new Uint16Array(Q),s.HEAPU32=new Uint32Array(Q),s.HEAPF32=new Float32Array(Q),s.HEAPF64=new Float64Array(Q)}var de,re=[],_e=[],ve=[],$=[];_e.push({func:function(){at()}});var Me=0,Te=null,Re=null;function ye(Q){s.onAbort&&s.onAbort(Q),T(Q+=""),L=!0,Q="abort("+Q+"). Build with -s ASSERTIONS=1 for more info.";var x=new WebAssembly.RuntimeError(Q);throw _(x),x}function Ee(Q,x){return String.prototype.startsWith?Q.startsWith(x):0===Q.indexOf(x)}s.preloadedImages={},s.preloadedAudios={};function ue(Q){return Ee(Q,"data:application/octet-stream;base64,")}var Fe;function Ne(Q){return Ee(Q,"file://")}function Ve(Q){try{if(Q==e&&P)return new Uint8Array(P);if(g)return g(Q);throw"both async and sync fetching of the wasm failed"}catch(x){ye(x)}}function He(Q){for(;Q.length>0;){var x=Q.shift();if("function"!=typeof x){var y=x.func;"number"==typeof y?void 0===x.arg?de.get(y)():de.get(y)(x.arg):y(void 0===x.arg?null:x.arg)}else x(s)}}function Je(Q){return oe[lt()>>2]=Q,Q}function et(Q){try{return M.grow(Q-H.byteLength+65535>>>16),te(M.buffer),1}catch{}}ue(e)||(e=function v(Q){return s.locateFile?s.locateFile(Q,d):d+Q}(e)),Fe=l?function(){var Q=process.hrtime();return 1e3*Q[0]+Q[1]/1e6}:typeof dateNow<"u"?dateNow:function(){return performance.now()};var ot={};function Ze(){if(!Ze.strings){var x={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:p||"./this.program"};for(var y in ot)x[y]=ot[y];var w=[];for(var y in x)w.push(y+"="+x[y]);Ze.strings=w}return Ze.strings}var Ye,We={mappings:{},buffers:[null,[],[]],printChar:function(Q,x){var y=We.buffers[Q];0===x||10===x?((1===Q?C:T)(V(y,0)),y.length=0):y.push(x)},varargs:void 0,get:function(){return We.varargs+=4,oe[We.varargs-4>>2]},getStr:function(Q){var x=function D(Q,x){return Q?V(ee,Q,x):""}(Q);return x},get64:function(Q,x){return Q}},mt={a:function we(){ye()},n:function be(Q,x){var y;if(0===Q)y=Date.now();else{if(1!==Q&&4!==Q)return Je(28),-1;y=Fe()}return oe[x>>2]=y/1e3|0,oe[x+4>>2]=y%1e3*1e3*1e3|0,0},i:function Xe(Q,x){ye("To use dlopen, you need to use Emscripten's linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")},e:function qe(Q,x){ye("To use dlopen, you need to use Emscripten's linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")},l:function ke(Q,x,y){ee.copyWithin(Q,x,x+y)},m:function st(Q){Q>>>=0;var x=function Be(){return ee.length}(),y=2147483648;if(Q>y)return!1;for(var ce=1;ce<=4;ce*=2){var pe=x*(1+.2/ce);if(pe=Math.min(pe,Q+100663296),et(Math.min(y,J(Math.max(16777216,Q,pe),65536))))return!0}return!1},o:function it(Q){for(var x=Fe();Fe()-x<Q;);},p:function rt(Q,x){var y=0;return Ze().forEach(function(w,ce){var pe=x+y;oe[Q+4*ce>>2]=pe,function F(Q,x,y){for(var w=0;w<Q.length;++w)Y[x++>>0]=Q.charCodeAt(w);y||(Y[x>>0]=0)}(w,pe),y+=w.length+1}),0},g:function Ke(Q,x){var y=Ze();oe[Q>>2]=y.length;var w=0;return y.forEach(function(ce){w+=ce.length+1}),oe[x>>2]=w,0},j:function Qe(Q){!function ne(Q,x){x&&A&&0===Q||(A||(s.onExit&&s.onExit(Q),L=!0),u(Q,new dt(Q)))}(Q)},h:function ut(Q){return 0},k:function ht(Q,x,y,w,ce){},c:function pt(Q,x,y,w){for(var ce=0,pe=0;pe<y;pe++){for(var ge=oe[x+8*pe>>2],j=oe[x+(8*pe+4)>>2],le=0;le<j;le++)We.printChar(Q,ee[ge+le]);ce+=j}return oe[w>>2]=ce,0},d:function gt(){return 6},f:function ft(){return 28},b:function Et(Q){switch(Q){case 30:case 75:return 16384;case 85:return 131072;case 132:case 133:case 12:case 137:case 138:case 15:case 235:case 16:case 17:case 18:case 19:case 20:case 149:case 13:case 10:case 236:case 153:case 9:case 21:case 22:case 159:case 154:case 14:case 77:case 78:case 139:case 82:case 68:case 67:case 164:case 11:case 29:case 47:case 48:case 95:case 52:case 51:case 46:return 200809;case 27:case 246:case 127:case 128:case 23:case 24:case 160:case 161:case 181:case 182:case 242:case 183:case 184:case 243:case 244:case 245:case 165:case 178:case 179:case 49:case 50:case 168:case 169:case 175:case 170:case 171:case 172:case 97:case 76:case 32:case 173:case 35:case 80:case 81:case 79:return-1;case 176:case 177:case 7:case 155:case 8:case 157:case 125:case 126:case 92:case 93:case 129:case 130:case 131:case 94:case 91:return 1;case 74:case 60:case 69:case 70:case 4:return 1024;case 31:case 42:case 72:return 32;case 87:case 26:case 33:return 2147483647;case 34:case 1:return 47839;case 38:case 36:return 99;case 43:case 37:return 2048;case 0:return 2097152;case 3:return 65536;case 28:return 32768;case 44:return 32767;case 39:return 1e3;case 89:return 700;case 71:return 256;case 40:return 255;case 2:return 100;case 180:return 64;case 25:return 20;case 5:return 16;case 6:return 6;case 73:return 4;case 84:return"object"==typeof navigator&&navigator.hardwareConcurrency||1}return Je(28),-1}},at=(function ze(){var Q={a:mt};function x(ge,j){s.asm=ge.exports,te((M=s.asm.q).buffer),de=s.asm.D,function Le(Q){if(Me--,s.monitorRunDependencies&&s.monitorRunDependencies(Me),0==Me&&(null!==Te&&(clearInterval(Te),Te=null),Re)){var x=Re;Re=null,x()}}()}function y(ge){x(ge.instance)}function w(ge){return function je(){if(!P&&(a||o)){if("function"==typeof fetch&&!Ne(e))return fetch(e,{credentials:"same-origin"}).then(function(Q){if(!Q.ok)throw"failed to load wasm binary file at '"+e+"'";return Q.arrayBuffer()}).catch(function(){return Ve(e)});if(m)return new Promise(function(Q,x){m(e,function(y){Q(new Uint8Array(y))},x)})}return Promise.resolve().then(function(){return Ve(e)})}().then(function(j){return WebAssembly.instantiate(j,Q)}).then(ge,function(j){T("failed to asynchronously prepare wasm: "+j),ye(j)})}if(function xe(Q){Me++,s.monitorRunDependencies&&s.monitorRunDependencies(Me)}(),s.instantiateWasm)try{return s.instantiateWasm(Q,x)}catch(ge){return T("Module.instantiateWasm callback failed with error: "+ge),!1}(function ce(){return P||"function"!=typeof WebAssembly.instantiateStreaming||ue(e)||Ne(e)||"function"!=typeof fetch?w(y):fetch(e,{credentials:"same-origin"}).then(function(ge){return WebAssembly.instantiateStreaming(ge,Q).then(y,function(le){return T("wasm streaming compile failed: "+le),T("falling back to ArrayBuffer instantiation"),w(y)})})})().catch(_)}(),s.___wasm_call_ctors=function(){return(at=s.___wasm_call_ctors=s.asm.r).apply(null,arguments)}),lt=(s._getModelBufferMemoryOffset=function(){return(s._getModelBufferMemoryOffset=s.asm.s).apply(null,arguments)},s._getInputMemoryOffset=function(){return(s._getInputMemoryOffset=s.asm.t).apply(null,arguments)},s._getInputHeight=function(){return(s._getInputHeight=s.asm.u).apply(null,arguments)},s._getInputWidth=function(){return(s._getInputWidth=s.asm.v).apply(null,arguments)},s._getInputChannelCount=function(){return(s._getInputChannelCount=s.asm.w).apply(null,arguments)},s._getOutputMemoryOffset=function(){return(s._getOutputMemoryOffset=s.asm.x).apply(null,arguments)},s._getOutputHeight=function(){return(s._getOutputHeight=s.asm.y).apply(null,arguments)},s._getOutputWidth=function(){return(s._getOutputWidth=s.asm.z).apply(null,arguments)},s._getOutputChannelCount=function(){return(s._getOutputChannelCount=s.asm.A).apply(null,arguments)},s._loadModel=function(){return(s._loadModel=s.asm.B).apply(null,arguments)},s._runInference=function(){return(s._runInference=s.asm.C).apply(null,arguments)},s.___errno_location=function(){return(lt=s.___errno_location=s.asm.E).apply(null,arguments)});function dt(Q){this.name="ExitStatus",this.message="Program terminated with exit("+Q+")",this.status=Q}function Ge(Q){function x(){Ye||(Ye=!0,s.calledRun=!0,!L&&(function G(){He(_e)}(),function ae(){He(ve)}(),h(s),s.onRuntimeInitialized&&s.onRuntimeInitialized(),function Se(){if(s.postRun)for("function"==typeof s.postRun&&(s.postRun=[s.postRun]);s.postRun.length;)Q=s.postRun.shift(),$.unshift(Q);var Q;He($)}()))}Q=Q||r,Me>0||(function ie(){if(s.preRun)for("function"==typeof s.preRun&&(s.preRun=[s.preRun]);s.preRun.length;)Q=s.preRun.shift(),re.unshift(Q);var Q;He(re)}(),Me>0)||(s.setStatus?(s.setStatus("Running..."),setTimeout(function(){setTimeout(function(){s.setStatus("")},1),x()},1)):x())}if(Re=function Q(){Ye||Ge(),Ye||(Re=Q)},s.run=Ge,s.preInit)for("function"==typeof s.preInit&&(s.preInit=[s.preInit]);s.preInit.length>0;)s.preInit.pop()();return A=!0,Ge(),s.ready});z.exports=R},19324:(z,R,t)=>{t.d(R,{H7:()=>l,fZ:()=>d,jU:()=>a});var e=t(8239),s=t(5469),h=t(48701),_=t(76610),i=t(77463);const f="virtual-background-input-video",r="virtual-background-output-canvas",p="virtual-background-segmentation-canvas";var a=(()=>((a=a||{})[a.NONE=0]="NONE",a[a.BLUR=1]="BLUR",a[a.IMAGE=2]="IMAGE",a[a.DEBUG=3]="DEBUG",a))();const o={fps:60,virtualBackgroundType:a.NONE,bgConfig:void 0},l=30,c=1e3/l;class d{get outputCanvasCtx(){return this.outputCanvasEl?.getContext("2d",{willReadFrequently:!0})}get segmentationMaskCtx(){return this.segmentationMaskCanvasEl?.getContext("2d",{willReadFrequently:!0})}get mediaStream(){return this._mediaStream}constructor(I,m){this.model=I,this.isDebugEnabled=m,this.instanceId=(0,i.Z)(),this.fullConfig=(0,_.Z)(o),this.isReplaceBackgroundStarted=!1,this.segmentationOptions={height:s._Z.settings.CONFERENCE_SESSION_SHOW_VIRTUAL_BACKGROUND_SEGMENTATION_HEIGHT,width:s._Z.settings.CONFERENCE_SESSION_SHOW_VIRTUAL_BACKGROUND_SEGMENTATION_WIDTH},this.segmentationPixelCount=this.segmentationOptions.width*this.segmentationOptions.height}init(){this.createDebugContainer(),this.createInputVideo(),this.createOutputCanvas(),this.createSegmentationCanvas()}flush(){this.stopReplaceBackground(),this.debugDiv?.remove(),this.inputVideoEl?.remove(),this.outputCanvasEl?.remove(),this.segmentationMaskCanvasEl?.remove(),window.clearTimeout(this.processFrameTimeoutId),(0,h.X7)(this.mediaStream)}createDebugContainer(){this.debugDiv=document.createElement("div"),this.debugDiv.classList.add("virtual-background-debug-container"),this.debugDiv.id=`virtual-background-debug-container_${this.instanceId}`,this.isDebugEnabled||(this.debugDiv.style.display="none"),document.body.append(this.debugDiv)}createInputVideo(){this.inputVideoEl=document.createElement("video"),this.inputVideoEl.classList.add(f),this.inputVideoEl.autoplay=!0,this.inputVideoEl.id=`${f}_${this.instanceId}`,this.isDebugEnabled&&this.debugDiv?.append(this.inputVideoEl)}createOutputCanvas(){this.outputCanvasEl=document.createElement("canvas"),this.outputCanvasEl.classList.add(r),this.outputCanvasEl.id=`${r}_${this.instanceId}`,this.isDebugEnabled&&this.debugDiv?.append(this.outputCanvasEl)}createSegmentationCanvas(){this.segmentationMaskCanvasEl=document.createElement("canvas"),this.segmentationMaskCanvasEl.classList.add(p),this.segmentationMaskCanvasEl.id=`${p}_${this.instanceId}`,this.isDebugEnabled&&this.debugDiv?.append(this.segmentationMaskCanvasEl)}processBlur(){this.outputCanvasCtx&&this.outputCanvasEl&&this.inputVideoEl&&(this.outputCanvasCtx.filter=`blur(${this.fullConfig.bgConfig.radius}px)`,this.outputCanvasCtx.drawImage(this.inputVideoEl,0,0))}processImage(){this.outputCanvasCtx&&this.outputCanvasEl&&this.outputCanvasCtx.drawImage(this.fullConfig.bgConfig.image,0,0,this.outputCanvasEl.width,this.outputCanvasEl.height)}processFrame(){this.processFrameTimeoutId=window.setTimeout(()=>{this.isReplaceBackgroundStarted&&(this.resizeSource(),this.runInference(),this.runPostProcessing(),this.processFrame())},c)}resizeSource(){if(!this.inputVideoEl||!this.segmentationMaskCtx||!this.model)return;this.segmentationMaskCtx.drawImage(this.inputVideoEl,0,0,this.inputVideoEl.videoWidth,this.inputVideoEl.videoHeight,0,0,this.segmentationOptions.width,this.segmentationOptions.height);const I=this.segmentationMaskCtx.getImageData(0,0,this.segmentationOptions.width,this.segmentationOptions.height),m=this.model._getInputMemoryOffset()/4;for(let g=0;g<this.segmentationPixelCount;g++)this.model.HEAPF32[m+3*g]=Number(I.data[4*g])/255,this.model.HEAPF32[m+3*g+1]=Number(I.data[4*g+1])/255,this.model.HEAPF32[m+3*g+2]=Number(I.data[4*g+2])/255}runInference(){if(!this.segmentationMask||!this.segmentationMaskCtx||!this.model)return;this.model._runInference();const I=this.model._getOutputMemoryOffset()/4;for(let m=0;m<this.segmentationPixelCount;m++)this.segmentationMask.data[4*m+3]=255*this.model.HEAPF32[I+m];this.segmentationMaskCtx.putImageData(this.segmentationMask,0,0)}runPostProcessing(){if(!(this.outputCanvasEl&&this.outputCanvasCtx&&this.inputVideoEl&&this.segmentationMaskCanvasEl))return;const I=this.inputVideoEl.videoHeight,m=this.inputVideoEl.videoWidth;switch(this.outputCanvasEl.height=I,this.outputCanvasEl.width=m,this.outputCanvasCtx.globalCompositeOperation="copy",this.outputCanvasCtx.drawImage(this.segmentationMaskCanvasEl,0,0,this.segmentationOptions.width,this.segmentationOptions.height,0,0,m,I),this.outputCanvasCtx.globalCompositeOperation="source-in",this.outputCanvasCtx.filter="none",this.outputCanvasCtx.drawImage(this.inputVideoEl,0,0),this.outputCanvasCtx.globalCompositeOperation="destination-over",this.fullConfig.virtualBackgroundType){case a.NONE:break;case a.BLUR:this.processBlur();break;case a.IMAGE:this.processImage()}}startReplaceBackground(I,m){var g=this;return(0,e.Z)(function*(){if(!g.inputVideoEl||!g.outputCanvasEl||!g.segmentationMaskCanvasEl||g.isReplaceBackgroundStarted)return;g.isReplaceBackgroundStarted=!0,g.fullConfig={...o,...m},g.segmentationMask=new ImageData(g.segmentationOptions.width,g.segmentationOptions.height),g.segmentationMaskCanvasEl.width=g.segmentationOptions.width,g.segmentationMaskCanvasEl.height=g.segmentationOptions.height,g.inputVideoEl.volume=0,g.inputVideoEl.muted=!0,g.inputVideoEl.autoplay=!0,g.inputVideoEl.srcObject=I;try{yield g.inputVideoEl.play()}catch{}const n=g.inputVideoEl.videoHeight;g.outputCanvasEl.width=g.inputVideoEl.videoWidth,g.outputCanvasEl.height=n,g.processFrame(),g._mediaStream=g.outputCanvasEl?.captureStream(g.fullConfig.fps)})()}stopReplaceBackground(){this.inputVideoEl&&this.isReplaceBackgroundStarted&&(this.isReplaceBackgroundStarted=!1,this.processFrameTimeoutId&&window.clearTimeout(this.processFrameTimeoutId),this.inputVideoEl.srcObject=null,(0,h.X7)(this._mediaStream),this._mediaStream=void 0)}}},51890:(z,R,t)=>{t.d(R,{N:()=>E});var e=t(8239);class s{get direction(){return this.idbCursor.direction}get key(){return this.idbCursor.key}get primaryKey(){return this.idbCursor.primaryKey}get request(){return this.idbCursor.request}get source(){return this.idbCursor.source}constructor(S){this.idbCursor=S}advance(S){this.idbCursor.advance(S)}continue(S){this.idbCursor.continue(S)}continuePrimaryKey(S,C){this.idbCursor.continuePrimaryKey(S,C)}delete(){return new Promise((S,C)=>{const T=this.idbCursor.delete();T.onsuccess=()=>S(),T.onerror=()=>C(T.error)})}update(S){return new Promise((C,T)=>{const P=this.idbCursor.update(S);P.onsuccess=()=>C(P.result),P.onerror=()=>T(P.error)})}}class _{get autoIncrement(){return this.objectStore.autoIncrement}get indexNames(){return this.objectStore.indexNames}get keyPath(){return this.objectStore.keyPath}get name(){return this.objectStore.name}get transaction(){return this.objectStore.transaction}constructor(S){this.objectStore=S}add(S,C){return new Promise((T,P)=>{const A=this.objectStore.add(S,C);A.onsuccess=()=>T(A.result),A.onerror=()=>P(A.error)})}clear(){return new Promise((S,C)=>{const T=this.objectStore.clear();T.onsuccess=()=>S(),T.onerror=()=>C(T.error)})}count(S){return new Promise((C,T)=>{const P=this.objectStore.count(S);P.onsuccess=()=>C(P.result),P.onerror=()=>T(P.error)})}createIndex(S,C,T){return this.objectStore.createIndex(S,C,T)}delete(S){return new Promise((C,T)=>{const P=this.objectStore.delete(S);P.onsuccess=()=>C(),P.onerror=()=>T(P.error)})}deleteIndex(S){this.objectStore.deleteIndex(S)}get(S){return new Promise((C,T)=>{const P=this.objectStore.get(S);P.onsuccess=()=>C(P.result),P.onerror=()=>T(P.error)})}getAll(S,C){return new Promise((T,P)=>{const A=this.objectStore.getAll(S,C);A.onsuccess=()=>T(A.result),A.onerror=()=>P(A.error)})}getAllKeys(S,C){return new Promise((T,P)=>{const A=this.objectStore.getAllKeys(S,C);A.onsuccess=()=>T(A.result),A.onerror=()=>P(A.error)})}getKey(S){return new Promise((C,T)=>{const P=this.objectStore.getKey(S);P.onsuccess=()=>C(P.result),P.onerror=()=>T(P.error)})}index(S){return this.objectStore.index(S)}put(S,C){return new Promise((T,P)=>{const A=this.objectStore.put(S,C);A.onsuccess=()=>T(A.result),A.onerror=()=>P(A.error)})}openCursor(S,C){return new Promise((T,P)=>{const A=this.objectStore.openCursor(S,C);A.onsuccess=()=>T(A.result),A.onerror=()=>P(A.error)})}openKeyCursor(S,C){return new Promise((T,P)=>{const A=this.objectStore.openKeyCursor(S,C);A.onsuccess=()=>T(null===A.result?null:new s(A.result)),A.onerror=()=>P(A.error)})}}class i{constructor(S){this.transaction=S}objectStore(S){return new _(this.transaction.objectStore(S))}abort(){return new Promise((S,C)=>{this.transaction.onabort=()=>C(this.transaction.error),this.transaction.onerror=()=>C(this.transaction.error),this.transaction.abort()})}commit(){return new Promise((S,C)=>{this.transaction.oncomplete=()=>S(),this.transaction.onabort=()=>C(this.transaction.error),this.transaction.onerror=()=>C(this.transaction.error)})}}class f{get version(){return this.db.version}get objectStoreNames(){return this.db.objectStoreNames}constructor(S){this.db=S}close(){this.db.close()}transaction(S,C,T){const P=this.db.transaction(S,C,T);return new i(P)}put(S,C,T){var P=this;return(0,e.Z)(function*(){const A=new i(P.db.transaction(S,"readwrite"));yield A.objectStore(S).put(T,C),yield A.commit()})()}add(S,C,T){var P=this;return(0,e.Z)(function*(){const A=new i(P.db.transaction(S,"readwrite"));yield A.objectStore(S).add(C,T),yield A.commit()})()}delete(S,C){var T=this;return(0,e.Z)(function*(){const P=new i(T.db.transaction(S,"readwrite"));yield P.objectStore(S).delete(C),yield P.commit()})()}get(S,C){var T=this;return(0,e.Z)(function*(){return yield new i(T.db.transaction(S,"readwrite")).objectStore(S).get(C)})()}getAll(S,C,T){var P=this;return(0,e.Z)(function*(){return yield new i(P.db.transaction(S,"readwrite")).objectStore(S).getAll(C,T)})()}createObjectStore(S,C){this.db.createObjectStore(S,C)}createObjectStoreIfNotExist(S,C){this.objectStoreNames.contains(S)||this.createObjectStore(S,C)}deleteObjectStore(S){this.db.deleteObjectStore(S)}}class r{constructor(S,C,T){this.name=S,this.version=C,this.onUpgrade=T,this.isDbOpenedPromiseResolve=()=>{},this.isDbOpenedPromise=new Promise(P=>this.isDbOpenedPromiseResolve=P)}waitToDbOpened(){var S=this;return(0,e.Z)(function*(){return S.db?Promise.resolve():S.isDbOpenedPromise})()}isDbExist(){var S=this;return(0,e.Z)(function*(){return!indexedDB.databases||!!(yield indexedDB.databases()).find(P=>P.name===S.name&&P.version===S.version)})()}open(){var S=this;return new Promise(function(){var C=(0,e.Z)(function*(T,P){"indexedDB"in window||P("Indexed db is not supported");const A=yield S.isDbExist(),M=indexedDB.open(S.name,S.version);M.onupgradeneeded=L=>{if(S.onUpgrade&&S.onUpgrade(M.result,L.oldVersion,L.newVersion),!A){const N=M.transaction;N.oncomplete=()=>{S.db=M.result,S.isDbOpenedPromiseResolve(),T(new f(S.db))},N.onerror=()=>P("upgrade transaction failed")}},M.onsuccess=()=>{A&&(S.db=M.result,S.isDbOpenedPromiseResolve(),T(new f(S.db)))},M.onerror=()=>P(M.error)});return function(T,P){return C.apply(this,arguments)}}())}}var p=t(911),u=t(26215),a=t(59328),o=t(45435),l=t(15257),c=t(46782),d=t(77463),v=t(54355),I=t(28728);const g="images";let E=(()=>{class n extends p.z23{get images(){return this._images$.value??[]}get isImagesFetching(){return this._isImagesFetching$.value}get presetImages(){return this.systemSettingsStoreService.presetImages}constructor(C,T){super(),this.systemSettingsStoreService=C,this.toastr=T,this._images$=new u.X([]),this.images$=this._images$.asObservable(),this._isImagesFetching$=new u.X(!1),this.isImagesFetching$=this._isImagesFetching$.asObservable(),this._isImageAdding$=new u.X(!1),this.isImageAdding$=this._isImageAdding$.asObservable(),this.idb=new r("virtualBg",1,(P,A,M)=>{P.createObjectStore(g,{keyPath:"id"})})}openDb(){var C=this;return(0,e.Z)(function*(){C.db=yield C.idb.open()})()}addImage(C){var T=this;return(0,e.Z)(function*(){T._isImageAdding$.next(!0),yield T.idb.waitToDbOpened();try{yield T.db.add(g,{id:(0,d.Z)(),data:C,createdAt:Date.now()})}catch(P){"QuotaExceededError"==P.name&&T.toastr.error({translationKey:"VIRTUAL_BG.ERRORS.QUOTA_EXCEEDED"})}T._isImageAdding$.next(!1)})()}getRawImages(){var C=this;return(0,e.Z)(function*(){return yield C.idb.waitToDbOpened(),C.db.getAll(g)})()}updateImages(){var C=this;return(0,e.Z)(function*(){C._isImagesFetching$.next(!0);const T=yield C.getRawImages();C._images$.next(T.sort((P,A)=>P.createdAt-A.createdAt)),C._isImagesFetching$.next(!1)})()}waitForImagesFetched(){var C=this;return(0,e.Z)(function*(){if(!C.isImagesFetching)return Promise.resolve();let T=()=>{};const P=new Promise(A=>T=A);return C.isImagesFetching$.pipe((0,a.G)(),(0,o.h)(([A,M])=>A&&!M),(0,l.q)(1),(0,c.R)(C.destroy$)).subscribe(()=>T()),P})()}removeImage(C){var T=this;return(0,e.Z)(function*(){yield T.db.delete(g,C.id)})()}getImage(C){return[...this.images,...this.presetImages].find(T=>T.id===C)}}return n.\u0275fac=function(C){return new(C||n)(v.LFG(I.Ph),v.LFG(p._Wo))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()},59499:(z,R,t)=>{t.d(R,{U:()=>l});var e=t(8239),s=t(29514),h=t(19324),_=t(97057),i=t(80029),f=t(42036),p=t(87548),a=t(54355),o=t(26738);let l=(()=>{class c{get isDebugEnabled(){return s._.settings.CONFERENCE_SESSION_SHOW_VIRTUAL_BACKGROUND_DEBUG_VIEW}get isVirtualBackgroundAvailable(){const v=(0,_.qY)();return["edge-chromium","chrome","firefox","opera","yandexbrowser"].includes(v?.name)}constructor(v){this.http=v,this.isInited=!1}init(){var v=this;return(0,e.Z)(function*(){if(v.isInited)return;v.isInited=!0;const I=yield(0,i.h4)();v.model=yield I?p("assets/tflite/tflite-simd.wasm"):f("assets/tflite/tflite.wasm");const m=yield v.http.get("assets/ss/selfie_segmentation_landscape.tflite",{responseType:"arraybuffer"}).toPromise();v.model.HEAPU8.set(new Uint8Array(m),v.model._getModelBufferMemoryOffset()),v.model._loadModel(m.byteLength)})()}createVbg(){if(!this.isInited)throw new Error("You must init Vbg before usage!");return new h.fZ(this.model,this.isDebugEnabled)}}return c.\u0275fac=function(v){return new(v||c)(a.LFG(o.eN))},c.\u0275prov=a.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()},26435:(z,R,t)=>{t.d(R,{E:()=>l});var e=t(54355),s=t(5469),h=t(59721),_=t(40089),i=t(76652),f=t(911),r=t(51468);function p(c,d){1&c&&(e._uU(0),e.ALo(1,"async"),e.ALo(2,"formatDuration")),2&c&&e.hij(" ",e.lcZ(1,1,e.Dn7(2,3,d.$implicit.value,"ms","longTime"))," ")}function u(c,d){if(1&c){const v=e.EpF();e.TgZ(0,"iva-input-time",12),e.NdJ("ngModelChange",function(m){e.CHM(v);const g=e.oxw(2);return e.KtG(g.setDuration(m))})("click",function(m){return m.stopPropagation()}),e.qZA()}if(2&c){const v=e.oxw(2);e.Q6J("transparentBg",!0)("ngModel",v.selectedValue)}}function a(c,d){if(1&c&&e._UZ(0,"iva-select-option",13),2&c){const v=d.$implicit;e.oxw();const I=e.MAs(1);e.Q6J("value",v)("matcher",I)}}function o(c,d){if(1&c){const v=e.EpF();e.YNc(0,p,3,7,"ng-template",null,8,e.W1O),e.YNc(2,u,1,2,"ng-template",null,9,e.W1O),e.TgZ(4,"iva-select",10),e.NdJ("ngModelChange",function(m){e.CHM(v);const g=e.oxw();return e.KtG(g.setDuration(m))}),e.YNc(5,a,1,2,"iva-select-option",11),e.qZA()}if(2&c){const v=e.MAs(3),I=e.oxw();e.xp6(4),e.Q6J("ngModel",I.defaultAdditionalDuration)("allowCustomValue",!0)("matcherTmpl",v),e.xp6(1),e.Q6J("ngForOf",I.startTimePreset)}}let l=(()=>{class c{constructor(){this.startTimePreset=(0,h.r)({startValueInMin:s._Z.settings.PARTICIPANTS_GROUPS_DURATION_START_IN_MIN,endValueInMin:s._Z.settings.PARTICIPANTS_GROUPS_DURATION_END_IN_MIN,stepInMin:s._Z.settings.PARTICIPANTS_GROUPS_DURATION_STEP_IN_MIN}),this.defaultAdditionalDuration=s._Z.settings.PARTICIPANTS_GROUPS_MIN_ADDITIONAL_DURATION_IN_MS,this.duration=this.defaultAdditionalDuration,this.selectedValue=this.defaultAdditionalDuration,this.durationAdded=new e.vpe}setDuration(v){this.selectedValue=v,this.duration=v}applyAdditionalDuration(){this.durationAdded.emit(this.duration)}cancel(){this.durationAdded.emit()}}return c.\u0275fac=function(v){return new(v||c)},c.\u0275cmp=e.Xpm({type:c,selectors:[["app-additional-duration"]],outputs:{durationAdded:"durationAdded"},decls:9,vars:1,consts:[[1,"layout","layout-left-margin_8"],[3,"ngTemplateOutlet"],[1,"layout","layout-align-start-center"],["iva-icon-button","",1,"add-time__button","add-time__button_apply",3,"click"],["src","assets/icons/icon16/arrow-for-checkbox-thin.svg"],["iva-icon-button","",1,"add-time__button","add-time__button_cancel",3,"click"],["src","assets/icons/icon16/close.svg"],["limitedDurationSelector",""],["timeSelectOptionMatcherTmpl",""],["startTimeSelectOptionMatcherTmpl",""],["name","startTime","size","s",3,"ngModel","allowCustomValue","matcherTmpl","ngModelChange"],[3,"value","matcher",4,"ngFor","ngForOf"],["name","startTimeCustom",3,"transparentBg","ngModel","ngModelChange","click"],[3,"value","matcher"]],template:function(v,I){if(1&v&&(e.TgZ(0,"div",0),e.GkF(1,1),e.TgZ(2,"div",2)(3,"button",3),e.NdJ("click",function(){return I.applyAdditionalDuration()}),e._UZ(4,"svg-icon",4),e.qZA(),e.TgZ(5,"button",5),e.NdJ("click",function(){return I.cancel()}),e._UZ(6,"svg-icon",6),e.qZA()()(),e.YNc(7,o,6,4,"ng-template",null,7,e.W1O)),2&v){const m=e.MAs(8);e.xp6(1),e.Q6J("ngTemplateOutlet",m)}},dependencies:[_.sg,_.tP,i.JJ,i.On,f.bk9,f.r2H,f.SAA,f.Hr0,f.ZeG,_.Ov,r.JJ],styles:[".add-time__button[_ngcontent-%COMP%]:hover   .add-time__button_apply[_ngcontent-%COMP%]   svg-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{fill:rgba(var(--success-color),var(--transparency-20))}.add-time__button[_ngcontent-%COMP%]:hover   .add-time__button_cancel[_ngcontent-%COMP%]   svg-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{fill:rgba(var(--error-color),var(--transparency-20))}.add-time__button_apply[_ngcontent-%COMP%]{margin:0 8px}.add-time__button_apply[_ngcontent-%COMP%]   svg-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{fill:rgb(var(--success-color))}.add-time__button_cancel[_ngcontent-%COMP%]   svg-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{fill:rgb(var(--error-color))}"],changeDetection:0}),c})()},72525:(z,R,t)=>{t.d(R,{k:()=>s});var e=t(54355);let s=(()=>{class h{transform(i,f){return i?`${i} (${f})`:f}}return h.\u0275fac=function(i){return new(i||h)},h.\u0275pipe=e.Yjl({name:"bubbleTitle",type:h,pure:!0}),h})()},1656:(z,R,t)=>{t.d(R,{h:()=>f});var e=t(54355),s=t(5469),h=t(46797),_=t(911),i=t(72525);let f=(()=>{class r{constructor(){this.bubbleLifetime=s._Z.settings.DEFAULT_NOTIFICATION_LIFETIME_MS,this.messageClosed=new e.vpe}ngOnInit(){this.timerSubscription=(0,h.H)(this.bubbleLifetime).subscribe(()=>this.messageClosed.emit(this.message.messageId))}ngOnDestroy(){this.timerSubscription.unsubscribe()}}return r.\u0275fac=function(u){return new(u||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-bubble"]],inputs:{message:"message",bubbleLifetime:"bubbleLifetime"},outputs:{messageClosed:"messageClosed"},decls:10,vars:7,consts:[[1,"bubble-container"],[1,"layout-row","layout-align-space-between-center","layout-bottom-margin_8"],[1,"iva-text_h3","layout-right-margin_8","message-author"],["iva-icon-button","",1,"message-close-btn",3,"click"],["src","assets/icons/icon16/close.svg"],[1,"message-container"]],template:function(u,a){1&u&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3),e.ALo(4,"bubbleTitle"),e.ALo(5,"maybeAsync"),e.qZA(),e.TgZ(6,"button",3),e.NdJ("click",function(){return a.messageClosed.emit(a.message.messageId)}),e._UZ(7,"svg-icon",4),e.qZA()(),e.TgZ(8,"div",5),e._uU(9),e.qZA()()),2&u&&(e.xp6(3),e.hij(" ",e.xi3(4,2,e.lcZ(5,5,a.message.name),a.message.authorName)," "),e.xp6(6),e.Oqu(a.message.message))},dependencies:[_.bk9,_.r2H,_.Da$,i.k],styles:["[_nghost-%COMP%]   .bubble-container[_ngcontent-%COMP%]{background-color:rgb(var(--neutral-color-3));border-radius:16px;padding:16px 20px;display:flex;flex-direction:column}[_nghost-%COMP%]   .message-author[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}[_nghost-%COMP%]   .message-container[_ngcontent-%COMP%]{display:block;font-size:12px;line-height:1.33;letter-spacing:normal;font-weight:400;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;overflow:hidden;color:rgb(var(--font-gray-2-color));word-break:break-word}[_nghost-%COMP%]   .message-close-btn[_ngcontent-%COMP%]   svg-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{fill:rgb(var(--white-100))}"],changeDetection:0}),r})()},69416:(z,R,t)=>{t.d(R,{P:()=>p});var e=t(54355),s=t(5469),h=t(23503);const _=(0,h.X$)("listAnimation",[(0,h.eR)("* <=> *",[(0,h.IO)(":enter",[(0,h.oB)({opacity:0}),(0,h.EY)("60ms",(0,h.jt)("300ms ease-out",(0,h.oB)({opacity:1})))],{optional:!0}),(0,h.IO)(":leave",(0,h.jt)("300ms",(0,h.oB)({opacity:0})),{optional:!0})])]);var i=t(40089),f=t(1656);function r(u,a){if(1&u){const o=e.EpF();e.TgZ(0,"app-bubble",2),e.NdJ("messageClosed",function(){const d=e.CHM(o).$implicit,v=e.oxw();return e.KtG(v.messageClosed.emit(d.messageId))}),e.qZA()}2&u&&e.Q6J("message",a.$implicit)}let p=(()=>{class u{constructor(){this.messages=[],this.visibleMessagesCount=s._Z.settings.DEFAULT_NOTIFICATIONS_COUNT,this.messageClosed=new e.vpe}trackByMessageId(o,l){return l.messageId}}return u.\u0275fac=function(o){return new(o||u)},u.\u0275cmp=e.Xpm({type:u,selectors:[["app-bubbles-list"]],inputs:{messages:"messages",visibleMessagesCount:"visibleMessagesCount"},outputs:{messageClosed:"messageClosed"},decls:2,vars:3,consts:[[1,"bubbles-container","layout-fill_horisontal","layout-column"],["class","layout-bottom-margin_16",3,"message","messageClosed",4,"ngFor","ngForOf","ngForTrackBy"],[1,"layout-bottom-margin_16",3,"message","messageClosed"]],template:function(o,l){1&o&&(e.TgZ(0,"div",0),e.YNc(1,r,1,1,"app-bubble",1),e.qZA()),2&o&&(e.Q6J("@listAnimation",l.messages.length),e.xp6(1),e.Q6J("ngForOf",l.messages)("ngForTrackBy",l.trackByMessageId))},dependencies:[i.sg,f.h],styles:[".bubbles-container[_ngcontent-%COMP%]{width:280px}"],data:{animation:[_]},changeDetection:0}),u})()},60570:(z,R,t)=>{t.d(R,{X:()=>E});var e=t(54355),s=t(88002),h=t(46782),_=t(87225),i=t(5469),f=t(911),r=t(28728),p=t(84717),u=t(85665),a=t(40089),o=t(83695),l=t(84460),c=t(6190);function d(n,S){1&n&&(e.TgZ(0,"div",8),e._UZ(1,"svg-icon",9),e.qZA())}function v(n,S){if(1&n){const C=e.EpF();e.TgZ(0,"div",10),e.NdJ("click",function(){e.CHM(C);const P=e.oxw(2);return e.KtG(P.changeAvatar())}),e._UZ(1,"svg-icon",11),e.TgZ(2,"div",12),e._uU(3),e.ALo(4,"translate"),e.qZA()()}2&n&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"SETTINGS__PROFILE_SECTION__CHANGE_AVATAR")))}function I(n,S){if(1&n){const C=e.EpF();e.TgZ(0,"div",13)(1,"iva-cancelable-progress",14),e.NdJ("click",function(){e.CHM(C);const P=e.oxw().$implicit,A=e.oxw();return e.KtG(A.abortUpload(P.uploadId))}),e.qZA(),e.TgZ(2,"div",12),e._uU(3),e.ALo(4,"translate"),e.qZA()()}if(2&n){const C=e.oxw().$implicit;e.xp6(1),e.Q6J("progress",C.transferred/C.file.size)("size",24),e.xp6(2),e.hij("",e.lcZ(4,3,"LOADING"),"\u2026")}}function m(n,S){1&n&&(e.TgZ(0,"div",15)(1,"div",16),e._UZ(2,"svg-icon",17)(3,"div",18),e.ALo(4,"translate"),e.qZA()()),2&n&&(e.xp6(3),e.Q6J("innerHTML",e.lcZ(4,1,"SETTINGS__PROFILE_SECTION__CHANGE_AVATAR__DND_OVER_TEXT"),e.oJD))}function g(n,S){if(1&n){const C=e.EpF();e.ynx(0),e.TgZ(1,"app-dnd-files-area",1),e.NdJ("filesDropped",function(P){e.CHM(C);const A=e.oxw();return e.KtG(A.addFiles(P))}),e.TgZ(2,"div",2),e.YNc(3,d,2,0,"div",3),e.ALo(4,"async"),e._UZ(5,"app-participant-icon",4),e.YNc(6,v,5,3,"div",5),e.YNc(7,I,5,5,"div",6),e.qZA()(),e.YNc(8,m,5,3,"ng-template",null,7,e.W1O),e.BQk()}if(2&n){const C=S.$implicit,T=e.MAs(9),P=e.oxw();e.xp6(1),e.Q6J("disabled",C||!P.canChangeAvatar)("dndOveredTmpl",T)("validator",P.validateFiles),e.xp6(2),e.Q6J("ngIf",e.lcZ(4,10,P.isNewYear$)),e.xp6(2),e.Q6J("avatarResourceId",P.avatarResourceId)("name",P.avatarName)("showName",!1)("size",128),e.xp6(1),e.Q6J("ngIf",!C&&P.canChangeAvatar),e.xp6(1),e.Q6J("ngIf",C)}}let E=(()=>{class n{constructor(C,T,P,A,M,L){this.uploadService=C,this.toastr=T,this.systemSettingsStoreService=P,this.happyNewYearService=A,this.fileOpenerService=M,this.destroy$=L,this.avatarResourceId="",this.avatarName="",this.scope="PROFILE_FILE_SCOPE",this.canChangeAvatar=!1,this.ignoreNewYear=!1,this.onAvatarUploaded=new e.vpe,this.isNewYear$=this.happyNewYearService.isNewYear$.pipe((0,s.U)(N=>N&&!this.ignoreNewYear)),this.ACCEPT_FILE_TYPES=i._Z.settings.PROFILE_AVATAR_UPLOAD_ALLOWED_ACCEPT_STRINGS.join(","),this.validateFiles=N=>N.some(W=>this.isCorrectMimeType(W))}ngOnInit(){this.listenUploadProgress()}isCorrectMimeType(C){return i._Z.settings.PROFILE_AVATAR_UPLOAD_ALLOWED_MIME_TYPES_REGEXES.some(P=>new RegExp(P).test(C))}addFiles(C){const T=Array.from(C).find(A=>this.isCorrectMimeType(A.type));if(!T)return void this.toastr.error({translationKey:"SETTINGS__PROFILE_SECTION__CHANGE_AVATAR__ERROR__INCORRECT_FILE_TYPE"});const P=this.systemSettingsStoreService.getSystemSettingAsNumber(i._Z.settings.SYSTEM_SETTINGS_KEY_MAX_UPLOAD_FILE_SIZE_IN_MB);P&&T.size>1024*P*1024?this.toastr.error({translationKey:"SETTINGS__PROFILE_SECTION__CHANGE_AVATAR__ERROR__FILE_SIZE",translationParams:{size:P}}):this.uploadService.upload$(this.scope,T).subscribe(A=>{this.onAvatarUploaded.emit(A)})}changeAvatar(){this.fileOpenerService.openFiles$(this.ACCEPT_FILE_TYPES,!1).pipe((0,h.R)(this.destroy$)).subscribe(C=>this.addFiles(C))}abortUpload(C){this.uploadService.abortUpload(C)}listenUploadProgress(){this.uploadProgress$=this.uploadService.getFilesUploadProgresses$(this.scope).pipe((0,s.U)(C=>{const T=Array.from(C||[]);if(!T.length)return null;const P=T[0];return{uploadId:P[0],...P[1]}}))}}return n.\u0275fac=function(C){return new(C||n)(e.Y36(_.C),e.Y36(f._Wo),e.Y36(r.Ph),e.Y36(p.V),e.Y36(u.E),e.Y36(f.z23))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-change-avatar"]],inputs:{avatarResourceId:"avatarResourceId",avatarName:"avatarName",scope:"scope",canChangeAvatar:"canChangeAvatar",ignoreNewYear:"ignoreNewYear"},outputs:{onAvatarUploaded:"onAvatarUploaded"},features:[e._Bn([f.z23,_.C])],decls:2,vars:3,consts:[[4,"ngWith","ngWithAs"],[1,"layout","layout-align-center-center","layout-fill","flex-grow",3,"disabled","dndOveredTmpl","validator","filesDropped"],[1,"upload-section"],["class","happy-new-year-hood",4,"ngIf"],[1,"avatar",3,"avatarResourceId","name","showName","size"],["class","upload-title avatar-overlay",3,"click",4,"ngIf"],["class","upload-progress avatar-overlay",4,"ngIf"],["dndOveredTmpl",""],[1,"happy-new-year-hood"],["src","assets/icons/unsized/holidays-navbar-avatar.svg"],[1,"upload-title","avatar-overlay",3,"click"],["src","assets/icons/icon16/upload.svg"],[1,"text"],[1,"upload-progress","avatar-overlay"],[3,"progress","size","click"],[1,"dnd-overed-container"],[1,"avatar-overlay"],["src","assets/icons/icon16/dragndrop.svg"],[1,"text",3,"innerHTML"]],template:function(C,T){1&C&&(e.YNc(0,g,10,12,"ng-container",0),e.ALo(1,"async")),2&C&&e.Q6J("ngWithAs",e.lcZ(1,1,T.uploadProgress$))},dependencies:[a.O5,f.bk9,f.MGw,f.XFu,o.u,l.U,a.Ov,c.X$],styles:["[_nghost-%COMP%]{width:100%;height:100%}[_nghost-%COMP%]   .avatar-overlay[_ngcontent-%COMP%]{width:128px;height:128px;display:flex;flex-direction:column;justify-content:center;align-items:center;background-color:rgba(var(--neutral-color-7),var(--transparency-60));border-radius:50%}[_nghost-%COMP%]   .avatar-overlay[_ngcontent-%COMP%]   svg-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{fill:rgb(var(--white-100))}[_nghost-%COMP%]   .avatar-overlay[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{color:rgb(var(--white-100));font-size:12px;line-height:1.33;letter-spacing:normal;font-weight:400;text-align:center}[_nghost-%COMP%]   .upload-section[_ngcontent-%COMP%]{position:relative}[_nghost-%COMP%]   .upload-section[_ngcontent-%COMP%]:hover   .upload-title[_ngcontent-%COMP%]{display:flex}[_nghost-%COMP%]   .upload-section[_ngcontent-%COMP%]   .upload-title[_ngcontent-%COMP%]{position:absolute;top:0;left:0;display:none;cursor:pointer}[_nghost-%COMP%]   .upload-section[_ngcontent-%COMP%]   .upload-progress[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%}[_nghost-%COMP%]   .upload-section[_ngcontent-%COMP%]   .upload-progress[_ngcontent-%COMP%]   iva-cancelable-progress[_ngcontent-%COMP%]{margin-bottom:8px}[_nghost-%COMP%]   .dnd-overed-container[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center}[_nghost-%COMP%]   .happy-new-year-hood[_ngcontent-%COMP%]{position:absolute;left:-30px;top:-18px;z-index:1;pointer-events:none}[_nghost-%COMP%]   .happy-new-year-hood[_ngcontent-%COMP%]   svg-icon[_ngcontent-%COMP%]{zoom:4}"],changeDetection:0}),n})()},44647:(z,R,t)=>{t.d(R,{d:()=>r});var e=t(54355),s=t(911),h=t(40089);const _=function(p){return[p]};function i(p,u){if(1&p&&(e.ynx(0),e._UZ(1,"iva-line-chart",4),e.BQk()),2&p){const a=e.oxw();e.xp6(1),e.Q6J("series",e.VKq(3,_,a.lineChartSeries))("options",a.chartOptions)("tooltipTmpl",a.chartTitleTmpl)}}function f(p,u){if(1&p&&(e.ynx(0),e._UZ(1,"iva-pie-chart",5),e.BQk()),2&p){const a=e.oxw();e.xp6(1),e.Q6J("series",a.pieChartSeries)("tooltipTmpl",a.chartTitleTmpl)}}let r=(()=>{class p{constructor(a){this.modalRef=a}get chartModalClass(){return`modal-chart_${this.chartType}`}get chartType(){return this.modalRef.data?.type||"line"}get lineChartSeries(){return this.isLineChartSeries(this.modalRef.data?.series)?this.modalRef.data?.series:[]}get pieChartSeries(){return this.isPieChartSeries(this.modalRef.data?.series)?this.modalRef.data?.series:[]}get chartOptions(){return this.modalRef.data?.options||{}}get chartTitleTmpl(){return this.modalRef.data?.lineChartTooltipTmpl||null}isPieChartSeries(a){return"name"in a[0]&&"value"in a[0]}isLineChartSeries(a){return"data"in a}}return p.\u0275fac=function(a){return new(a||p)(e.Y36(s.aiK))},p.\u0275cmp=e.Xpm({type:p,selectors:[["app-chart-modal"]],hostVars:2,hostBindings:function(a,o){2&a&&e.Tol(o.chartModalClass)},decls:5,vars:3,consts:[[1,"modal-card"],[1,"layout-padding_24"],[3,"ngSwitch"],[4,"ngSwitchCase"],[3,"series","options","tooltipTmpl"],[3,"series","tooltipTmpl"]],template:function(a,o){1&a&&(e.TgZ(0,"div",0)(1,"div",1),e.ynx(2,2),e.YNc(3,i,2,5,"ng-container",3),e.YNc(4,f,2,2,"ng-container",3),e.BQk(),e.qZA()()),2&a&&(e.xp6(2),e.Q6J("ngSwitch",o.chartType),e.xp6(1),e.Q6J("ngSwitchCase","line"),e.xp6(1),e.Q6J("ngSwitchCase","pie"))},dependencies:[h.RF,h.n9,s.Dwf,s.JUo],styles:[".modal-chart_line[_nghost-%COMP%]   .modal-card[_ngcontent-%COMP%]{min-width:80vw;width:80vw;max-width:95vw}.modal-chart_pie[_nghost-%COMP%]   .modal-card[_ngcontent-%COMP%]{width:370px;max-width:95vw}"],changeDetection:0}),p})()},92290:(z,R,t)=>{t.d(R,{m:()=>_});var e=t(54355),s=t(40089);function h(i,f){if(1&i&&e._UZ(0,"img",1),2&i){const r=e.oxw();e.Q6J("src",r.src,e.LSH)("alt",r.altText)}}let _=(()=>{class i{constructor(){this.src="",this.altText=""}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-company-logo"]],inputs:{src:"src",altText:"altText"},decls:1,vars:1,consts:[["class","logo-img",3,"src","alt",4,"ngIf"],[1,"logo-img",3,"src","alt"]],template:function(r,p){1&r&&e.YNc(0,h,1,2,"img",0),2&r&&e.Q6J("ngIf",p.src)},dependencies:[s.O5],styles:["[_nghost-%COMP%]{width:100%;height:100%;display:flex;align-items:center}[_nghost-%COMP%]   .logo-img[_ngcontent-%COMP%]{max-height:100%;max-width:100%}"]}),i})()},89993:(z,R,t)=>{t.d(R,{P:()=>I});var e=t(87177),s=t(30450),h=t(5469),_=t(911),i=t(26215),f=t(46782),r=t(54355),p=t(91583),u=t(6190),a=t(48127),o=t(40089);function l(m,g){if(1&m&&(r.TgZ(0,"div",2),r._uU(1),r.qZA()),2&m){const E=g.$implicit,n=r.oxw().ngIf,S=r.oxw();r.ekj("red",E===S.COLOR.RED)("yellow",E===S.COLOR.YELLOW)("green",E===S.COLOR.GREEN),r.xp6(1),r.hij(" ",n," ")}}function c(m,g){if(1&m&&(r.ynx(0),r.YNc(1,l,2,7,"div",1),r.ALo(2,"async"),r.BQk()),2&m){const E=r.oxw();r.xp6(1),r.Q6J("ngWithAs",r.lcZ(2,1,E.color$))}}var d=(()=>((d=d||{})[d.RED=0]="RED",d[d.YELLOW=1]="YELLOW",d[d.GREEN=2]="GREEN",d))();let I=(()=>{class m{set conference(E){if(this._conference=E,this.processConference(),this.conference?.state!==e.Kv.STOPPED&&!this.updateTimer){const n=this.intervalService.createTimer("TIME_BADGE_TIMER_NAME",h._Z.settings.CONFERENCE_TIMER_UPDATE_INTERVAL_MS);this.updateTimer=n,n.onFire$.pipe((0,f.R)(this.destroy$)).subscribe(()=>this.processConference()),n.isActive||n.start()}}get conference(){return this._conference}constructor(E,n,S,C){this.intervalService=E,this.destroy$=n,this.translate=S,this.serverTimeService=C,this.COLOR=d,this.color$=new i.X(d.GREEN),this.text$=new i.X(null)}processConference(){if(!this.conference)return void this.text$.next(null);const E=6e4,n=this.conference.room?this.conference.onlineParticipantsCount&&this.conference.lastMediaSessionStartDate:this.conference.actualStartDate??this.conference.startDate;if(!n)return void this.text$.next(null);if(this.conference.state===e.Kv.ACTIVE){this.color$.next(d.GREEN);const T=60*E,P=Math.max(this.serverTimeService.now-n,0),A=Math.floor(P/T),M=Math.ceil((P-A*T)/E);if(0===A&&M<=1)return void this.text$.next(this.translate.instant("CONFERENCES__LIST__ITEM__JUST_STARTED"));const L=0===A?this.translate.instant("CONFERENCES__LIST__ITEM__ALREADY_RUNNING_MINS",{minutes:M}):this.translate.instant("CONFERENCES__LIST__ITEM__ALREADY_RUNNING_HRS_MINS",{hours:A,minutes:M});return void this.text$.next(L)}const C=(this.conference.startDate-this.serverTimeService.now)/E;if(this.conference.state===e.Kv.NO_STARTED)if(C<1){this.color$.next(d.RED);const P=this.translate.instant(this.conference.settings.runType===s.r.MANUALLY?"CONFERENCES__LIST__ITEM__WAITING_TO_RUN_BY_MODERATOR":"CONFERENCES__LIST__ITEM__ALREADY_RUNS_IN_LESS_MINUTE");this.text$.next(P)}else if(C>=1&&C<=15){this.color$.next(d.RED);const T=this.translate.instant("CONFERENCES__LIST__ITEM__ALREADY_RUNS_IN",{minutes:Math.ceil(C)});this.text$.next(T)}else if(C>15&&C<60){const T=this.translate.instant("CONFERENCES__LIST__ITEM__ALREADY_RUNS_IN",{minutes:Math.ceil(C)});this.text$.next(T),this.color$.next(d.YELLOW)}else this.text$.next(null);else this.text$.next(null)}}return m.\u0275fac=function(E){return new(E||m)(r.Y36(p.I),r.Y36(_.z23),r.Y36(u.sK),r.Y36(a.v))},m.\u0275cmp=r.Xpm({type:m,selectors:[["app-conferences-time-badge"]],inputs:{conference:"conference"},features:[r._Bn([_.z23])],decls:2,vars:3,consts:[[4,"ngIf"],["class","container",3,"red","yellow","green",4,"ngWith","ngWithAs"],[1,"container"]],template:function(E,n){1&E&&(r.YNc(0,c,3,3,"ng-container",0),r.ALo(1,"async")),2&E&&r.Q6J("ngIf",r.lcZ(1,1,n.text$))},dependencies:[o.O5,_.XFu,o.Ov],styles:[".container[_ngcontent-%COMP%]{font-size:10px;font-weight:600;line-height:1.6;letter-spacing:normal;font-style:normal;padding:0 5px;border-radius:3px}.container.red[_ngcontent-%COMP%]{color:rgb(var(--error-color));background-color:rgba(var(--error-color),var(--transparency-15))}.container.yellow[_ngcontent-%COMP%]{color:rgb(var(--warning-color));background-color:rgba(var(--warning-color),var(--transparency-15))}.container.green[_ngcontent-%COMP%]{color:rgb(var(--primary-color));background-color:rgba(var(--primary-color),var(--transparency-15))}.transparent-bg[_nghost-%COMP%]   .container[_ngcontent-%COMP%]{padding:0;background-color:transparent}"],changeDetection:0}),m})()},356:(z,R,t)=>{t.d(R,{C:()=>m});var e=t(23e3),s=t(54355),h=t(17911),_=t(40089),i=t(911),f=t(84460),r=t(6190);function p(g,E){1&g&&(s.TgZ(0,"span",9),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&g&&(s.xp6(1),s.Oqu(s.lcZ(2,1,"EXTERNAL_USER")))}function u(g,E){1&g&&(s.TgZ(0,"span",9),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&g&&(s.xp6(1),s.Oqu(s.lcZ(2,1,"CHAT_BOT")))}function a(g,E){if(1&g&&s._UZ(0,"p",10),2&g){const n=s.oxw();s.Q6J("tooltip",n.contactInfo)("innerHTML",n.contactInfo,s.oJD)}}function o(g,E){if(1&g&&(s._UZ(0,"p",13),s.ALo(1,"highlight")),2&g){const n=s.oxw(2);s.Q6J("tooltip",n.contactSearchInfo)("innerHTML",s.Dn7(1,2,n.contactSearchInfo,n.searchFilterValue,!0),s.oJD)}}function l(g,E){if(1&g&&(s._UZ(0,"iva-tag",16),s.ALo(1,"highlight")),2&g){const n=E.$implicit,S=s.oxw(3);s.Q6J("innerHTML",s.Dn7(1,1,n,S.searchFilterValue,!0),s.oJD)}}function c(g,E){if(1&g&&(s.TgZ(0,"div",14),s.YNc(1,l,2,5,"iva-tag",15),s.qZA()),2&g){const n=s.oxw(2);s.xp6(1),s.Q6J("ngForOf",n.tagSearchInfo)}}function d(g,E){if(1&g&&(s.ynx(0),s.YNc(1,o,2,6,"p",11),s.YNc(2,c,2,1,"ng-template",null,12,s.W1O),s.BQk()),2&g){const n=s.MAs(3),S=s.oxw();s.xp6(1),s.Q6J("ngIf",S.contactSearchInfo)("ngIfElse",n)}}function v(g,E){1&g&&(s.TgZ(0,"div",17),s._UZ(1,"svg-icon",18),s.TgZ(2,"h5",19),s._uU(3),s.ALo(4,"translate"),s.qZA()()),2&g&&(s.xp6(3),s.hij(" ",s.lcZ(4,1,"CONTACTS_PAGE.CREATE_CONTACT.ALREADY_IN_CONTACTS")," "))}let m=(()=>{class g{get onlineStatus(){return this.contactsService.getContactOnlineStatus(this.interlocutor)}get contactInfo(){return this.interlocutor.email||this.interlocutor.phone||""}get contactSearchInfo(){const n=this.searchFilterValue;return n?this.interlocutor.email?.includes(n)?this.interlocutor.email:this.interlocutor.phone?.includes(n)?this.interlocutor.phone:"":""}get tagSearchInfo(){const n=this.searchFilterValue.toLowerCase();if(!n)return[];const S=this.interlocutor.contact;return(S?S.tags:[]).sort((T,P)=>T.toLowerCase().includes(n)?-1:1).slice(0,4)}get isBotInterlocutor(){return this.interlocutor.interlocutorType===e.x.CHAT_BOT}constructor(n){this.contactsService=n,this.searchFilterValue="",this.isInContacts=!1}}return g.\u0275fac=function(n){return new(n||g)(s.Y36(h.P))},g.\u0275cmp=s.Xpm({type:g,selectors:[["app-contact-interlocutor-info"]],inputs:{interlocutor:"interlocutor",searchFilterValue:"searchFilterValue",isInContacts:"isInContacts"},decls:11,vars:15,consts:[[1,"contact-interlocutor-info"],[1,"flex-noshrink",3,"avatarResourceId","name","size","onlineStatus"],[1,"info","flex-grow","layout-column","layout-left-margin_16"],[1,"layout"],["e2e-id","interlocutor_name",1,"name","ellipsis",3,"innerHTML","tooltip"],["class","layout-left-margin_8 external",4,"ngIf"],["class","contact-sub-text ellipsis","e2e-id","interlocutor_contact-info",3,"tooltip","innerHTML",4,"ngIf"],[4,"ngIf"],["class","contact-sub-text layout-row",4,"ngIf"],[1,"layout-left-margin_8","external"],["e2e-id","interlocutor_contact-info",1,"contact-sub-text","ellipsis",3,"tooltip","innerHTML"],["class","contact-sub-text ellipsis",3,"tooltip","innerHTML",4,"ngIf","ngIfElse"],["tagsSearchInfo",""],[1,"contact-sub-text","ellipsis",3,"tooltip","innerHTML"],[1,"tags"],[3,"innerHTML",4,"ngFor","ngForOf"],[3,"innerHTML"],[1,"contact-sub-text","layout-row"],["src","assets/icons/icon16/people-stroke.svg",1,"layout","layout-align-center-center","layout-right-margin"],["e2e-id","interlocutor_already-in-contacts"]],template:function(n,S){1&n&&(s.TgZ(0,"div",0),s._UZ(1,"app-participant-icon",1),s.TgZ(2,"div",2)(3,"div",3),s._UZ(4,"h3",4),s.ALo(5,"highlight"),s.YNc(6,p,3,3,"span",5),s.YNc(7,u,3,3,"span",5),s.qZA(),s.YNc(8,a,1,2,"p",6),s.YNc(9,d,4,2,"ng-container",7),s.YNc(10,v,5,3,"div",8),s.qZA()()),2&n&&(s.xp6(1),s.Q6J("avatarResourceId",null==S.interlocutor.profile?null:S.interlocutor.profile.avatarResourceId)("name",S.interlocutor.name)("size",48)("onlineStatus",S.onlineStatus),s.xp6(3),s.Q6J("innerHTML",s.Dn7(5,11,S.interlocutor.name,S.searchFilterValue,!0),s.oJD)("tooltip",S.interlocutor.name),s.xp6(2),s.Q6J("ngIf",!!S.interlocutor.ldapUser),s.xp6(1),s.Q6J("ngIf",S.isBotInterlocutor),s.xp6(1),s.Q6J("ngIf",!S.searchFilterValue),s.xp6(1),s.Q6J("ngIf",S.searchFilterValue),s.xp6(1),s.Q6J("ngIf",S.isInContacts))},dependencies:[_.sg,_.O5,i.bk9,i.ZGJ,i.i9q,f.U,r.X$,i.SgB],styles:["[_nghost-%COMP%]   .contact-interlocutor-info[_ngcontent-%COMP%]{display:flex;flex-flow:row nowrap;align-items:center;max-width:100%}[_nghost-%COMP%]   .name[_ngcontent-%COMP%]{max-width:-moz-fit-content;max-width:fit-content}[_nghost-%COMP%]   .contact-sub-text[_ngcontent-%COMP%]{max-width:-moz-fit-content;max-width:fit-content;color:rgb(var(--font-gray-1-color))}[_nghost-%COMP%]   .contact-sub-text[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{color:rgb(var(--font-gray-1-color))}[_nghost-%COMP%]   .contact-sub-text[_ngcontent-%COMP%]   svg-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{fill:rgb(var(--font-gray-1-color))}[_nghost-%COMP%]   .tags[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;max-height:56px;overflow:hidden}[_nghost-%COMP%]   .tags[_ngcontent-%COMP%]   iva-tag[_ngcontent-%COMP%]{margin-right:4px;margin-bottom:4px}[_nghost-%COMP%]   .external[_ngcontent-%COMP%]{padding:2px 4px;border-radius:3px;font-size:10px;color:rgb(var(--font-gray-1-color));background:rgba(var(--neutral-color-6),var(--transparency-20))}"],changeDetection:0}),g})()},75713:(z,R,t)=>{t.d(R,{C:()=>A});var e=t(54355),s=t(911),h=t(27683),_=t(40089),i=t(6190);function f(M,L){1&M&&(e.TgZ(0,"span",26),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&M&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"DEVICES_PERMISSIONS_MODAL__CAM")))}function r(M,L){1&M&&(e.ynx(0),e._uU(1," / "),e.BQk())}function p(M,L){1&M&&(e.TgZ(0,"span",26),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&M&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"DEVICES_PERMISSIONS_MODAL__MIC")))}function u(M,L){1&M&&(e.ynx(0),e._uU(1),e.ALo(2,"translate"),e.BQk()),2&M&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"DEVICES_PERMISSIONS_MODAL__SEE")," "))}function a(M,L){1&M&&(e.ynx(0),e._uU(1," / "),e.BQk())}function o(M,L){1&M&&(e.ynx(0),e._uU(1),e.ALo(2,"translate"),e.BQk()),2&M&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"DEVICES_PERMISSIONS_MODAL__HEAR")," "))}function l(M,L){if(1&M){const N=e.EpF();e.ynx(0),e.TgZ(1,"div",2)(2,"header")(3,"p",3),e._uU(4),e.ALo(5,"translate"),e.YNc(6,f,3,3,"span",4),e.YNc(7,r,2,0,"ng-container",5),e.YNc(8,p,3,3,"span",4),e._uU(9),e.ALo(10,"translate"),e.YNc(11,u,3,3,"ng-container",5),e.YNc(12,a,2,0,"ng-container",5),e.YNc(13,o,3,3,"ng-container",5),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"button",6),e.NdJ("click",function(){e.CHM(N);const b=e.oxw();return e.KtG(b.close())}),e._UZ(17,"svg-icon",7),e.qZA()(),e.TgZ(18,"section",8)(19,"div",9)(20,"div",10),e._UZ(21,"svg-icon",11),e.qZA(),e.TgZ(22,"span",12),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.TgZ(25,"span",13),e._UZ(26,"svg-icon",14)(27,"svg-icon",15),e.qZA()(),e.TgZ(28,"div",16),e._uU(29),e.ALo(30,"translate"),e.qZA(),e.TgZ(31,"div",17),e._UZ(32,"div",18),e.TgZ(33,"span",19),e._uU(34),e.ALo(35,"translate"),e.qZA(),e.TgZ(36,"span",20),e._UZ(37,"svg-icon",21),e.qZA(),e._UZ(38,"div",22),e.TgZ(39,"div",23)(40,"span",24),e._uU(41),e.ALo(42,"translate"),e.qZA(),e._UZ(43,"svg-icon",25),e.qZA()()()(),e.BQk()}if(2&M){const N=e.oxw();e.xp6(4),e.hij(" ",e.lcZ(5,15,"DEVICES_PERMISSIONS_MODAL__ALLOW_TO_ACCESS")," "),e.xp6(2),e.Q6J("ngIf",N.devicePermissions.videoDenied),e.xp6(1),e.Q6J("ngIf",N.devicePermissions.videoDenied&&N.devicePermissions.audioDenied),e.xp6(1),e.Q6J("ngIf",N.devicePermissions.audioDenied),e.xp6(1),e.hij("",e.lcZ(10,17,"DEVICES_PERMISSIONS_MODAL__PARTICIPANTS_CAN")," "),e.xp6(2),e.Q6J("ngIf",N.devicePermissions.videoDenied),e.xp6(1),e.Q6J("ngIf",N.devicePermissions.videoDenied&&N.devicePermissions.audioDenied),e.xp6(1),e.Q6J("ngIf",N.devicePermissions.audioDenied),e.xp6(1),e.hij(" ",e.lcZ(15,19,"DEVICES_PERMISSIONS_MODAL__YOU")," "),e.xp6(9),e.Oqu(e.lcZ(24,21,"DEVICES_PERMISSIONS_MODAL__ADDRESS_BAR")),e.xp6(3),e.Q6J("src",N.micIconSrc),e.xp6(1),e.Q6J("src",N.camIconSrc),e.xp6(2),e.hij(" ",e.lcZ(30,23,"DEVICES_PERMISSIONS_MODAL__USE_QUICK_SETTINGS")," "),e.xp6(5),e.hij(" ",e.lcZ(35,25,"DEVICES_PERMISSIONS_MODAL__SITE_SETTINGS")," "),e.xp6(7),e.hij(" ",e.lcZ(42,27,"DEVICES_PERMISSIONS_MODAL__ALLOW")," ")}}function c(M,L){1&M&&(e.ynx(0),e._uU(1),e.ALo(2,"translate"),e.BQk()),2&M&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"DEVICES_PERMISSIONS_MODAL__CANT_TURN_ON_CAM")," "))}function d(M,L){1&M&&(e.ynx(0),e._uU(1," / "),e.BQk())}function v(M,L){1&M&&(e.ynx(0),e._uU(1),e.ALo(2,"translate"),e.BQk()),2&M&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"DEVICES_PERMISSIONS_MODAL__CANT_TURN_ON_MIC")," "))}function I(M,L){1&M&&(e.ynx(0),e._uU(1),e.ALo(2,"translate"),e.BQk()),2&M&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"DEVICES_PERMISSIONS_MODAL__CAM")," "))}function m(M,L){1&M&&(e.ynx(0),e._uU(1," / "),e.BQk())}function g(M,L){1&M&&(e.ynx(0),e._uU(1),e.ALo(2,"translate"),e.BQk()),2&M&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"DEVICES_PERMISSIONS_MODAL__MIC")," "))}function E(M,L){1&M&&(e.ynx(0),e._uU(1),e.ALo(2,"translate"),e.BQk()),2&M&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"DEVICES_PERMISSIONS_MODAL__SEE")," "))}function n(M,L){1&M&&(e.ynx(0),e._uU(1," / "),e.BQk())}function S(M,L){1&M&&(e.ynx(0),e._uU(1),e.ALo(2,"translate"),e.BQk()),2&M&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"DEVICES_PERMISSIONS_MODAL__HEAR")," "))}function C(M,L){if(1&M){const N=e.EpF();e.TgZ(0,"div",27)(1,"p",28),e._uU(2),e.ALo(3,"translate"),e.YNc(4,c,3,3,"ng-container",5),e.YNc(5,d,2,0,"ng-container",5),e.YNc(6,v,3,3,"ng-container",5),e.qZA(),e.TgZ(7,"p",29),e._uU(8),e.ALo(9,"translate"),e.YNc(10,I,3,3,"ng-container",5),e.YNc(11,m,2,0,"ng-container",5),e.YNc(12,g,3,3,"ng-container",5),e._uU(13),e.ALo(14,"translate"),e.ALo(15,"translate"),e.YNc(16,E,3,3,"ng-container",5),e.YNc(17,n,2,0,"ng-container",5),e.YNc(18,S,3,3,"ng-container",5),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"button",30),e.NdJ("click",function(){e.CHM(N);const b=e.oxw();return e.KtG(b.close())}),e._uU(22,"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"),e.qZA()()}if(2&M){const N=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,14,"DEVICES_PERMISSIONS_MODAL__CANT_TURN_ON")," "),e.xp6(2),e.Q6J("ngIf",N.devicePermissions.videoDenied),e.xp6(1),e.Q6J("ngIf",N.devicePermissions.videoDenied&&N.devicePermissions.audioDenied),e.xp6(1),e.Q6J("ngIf",N.devicePermissions.audioDenied),e.xp6(2),e.hij(" ",e.lcZ(9,16,"DEVICES_PERMISSIONS_MODAL__ALLOW_TO_ACCESS")," "),e.xp6(2),e.Q6J("ngIf",N.devicePermissions.videoDenied),e.xp6(1),e.Q6J("ngIf",N.devicePermissions.videoDenied&&N.devicePermissions.audioDenied),e.xp6(1),e.Q6J("ngIf",N.devicePermissions.audioDenied),e.xp6(1),e.AsE(" ",e.lcZ(14,18,"DEVICES_PERMISSIONS_MODAL__SETTINGS_AND_RELOAD_PAGE"),"",e.lcZ(15,20,"DEVICES_PERMISSIONS_MODAL__PARTICIPANTS_CAN")," "),e.xp6(3),e.Q6J("ngIf",N.devicePermissions.videoDenied),e.xp6(1),e.Q6J("ngIf",N.devicePermissions.videoDenied&&N.devicePermissions.audioDenied),e.xp6(1),e.Q6J("ngIf",N.devicePermissions.audioDenied),e.xp6(1),e.hij(" ",e.lcZ(20,22,"DEVICES_PERMISSIONS_MODAL__YOU")," ")}}const T="on-fill",P="off-stroke";let A=(()=>{class M{get camIconSrc(){return`assets/icons/icon24/cam-${this.devicePermissions.videoDenied?P:T}.svg`}get micIconSrc(){return`assets/icons/icon24/mic-${this.devicePermissions.audioDenied?P:T}.svg`}constructor(N,W){this.modalRef=N,this.mobileSupportService=W,this.devicePermissions=this.modalRef.data,this.isMobile=this.mobileSupportService.isMobileModeEnabled}close(){this.modalRef.close()}}return M.\u0275fac=function(N){return new(N||M)(e.Y36(s.aiK),e.Y36(h.J))},M.\u0275cmp=e.Xpm({type:M,selectors:[["app-device-permissions-modal"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["mobileModalTmpl",""],[1,"modal-card","message"],[1,"title"],["class","device",4,"ngIf"],[4,"ngIf"],["iva-icon-button","",3,"click"],["src","assets/icons/icon24/close.svg"],[1,"layout-column","layout-bottom-padding_32"],[1,"address-bar"],[1,"address-bar__lock-icon"],["src","assets/icons/icon24/lock.svg"],[1,"address-bar__text"],[1,"address-bar__device-icons"],[1,"mic-icon",3,"src"],[1,"cam-icon",3,"src"],[1,"quick-settings"],[1,"site-settings"],[1,"site-settings__left-arrow"],[1,"site-settings__text"],[1,"site-settings__icon"],["src","assets/icons/icon16/settings-fill.svg"],[1,"site-settings__center-arrow"],[1,"pseudo-button"],[1,"pseudo-button__text"],["src","assets/icons/unsized/triangle.svg",1,"pseudo-button__icon"],[1,"device"],[1,"modal-card","layout-column","layout-padding_24"],[1,"iva-text_h2-2","layout-bottom-padding_16","text-align_center"],[1,"layout-bottom-padding_24","text-align_center"],["iva-button","",3,"click"]],template:function(N,W){if(1&N&&(e.YNc(0,l,44,29,"ng-container",0),e.YNc(1,C,23,24,"ng-template",null,1,e.W1O)),2&N){const b=e.MAs(2);e.Q6J("ngIf",!W.isMobile)("ngIfElse",b)}},dependencies:[_.O5,s.bk9,s.r0F,s.r2H,i.X$],styles:['[_nghost-%COMP%]{display:block;position:absolute;top:65px;left:50%;transform:translate(-50%)}[_nghost-%COMP%]   svg-icon[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{stroke-width:1px}[_nghost-%COMP%]   .modal-card[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{white-space:normal;max-width:360px}[_nghost-%COMP%]   .address-bar[_ngcontent-%COMP%]{display:flex;position:relative;align-items:center;margin-top:16px;height:32px;border-radius:16px;background-color:rgb(var(--neutral-color-4))}[_nghost-%COMP%]   .address-bar__lock-icon[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;border-radius:50%;background:rgb(var(--neutral-color-6));width:32px;height:32px;min-width:32px;min-height:32px}[_nghost-%COMP%]   .address-bar__lock-icon[_ngcontent-%COMP%]:after{position:absolute;content:"";height:42px;width:32px;left:0;top:36px;border:1px dashed rgb(var(--neutral-color-6));border-top:none;border-right:none;margin:4px 26px 0 16px}[_nghost-%COMP%]   .address-bar__text[_ngcontent-%COMP%]{margin-left:12px;color:rgb(var(--second-1));font-size:12px;font-style:italic}[_nghost-%COMP%]   .address-bar__device-icons[_ngcontent-%COMP%]{display:flex;position:absolute;right:8px;align-items:center}[_nghost-%COMP%]   .address-bar__device-icons[_ngcontent-%COMP%]   .mic-icon[_ngcontent-%COMP%], [_nghost-%COMP%]   .address-bar__device-icons[_ngcontent-%COMP%]   .cam-icon[_ngcontent-%COMP%]{position:relative;margin-right:8px}[_nghost-%COMP%]   .address-bar__device-icons[_ngcontent-%COMP%]   .mic-icon[_ngcontent-%COMP%]:after{position:absolute;content:"";height:25px;width:1px;left:13px;top:36px;border-left:1px dashed rgb(var(--neutral-color-6))}[_nghost-%COMP%]   .address-bar__device-icons[_ngcontent-%COMP%]   .cam-icon[_ngcontent-%COMP%]:after{position:absolute;content:"";height:42px;width:14px;left:-4px;top:36px;border-right:1px dashed rgb(var(--neutral-color-6));border-bottom:1px dashed rgb(var(--neutral-color-6))}[_nghost-%COMP%]   .quick-settings[_ngcontent-%COMP%]{width:260px;margin:34px auto 0;text-align:center;align-self:center;font-size:12px}[_nghost-%COMP%]   .site-settings[_ngcontent-%COMP%]{display:flex;height:48px}[_nghost-%COMP%]   .site-settings__left-arrow[_ngcontent-%COMP%]{position:relative;height:40px;width:40px;border-left:1px solid rgb(var(--neutral-color-6));border-bottom:1px solid rgb(var(--neutral-color-6));margin:-4px 12px 0 16px}[_nghost-%COMP%]   .site-settings__left-arrow[_ngcontent-%COMP%]:after{position:absolute;content:"";width:6px;height:6px;border-right:1px solid rgb(var(--neutral-color-6));border-top:1px solid rgb(var(--neutral-color-6));bottom:-4px;right:0;transform:rotate(45deg)}[_nghost-%COMP%]   .site-settings__text[_ngcontent-%COMP%]{font-size:12px;align-self:flex-end;margin-bottom:4px;margin-right:12px}[_nghost-%COMP%]   .site-settings__icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;align-self:flex-end;width:24px;height:24px;border-radius:50%;background:rgb(var(--neutral-color-6))}[_nghost-%COMP%]   .site-settings__icon[_ngcontent-%COMP%]   svg-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .site-settings__center-arrow[_ngcontent-%COMP%]{position:relative;width:40px;height:1px;border-bottom:1px solid rgb(var(--neutral-color-6));margin:35px 12px 0}[_nghost-%COMP%]   .site-settings__center-arrow[_ngcontent-%COMP%]:after{position:absolute;content:"";width:6px;height:6px;border-right:1px solid rgb(var(--neutral-color-6));border-top:1px solid rgb(var(--neutral-color-6));bottom:-4px;right:0;transform:rotate(45deg)}[_nghost-%COMP%]   .site-settings[_ngcontent-%COMP%]   .pseudo-button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:96px;height:24px;padding:0 10px;margin-top:4px;background-color:rgb(var(--dark--primary-color));align-self:flex-end;border-radius:12px;color:#ffffffc4}[_nghost-%COMP%]   .site-settings[_ngcontent-%COMP%]   .pseudo-button__text[_ngcontent-%COMP%]{font-size:12px}[_nghost-%COMP%]   .device[_ngcontent-%COMP%]{color:rgb(var(--error-color))}.mobile-view   [_nghost-%COMP%]{top:50%;transform:translate(-50%,-50%)}.mobile-view   [_nghost-%COMP%]   .modal-card[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{max-width:100%}'],changeDetection:0}),M})()},1732:(z,R,t)=>{t.d(R,{L:()=>h});var e=t(40089),s=t(54355);let h=(()=>{class _{}return _.\u0275fac=function(f){return new(f||_)},_.\u0275mod=s.oAB({type:_}),_.\u0275inj=s.cJS({imports:[e.ez]}),_})()},83695:(z,R,t)=>{t.d(R,{u:()=>u});var e=t(54355),s=t(40089),h=t(911),_=t(6190);let i=(()=>{class a{}return a.\u0275fac=function(l){return new(l||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-dnd-files-placeholder"]],decls:5,vars:3,consts:[[1,"dnd-stab"],[1,"layout","layout-column","layout-align-center-center","dnd-stab__inner"],["src","assets/icons/unsized/dragndrop.svg",1,"layout-bottom-margin_16","white-100_fill"]],template:function(l,c){1&l&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"svg-icon",2),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&l&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"CONFERENCE_SESSION__FILES__ENTRY_MESSAGE")," "))},dependencies:[h.bk9,_.X$],styles:["app-dnd-files-placeholder .dnd-stab{position:absolute;top:0;left:0;width:100%;height:100%;padding:24px}app-dnd-files-placeholder .dnd-stab__inner{background-color:rgb(var(--neutral-color-3));border:1px solid rgb(var(--neutral-color-2));width:100%;height:100%}app-dnd-files-placeholder .dnd-stab_no-padding{padding:0}\n"],encapsulation:2}),a})();function f(a,o){1&a&&e._UZ(0,"app-dnd-files-placeholder")}function r(a,o){if(1&a&&e.GkF(0,3),2&a){const l=e.oxw(),c=e.MAs(1);e.Q6J("ngTemplateOutlet",l.dndOveredTmpl||c)}}const p=["*"];let u=(()=>{class a{constructor(){this.isDndOver=!1,this.isDropAllowed=!1,this.disabled=!1,this.directoryDropped=new e.vpe,this.filesDropped=new e.vpe}onFilesDndOvered(l){if(this.disabled)return;this.isDropAllowed=!!l.dataTransfer?.types&&l.dataTransfer.types.some(v=>"Files"===v);const d=Array.from(l.dataTransfer?.items||[]).map(v=>v.type);this.isDropAllowed=this.isDropAllowed&&(!this.validator||this.validator(d)),this.isDropAllowed&&(this.isDndOver=!0)}onFilesDndLeave(){this.disabled||(this.isDndOver=!1)}onFilesAdded(l){if(this.disabled)return;if(this.isDndOver=!1,!l)return void console.error("DropEvent dataTransfer property is empty");const c=l.files;this.isDropAllowed&&(Array.from(l.items).some(v=>!!v.webkitGetAsEntry()?.isDirectory)?this.directoryDropped.emit(l):this.filesDropped.emit(c))}}return a.\u0275fac=function(l){return new(l||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-dnd-files-area"]],inputs:{disabled:"disabled",dndOveredTmpl:"dndOveredTmpl",validator:"validator"},outputs:{directoryDropped:"directoryDropped",filesDropped:"filesDropped"},ngContentSelectors:p,decls:5,vars:1,consts:[["defaultDndOveredTmpl",""],["filesDnd","",1,"layout","layout-fill","layout-align-center-center","flex-grow","relative",3,"filesDndOvered","filesDndLeave","filesDndDropped"],[3,"ngTemplateOutlet",4,"ngIf"],[3,"ngTemplateOutlet"]],template:function(l,c){1&l&&(e.F$t(),e.YNc(0,f,1,0,"ng-template",null,0,e.W1O),e.TgZ(2,"div",1),e.NdJ("filesDndOvered",function(v){return c.onFilesDndOvered(v)})("filesDndLeave",function(){return c.onFilesDndLeave()})("filesDndDropped",function(v){return c.onFilesAdded(v)}),e.Hsn(3),e.YNc(4,r,1,1,"ng-container",2),e.qZA()),2&l&&(e.xp6(4),e.Q6J("ngIf",c.isDndOver))},dependencies:[s.O5,s.tP,h.zxf,i],styles:["app-dnd-files-area .cloud-overed svg *{fill:rgb(var(--neutral-color-5))}\n"],encapsulation:2,changeDetection:0}),a})()},44552:(z,R,t)=>{t.d(R,{D:()=>g});var e=t(49058),s=t(54355),h=t(911),_=t(79765),i=t(26215),f=t(9112),r=t(45435),p=t(88002),u=t(87519),a=t(46782),o=t(23841),l=t(13001),c=t(46451),d=t(49718);const v=["vcr"];function I(E,n){}let m=(()=>{class E{constructor(){this.viewInit$=new _.xQ}ngAfterViewInit(){this.viewInit$.next()}}return E.\u0275fac=function(S){return new(S||E)},E.\u0275cmp=s.Xpm({type:E,selectors:[["app-doc-overlay-wrapper"]],viewQuery:function(S,C){if(1&S&&s.Gf(v,5,s.s_b),2&S){let T;s.iGM(T=s.CRH())&&(C.viewContainerRef=T.first)}},decls:2,vars:0,consts:[["vcr",""]],template:function(S,C){1&S&&s.YNc(0,I,0,0,"ng-template",null,0,s.W1O)},styles:["[_nghost-%COMP%]{width:var(--100vw);height:var(--100vh)}"]}),E})(),g=(()=>{class E extends h.z23{get inlineModeViewContainerRef(){return this._inlineModeViewContainerRef$.value}get resultTheme(){return this.documentsManager.theme||this.theme}constructor(S,C,T,P,A,M){super(),this.documentsManager=S,this.theme=C,this.cfr=T,this.injector=P,this.overlay=A,this.themeService=M,this.overlayRef=null,this._inlineModeViewContainerRef$=new i.X(void 0),this.inlineModeViewContainerRef$=this._inlineModeViewContainerRef$.asObservable(),this.documentComponentRef=null,this.documentViewerInstance=null,this.documentViewerViewRef=null}setInlineViewContainer(S){this._inlineModeViewContainerRef$.next(S)}listenAll(){this.listenInlineViewContainer(),this.listenDocumentOpen()}listenInlineViewContainer(){(0,f.aj)([this.documentsManager.currentDocument$,this.documentsManager.viewMode$,this._inlineModeViewContainerRef$]).pipe((0,r.h)(([S,C,T])=>!!S&&C===c.p2.INLINE&&!!T),(0,p.U)(([,,S])=>S),(0,u.x)(),(0,a.R)(this.destroy$)).subscribe(()=>{this.openInline()})}listenDocumentOpen(S){this.setInlineViewContainer(S),this.documentsManager.currentDocument$.pipe((0,u.x)((C,T)=>C?.nodeId===T?.nodeId)).pipe((0,a.R)(this.destroy$)).subscribe(C=>{if(!C)return void this.close();const T=this.documentsManager.viewMode$.value;null!==T&&this.openDocumentViewer(C,T)}),this.handleViewModeChange()}openDocumentViewer(S,C){this.documentComponentRef||(this.initDocumentViewer(S),this.switchDocumentViewMode(C),this.documentViewerViewRef.detectChanges())}close(){this.documentComponentRef&&(this.overlayRef?.detach(),this.overlayRef=null,this.destroyDocumentViewer(),this.documentsManager.setViewMode(c.p2.WIDESCREEN))}handleViewModeChange(){this.documentsManager.viewMode$.pipe((0,r.h)(()=>!!this.documentViewerViewRef&&!this.documentViewerViewRef.destroyed)).subscribe(S=>{this.switchDocumentViewMode(S)})}openWideScreen(){if(!this.documentViewerViewRef||this.documentViewerViewRef.destroyed||this.overlayRef?.hasAttached)return;const{x:S,y:C}=this.getScrollPercents();this.inlineModeViewContainerRef?.detach(),this.overlayRef=this.createOverlay(),this.resultTheme&&this.themeService.setThemeToOverlay(this.overlayRef,this.resultTheme);const T=new e.C5(m),P=this.overlayRef.attach(T).instance;P.viewInit$.subscribe(()=>{P.viewContainerRef.insert(this.documentViewerViewRef),this.documentViewerViewRef.detectChanges(),this.restoreScrollPositions(S,C)})}openInline(){if(this.documentViewerViewRef?.destroyed||!this.inlineModeViewContainerRef)return;const{x:T,y:P}=this.getScrollPercents();this.inlineModeViewContainerRef.insert(this.documentViewerViewRef),this.restoreScrollPositions(T,P),this.overlayRef?.detach(),this.overlayRef=null}createComponent(){return this.cfr.resolveComponentFactory(o.V).create(this.injector)}createOverlay(){return this.overlay.create({hasBackdrop:!0,height:"100%",scrollStrategy:this.overlay.scrollStrategies.block(),backdropClass:"doc-viewer-backdrop",panelClass:"doc-viewer"})}initDocumentViewer(S){this.documentComponentRef=this.createComponent(),this.documentViewerInstance=this.documentComponentRef.instance,this.documentViewerViewRef=this.documentComponentRef.hostView,this.documentViewerInstance.document=S}destroyDocumentViewer(){this.inlineModeViewContainerRef?.remove(),this.documentComponentRef=null,this.documentViewerViewRef=null,this.documentViewerInstance=null}switchDocumentViewMode(S){switch(S){case c.p2.INLINE:this.openInline();break;case c.p2.WIDESCREEN:this.openWideScreen()}}getScrollPercents(){const S=this.documentViewerInstance?.contentComponentInstance?.elementRef.nativeElement;return S?{x:S.scrollLeft/S.scrollWidth,y:S.scrollTop/S.scrollHeight}:{x:0,y:0}}restoreScrollPositions(S,C){const T=this.documentViewerInstance?.contentComponentInstance?.elementRef.nativeElement;T&&(T.scrollTop=T.scrollHeight*C,T.scrollLeft=T.scrollWidth*S)}}return E.\u0275fac=function(S){return new(S||E)(s.LFG(l.Y5),s.LFG(h.C6u,8),s.LFG(s._Vd),s.LFG(s.zs3),s.LFG(d.aV),s.LFG(h.fYy))},E.\u0275prov=s.Yz7({token:E,factory:E.\u0275fac}),E})()},28387:(z,R,t)=>{t.d(R,{F:()=>P,M:()=>A});var e=t(5469),s=t(911),h=t(62865),_=t(21850),i=t(9112),f=t(88002),r=t(59328),p=t(46782),u=t(13001),a=t(46451),o=t(54355),l=t(44552),c=t(87394),d=t(21399),v=t(89017),I=t(40089),m=t(6190);function g(M,L){if(1&M){const N=o.EpF();o.ynx(0),o.TgZ(1,"button",17),o.NdJ("click",function(){o.CHM(N);const b=o.oxw();return o.KtG(b.togglePointer())}),o.ALo(2,"async"),o._UZ(3,"svg-icon",18),o.qZA(),o._UZ(4,"div",14),o.BQk()}if(2&M){const N=o.oxw();o.xp6(1),o.ekj("pressed",o.lcZ(2,2,N.isPointerShown$))}}function E(M,L){if(1&M){const N=o.EpF();o.ynx(0),o.TgZ(1,"button",20),o.NdJ("click",function(){o.CHM(N);const b=o.oxw(2);return o.KtG(b.onNextPageClick())}),o.ALo(2,"async"),o.ALo(3,"translate"),o._UZ(4,"svg-icon",26),o.qZA(),o.TgZ(5,"span"),o._uU(6),o.ALo(7,"translate"),o.qZA(),o.BQk()}if(2&M){const N=L.$implicit,W=o.oxw(2);o.xp6(1),o.Q6J("disabled",o.lcZ(2,4,W.pageIndex$)+1===N)("tooltip",o.lcZ(3,6,"DOCUMENT_VIEWER.NEXT_PAGE")),o.xp6(5),o.AsE(" ",o.lcZ(7,8,"DOCUMENT_VIEWER.FROM")," ",N," ")}}function n(M,L){if(1&M){const N=o.EpF();o.TgZ(0,"div",19)(1,"button",20),o.NdJ("click",function(){o.CHM(N);const b=o.oxw();return o.KtG(b.onPreviousPageClick())}),o.ALo(2,"async"),o.ALo(3,"translate"),o._UZ(4,"svg-icon",21),o.qZA(),o.TgZ(5,"input",22,23),o.NdJ("keydown",function(){o.CHM(N);const b=o.MAs(6),V=o.oxw();return o.KtG(V.removeUnnecessarySymbols(b))})("keydown.enter",function(){o.CHM(N);const b=o.MAs(6),V=o.oxw();return o.KtG(V.onPageChange(b.value))})("blur",function(){o.CHM(N);const b=o.MAs(6),V=o.oxw();return o.KtG(V.onPageChange(b.value))}),o.ALo(7,"translate"),o.ALo(8,"async"),o.qZA(),o.YNc(9,E,8,10,"ng-container",24),o.ALo(10,"async"),o._UZ(11,"div",25),o.qZA()}if(2&M){const N=o.oxw();o.xp6(1),o.Q6J("disabled",0===o.lcZ(2,5,N.pageIndex$))("tooltip",o.lcZ(3,7,"DOCUMENT_VIEWER.PREVIOUS_PAGE")),o.xp6(4),o.Q6J("tooltip",o.lcZ(7,9,"DOCUMENT_VIEWER.PAGE_INPUT_TITLE"))("value",o.lcZ(8,11,N.pageIndex$)+1),o.xp6(4),o.Q6J("ngWithAs",o.lcZ(10,13,N.totalPages$))}}function S(M,L){if(1&M){const N=o.EpF();o.TgZ(0,"button",27),o.NdJ("click",function(){o.CHM(N);const b=o.oxw();return o.KtG(b.rotate())}),o.ALo(1,"translate"),o._UZ(2,"svg-icon",28),o.qZA()}2&M&&o.Q6J("tooltip",o.lcZ(1,1,"DOCUMENT_VIEWER.ROTATE_CLOCKWISE"))}function C(M,L){if(1&M){const N=o.EpF();o.TgZ(0,"button",29),o.NdJ("click",function(){o.CHM(N);const b=o.oxw();return o.KtG(b.toggleInlineMode())}),o.ALo(1,"translate"),o.ALo(2,"async"),o._UZ(3,"svg-icon",13),o.ALo(4,"async"),o.qZA()}if(2&M){const N=o.oxw();o.Q6J("tooltip",o.lcZ(1,2,o.lcZ(2,4,N.inlineTitle$))),o.xp6(3),o.Q6J("src",o.lcZ(4,6,N.inlineIconSrc$))}}function T(M,L){if(1&M&&(o.ynx(0),o._UZ(1,"div",14),o.TgZ(2,"div",30),o._UZ(3,"svg-icon",31),o.qZA(),o.BQk()),2&M){const N=o.oxw();o.xp6(3),o.Q6J("ivaMoverHandle",N.MOVER_NAME)}}const P="document-viewer-controls";let A=(()=>{class M{get zoom(){return this.documentViewerService.zoom}get minZoom(){return this.documentViewerService.minZoom}get totalPages(){return this.totalPages$.value}get zoomInputValue(){return Math.round(100*this.zoom).toString()}get zoomInDisabled(){return this.maxZoom===this.zoom}get zoomOutDisabled(){return this.minZoom===this.zoom}constructor(N,W,b,V,D,F,J){this.documentsManager=N,this.destroy$=W,this.documentOpenerService=b,this.documentViewerService=V,this.documentViewerStoreService=D,this.fullscreenService=F,this.moverService=J,this.MOVER_NAME=P,this.isPointerShown$=this.documentViewerService.isPointerShown$,this.canRotate$=this.documentViewerService.canRotate$,this.isDemonstrationOn$=this.documentsManager.isOpenedFileDemonstrating$,this.isRotateButtonShown$=(0,i.aj)([this.canRotate$,this.isDemonstrationOn$]).pipe((0,f.U)(([H,Y])=>H&&!Y)),this.documentType$=this.documentViewerService.documentType$,this.isPageNavigationVisible$=this.documentType$.pipe((0,f.U)(H=>H===a._o.OFFICE_DOCUMENT)),this.totalPages$=this.documentViewerService.totalPages$,this.isInlineViewMode$=this.documentViewerService.isInlineViewMode$,this.inlineIconSrc$=this.isInlineViewMode$.pipe((0,f.U)(H=>H?"assets/icons/icon16/inline-mode-off.svg":"assets/icons/icon16/inline-mode-on.svg")),this.inlineTitle$=this.isInlineViewMode$.pipe((0,f.U)(H=>H?"DOCUMENT_VIEWER.OVERLAY_MODE":"DOCUMENT_VIEWER.INLINE_MODE")),this.pageIndex$=this.documentViewerStoreService.currentPageIndex$,this.hasInlineContainer$=this.documentOpenerService.inlineModeViewContainerRef$.pipe((0,f.U)(Boolean)),this.isInlineToggleButtonVisible$=(0,i.aj)([this.hasInlineContainer$,this.fullscreenService.isFullscreen$]).pipe((0,f.U)(([H,Y])=>H&&!Y)),this.fullScreenIconSrc$=this.fullscreenService.isFullscreen$.pipe((0,f.U)(H=>H?"assets/icons/icon24/fullscreen-off.svg":"assets/icons/icon24/fullscreen-on.svg")),this.fullScreenTitle$=this.fullscreenService.isFullscreen$.pipe((0,f.U)(H=>H?"DOCUMENT_VIEWER.WINDOWED_MODE":"DOCUMENT_VIEWER.FULLSCREEN_MODE")),this.isFittedToScreen$=this.documentViewerService.isFittedToScreen$,this.fitToScreenIconSrc$=this.isFittedToScreen$.pipe((0,f.U)(H=>H?"assets/icons/icon24/1-1.svg":"assets/icons/icon24/fit-to-page.svg")),this.fitToScreenTitle$=this.isFittedToScreen$.pipe((0,f.U)(H=>H?"DOCUMENT_VIEWER.INITIAL_SIZE":"DOCUMENT_VIEWER.FIT_TO_SCREEN")),this.maxZoom=(0,h.Z)(e._Z.settings.DOCUMENT_VIEWER_ZOOM_STEPS)}ngOnInit(){this.isDemonstrationOn$.pipe((0,r.G)(),(0,p.R)(this.destroy$)).subscribe(([N,W])=>{N&&!W&&this.moverService.getMover(P)?.resetPosition()})}toggleInlineMode(){this.documentViewerService.toggleInlineMode()}onNextPageClick(){this.documentViewerService.goToNextPage()}onPreviousPageClick(){this.documentViewerService.goToPreviousPage()}applyZoom(N){if(!N.value)return void(N.value=this.zoomInputValue);const W=100*this.minZoom,b=100*this.maxZoom,V=(0,_.Z)(parseInt(N.value),W,b);N.value=Math.round(V).toString(),this.documentViewerService.zoomChange(V/100)}onPageChange(N){const W=(0,_.Z)(parseInt(N),1,this.totalPages)-1;this.documentViewerService.goToPage(W)}removeUnnecessarySymbols(N){setTimeout(()=>{N.value=N.value.replace(/[^0-9]/g,"")})}toggleFitToScreen(){this.documentViewerService.toggleFitToScreen()}zoomIn(){this.documentViewerService.zoomIn()}zoomOut(){this.documentViewerService.zoomOut()}rotate(){this.documentViewerService.rotate()}togglePointer(){this.documentViewerService.togglePointer()}toggleFullscreen(){this.documentViewerService.toggleFullscreen()}}return M.\u0275fac=function(N){return new(N||M)(o.Y36(u.Y5),o.Y36(s.z23),o.Y36(l.D),o.Y36(c.H),o.Y36(d.T),o.Y36(v.n),o.Y36(s.Fw1))},M.\u0275cmp=o.Xpm({type:M,selectors:[["app-document-viewer-controls"]],features:[o._Bn([s.z23])],decls:34,vars:40,consts:[[1,"control-buttons"],[4,"ngIf"],["class","controls controls__pagination",4,"ngIf"],["iva-icon-button","","class","layout-right-margin_24","e2e-id","document-viewer-rotate-button",3,"tooltip","click",4,"ngIf"],[1,"controls","controls__zoom"],["iva-icon-button","","e2e-id","document-zoom-out-button",1,"layout-right-margin_20",3,"tooltip","disabled","click"],["src","assets/icons/icon24/zoom-out.svg"],["iva-icon-button","","e2e-id","document-zoom-in-button",1,"layout-right-margin_20",3,"tooltip","disabled","click"],["src","assets/icons/icon24/zoom-in.svg"],["e2e-id","document-viewer-zoom-input","type","text",3,"value","keydown","keydown.enter","blur"],["zoomInput",""],[1,"controls","controls__screen"],["iva-icon-button","","e2e-id","fit-to-screen-button",1,"layout-left-margin_20",3,"tooltip","click"],[3,"src"],[1,"separator","layout-right-margin_20","layout-left-margin_20"],["iva-icon-button","","class","layout-right-margin_20",3,"tooltip","click",4,"ngIf"],["iva-icon-button","",1,"layout-margin_no",3,"tooltip","click"],["iva-icon-button","",3,"click"],["src","assets/icons/icon24/pointer-fill.svg"],[1,"controls","controls__pagination"],["iva-icon-button","",1,"layout-right-margin_8",3,"disabled","tooltip","click"],["src","assets/icons/icon16/corner-left.svg"],["e2e-id","document-viewer-controls-page-input","type","text",3,"tooltip","value","keydown","keydown.enter","blur"],["pageInput",""],[4,"ngWith","ngWithAs"],[1,"separator","layout-left-margin_20","layout-right-margin_20"],["src","assets/icons/icon16/corner-right.svg"],["iva-icon-button","","e2e-id","document-viewer-rotate-button",1,"layout-right-margin_24",3,"tooltip","click"],["src","assets/icons/icon24/rotate.svg"],["iva-icon-button","",1,"layout-right-margin_20",3,"tooltip","click"],[1,"controls"],["src","assets/icons/icon16/drag-handle.svg",1,"drag-handle",3,"ivaMoverHandle"]],template:function(N,W){if(1&N){const b=o.EpF();o.TgZ(0,"div",0),o.YNc(1,g,5,4,"ng-container",1),o.ALo(2,"async"),o.YNc(3,n,12,15,"div",2),o.ALo(4,"async"),o.YNc(5,S,3,3,"button",3),o.ALo(6,"async"),o.TgZ(7,"div",4)(8,"button",5),o.NdJ("click",function(){return W.zoomOut()}),o.ALo(9,"translate"),o._UZ(10,"svg-icon",6),o.qZA(),o.TgZ(11,"button",7),o.NdJ("click",function(){return W.zoomIn()}),o.ALo(12,"translate"),o._UZ(13,"svg-icon",8),o.qZA(),o.TgZ(14,"input",9,10),o.NdJ("keydown",function(){o.CHM(b);const D=o.MAs(15);return o.KtG(W.removeUnnecessarySymbols(D))})("keydown.enter",function(){o.CHM(b);const D=o.MAs(15);return o.KtG(W.applyZoom(D))})("blur",function(){o.CHM(b);const D=o.MAs(15);return o.KtG(W.applyZoom(D))}),o.qZA(),o.TgZ(16,"span"),o._uU(17," % "),o.qZA()(),o.TgZ(18,"div",11)(19,"button",12),o.NdJ("click",function(){return W.toggleFitToScreen()}),o.ALo(20,"translate"),o.ALo(21,"async"),o._UZ(22,"svg-icon",13),o.ALo(23,"async"),o.qZA(),o._UZ(24,"div",14),o.YNc(25,C,5,8,"button",15),o.ALo(26,"async"),o.TgZ(27,"button",16),o.NdJ("click",function(){return W.toggleFullscreen()}),o.ALo(28,"translate"),o.ALo(29,"async"),o._UZ(30,"svg-icon",13),o.ALo(31,"async"),o.qZA()(),o.YNc(32,T,4,1,"ng-container",1),o.ALo(33,"async"),o.qZA()}2&N&&(o.xp6(1),o.Q6J("ngIf",o.lcZ(2,14,W.isDemonstrationOn$)),o.xp6(2),o.Q6J("ngIf",o.lcZ(4,16,W.isPageNavigationVisible$)),o.xp6(2),o.Q6J("ngIf",o.lcZ(6,18,W.isRotateButtonShown$)),o.xp6(3),o.Q6J("tooltip",o.lcZ(9,20,"DOCUMENT_VIEWER.ZOOM_OUT"))("disabled",W.zoomOutDisabled),o.xp6(3),o.Q6J("tooltip",o.lcZ(12,22,"DOCUMENT_VIEWER.ZOOM_IN"))("disabled",W.zoomInDisabled),o.xp6(3),o.Q6J("value",W.zoomInputValue),o.xp6(5),o.Q6J("tooltip",o.lcZ(20,24,o.lcZ(21,26,W.fitToScreenTitle$))),o.xp6(3),o.Q6J("src",o.lcZ(23,28,W.fitToScreenIconSrc$)),o.xp6(3),o.Q6J("ngIf",o.lcZ(26,30,W.isInlineToggleButtonVisible$)),o.xp6(2),o.Q6J("tooltip",o.lcZ(28,32,o.lcZ(29,34,W.fullScreenTitle$))),o.xp6(3),o.Q6J("src",o.lcZ(31,36,W.fullScreenIconSrc$)),o.xp6(2),o.Q6J("ngIf",o.lcZ(33,38,W.isDemonstrationOn$)))},dependencies:[s.r2H,I.O5,s.Khk,s.XFu,s.bk9,s.i9q,I.Ov,m.X$],styles:["[_nghost-%COMP%]{display:block;position:absolute;bottom:20px;height:56px;padding:0 28px;opacity:.88;border-radius:6px;background-color:rgba(var(--neutral-color-1),var(--transparency-80));z-index:900}[_nghost-%COMP%]   .separator[_ngcontent-%COMP%]{width:1px;height:20px;background-color:rgb(var(--neutral-color-6))}[_nghost-%COMP%]   .control-buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center;height:100%}[_nghost-%COMP%]   input[_ngcontent-%COMP%]{outline:none;background-color:transparent;color:rgb(var(--white-100));opacity:.68;width:45px;border:1px solid rgb(var(--white-100));border-radius:12px;padding:3px 12px 5px}[_nghost-%COMP%]   input[_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   input[_ngcontent-%COMP%]:focus{opacity:1}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]{display:flex;align-items:center}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:rgb(var(--white-100));opacity:.68;margin-left:4px}[_nghost-%COMP%]   .controls__zoom[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:58px}[_nghost-%COMP%]   .controls__pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;border-radius:12px;background-color:transparent;border:1px solid rgba(var(--white-100),var(--transparency-60));outline:none;width:28px;height:29px;margin:0 8px;cursor:pointer}[_nghost-%COMP%]   .controls__pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{border:1px solid rgb(var(--white-100))}[_nghost-%COMP%]   .controls__pagination[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]{cursor:not-allowed}[_nghost-%COMP%]   .controls__pagination[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:50px}[_nghost-%COMP%]   .drag-handle[_ngcontent-%COMP%]{cursor:grab}[_nghost-%COMP%]   .drag-handle[_ngcontent-%COMP%] > svg[_ngcontent-%COMP%] > path[_ngcontent-%COMP%]{fill:rgb(var(--neutral-color-7))}[_nghost-%COMP%]   .drag-handle[_ngcontent-%COMP%]:active{cursor:grabbing}"],changeDetection:0}),M})()},23841:(z,R,t)=>{t.d(R,{V:()=>b,g:()=>W});var e=t(911),s=t(26215),h=t(9112),_=t(66682),i=t(22759),f=t(88002),r=t(45435),p=t(87519),u=t(46782),a=t(43190),o=t(54395),l=t(67460),c=t(68307),d=t(16803),v=t(38689),I=t(28387),m=t(13001),g=t(46451),E=t(54355),n=t(87394),S=t(21399),C=t(44183);const T=["content"];function P(V,D){1&V&&E._UZ(0,"app-document-viewer-header")}function A(V,D){1&V&&E._UZ(0,"iva-spinner")}const M=function(){return{top:20,left:20,right:20,bottom:20}};function L(V,D){if(1&V&&E._UZ(0,"app-document-viewer-controls",7),2&V){const F=E.oxw(),J=E.MAs(6);E.Q6J("ivaMover",F.MOVER_NAME)("ivaMoverContainer",J)("ivaMoverRect",E.DdM(3,M))}}const W="DocumentViewerNavigationComponent";let b=(()=>{class V{get document(){return this.documentViewerService.document}set document(F){this.documentViewerStoreService.setDocument(F)}get isFittedToScreen(){return this.isFittedToScreen$.value||!1}get minZoom(){return this.documentViewerService.minZoom}get zoom(){return this.zoom$.value||1}set zoom(F){this.documentViewerStoreService.setZoom(F)}get isDocument(){return this.documentViewerService.isDocument}get pageIndex(){return this.documentViewerService.pageIndex}get isConverting(){return this.document.conversionState===g.u$.IN_PROGRESS}get isConversionFailed(){return this.document.conversionState===g.u$.FAILED}get isDemonstratingOn(){return!!this.isDemonstrationOn$.value}get pages(){return this.documentViewerStoreService.pages$.value}get presentation(){return this.documentsManager.presentation$.value}constructor(F,J,H,Y,ee,X,K){this.documentsManager=F,this.cd=J,this.destroy$=H,this.documentViewerService=Y,this.documentViewerStoreService=ee,this.elementRef=X,this.keysPriorityService=K,this.MOVER_NAME=I.F,this.isFittedToScreen$=this.documentViewerService.isFittedToScreen$,this.isRestoringState$=new s.X(!1),this.isInlineViewMode$=this.documentViewerService.isInlineViewMode$,this.contentOpacity$=this.isRestoringState$.pipe((0,f.U)(oe=>oe?0:1)),this.zoom$=this.documentViewerStoreService.zoom$,this.isDocumentControlsVisible$=(0,h.aj)([this.documentViewerService.isSupported$,this.documentViewerService.isConverting$,this.documentViewerService.isConversionFailed$,this.documentViewerService.isVideo$]).pipe((0,f.U)(([oe,O,U,k])=>oe&&!O&&!U&&!k)),this.isDemonstrationOn$=this.documentsManager.isOpenedFileDemonstrating$}ngOnInit(){this.documentViewerService.setViewerElement(this.elementRef.nativeElement),this.documentViewerService.setDocumentType(),this.documentViewerService.setOriginalSize(),this.handleMouseWheel(),this.handleViewModeChange(),this.documentsManager.currentDocument$.pipe((0,r.h)(F=>!!F),(0,p.x)((F,J)=>F?.nodeId===J?.nodeId&&F?.conversionState===J?.conversionState),(0,u.R)(this.destroy$)).subscribe(F=>{this.document=F,this.documentViewerStoreService.setPages([]),this.documentViewerStoreService.setTotalPages(0),this.documentViewerStoreService.setZoomBiggestValue(0),this.documentViewerService.setDocumentType(),this.documentViewerService.setOriginalSize(),this.updateKeysPriority(),setTimeout(()=>this.documentViewerStoreService.setIsFittedToScreen(this.documentViewerService.isBiggerThenContainer),m.BX)}),this.documentsManager.currentDocumentPages$.pipe((0,r.h)(F=>!!F),(0,u.R)(this.destroy$)).subscribe(F=>{this.documentViewerStoreService.setRotateAngle(0),this.documentViewerStoreService.setTotalPages(F.totalCount),this.setDocumentPagesDTO(F.data),this.documentViewerService.setPages();const J=this.presentation;this.isDemonstratingOn&&J?.document.id===this.document.nodeId?this.restoreLastDemonstrationState():this.documentViewerService.setInitialZoom()})}ngAfterViewInit(){this.documentViewerService.setContentElement(this.contentComponentInstance.elementRef.nativeElement),(0,_.T)((0,i.R)(this.contentComponentInstance.elementRef.nativeElement,"scroll"),(0,i.R)(window,"resize"),this.documentViewerStoreService.currentPageIndex$,this.zoom$).pipe((0,a.w)(()=>this.isDemonstrationOn$),(0,r.h)(Boolean),(0,r.h)(()=>this.documentsManager.getDocumentType(this.document)!==g._o.VIDEO),(0,o.b)(200),(0,u.R)(this.destroy$)).subscribe(()=>{this.updateDemonstration()}),(0,h.aj)([this.isDemonstrationOn$,this.isRestoringState$]).pipe((0,r.h)(([F,J])=>F&&!J),(0,l.g)(m.BX),(0,u.R)(this.destroy$)).subscribe(()=>{this.documentsManager.setInitialDemonstrationCoordinates(this.documentViewerService.getContentViewBoxCoordinates())})}ngOnDestroy(){this.keysPriorityService.removePriority(v.c,W),this.documentsManager.setInitialDemonstrationCoordinates(null)}setDocumentPagesDTO(F){this.documentViewerStoreService.setDocumentPagesDTO(F)}handleViewModeChange(){this.documentsManager.viewMode$.pipe((0,p.x)(),(0,u.R)(this.destroy$)).subscribe(()=>{this.updateKeysPriority(),this.isFittedToScreen&&setTimeout(()=>{this.documentViewerService.setZoomFittingToScreen(),this.cd.markForCheck()})})}updateKeysPriority(){switch(this.documentsManager.viewMode$.value){case g.p2.INLINE:this.keysPriorityService.addPriority(v.c,W);break;case g.p2.WIDESCREEN:this.keysPriorityService.capturePriority(v.c,W)}}onResize(){this.documentViewerService.handleContainerSizeChange()}updateDemonstration(){const F=this.presentation,J=!F?.document?.created,H=F?.document?.id===this.document.nodeId;!this.isRestoringState$.getValue()&&0!==this.pages.length&&H&&!J&&this.documentsManager.updateDemonstration(this.document.nodeId,this.pageIndex+1,this.documentViewerService.getContentViewBoxCoordinates())}handleMouseWheel(){(0,i.R)(document,"mousewheel",{passive:!1}).pipe((0,r.h)(F=>F.ctrlKey),(0,c.b)(F=>F.preventDefault()),(0,d.p)(m.U),(0,u.R)(this.destroy$)).subscribe(({deltaY:F})=>{this.documentViewerService.setZoomByDeltaY(F),this.cd.markForCheck()})}restoreLastDemonstrationState(){const F=this.presentation?.state;if(!F)return;const J=F,{zoom:H,scrollLeft:Y,scrollTop:ee}=this.documentViewerService.getViewStateFromCoordinates(J);this.isRestoringState$.next(!0),this.documentViewerStoreService.setZoom(H),this.cd.detectChanges(),this.isDocument&&this.documentViewerStoreService.setCurrentPageIndex(J.pageIndex-1),setTimeout(()=>{const X=this.contentComponentInstance;X.elementRef.nativeElement.scrollTop=ee,X.elementRef.nativeElement.scrollLeft=Y,this.isRestoringState$.next(!1)},m.BX)}}return V.\u0275fac=function(F){return new(F||V)(E.Y36(m.Y5),E.Y36(E.sBO),E.Y36(e.z23),E.Y36(n.H),E.Y36(S.T),E.Y36(E.SBq),E.Y36(C.H))},V.\u0275cmp=E.Xpm({type:V,selectors:[["app-document-viewer"]],viewQuery:function(F,J){if(1&F&&E.Gf(T,5),2&F){let H;E.iGM(H=E.CRH())&&(J.contentComponentInstance=H.first)}},hostBindings:function(F,J){1&F&&E.NdJ("resize",function(){return J.onResize()},!1,E.Jf7)},features:[E._Bn([e.z23,{provide:e.C6u,useFactory:D=>D.theme,deps:[m.Y5]},e.Bi9])],decls:13,vars:13,consts:[[1,"container"],[4,"ngIf"],[1,"content-container"],["contentContainer",""],["ivaDragScroll",""],["content",""],[3,"ivaMover","ivaMoverContainer","ivaMoverRect",4,"ngIf"],[3,"ivaMover","ivaMoverContainer","ivaMoverRect"]],template:function(F,J){1&F&&(E.TgZ(0,"div",0),E.YNc(1,P,1,0,"app-document-viewer-header",1),E.ALo(2,"async"),E.YNc(3,A,1,0,"iva-spinner",1),E.ALo(4,"async"),E.TgZ(5,"div",2,3)(7,"app-document-viewer-content",4,5),E.ALo(9,"async"),E.qZA(),E.YNc(10,L,1,4,"app-document-viewer-controls",6),E.ALo(11,"async"),E.qZA(),E._UZ(12,"app-document-viewer-navigation"),E.qZA()),2&F&&(E.xp6(1),E.Q6J("ngIf",!E.lcZ(2,5,J.isInlineViewMode$)),E.xp6(2),E.Q6J("ngIf",E.lcZ(4,7,J.isRestoringState$)),E.xp6(4),E.Udp("opacity",E.lcZ(9,9,J.contentOpacity$)),E.xp6(3),E.Q6J("ngIf",E.lcZ(11,11,J.isDocumentControlsVisible$)))},styles:["[_ngcontent-%COMP%]:root{--100vh: 100vh;--100vw: 100vw}[_nghost-%COMP%]{position:relative;width:100%;height:100%;display:flex;flex-direction:column;align-items:center}.container[_ngcontent-%COMP%], .content-container[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;display:flex;flex-direction:column;align-items:center}.content-container[_ngcontent-%COMP%]{overflow:hidden}.navigation-button[_ngcontent-%COMP%]{position:absolute;top:50%;width:48px;height:48px;opacity:.88;background-color:rgb(var(--black-100));border:none;margin:0 24px;z-index:999}.navigation-button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{fill:rgba(var(--white-100),var(--transparency-60))}.navigation-button__left[_ngcontent-%COMP%]{left:0}.navigation-button__right[_ngcontent-%COMP%]{right:0}app-document-viewer-content[_ngcontent-%COMP%]{height:100%}app-document-viewer-content.iva-drag-scroll-grabbing[_ngcontent-%COMP%]{cursor:grabbing}app-document-viewer-content.iva-drag-scroll-grab[_ngcontent-%COMP%]{cursor:grab}app-document-viewer-navigation[_ngcontent-%COMP%], app-document-viewer-controls[_ngcontent-%COMP%]{z-index:999}"],changeDetection:0}),V})()},13001:(z,R,t)=>{t.d(R,{BX:()=>i,U:()=>r,Y5:()=>_,kT:()=>p,lq:()=>f,xh:()=>u});var e=t(54355),s=t(5469),h=t(46451);const _=new e.OlP("Document data manager"),i=330,f=330,r=150,p=180,u={[h._o.OFFICE_DOCUMENT]:s._Z.settings.CONFERENCE_SESSION_FILES_DOCUMENT_REGEXES,[h._o.IMAGE]:s._Z.settings.CONFERENCE_SESSION_FILES_IMAGE_REGEXES,[h._o.VIDEO]:s._Z.settings.CONFERENCE_SESSION_FILES_VIDEO_REGEXES}},46451:(z,R,t)=>{t.d(R,{_o:()=>s,lj:()=>i,p2:()=>_,u$:()=>e});var e=(()=>((e=e||{}).NOT_SUPPORTED="NOT_SUPPORTED",e.COMPLETED="COMPLETED",e.IN_PROGRESS="IN_PROGRESS",e.FAILED="FAILED",e))(),s=(()=>((s=s||{}).IMAGE="IMAGE",s.OFFICE_DOCUMENT="OFFICE_DOCUMENT",s.AUDIO="AUDIO",s.VIDEO="VIDEO",s.UNSUPPORTED="UNSUPPORTED",s))(),_=(()=>((_=_||{})[_.INLINE=0]="INLINE",_[_.WIDESCREEN=1]="WIDESCREEN",_))(),i=(()=>((i=i||{})[i.ALL=0]="ALL",i[i.DEMONSTRABLE=1]="DEMONSTRABLE",i))()},14751:(z,R,t)=>{t.d(R,{L:()=>Ge});var e=t(40089),s=t(6190),h=t(1732),_=t(911),i=t(59820),f=t(61860),r=t(34435),p=t(44552),u=t(5469),a=t(2838),o=t(9112),l=t(22759),c=t(88002),d=t(87519),v=t(59328),I=t(46782),m=t(45435),g=t(39761),E=t(13001),n=t(54355),S=t(87394),C=t(21399);const T=["container"],P=["pointer"];function A(ne,Q){1&ne&&n._UZ(0,"iva-spinner")}function M(ne,Q){1&ne&&n._UZ(0,"div",6,7)}function L(ne,Q){1&ne&&n._UZ(0,"iva-spinner")}function N(ne,Q){if(1&ne&&(n._UZ(0,"app-office-document-renderer",12),n.ALo(1,"async")),2&ne){const x=n.oxw().$implicit,y=n.oxw(3);n.Q6J("pages",x)("zoom",y.zoom)("documentName",n.lcZ(1,3,y.documentName$))}}function W(ne,Q){if(1&ne&&(n._UZ(0,"app-image-renderer",13),n.ALo(1,"async"),n.ALo(2,"async"),n.ALo(3,"async"),n.ALo(4,"async")),2&ne){const x=n.oxw().$implicit,y=n.oxw(3);n.Q6J("src",x[0].url)("zoom",n.lcZ(1,5,y.zoom$)||1)("originalSize",n.lcZ(2,7,y.originalSize$))("rotate",n.lcZ(3,9,y.rotate$)||0)("documentName",n.lcZ(4,11,y.documentName$))}}function b(ne,Q){if(1&ne&&(n._UZ(0,"app-video-renderer",14),n.ALo(1,"async"),n.ALo(2,"async")),2&ne){const x=n.oxw().$implicit,y=n.oxw(3);n.Q6J("videoSrc",x[0].url)("zoom",n.lcZ(1,4,y.zoom$)||1)("originalSize",n.lcZ(2,6,y.originalSize$))("isFitToScreenAllowed",y.isFitToScreenAllowed)}}function V(ne,Q){if(1&ne&&(n.ynx(0),n.YNc(1,N,2,5,"app-office-document-renderer",9),n.ALo(2,"async"),n.YNc(3,W,5,13,"app-image-renderer",10),n.ALo(4,"async"),n.YNc(5,b,3,8,"app-video-renderer",11),n.ALo(6,"async"),n.BQk()),2&ne){const x=n.oxw(3);n.xp6(1),n.Q6J("ngIf",n.lcZ(2,3,x.isOfficeDocument$)),n.xp6(2),n.Q6J("ngIf",n.lcZ(4,5,x.isImage$)),n.xp6(2),n.Q6J("ngIf",n.lcZ(6,7,x.isVideo$))}}function D(ne,Q){if(1&ne&&(n.ynx(0),n.YNc(1,V,7,9,"ng-container",8),n.ALo(2,"async"),n.BQk()),2&ne){const x=n.oxw(2);n.xp6(1),n.Q6J("ngWithAs",n.lcZ(2,1,x.pages$))}}function F(ne,Q){if(1&ne&&(n.ynx(0),n.YNc(1,L,1,0,"iva-spinner",2),n.ALo(2,"async"),n.YNc(3,D,3,3,"ng-container",2),n.ALo(4,"async"),n.BQk()),2&ne){const x=n.oxw();n.xp6(1),n.Q6J("ngIf",!n.lcZ(2,2,x.isPagesLoaded$)),n.xp6(2),n.Q6J("ngIf",n.lcZ(4,4,x.isPagesLoaded$))}}function J(ne,Q){if(1&ne&&(n._UZ(0,"app-unsupported-renderer",15),n.ALo(1,"translate"),n.ALo(2,"async")),2&ne){const x=n.oxw();n.Q6J("message",n.lcZ(1,1,n.lcZ(2,3,x.notAvailableMessage$)))}}let ee=(()=>{class ne{get isPointerShown(){return this.isPointerShown$.value}get isFitToScreenAllowed(){return!this.documentViewerService.isBiggerThenContainer}get zoom(){return this.documentViewerService.zoom}get isReversedMeasures(){return this.isReversedMeasures$.value}constructor(x,y,w,ce,pe,ge){this.documentsManager=x,this.destroy$=y,this.documentViewerService=w,this.documentViewerStoreService=ce,this.ngZone=pe,this.elementRef=ge,this.isPointerShown$=this.documentViewerService.isPointerShown$,this.zoom$=this.documentViewerService.zoom$,this.rotate$=this.documentViewerService.rotateAngle$,this.originalSize$=this.documentViewerService.originalSize$,this.documentName$=this.documentViewerService.document$.pipe((0,c.U)(j=>j?.name||"")),this.notAvailableMessage$=(0,o.aj)([this.documentViewerService.isConverting$,this.documentViewerService.isConversionFailed$,this.documentViewerService.isSupported$]).pipe((0,c.U)(([j,le,q])=>{let se="";return j&&(se="DOCUMENT_VIEWER.CONVERSION_IN_PROGRESS"),le&&(se="DOCUMENT_VIEWER.CONVERSION_IS_FAILED"),q||(se="DOCUMENT_VIEWER.NO_PREVIEW_AVAILABLE"),se})),this.isDocumentAvailable$=(0,o.aj)([this.documentViewerService.isConverting$,this.documentViewerService.isConversionFailed$,this.documentViewerService.isSupported$]).pipe((0,c.U)(([j,le,q])=>q&&!j&&!le)),this.isReversedMeasures$=(0,_.Hxy)(this.documentViewerService.rotateAngle$.pipe((0,c.U)(j=>j%E.kT!=0))),this.reversedContainerWidth$=(0,o.aj)([this.isReversedMeasures$,this.originalSize$]).pipe((0,c.U)(([j,le])=>j&&le?le.width*this.zoom:void 0)),this.reversedContainerHeight$=(0,o.aj)([this.isReversedMeasures$,this.originalSize$]).pipe((0,c.U)(([j,le])=>j&&le?le.height*this.zoom:void 0)),this.isPagesLoaded$=(0,o.aj)([this.documentViewerService.isOfficeDocument$,this.documentViewerService.isImage$,this.documentViewerService.isVideo$,this.documentViewerService.pages$]).pipe((0,c.U)(([j,le,q,se])=>(j||le||q)&&!!se.length)),this.pages$=this.documentViewerService.pages$,this.isOfficeDocument$=this.documentViewerService.isOfficeDocument$,this.isVideo$=this.documentViewerService.isVideo$,this.isImage$=this.documentViewerService.isImage$,this.isDemonstration$=this.documentsManager.isOpenedFileDemonstrating$,this.isContainerFilled$=(0,o.aj)([this.isOfficeDocument$,this.isDemonstration$,this.isPagesLoaded$,this.isVideo$]).pipe((0,c.U)(([j,le,q,se])=>j&&!le||!q||se)),this.isNextDocumentPagesFetchingUntil$=this.documentsManager.isNextDocumentPagesFetchingUntil$,this.pointerX=0,this.pointerY=0,this.rotateTimeoutId=null,this.processPointerPosition=(0,a.Z)((j,le)=>this.documentsManager.setPointerPosition(j,le),u._Z.settings.CONFERENCE_FILE_DEMONSTRATION_POINTER_POSITION_UPDATE_THROTTLE_MS)}ngOnInit(){this.handlePointerRepositionOnScroll(),this.handleZoomChange(),this.handleRotateChange(),this.handleElementClass(),this.handlePointerChange()}handlePointerChange(){this.isPointerShown$.pipe((0,d.x)(),(0,v.G)(),(0,I.R)(this.destroy$)).subscribe(([x,y])=>{x&&!y&&(this.pointerX=0,this.pointerY=0),this.setPointerPosition({x:0,y:0})})}onMousemove(x){if(!this.isPointerShown)return;const y=this.containerElement.nativeElement.getBoundingClientRect();this.pointerX=x.clientX-y.left,this.pointerY=x.clientY-y.top,this.setPointerPosition({x:x.clientX-y.left,y:x.clientY-y.top}),this.emitPointerPosition()}emitPointerPosition(){this.pointerX<0||this.pointerY<0||this.onPointerMoved({x:this.pointerX,y:this.pointerY})}onPointerMoved(x){this.isPointerShown$.value&&this.processPointerPosition(x.x/this.zoom,x.y/this.zoom)}getDocumentCenterCoordinates(){const x=Math.min(this.elementRef.nativeElement.offsetWidth,this.containerElement.nativeElement.offsetWidth),y=Math.min(this.elementRef.nativeElement.offsetHeight,this.containerElement.nativeElement.offsetHeight),{scrollLeft:w,scrollTop:ce}=this.elementRef.nativeElement;return{x:w+x/2,y:ce+y/2}}runPointerReposition({clientX:x,clientY:y}){if(!this.isPointerShown)return;const w=this.containerElement.nativeElement.getBoundingClientRect();this.setPointerPosition({x:x-w.left,y:y-w.top})}runScrollReposition({width:x,height:y,centerX:w,centerY:ce}){const pe=this.containerElement.nativeElement.offsetHeight/y,ge=this.containerElement.nativeElement.offsetWidth/x;if(!ge||!pe)return;const le=this.elementRef.nativeElement.offsetHeight,se=ce*pe;this.elementRef.nativeElement.scrollLeft=w*ge-this.elementRef.nativeElement.clientWidth/2,this.elementRef.nativeElement.scrollTop=se-le/2}enableImageAnimations(){this.containerElement.nativeElement.classList.remove("no-animate")}disableImageAnimations(){this.containerElement.nativeElement.classList.add("no-animate")}handleRotateAnimationEnd(){this.rotateTimeoutId&&(clearTimeout(this.rotateTimeoutId),this.rotateTimeoutId=null),this.rotateTimeoutId=window.setTimeout(()=>{this.isReversedMeasures?this.disableImageAnimations():this.enableImageAnimations()},E.lq)}handlePointerRepositionOnScroll(){(0,l.R)(this.elementRef.nativeElement,"scroll").pipe((0,m.h)(()=>this.isPointerShown),(0,c.U)(()=>[this.elementRef.nativeElement.scrollLeft,this.elementRef.nativeElement.scrollTop]),(0,g.O)([this.elementRef.nativeElement.scrollLeft,this.elementRef.nativeElement.scrollTop]),(0,v.G)(),(0,c.U)(([x,y])=>({deltaX:y[0]-x[0],deltaY:y[1]-x[1]}))).subscribe(({deltaX:x,deltaY:y})=>{this.setPointerPosition({x:this.pointerX+x,y:this.pointerY+y})})}setPointerPosition({x,y}){this.pointerElement&&(this.pointerX=x,this.pointerY=y,this.pointerElement.nativeElement.style.transform=`translate(${this.pointerX+-12}px, ${this.pointerY+-8}px)`)}handleZoomChange(){this.documentViewerService.zoom$.pipe((0,d.x)(),(0,I.R)(this.destroy$)).subscribe(()=>{if(this.documentViewerService.isOfficeDocument)return void this.documentViewerStoreService.setPageIndexScrollTo(this.documentViewerStoreService.currentPageIndex);const x=this.containerElement.nativeElement,y=x?.scrollWidth,w=x?.scrollHeight,{x:ce,y:pe}=this.getDocumentCenterCoordinates(),ge=this.containerElement.nativeElement.getBoundingClientRect(),j=this.pointerX+ge.left,le=this.pointerY+ge.top;let q;if(!y||!w)return;const se=()=>{this.runScrollReposition({width:y,height:w,centerX:ce,centerY:pe}),this.runPointerReposition({clientX:j,clientY:le}),q=requestAnimationFrame(se)};this.ngZone.runOutsideAngular(()=>{requestAnimationFrame(se)}),setTimeout(()=>{cancelAnimationFrame(q)},E.BX)})}handleRotateChange(){this.documentViewerService.rotateAngle$.pipe((0,d.x)(),(0,I.R)(this.destroy$)).subscribe(()=>{this.enableImageAnimations(),this.handleRotateAnimationEnd()})}handleElementClass(){(0,o.aj)([this.isOfficeDocument$,this.isDocumentAvailable$]).pipe((0,c.U)(([x,y])=>{x&&y?this.elementRef.nativeElement.classList.add("fill"):this.elementRef.nativeElement.classList.remove("fill")}))}}return ne.\u0275fac=function(x){return new(x||ne)(n.Y36(E.Y5),n.Y36(_.z23),n.Y36(S.H),n.Y36(C.T),n.Y36(n.R0b),n.Y36(n.SBq))},ne.\u0275cmp=n.Xpm({type:ne,selectors:[["app-document-viewer-content"]],viewQuery:function(x,y){if(1&x&&(n.Gf(T,7),n.Gf(P,5)),2&x){let w;n.iGM(w=n.CRH())&&(y.containerElement=w.first),n.iGM(w=n.CRH())&&(y.pointerElement=w.first)}},features:[n._Bn([_.z23])],decls:17,vars:36,consts:[[1,"content",3,"mousemove"],["container",""],[4,"ngIf"],[1,"pointer-container"],["class","pointer",4,"ngIf"],[3,"message",4,"ngIf"],[1,"pointer"],["pointer",""],[4,"ngWith","ngWithAs"],[3,"pages","zoom","documentName",4,"ngIf"],[3,"src","zoom","originalSize","rotate","documentName",4,"ngIf"],[3,"videoSrc","zoom","originalSize","isFitToScreenAllowed",4,"ngIf"],[3,"pages","zoom","documentName"],[3,"src","zoom","originalSize","rotate","documentName"],[3,"videoSrc","zoom","originalSize","isFitToScreenAllowed"],[3,"message"]],template:function(x,y){1&x&&(n.TgZ(0,"div",0,1),n.NdJ("mousemove",function(ce){return y.onMousemove(ce)}),n.ALo(2,"async"),n.ALo(3,"async"),n.ALo(4,"async"),n.ALo(5,"async"),n.ALo(6,"async"),n.YNc(7,A,1,0,"iva-spinner",2),n.ALo(8,"async"),n.TgZ(9,"div",3),n.ALo(10,"async"),n.YNc(11,M,2,0,"div",4),n.ALo(12,"async"),n.YNc(13,F,5,6,"ng-container",2),n.ALo(14,"async"),n.YNc(15,J,3,5,"app-unsupported-renderer",5),n.ALo(16,"async"),n.qZA()()),2&x&&(n.Udp("width",n.lcZ(2,16,y.reversedContainerWidth$),"px")("height",n.lcZ(3,18,y.reversedContainerHeight$),"px"),n.ekj("center",n.lcZ(4,20,y.isReversedMeasures$))("fill",n.lcZ(5,22,y.isContainerFilled$))("pointer-active",n.lcZ(6,24,y.isPointerShown$)),n.xp6(7),n.Q6J("ngIf",n.lcZ(8,26,y.isNextDocumentPagesFetchingUntil$)),n.xp6(2),n.ekj("in-demonstration",n.lcZ(10,28,y.isDemonstration$)),n.xp6(2),n.Q6J("ngIf",n.lcZ(12,30,y.isPointerShown$)),n.xp6(2),n.Q6J("ngIf",n.lcZ(14,32,y.isDocumentAvailable$)),n.xp6(2),n.Q6J("ngIf",!n.lcZ(16,34,y.isDocumentAvailable$)))},styles:["[_ngcontent-%COMP%]:root{--100vh: 100vh;--100vw: 100vw}[_nghost-%COMP%]{display:flex;max-width:var(--100vw);overflow:auto;margin:auto;width:100%;height:100%}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:auto}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .pointer-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:auto;position:relative}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .pointer-container.in-demonstration[_ngcontent-%COMP%]{overflow:hidden}[_nghost-%COMP%]   .content.pointer-active[_ngcontent-%COMP%]{cursor:none}[_nghost-%COMP%]   .content.fill[_ngcontent-%COMP%]{height:100%;width:100%}[_nghost-%COMP%]   .content.fill[_ngcontent-%COMP%]   .pointer-container[_ngcontent-%COMP%]{height:100%;width:100%}[_nghost-%COMP%]   .content.center[_ngcontent-%COMP%]{align-items:center;justify-content:center}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transition:.3s all ease-out;-webkit-user-select:none;user-select:none;pointer-events:none}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .no-animate[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transition:none}.iva-drag-scroll-grabbing[_nghost-%COMP%]   .content.pointer-active[_ngcontent-%COMP%]{cursor:grabbing}.iva-drag-scroll-grabbing[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .pointer[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .pointer[_ngcontent-%COMP%]{pointer-events:none;position:absolute;background-image:url(pointer-big.b9cc2abc6b76227d.svg);background-repeat:no-repeat;background-size:contain;height:78px;width:78px;z-index:998}"],changeDetection:0}),ne})(),X=(()=>{class ne{constructor(){this.disabled=!0}onContextMenu(x){this.disabled&&x.preventDefault()}}return ne.\u0275fac=function(x){return new(x||ne)},ne.\u0275dir=n.lG2({type:ne,selectors:[["","disable-rmb",""]],hostBindings:function(x,y){1&x&&n.NdJ("contextmenu",function(ce){return y.onContextMenu(ce)})},inputs:{disabled:["disable-rmb","disabled"]}}),ne})();function K(ne,Q){1&ne&&n._UZ(0,"span",1)}let O=(()=>{class ne{constructor(){this.skeletonLines=Array(20)}}return ne.\u0275fac=function(x){return new(x||ne)},ne.\u0275cmp=n.Xpm({type:ne,selectors:[["app-document-page-skeleton"]],decls:1,vars:1,consts:[["class","skeleton-line",4,"ngFor","ngForOf"],[1,"skeleton-line"]],template:function(x,y){1&x&&n.YNc(0,K,1,0,"span",0),2&x&&n.Q6J("ngForOf",y.skeletonLines)},dependencies:[e.sg],styles:["[_nghost-%COMP%]{display:block;background:rgb(var(--white-100));padding:44px 32px 32px;overflow:hidden}[_nghost-%COMP%]   .skeleton-line[_ngcontent-%COMP%]{display:inline-block;background-color:rgba(var(--black-100),var(--transparency-10));border-radius:10px;margin:3%;height:2%;width:45%;background-image:linear-gradient(100deg,rgba(var(--white-100),var(--transparency-60)),rgba(var(--white-100),var(--transparency-30)) 50%,rgba(var(--white-100),var(--transparency-10)) 80%);background-repeat:repeat-y;background-size:50px 20%;background-position:0 0;animation:_ngcontent-%COMP%_skeleton-loading 1s infinite}[_nghost-%COMP%]   .skeleton-line[_ngcontent-%COMP%]:first-child{display:block;width:30%;margin:4% auto 8%}[_nghost-%COMP%]   .skeleton-line[_ngcontent-%COMP%]:nth-child(2n){width:30%}[_nghost-%COMP%]   .skeleton-line[_ngcontent-%COMP%]:nth-child(3n){width:55%}[_nghost-%COMP%]   .skeleton-line[_ngcontent-%COMP%]:nth-child(4n){width:25%}@keyframes _ngcontent-%COMP%_skeleton-loading{to{background-position:100% 0}}"],changeDetection:0}),ne})();function U(ne,Q){1&ne&&n._UZ(0,"iva-spinner")}function k(ne,Q){if(1&ne&&(n.TgZ(0,"app-document-page-skeleton",4),n._uU(1," > "),n.qZA()),2&ne){const x=n.oxw(2);n.Udp("width",x.originalWidth,"px")("height",x.originalHeight,"px")}}function te(ne,Q){if(1&ne&&(n.ynx(0),n.YNc(1,U,1,0,"iva-spinner",0),n.YNc(2,k,2,4,"app-document-page-skeleton",3),n.BQk()),2&ne){const x=n.oxw();n.xp6(1),n.Q6J("ngIf",x.showSpinnerOnLoading),n.xp6(1),n.Q6J("ngIf",x.showSkeletonOnLoading)}}let fe=(()=>{class ne{get src(){return this._src}set src(x){this.isLoading=!0,this._src=x,this.cd.markForCheck()}get displayStyle(){return this.isLoading&&!this.showLastImage?"none":"block"}get originalWidth(){return this.originalSize?this.originalSize.width*this.zoom:-1}get originalHeight(){return this.originalSize?this.originalSize.height*this.zoom:-1}get transformStyles(){return`rotate(${this.rotate}deg)`}get showSpinnerOnLoading(){return"spinner"===this.loaderStyle}get showSkeletonOnLoading(){return"skeleton"===this.loaderStyle}constructor(x,y,w,ce){this.documentsManager=x,this.cd=y,this.documentViewerStoreService=w,this.documentViewerService=ce,this.zoom=1,this.documentName="",this.rotate=0,this.showLastImage=!0,this.loaderStyle="spinner",this.isLoading=!0,this._src="",this.allowRMB$=this.documentsManager.allowRMB$}onLoad(x){this.isLoading=!1,!this.originalSize&&(this.documentViewerStoreService.setOriginalSize({width:x.width,height:x.height}),this.documentViewerService.toggleFitToScreen())}}return ne.\u0275fac=function(x){return new(x||ne)(n.Y36(E.Y5),n.Y36(n.sBO),n.Y36(C.T),n.Y36(S.H))},ne.\u0275cmp=n.Xpm({type:ne,selectors:[["app-image-renderer"]],inputs:{originalSize:"originalSize",zoom:"zoom",documentName:"documentName",rotate:"rotate",showLastImage:"showLastImage",loaderStyle:"loaderStyle",src:"src"},decls:4,vars:14,consts:[[4,"ngIf"],["e2e-id","document-viewer-image",3,"disable-rmb","src","alt","load"],["imgEl",""],["class","skeleton",3,"width","height",4,"ngIf"],[1,"skeleton"]],template:function(x,y){if(1&x){const w=n.EpF();n.YNc(0,te,3,2,"ng-container",0),n.TgZ(1,"img",1,2),n.NdJ("load",function(){n.CHM(w);const pe=n.MAs(2);return n.KtG(y.onLoad(pe))}),n.ALo(3,"async"),n.qZA()}2&x&&(n.Q6J("ngIf",y.isLoading),n.xp6(1),n.Udp("display",y.displayStyle)("width",y.originalWidth,"px")("height",y.originalHeight,"px")("transform",y.transformStyles),n.Q6J("disable-rmb",!n.lcZ(3,12,y.allowRMB$))("src",y.src,n.LSH)("alt",y.documentName))},dependencies:[e.O5,X,_.ORR,O,e.Ov],styles:["[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;height:100%}[_nghost-%COMP%]   img[_ngcontent-%COMP%]{transition:.3s all ease-out;-webkit-user-select:none;user-select:none}.no-animate[_nghost-%COMP%]   img[_ngcontent-%COMP%], .no-animate   [_nghost-%COMP%]   img[_ngcontent-%COMP%]{transition:none}"],changeDetection:0}),ne})();var de=t(68307);const re=["scroll"],_e=["documentPage"];function ve(ne,Q){if(1&ne&&n._UZ(0,"app-document-page-skeleton",11),2&ne){const x=n.oxw().$implicit,y=n.oxw(2);n.Udp("width",x.width*y.zoom,"px")("height",x.height*y.zoom,"px")}}const $=function(ne){return{root:ne,rootMargin:"-50% 0px 0px 0px"}};function Z(ne,Q){if(1&ne){const x=n.EpF();n.TgZ(0,"div",7),n.YNc(1,ve,1,4,"app-document-page-skeleton",8),n.TgZ(2,"img",9,10),n.NdJ("load",function(){n.CHM(x);const w=n.oxw(2);return n.KtG(w.onImageLoaded())})("intersectionChange",function(w){const pe=n.CHM(x).$implicit,ge=n.oxw(2);return n.KtG(ge.onIntersectionChange(w,pe.pageIndex))}),n.ALo(4,"async"),n.qZA()()}if(2&ne){const x=Q.$implicit,y=n.MAs(3),w=n.oxw(2);n.Udp("width",x.width*w.zoom,"px")("height",x.height*w.zoom,"px"),n.xp6(1),n.Q6J("ngIf",!y.complete),n.xp6(1),n.Udp("opacity",y.complete?1:0)("width",x.width*w.zoom,"px")("height",x.height*w.zoom,"px"),n.Q6J("disable-rmb",!n.lcZ(4,15,w.allowRMB$))("alt",w.documentName)("src",x.url,n.LSH)("intersectionObserverOptions",n.VKq(17,$,w.parentScrollElement))}}function B(ne,Q){1&ne&&(n.TgZ(0,"div",12),n._UZ(1,"iva-spinner",13),n.qZA()),2&ne&&(n.xp6(1),n.Q6J("size",32))}function ie(ne,Q){if(1&ne&&(n.TgZ(0,"virtual-scroller",2,3)(2,"div",null,4),n.YNc(4,Z,5,19,"div",5),n.qZA(),n.YNc(5,B,2,1,"div",6),n.ALo(6,"async"),n.qZA()),2&ne){const x=n.MAs(1),y=n.oxw();n.Q6J("scrollAnimationTime",0)("enableUnequalChildrenSizes",!0)("items",y.pages)("parentScroll",y.parentScrollElement)("compareItems",y.compareItems),n.xp6(4),n.Q6J("ngForOf",x.viewPortItems)("ngForTrackBy",y.trackById),n.xp6(1),n.Q6J("ngIf",n.lcZ(6,8,y.isNextDocumentPagesFetching$))}}function G(ne,Q){if(1&ne&&(n.ynx(0),n._UZ(1,"app-image-renderer",14),n.BQk()),2&ne){const x=n.oxw();n.xp6(1),n.Q6J("src",x.currentPageUrl)("zoom",x.zoom)("originalSize",x.getCurrentPageSize())("showLastImage",!1)("documentName",x.documentName)}}let Se=(()=>{class ne{set zoom(x){const y=this.parentScrollElement,w=y?.scrollWidth,ce=y?.scrollHeight,{x:pe,y:ge}=this.getDocumentCenterCoordinates();let j;if(this._zoom=x,!w||!ce||!this.documentPages?.toArray().some(se=>se.nativeElement.complete)||this.isDemonstration)return;const q=()=>{this.runScrollReposition({width:w,height:ce,centerX:pe,centerY:ge}),j=requestAnimationFrame(q)};this.ngZone.runOutsideAngular(()=>{requestAnimationFrame(q)}),setTimeout(()=>{cancelAnimationFrame(j)},E.BX)}get zoom(){return this._zoom}get pageIndex(){return!this.documentPages||0===this.visiblePages.length||this.isDemonstration?this.documentViewerStoreService.currentPageIndex:Math.min(...this.visiblePages)}get parentScrollElement(){return this.parentComponent.elementRef.nativeElement}get currentPageUrl(){return this.pages[this.documentViewerStoreService.currentPageIndex].url}get hasNextDocumentPages(){return!!this.documentsManager.currentDocumentPages$.value?.hasNext}constructor(x,y,w,ce,pe,ge,j){this.documentsManager=x,this.destroy$=y,this.documentService=w,this.ngZone=ce,this.parentComponent=pe,this.documentViewerStoreService=ge,this.cd=j,this.lastDemonstrationToggledDocumentId=null,this.pages=[],this.documentName="",this.isDemonstration$=this.documentsManager.isOpenedFileDemonstrating$,this.isDemonstration=!1,this.visiblePages=[],this.skeletonLines=Array(20),this._zoom=1,this._isDemonstration=!1,this.isNextDocumentPagesFetching$=this.documentsManager.isNextDocumentPagesFetching$,this.compareItems=(le,q)=>le?.resourceId===q?.resourceId,this.allowRMB$=this.documentsManager.allowRMB$}ngOnInit(){this.documentViewerStoreService.setCurrentPageIndex(0),this.parentScrollElement.scrollTop=0,this.parentScrollElement.scrollLeft=0,this.cd.markForCheck(),this.documentViewerStoreService.pageIndexScrollTo$.pipe((0,m.h)(x=>null!==x),(0,de.b)(()=>this.documentViewerStoreService.setPageIndexScrollTo(null)),(0,I.R)(this.destroy$)).subscribe(x=>this.goToPage(x)),this.handleDemonstrationChange(),this.fetchPagesToDemonstrationPage(),this.initScrollSubscription()}initScrollSubscription(){(0,l.R)(this.parentScrollElement,"scroll").pipe((0,m.h)(()=>this.hasNextDocumentPages&&!this.isNextDocumentPagesFetching$.value&&(0,_.gx1)(this.virtualScroller)),(0,I.R)(this.destroy$)).subscribe(()=>{this.documentsManager.fetchNextDocumentPagesUntil$().pipe((0,I.R)(this.destroy$)).subscribe()})}onImageLoaded(){this.cd.markForCheck()}handleDemonstrationChange(){this.isDemonstration$.pipe((0,I.R)(this.destroy$)).subscribe(x=>{const y=this.documentService.currentDocument?.nodeId===this.lastDemonstrationToggledDocumentId,{scrollTop:w,scrollLeft:ce}=this.getScrollPositionsToRestore();this.lastDemonstrationToggledDocumentId=this.documentService.currentDocument?.nodeId,this.isDemonstration=x,this.cd.markForCheck(),y&&this.restoreScrollPositions({scrollTop:w,scrollLeft:ce})})}fetchPagesToDemonstrationPage(){this.isDemonstration&&this.documentsManager.fetchNextDocumentPagesUntil$(this.documentsManager.presentation$.value.state.pageIndex).pipe((0,I.R)(this.destroy$)).subscribe()}trackById(x,y){return y.resourceId}onIntersectionChange(x,y){this.isDemonstration||this.documentViewerStoreService.isScrollingToPage||(x?this.visiblePages.push(y):this.visiblePages=this.visiblePages.filter(w=>w!==y),this.documentViewerStoreService.setCurrentPageIndex(this.pageIndex))}runScrollReposition({width:x,height:y,centerX:w,centerY:ce}){const pe=this.parentScrollElement.scrollHeight/y,ge=this.parentScrollElement.scrollWidth/x;if(!ge||!pe)return;const le=this.parentScrollElement.offsetHeight,se=ce*pe;this.parentScrollElement.scrollLeft=w*ge-this.parentScrollElement.clientWidth/2,this.parentScrollElement.scrollTop=se-le/2,this.virtualScroller?.invalidateAllCachedMeasurements()}getDocumentCenterCoordinates(){const x=this.parentScrollElement.offsetWidth,y=this.parentScrollElement.offsetHeight,{scrollLeft:w,scrollTop:ce}=this.parentScrollElement;return{x:w+x/2,y:ce+y/2}}goToPage(x){if(this.virtualScroller)return this.documentViewerStoreService.setIsScrollingToPage(!0),void this.virtualScroller.scrollToIndex(x,!0,0,300,()=>{this.visiblePages=[],this.documentViewerStoreService.setIsScrollingToPage(!1)});this.parentScrollElement.scrollTop=0,this.parentScrollElement.scrollLeft=0,this.cd.markForCheck()}getCurrentPageSize(){const{width:x,height:y}=this.pages[this.documentViewerStoreService.currentPageIndex];return{width:x,height:y}}getScrollPositionsToRestore(){const y=this.pages.slice(0,this.pageIndex).reduce((ge,j)=>ge+j.height*this.zoom+10,0),w=this.parentScrollElement.scrollTop;return{scrollTop:this.isDemonstration?w+y:w-y,scrollLeft:this.parentScrollElement.scrollLeft}}restoreScrollPositions({scrollTop:x,scrollLeft:y}){setTimeout(()=>{this.parentScrollElement.scrollTop=x,this.parentScrollElement.scrollLeft=y})}}return ne.\u0275fac=function(x){return new(x||ne)(n.Y36(E.Y5),n.Y36(_.z23),n.Y36(S.H),n.Y36(n.R0b),n.Y36(ee),n.Y36(C.T),n.Y36(n.sBO))},ne.\u0275cmp=n.Xpm({type:ne,selectors:[["app-office-document-renderer"]],viewQuery:function(x,y){if(1&x&&(n.Gf(re,5),n.Gf(re,5,n.SBq),n.Gf(_e,5)),2&x){let w;n.iGM(w=n.CRH())&&(y.virtualScroller=w.first),n.iGM(w=n.CRH())&&(y.virtualScrollerElem=w.first),n.iGM(w=n.CRH())&&(y.documentPages=w)}},inputs:{pages:"pages",documentName:"documentName",zoom:"zoom"},features:[n._Bn([_.z23])],decls:2,vars:2,consts:[[3,"scrollAnimationTime","enableUnequalChildrenSizes","items","parentScroll","compareItems",4,"ngIf"],[4,"ngIf"],[3,"scrollAnimationTime","enableUnequalChildrenSizes","items","parentScroll","compareItems"],["scroll",""],["container",""],["class","document-page-wrapper no-animate",3,"width","height",4,"ngFor","ngForOf","ngForTrackBy"],["class","layout-row layout-align-center-center",4,"ngIf"],[1,"document-page-wrapper","no-animate"],["class","skeleton",3,"width","height",4,"ngIf"],["ivaIntersectionObserver","","e2e-id","document-viewer-content-document-page","loading","lazy",1,"document-page",3,"disable-rmb","alt","src","intersectionObserverOptions","load","intersectionChange"],["documentPage",""],[1,"skeleton"],[1,"layout-row","layout-align-center-center"],["inline","",3,"size"],["loaderStyle","skeleton",3,"src","zoom","originalSize","showLastImage","documentName"]],template:function(x,y){1&x&&(n.YNc(0,ie,7,10,"virtual-scroller",0),n.YNc(1,G,2,5,"ng-container",1)),2&x&&(n.Q6J("ngIf",!y.isDemonstration),n.xp6(1),n.Q6J("ngIf",y.isDemonstration))},dependencies:[e.sg,e.O5,X,_.Z76,_.Vwb,_.ORR,fe,O,e.Ov],styles:["virtual-scroller[_ngcontent-%COMP%]{width:100%;height:100%}.document-page-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin:0 auto 10px}.skeleton[_ngcontent-%COMP%]{position:absolute}"],changeDetection:0}),ne})();function Oe(ne,Q){if(1&ne){const x=n.EpF();n.TgZ(0,"button",4),n.NdJ("click",function(){n.CHM(x);const w=n.oxw();return n.KtG(w.download())}),n._uU(1),n.ALo(2,"translate"),n.qZA()}2&ne&&(n.xp6(1),n.hij(" ",n.lcZ(2,1,"DOCUMENT_VIEWER.DOWNLOAD")," "))}let Ae=(()=>{class ne{constructor(x){this.documentViewerService=x,this.canDownload$=this.documentViewerService.canDownload$,this.mimeType$=this.documentViewerService.document$.pipe((0,c.U)(y=>y?.resource.mimeType||""))}download(){this.documentViewerService.downloadDocument()}}return ne.\u0275fac=function(x){return new(x||ne)(n.Y36(S.H))},ne.\u0275cmp=n.Xpm({type:ne,selectors:[["app-unsupported-renderer"]],inputs:{message:"message"},decls:7,vars:7,consts:[["e2e-id","document-viewer-not-available-message",1,"unsupported-info"],["size","large","theme","dark",3,"mimeType"],[1,"not-available-text"],["iva-button","","class","download-button","e2e-id","document-viewer-unsupported-download",3,"click",4,"ngIf"],["iva-button","","e2e-id","document-viewer-unsupported-download",1,"download-button",3,"click"]],template:function(x,y){1&x&&(n.TgZ(0,"div",0),n._UZ(1,"iva-file-icon",1),n.ALo(2,"async"),n.TgZ(3,"span",2),n._uU(4),n.qZA(),n.YNc(5,Oe,3,3,"button",3),n.ALo(6,"async"),n.qZA()),2&x&&(n.xp6(1),n.Q6J("mimeType",n.lcZ(2,3,y.mimeType$)),n.xp6(3),n.hij(" ",y.message," "),n.xp6(1),n.Q6J("ngIf",n.lcZ(6,5,y.canDownload$)))},dependencies:[_.r0F,e.O5,_.f7o,e.Ov,s.X$],styles:["[_nghost-%COMP%]{display:flex;align-items:center;flex-direction:column;height:100%}.unsupported-info[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;margin:auto}.unsupported-info[_ngcontent-%COMP%]   .not-available-text[_ngcontent-%COMP%]{margin-top:20px;color:get-color(white-100)}.unsupported-info[_ngcontent-%COMP%]   .download-button[_ngcontent-%COMP%]{margin-top:32px;min-width:130px}"],changeDetection:0}),ne})();var Me=t(8239),Te=t(26215),Re=t(25917),xe=t(16803),Le=t(51468),ye=t(89017),Ee=t(34330);const me=["video"],ue=["extraFoldableButtons"];function Ie(ne,Q){1&ne&&n._UZ(0,"iva-spinner")}function Ne(ne,Q){if(1&ne){const x=n.EpF();n.TgZ(0,"button",22),n.NdJ("click",function(){n.CHM(x);const w=n.oxw(2);return n.KtG(w.playPause())}),n.ALo(1,"async"),n.ALo(2,"translate"),n._UZ(3,"svg-icon",16),n.qZA()}if(2&ne){const x=n.oxw(2);n.Q6J("disabled",!n.lcZ(1,3,x.canPlay$))("tooltip",n.lcZ(2,5,x.playPauseTitle)),n.xp6(3),n.Q6J("src",x.playPauseIcon)}}function Ve(ne,Q){if(1&ne){const x=n.EpF();n.TgZ(0,"button",23),n.NdJ("click",function(){n.CHM(x);const w=n.oxw(2);return n.KtG(w.repeat())}),n.ALo(1,"async"),n.ALo(2,"translate"),n._UZ(3,"svg-icon",24),n.qZA()}if(2&ne){const x=n.oxw(2);n.Q6J("disabled",!n.lcZ(1,2,x.canPlay$))("tooltip",n.lcZ(2,4,"DOCUMENT_VIEWER.VIDEO_PLAYER.REPEAT"))}}function je(ne,Q){1&ne&&(n.TgZ(0,"button",25),n._UZ(1,"svg-icon",26),n.qZA())}function ze(ne,Q){1&ne&&n._UZ(0,"div",14)}function He(ne,Q){if(1&ne){const x=n.EpF();n.TgZ(0,"div",27)(1,"button",28),n.NdJ("click",function(){const ce=n.CHM(x).item;return n.KtG(ce.onClick())}),n.ALo(2,"translate"),n.ALo(3,"maybeAsync"),n._UZ(4,"svg-icon",16),n.ALo(5,"maybeAsync"),n.qZA(),n.YNc(6,ze,1,0,"div",29),n.qZA()}if(2&ne){const x=Q.item,y=Q.last;n.xp6(1),n.Q6J("tooltip",n.lcZ(2,3,n.lcZ(3,5,x.title))),n.xp6(3),n.Q6J("src",n.lcZ(5,7,x.iconSrc)),n.xp6(2),n.Q6J("ngIf",!y)}}function we(ne,Q){if(1&ne){const x=n.EpF();n.TgZ(0,"div",7),n.YNc(1,Ne,4,7,"button",8),n.ALo(2,"async"),n.YNc(3,Ve,4,6,"button",9),n.ALo(4,"async"),n.TgZ(5,"div",10),n._uU(6),n.ALo(7,"async"),n.ALo(8,"formatDuration"),n.ALo(9,"async"),n.qZA(),n.TgZ(10,"iva-seeker",11,12),n.NdJ("valueChange",function(w){n.CHM(x);const ce=n.oxw();return n.KtG(ce.setCurrentTimeThrottled(w))}),n.ALo(12,"async"),n.ALo(13,"async"),n.ALo(14,"async"),n.qZA(),n.TgZ(15,"div",13),n._uU(16),n.ALo(17,"async"),n.ALo(18,"formatDuration"),n.ALo(19,"async"),n.qZA(),n._UZ(20,"div",14),n.TgZ(21,"button",15),n.NdJ("click",function(){n.CHM(x);const w=n.oxw();return n.KtG(w.toggleMute())}),n.ALo(22,"translate"),n._UZ(23,"svg-icon",16),n.qZA(),n.TgZ(24,"iva-seeker",17),n.NdJ("valueChange",function(w){n.CHM(x);const ce=n.oxw();return n.KtG(ce.setVolume(w))}),n.ALo(25,"async"),n.qZA(),n._UZ(26,"div",14),n.YNc(27,je,2,0,"ng-template",null,18,n.W1O),n.YNc(29,He,7,9,"ng-template",null,19,n.W1O),n._UZ(31,"iva-foldable-buttons",20,21),n.ALo(33,"async"),n.ALo(34,"async"),n.qZA()}if(2&ne){const x=n.MAs(28),y=n.MAs(30),w=n.oxw();n.Q6J("@opacityShowHide",void 0),n.xp6(1),n.Q6J("ngIf",!n.lcZ(2,27,w.isEnded$)),n.xp6(2),n.Q6J("ngIf",n.lcZ(4,29,w.isEnded$)),n.xp6(3),n.hij(" ",n.lcZ(7,31,n.Dn7(8,33,n.lcZ(9,37,w.currentTime$),"s","HH:mm:ss"))," "),n.xp6(4),n.Q6J("disabled",!n.lcZ(12,39,w.canPlay$))("showThumb",!0)("showThumbTitle",!0)("thumbTitleGetter",w.getProgressTitle)("showHoverTitle",!0)("hoverTitleGetter",w.getProgressTitle)("min",0)("max",1)("semiProgress",n.lcZ(13,41,w.fetchProgress$))("value",n.lcZ(14,43,w.progressRatio$)),n.xp6(6),n.hij(" ",n.lcZ(17,45,n.Dn7(18,47,n.lcZ(19,51,w.shownDuration$),"s","HH:mm:ss"))," "),n.xp6(5),n.Q6J("tooltip",n.lcZ(22,53,w.muteTitle)),n.xp6(2),n.Q6J("src",w.muteIcon),n.xp6(1),n.Q6J("showThumb",!0)("showThumbTitle",!0)("thumbTitleGetter",w.getVolumeTitle)("min",0)("max",1)("value",n.lcZ(25,55,w.volume$)||0),n.xp6(7),n.Q6J("buttonTemplate",x)("isFolded",n.lcZ(33,57,w.isSmallScreen$))("items",n.lcZ(34,59,w.extraButtons$))("itemUnfoldedTemplate",y)}}let Fe=(()=>{class ne{get videoEl(){return this.videoElRef?.nativeElement}get isPaused(){return!!this.videoEl?.paused}get playPauseIcon(){return this.isPaused?"assets/icons/icon16/play.svg":"assets/icons/icon16/pause.svg"}get playPauseTitle(){return this.isPaused?"DOCUMENT_VIEWER.VIDEO_PLAYER.PLAY":"DOCUMENT_VIEWER.VIDEO_PLAYER.PAUSE"}get muteIcon(){return this.videoEl?.muted?"assets/icons/icon16/speaker-off-stroke.svg":"assets/icons/icon16/speaker-on-fill.svg"}get muteTitle(){return this.videoEl?.muted?"DOCUMENT_VIEWER.VIDEO_PLAYER.UNMUTE":"DOCUMENT_VIEWER.VIDEO_PLAYER.MUTE"}get inlineIconSrc(){return this.isInlineViewMode?"assets/icons/icon16/inline-mode-off.svg":"assets/icons/icon16/inline-mode-on.svg"}get fitToScreenTitle(){return this.isFittedToScreen?"DOCUMENT_VIEWER.VIDEO_PLAYER.INITIAL_SIZE":"DOCUMENT_VIEWER.VIDEO_PLAYER.FIT_TO_SCREEN"}get inlineTitle(){return this.isInlineViewMode?"DOCUMENT_VIEWER.VIDEO_PLAYER.OVERLAY_MODE":"DOCUMENT_VIEWER.VIDEO_PLAYER.INLINE_MODE"}get fitToScreenIconSrc(){return this.isFittedToScreen?"assets/icons/icon24/1-1.svg":"assets/icons/icon24/fit-to-page.svg"}constructor(x,y,w,ce){this.destroy$=x,this.formatDurationPipe=y,this.fullscreenService=w,this.pageSizeService=ce,this.autoplay=!0,this.isInlineViewMode=!1,this.inlineViewModeAllowed=!0,this.isFittedToScreen=!1,this.isFitToScreenAllowed=!1,this.disableVideoRmb=!1,this.videoError=new n.vpe,this.toggleInlineMode=new n.vpe,this.toggleFitToScreen=new n.vpe,this.toggleFullScreenAndFitToScreen=new n.vpe,this.isInlineToggleButtonVisible$=this.fullscreenService.isFullscreen$.pipe((0,c.U)(pe=>!pe)),this.fullScreenIcon$=this.fullscreenService.isFullscreen$.pipe((0,c.U)(pe=>pe?"assets/icons/icon16/fullscreen-off.svg":"assets/icons/icon16/fullscreen-on.svg")),this.fullScreenTitle$=this.fullscreenService.isFullscreen$.pipe((0,c.U)(pe=>pe?"DOCUMENT_VIEWER.VIDEO_PLAYER.WINDOWED_MODE":"DOCUMENT_VIEWER.VIDEO_PLAYER.FULLSCREEN_MODE")),this.isMetaDataFetched$=new Te.X(!1),this.duration$=new Te.X(-1),this.shownDuration$=this.duration$.pipe((0,c.U)(pe=>pe<1?1:Math.floor(pe))),this.currentTime$=new Te.X(0),this.canPlay$=new Te.X(!1),this.canPlayThrough$=new Te.X(!1),this.isInSeek$=new Te.X(!1),this.isMuted$=new Te.X(!1),this.defaultVolume=u._Z.settings.VIDEO_PLAYER_DEFAULT_VOLUME,this.volume$=new Te.X(this.defaultVolume),this.isEnded$=new Te.X(!1),this.isWaiting$=new Te.X(!1),this.isControlPanelVisible$=new Te.X(!0),this.isVideoBusy$=(0,o.aj)([this.canPlay$,this.isWaiting$,this.isInSeek$]).pipe((0,c.U)(([pe,ge,j])=>!pe||ge||j)),this.progressRatio$=(0,o.aj)([this.duration$,this.currentTime$]).pipe((0,c.U)(([pe,ge])=>ge/pe)),this.fetchProgress$=new Te.X([]),this.isSmallScreen$=this.pageSizeService.isExtraSmallScreen$,this.extraButtons$=(0,Re.of)([]),this.setCurrentTimeThrottled=(0,a.Z)(this.setCurrentTime.bind(this),u._Z.settings.VIDEO_PLAYER_SEEK_THROTTLE_MS),this.getVolumeTitle=pe=>Math.round(100*pe).toString(),this.getProgressTitle=pe=>this.formatDurationPipe.transformInstant(pe*this.duration$.value,"s","HH:mm:ss")||""}ngOnInit(){this.initVideoEvents(),this.initEvents(),this.startHideControlPanelTimeout()}ngOnChanges(){this.updateFoldableButtons()}ngAfterViewInit(){this.autoplay&&this.play()}ngOnDestroy(){window.clearInterval(this.bufferedUpdateTimerId),window.clearTimeout(this.hideControlPanelTimeoutId)}updateFoldableButtons(){this.extraButtons$=this.isInlineToggleButtonVisible$.pipe((0,c.U)(x=>x&&this.inlineViewModeAllowed),(0,c.U)(x=>{const y=[];return this.isFitToScreenAllowed&&y.push({title:this.fitToScreenTitle,iconSrc:this.fitToScreenIconSrc,onClick:()=>{this.closeExtraFoldableButtonsPopover(),this.toggleFitToScreen.emit()}}),x&&y.push({title:this.inlineTitle,iconSrc:this.inlineIconSrc,onClick:()=>{this.closeExtraFoldableButtonsPopover(),this.toggleInlineMode.emit()}}),y.push({title:this.fullScreenTitle$,iconSrc:this.fullScreenIcon$,onClick:()=>{this.toggleFullscreen(),this.closeExtraFoldableButtonsPopover()}}),y}))}playPause(){var x=this;return(0,Me.Z)(function*(){x.videoEl&&(x.isPaused?yield x.play():x.pause())})()}play(){var x=this;return(0,Me.Z)(function*(){const y=x.videoEl;if(y?.paused){try{yield y.play()}catch(w){console.error(`Cannot play video due to ${w}`)}x.startHideControlPanelTimeout()}})()}pause(){this.videoEl?.pause(),this.isControlPanelVisible$.next(!0),window.clearTimeout(this.hideControlPanelTimeoutId)}repeat(){var x=this;return(0,Me.Z)(function*(){x.videoEl&&(x.setCurrentTime(0),yield x.play())})()}setCurrentTime(x){!this.videoEl||isNaN(this.videoEl.duration)||(this.videoEl.currentTime=this.videoEl.duration*x,this.isEnded$.next(!1))}toggleMute(){this.volume$.next(this.isMuted$.value?this.defaultVolume:0),this.isMuted$.next(!this.isMuted$.value)}setVolume(x){this.isMuted$.next(0===x),this.volume$.next(x)}toggleFullscreen(){this.toggleFullScreenAndFitToScreen.emit()}toggleVideoPlay(){var x=this;return(0,Me.Z)(function*(){x.isEnded$.value?yield x.repeat():yield x.playPause()})()}captureVideoFrame(){if(!this.videoEl)return;const x=u._Z.settings.VIDEO_PLAYER_PREVIEW_WIDTH;let y=document.querySelector("canvas");const w=!!y;y=y||document.createElement("canvas"),y.height=x/(this.videoEl.videoWidth/this.videoEl.videoHeight),y.width=x;const pe=y.getContext("2d");pe&&(pe.drawImage(this.videoEl,0,0,y.width,y.height),w||document.body.appendChild(y),y.style.position="absolute",y.style.top="0",y.style.left="0",y.style.zIndex="99999")}updateBuffered(){const x=this.videoEl?.buffered;if(!x)return;const y=this.duration$.value,w=[];for(let ce=0;ce<x.length;ce++)w.push({start:x.start(ce)/y,end:x.end(ce)/y});this.fetchProgress$.next(w)}initVideoEvents(){this.videoEl&&((0,l.R)(this.videoEl,"loadedmetadata").pipe((0,I.R)(this.destroy$)).subscribe(()=>{this.isMetaDataFetched$.next(!0),this.duration$.next(this.videoEl?.duration)}),(0,l.R)(this.videoEl,"timeupdate").pipe((0,I.R)(this.destroy$)).subscribe(()=>this.currentTime$.next(this.videoEl?.currentTime)),(0,l.R)(this.videoEl,"canplay").pipe((0,I.R)(this.destroy$)).subscribe(()=>this.canPlay$.next(!0)),(0,l.R)(this.videoEl,"canplaythrough").pipe((0,I.R)(this.destroy$)).subscribe(()=>this.canPlayThrough$.next(!0)),(0,l.R)(this.videoEl,"seeking").pipe((0,I.R)(this.destroy$)).subscribe(()=>this.isInSeek$.next(!0)),(0,l.R)(this.videoEl,"seeked").pipe((0,I.R)(this.destroy$)).subscribe(()=>this.isInSeek$.next(!1)),(0,l.R)(this.videoEl,"durationchange").pipe((0,I.R)(this.destroy$)).subscribe(()=>this.currentTime$.next(this.videoEl?.currentTime)),(0,l.R)(this.videoEl,"progress").pipe((0,I.R)(this.destroy$)).subscribe(()=>this.updateBuffered()),(0,l.R)(this.videoEl,"ended").pipe((0,I.R)(this.destroy$)).subscribe(()=>this.isEnded$.next(!0)),(0,l.R)(this.videoEl,"waiting").pipe((0,I.R)(this.destroy$)).subscribe(()=>this.isWaiting$.next(!0)),(0,l.R)(this.videoEl,"playing").pipe((0,I.R)(this.destroy$)).subscribe(()=>this.isWaiting$.next(!1)),(0,l.R)(this.videoEl,"error").pipe((0,I.R)(this.destroy$)).subscribe(()=>this.videoError.emit()),this.bufferedUpdateTimerId=window.setInterval(()=>this.updateBuffered(),u._Z.settings.VIDEO_PLAYER_FETCH_PROGRESS_UPDATE_INTERVAL_MS),(0,l.R)(document,"keydown",{capture:!0}).pipe((0,xe.p)(u._Z.settings.VIDEO_PLAYER_KEYDOWN_THROTTLE_MS),(0,I.R)(this.destroy$)).subscribe(x=>this.processKeys(x)))}initEvents(){(0,l.R)(window,"mousemove").pipe((0,I.R)(this.destroy$)).subscribe(()=>{this.isControlPanelVisible$.next(!0),this.startHideControlPanelTimeout()}),(0,l.R)(window,"resize").pipe((0,I.R)(this.destroy$)).subscribe(()=>this.closeExtraFoldableButtonsPopover())}processKeys(x){const y={mute:"m",playPause:" "};switch(x.key){case y.mute:this.toggleMute();break;case y.playPause:this.toggleVideoPlay()}Object.values(y).includes(x.key)&&(x.stopPropagation(),x.preventDefault())}startHideControlPanelTimeout(){window.clearTimeout(this.hideControlPanelTimeoutId),this.hideControlPanelTimeoutId=window.setTimeout(()=>this.isControlPanelVisible$.next(!1),u._Z.settings.VIDEO_PLAYER_HIDE_CONTROL_PANEL_TIMEOUT_MS)}closeExtraFoldableButtonsPopover(){this.extraFoldableButtons?.overlayRef?.close()}}return ne.\u0275fac=function(x){return new(x||ne)(n.Y36(_.z23),n.Y36(Le.JJ),n.Y36(ye.n),n.Y36(Ee.g))},ne.\u0275cmp=n.Xpm({type:ne,selectors:[["app-video-player"]],viewQuery:function(x,y){if(1&x&&(n.Gf(me,7),n.Gf(ue,7)),2&x){let w;n.iGM(w=n.CRH())&&(y.videoElRef=w.first),n.iGM(w=n.CRH())&&(y.extraFoldableButtons=w.first)}},inputs:{autoplay:"autoplay",videoSrc:"videoSrc",width:"width",height:"height",isInlineViewMode:"isInlineViewMode",inlineViewModeAllowed:"inlineViewModeAllowed",isFittedToScreen:"isFittedToScreen",isFitToScreenAllowed:"isFitToScreenAllowed",disableVideoRmb:"disableVideoRmb"},outputs:{videoError:"videoError",toggleInlineMode:"toggleInlineMode",toggleFitToScreen:"toggleFitToScreen",toggleFullScreenAndFitToScreen:"toggleFullScreenAndFitToScreen"},features:[n._Bn([_.z23]),n.TTD],decls:11,vars:22,consts:[[1,"layout-row","video-container",3,"click"],[4,"ngIf"],["src","assets/icons/icon16/play.svg",1,"play-pause"],["src","assets/icons/icon16/pause.svg",1,"play-pause"],["playsinline","",3,"disable-rmb","src","muted","volume"],["video",""],["class","layout-row layout-align-start-center control-panel",4,"ngIf"],[1,"layout-row","layout-align-start-center","control-panel"],["iva-icon-button","","class","layout-right-margin_16 flex-noshrink","e2e-id","video-player--play-pause-button",3,"disabled","tooltip","click",4,"ngIf"],["iva-icon-button","","class","layout-right-margin_16 flex-noshrink","e2e-id","video-player--repeat-button",3,"disabled","tooltip","click",4,"ngIf"],[1,"layout-right-margin_16","flex-noshrink"],["e2e-id","video-player--progress-seeker",1,"layout-right-margin_16","flex-grow",3,"disabled","showThumb","showThumbTitle","thumbTitleGetter","showHoverTitle","hoverTitleGetter","min","max","semiProgress","value","valueChange"],["progressSeeker","ivaSeeker"],[1,"flex-noshrink"],[1,"splitter"],["iva-icon-button","","e2e-id","video-player--mute-button",1,"layout-right-margin_16","flex-noshrink",3,"tooltip","click"],[3,"src"],["e2e-id","video-player--volume-seeker",1,"layout-right-margin_16","volume-seeker",3,"showThumb","showThumbTitle","thumbTitleGetter","min","max","value","valueChange"],["buttonTmpl",""],["unfoldedTmpl",""],[3,"buttonTemplate","isFolded","items","itemUnfoldedTemplate"],["extraFoldableButtons",""],["iva-icon-button","","e2e-id","video-player--play-pause-button",1,"layout-right-margin_16","flex-noshrink",3,"disabled","tooltip","click"],["iva-icon-button","","e2e-id","video-player--repeat-button",1,"layout-right-margin_16","flex-noshrink",3,"disabled","tooltip","click"],["src","assets/icons/icon16/repeat.svg"],["iva-icon-button",""],["src","assets/icons/icon16/3-dots.svg"],[1,"layout","layout-align-center-center"],["iva-icon-button","","e2e-id","video-player--extra-control",1,"layout","flex-noshrink",3,"tooltip","click"],["class","splitter",4,"ngIf"]],template:function(x,y){if(1&x&&(n.TgZ(0,"div",0),n.NdJ("click",function(){return y.toggleVideoPlay()}),n.YNc(1,Ie,1,0,"iva-spinner",1),n.ALo(2,"async"),n._UZ(3,"svg-icon",2)(4,"svg-icon",3)(5,"video",4,5),n.ALo(7,"async"),n.ALo(8,"async"),n.qZA(),n.YNc(9,we,35,61,"div",6),n.ALo(10,"async")),2&x){const w=n.MAs(6);n.xp6(1),n.Q6J("ngIf",n.lcZ(2,14,y.isVideoBusy$)),n.xp6(2),n.ekj("shown",!w.paused),n.xp6(1),n.ekj("shown",w.paused),n.xp6(1),n.Udp("width",y.width,"px")("height",y.height,"px"),n.Q6J("disable-rmb",y.disableVideoRmb)("src",y.videoSrc,n.LSH)("muted",n.lcZ(7,16,y.isMuted$))("volume",n.lcZ(8,18,y.volume$)),n.xp6(4),n.Q6J("ngIf",n.lcZ(10,20,y.isControlPanelVisible$))}},dependencies:[e.O5,_.bk9,_.r2H,_.XXv,_.nZ5,_.ORR,_.i9q,X,e.Ov,s.X$,Le.JJ,_.Da$],styles:["[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%;position:relative}[_nghost-%COMP%]   .video-container[_ngcontent-%COMP%]{cursor:pointer;position:relative;display:flex;align-items:center;justify-content:center;width:100%;height:100%;max-width:100%;max-height:100%}@keyframes _ngcontent-%COMP%_play-pause{0%{opacity:0;transform:scale(1)}50%{opacity:.75;transform:scale(3)}to{opacity:0;transform:scale(1)}}[_nghost-%COMP%]   .video-container[_ngcontent-%COMP%]   svg-icon.play-pause[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);opacity:0;will-change:transform;will-change:opacity}[_nghost-%COMP%]   .video-container[_ngcontent-%COMP%]   svg-icon.play-pause[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{fill:rgb(var(--font-main-color))}[_nghost-%COMP%]   .video-container[_ngcontent-%COMP%]   svg-icon.play-pause.shown[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_play-pause .8s}[_nghost-%COMP%]   video[_ngcontent-%COMP%]{cursor:pointer;max-width:100%;max-height:100%}[_nghost-%COMP%]   .control-panel[_ngcontent-%COMP%]{padding:20px 16px;background-color:rgba(var(--neutral-color-1),var(--transparency-80));border-radius:10px;position:absolute;left:0;bottom:0;margin:0 24px 16px;width:calc(100% - 48px)}[_nghost-%COMP%]   .control-panel[_ngcontent-%COMP%]   .volume-seeker[_ngcontent-%COMP%]{width:100px}[_nghost-%COMP%]   .control-panel[_ngcontent-%COMP%]   .splitter[_ngcontent-%COMP%]{margin-left:16px;margin-right:16px;width:1px;height:20px;background-color:rgb(var(--neutral-color-6))}"],data:{animation:[_.D_1]},changeDetection:0}),ne})();var $e=t(98640),Je=t(43190);function be(ne,Q){1&ne&&n._UZ(0,"iva-spinner")}function Xe(ne,Q){if(1&ne){const x=n.EpF();n.TgZ(0,"video",19),n.NdJ("canplay",function(){n.CHM(x);const w=n.oxw(2);return n.KtG(w.canplay=!0)}),n.ALo(1,"async"),n.qZA()}if(2&ne){const x=Q.$implicit,y=n.oxw(2);n.Udp("width",x?x.width:-1,"px")("height",x?x.height:-1,"px"),n.Q6J("srcObject",n.lcZ(1,6,y.videoDemonstrateMediaStream$))("muted",!0)}}function qe(ne,Q){if(1&ne){const x=n.EpF();n.TgZ(0,"div",14),n.NdJ("click",function(){n.CHM(x);const w=n.oxw();return n.KtG(w.togglePlay())}),n.YNc(1,be,1,0,"iva-spinner",15),n._UZ(2,"svg-icon",16)(3,"svg-icon",17),n.YNc(4,Xe,2,8,"video",18),n.ALo(5,"async"),n.qZA()}if(2&ne){const x=Q.$implicit,y=n.oxw();n.xp6(1),n.Q6J("ngIf",!y.canplay),n.xp6(1),n.ekj("shown",!x),n.xp6(1),n.ekj("shown",x),n.xp6(1),n.Q6J("ngWithAs",n.lcZ(5,6,y.originalSize$))}}function ke(ne,Q){if(1&ne){const x=n.EpF();n.TgZ(0,"button",12),n.NdJ("click",function(){n.CHM(x);const w=n.oxw();return n.KtG(w.toggleInlineMode())}),n.ALo(1,"translate"),n.ALo(2,"async"),n._UZ(3,"svg-icon",5),n.ALo(4,"async"),n.qZA()}if(2&ne){const x=n.oxw();n.Q6J("tooltip",n.lcZ(1,2,n.lcZ(2,4,x.inlineTitle$))),n.xp6(3),n.Q6J("src",n.lcZ(4,6,x.inlineIconSrc$))}}const Be=function(){return{top:20,left:20,right:20,bottom:20}};let st=(()=>{class ne{get isPaused(){return this.isPaused$.value}get duration(){return this.duration$.value||0}constructor(x,y,w,ce,pe){this.documentsManager=x,this.documentOpenerService=y,this.documentViewerService=w,this.formatDurationPipe=ce,this.fullscreenService=pe,this.MOVER_NAME="video-demonstrate-controls",this.canplay=!1,this.videoDemonstrateMediaStream$=this.documentsManager.videoDemonstrateMediaStream$,this._presentation=null,this.presentation$=this.documentsManager.presentation$.pipe((0,de.b)(ge=>this._presentation=ge),(0,c.U)(ge=>ge),(0,m.h)(ge=>!!ge)),this.isPaused$=(0,_.Hxy)(this.presentation$.pipe((0,c.U)(ge=>!ge.state?.startDate))),this.playPauseIcon$=this.isPaused$.pipe((0,c.U)(ge=>ge?"assets/icons/icon16/play.svg":"assets/icons/icon16/pause.svg")),this.playPauseTitle$=this.isPaused$.pipe((0,c.U)(ge=>ge?"DOCUMENT_VIEWER.VIDEO_PLAYER.PLAY":"DOCUMENT_VIEWER.VIDEO_PLAYER.PAUSE")),this.currentTime$=new Te.X(0),this.duration$=(0,_.Hxy)(this.presentation$.pipe((0,c.U)(ge=>ge.state?.duration))),this.shownDuration$=this.duration$.pipe((0,c.U)(ge=>ge<1?1:Math.floor(ge))),this.progressRatio$=(0,o.aj)([this.duration$,this.currentTime$]).pipe((0,c.U)(([ge,j])=>j/ge)),this.originalSize$=this.documentViewerService.originalSize$,this.isInlineViewMode$=this.documentViewerService.isInlineViewMode$,this.hasInlineContainer$=this.documentOpenerService.inlineModeViewContainerRef$.pipe((0,c.U)(Boolean)),this.inlineIconSrc$=this.isInlineViewMode$.pipe((0,c.U)(ge=>ge?"assets/icons/icon16/inline-mode-off.svg":"assets/icons/icon16/inline-mode-on.svg")),this.inlineTitle$=this.isInlineViewMode$.pipe((0,c.U)(ge=>ge?"DOCUMENT_VIEWER.VIDEO_PLAYER.OVERLAY_MODE":"DOCUMENT_VIEWER.VIDEO_PLAYER.INLINE_MODE")),this.fullScreenIcon$=this.fullscreenService.isFullscreen$.pipe((0,c.U)(ge=>ge?"assets/icons/icon16/fullscreen-off.svg":"assets/icons/icon16/fullscreen-on.svg")),this.fullScreenTitle$=this.fullscreenService.isFullscreen$.pipe((0,c.U)(ge=>ge?"DOCUMENT_VIEWER.VIDEO_PLAYER.WINDOWED_MODE":"DOCUMENT_VIEWER.VIDEO_PLAYER.FULLSCREEN_MODE")),this.getProgressTitle=ge=>this.formatDurationPipe.transformInstant(ge*this.duration,"s","HH:mm:ss")||"",this.setCurrentTimeThrottled=(0,a.Z)(this.setCurrentTime.bind(this),u._Z.settings.VIDEO_PLAYER_SEEK_THROTTLE_MS),this.updateCurrentTimeInterval=window.setInterval(()=>this.updateCurrentTime(),u._Z.settings.DEMONSTRATE_VIDEO_CURRENT_TIME_UPDATE_INTERVAL_MS)}ngOnDestroy(){window.clearInterval(this.updateCurrentTimeInterval)}updateCurrentTime(){const y=this._presentation.state.duration,w=this.documentsManager.getVideoDemonstrateCurrentTime();w>y?this.isPaused||this.documentsManager.videoDemonstratePause().pipe((0,Je.w)(()=>this.documentsManager.videoDemonstrateSetCurrentTime(0))).subscribe($e.Z):this.currentTime$.next(w)}togglePlay(){this.isPaused?this.play():this.pause()}play(){this.isPaused&&this.documentsManager.videoDemonstratePlay().subscribe($e.Z)}pause(){this.isPaused||this.documentsManager.videoDemonstratePause().subscribe($e.Z)}setCurrentTime(x){this.documentsManager.videoDemonstrateSetCurrentTime(x*this.duration).subscribe($e.Z)}toggleInlineMode(){this.documentViewerService.toggleInlineMode()}toggleFullToScreen(){this.fullscreenService.toggle()}}return ne.\u0275fac=function(x){return new(x||ne)(n.Y36(E.Y5),n.Y36(p.D),n.Y36(S.H),n.Y36(Le.JJ),n.Y36(ye.n))},ne.\u0275cmp=n.Xpm({type:ne,selectors:[["app-video-demonstrate"]],decls:34,vars:55,consts:[[1,"mover-container"],["contentContainer",""],["class","video-container",3,"click",4,"ngWith","ngWithAs"],[1,"layout-row","layout-align-start-center","control-panel",3,"ivaMover","ivaMoverContainer","ivaMoverRect"],["iva-icon-button","",1,"layout-right-margin_16","flex-noshrink",3,"tooltip","click"],[3,"src"],[1,"layout-right-margin_16","flex-noshrink"],["e2e-id","video-player--progress-seeker",1,"layout-right-margin_16","flex-grow",3,"showThumb","showThumbTitle","thumbTitleGetter","showHoverTitle","hoverTitleGetter","min","max","value","valueChange"],["progressSeeker","ivaSeeker"],[1,"flex-noshrink"],[1,"splitter"],["iva-icon-button","",3,"tooltip","click",4,"ngIf"],["iva-icon-button","",3,"tooltip","click"],["src","assets/icons/icon16/drag-handle.svg",1,"drag-handle",3,"ivaMoverHandle"],[1,"video-container",3,"click"],[4,"ngIf"],["src","assets/icons/icon16/play.svg",1,"play-pause"],["src","assets/icons/icon16/pause.svg",1,"play-pause"],["autoplay","","playsinline","",3,"width","height","srcObject","muted","canplay",4,"ngWith","ngWithAs"],["autoplay","","playsinline","",3,"srcObject","muted","canplay"]],template:function(x,y){if(1&x&&(n.TgZ(0,"div",0,1),n.YNc(2,qe,6,8,"div",2),n.ALo(3,"async"),n.TgZ(4,"div",3)(5,"button",4),n.NdJ("click",function(){return y.togglePlay()}),n.ALo(6,"translate"),n.ALo(7,"async"),n._UZ(8,"svg-icon",5),n.ALo(9,"async"),n.qZA(),n.TgZ(10,"div",6),n._uU(11),n.ALo(12,"async"),n.ALo(13,"formatDuration"),n.ALo(14,"async"),n.qZA(),n.TgZ(15,"iva-seeker",7,8),n.NdJ("valueChange",function(ce){return y.setCurrentTimeThrottled(ce)}),n.ALo(17,"async"),n.qZA(),n.TgZ(18,"div",9),n._uU(19),n.ALo(20,"async"),n.ALo(21,"formatDuration"),n.ALo(22,"async"),n.qZA(),n._UZ(23,"div",10),n.YNc(24,ke,5,8,"button",11),n.ALo(25,"async"),n._UZ(26,"div",10),n.TgZ(27,"button",12),n.NdJ("click",function(){return y.toggleFullToScreen()}),n.ALo(28,"translate"),n.ALo(29,"async"),n._UZ(30,"svg-icon",5),n.ALo(31,"async"),n.qZA(),n._UZ(32,"div",10)(33,"svg-icon",13),n.qZA()()),2&x){const w=n.MAs(1);n.xp6(2),n.Q6J("ngWithAs",n.lcZ(3,20,y.isPaused$)),n.xp6(2),n.Q6J("ivaMover",y.MOVER_NAME)("ivaMoverContainer",w)("ivaMoverRect",n.DdM(54,Be)),n.xp6(1),n.Q6J("tooltip",n.lcZ(6,22,n.lcZ(7,24,y.playPauseTitle$))),n.xp6(3),n.Q6J("src",n.lcZ(9,26,y.playPauseIcon$)),n.xp6(3),n.hij(" ",n.lcZ(12,28,n.Dn7(13,30,n.lcZ(14,34,y.currentTime$),"s","HH:mm:ss"))," "),n.xp6(4),n.Q6J("showThumb",!0)("showThumbTitle",!0)("thumbTitleGetter",y.getProgressTitle)("showHoverTitle",!0)("hoverTitleGetter",y.getProgressTitle)("min",0)("max",1)("value",n.lcZ(17,36,y.progressRatio$)),n.xp6(4),n.hij(" ",n.lcZ(20,38,n.Dn7(21,40,n.lcZ(22,44,y.shownDuration$),"s","HH:mm:ss"))," "),n.xp6(5),n.Q6J("ngIf",n.lcZ(25,46,y.hasInlineContainer$)),n.xp6(3),n.Q6J("tooltip",n.lcZ(28,48,n.lcZ(29,50,y.fullScreenTitle$))),n.xp6(3),n.Q6J("src",n.lcZ(31,52,y.fullScreenIcon$)),n.xp6(3),n.Q6J("ivaMoverHandle",y.MOVER_NAME)}},dependencies:[_.r2H,e.O5,_.X60,_.Khk,_.XFu,_.nZ5,_.bk9,_.ORR,_.i9q,e.Ov,s.X$,Le.JJ],styles:["[_nghost-%COMP%]{height:100%;width:100%}[_nghost-%COMP%]   .mover-container[_ngcontent-%COMP%]{height:100%;width:100%;display:flex;justify-content:center;align-items:center}[_nghost-%COMP%]   .video-container[_ngcontent-%COMP%]{cursor:pointer;position:relative;display:flex;align-items:center;justify-content:center;width:100%;height:100%;max-width:100%;max-height:100%}@keyframes _ngcontent-%COMP%_play-pause{0%{opacity:0;transform:scale(1)}50%{opacity:.75;transform:scale(3)}to{opacity:0;transform:scale(1)}}[_nghost-%COMP%]   .video-container[_ngcontent-%COMP%]   svg-icon.play-pause[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);opacity:0;will-change:transform;will-change:opacity}[_nghost-%COMP%]   .video-container[_ngcontent-%COMP%]   svg-icon.play-pause[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{fill:rgb(var(--font-main-color))}[_nghost-%COMP%]   .video-container[_ngcontent-%COMP%]   svg-icon.play-pause.shown[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_play-pause .8s}[_nghost-%COMP%]   video[_ngcontent-%COMP%]{max-width:100%;max-height:100%}[_nghost-%COMP%]   .control-panel[_ngcontent-%COMP%]{padding:20px 16px;background-color:rgba(var(--neutral-color-1),var(--transparency-80));border-radius:10px;min-width:460px;width:460px;max-width:460px;position:absolute;left:calc(50% - 230px);bottom:20px}[_nghost-%COMP%]   .control-panel[_ngcontent-%COMP%]   .volume-seeker[_ngcontent-%COMP%]{width:100px}[_nghost-%COMP%]   .control-panel[_ngcontent-%COMP%]   .splitter[_ngcontent-%COMP%]{margin-left:16px;margin-right:16px;width:1px;height:20px;background-color:rgb(var(--neutral-color-6))}[_nghost-%COMP%]   .control-panel[_ngcontent-%COMP%]   .drag-handle[_ngcontent-%COMP%]{cursor:grab}[_nghost-%COMP%]   .control-panel[_ngcontent-%COMP%]   .drag-handle[_ngcontent-%COMP%] > svg[_ngcontent-%COMP%] > path[_ngcontent-%COMP%]{fill:rgb(var(--neutral-color-7))}[_nghost-%COMP%]   .control-panel[_ngcontent-%COMP%]   .drag-handle[_ngcontent-%COMP%]:active{cursor:grabbing}"],changeDetection:0}),ne})();function it(ne,Q){1&ne&&(n.ynx(0),n._UZ(1,"app-video-demonstrate"),n.BQk())}function ot(ne,Q){if(1&ne){const x=n.EpF();n.TgZ(0,"app-video-player",4),n.NdJ("videoError",function(){n.CHM(x);const w=n.oxw(2);return n.KtG(w.errored=!0)})("toggleInlineMode",function(){n.CHM(x);const w=n.oxw(2);return n.KtG(w.onToggleInlineMode())})("toggleFitToScreen",function(){n.CHM(x);const w=n.oxw(2);return n.KtG(w.onToggleFitToScreen())})("toggleFullScreenAndFitToScreen",function(){n.CHM(x);const w=n.oxw(2);return n.KtG(w.onToggleFullScreen())}),n.ALo(1,"async"),n.ALo(2,"async"),n.ALo(3,"async"),n.ALo(4,"async"),n.ALo(5,"async"),n.qZA()}if(2&ne){const x=n.oxw(2);let y;n.Q6J("disableVideoRmb",!n.lcZ(1,9,x.allowRMB$))("autoplay",n.lcZ(2,11,x.autoplay$))("videoSrc",x.videoSrc)("width",x.originalWidth)("height",x.originalHeight)("isInlineViewMode",n.lcZ(3,13,x.isInlineViewMode$))("inlineViewModeAllowed",null===(y=n.lcZ(4,15,x.hasInlineContainer$))||void 0===y||y)("isFittedToScreen",n.lcZ(5,17,x.isFittedToScreen$))("isFitToScreenAllowed",x.isFitToScreenAllowed)}}function _t(ne,Q){1&ne&&(n._UZ(0,"app-unsupported-renderer",5),n.ALo(1,"translate")),2&ne&&n.Q6J("message",n.lcZ(1,1,"DOCUMENT_VIEWER.NO_PREVIEW_AVAILABLE"))}function Ze(ne,Q){if(1&ne&&(n.YNc(0,ot,6,19,"app-video-player",2),n.YNc(1,_t,2,3,"app-unsupported-renderer",3)),2&ne){const x=n.oxw();n.Q6J("ngIf",!x.errored),n.xp6(1),n.Q6J("ngIf",x.errored)}}let We=(()=>{class ne{get originalWidth(){return this.originalSize?this.originalSize.width*this.zoom:void 0}get originalHeight(){return this.originalSize?this.originalSize.height*this.zoom:void 0}constructor(x,y,w){this.documentsManager=x,this.documentOpenerService=y,this.documentViewerService=w,this.zoom=1,this.isFitToScreenAllowed=!1,this.errored=!1,this.isInlineViewMode$=this.documentViewerService.isInlineViewMode$,this.isFittedToScreen$=this.documentViewerService.isFittedToScreen$,this.isDemonstrationOn$=this.documentsManager.isOpenedFileDemonstrating$,this.hasInlineContainer$=this.documentOpenerService.inlineModeViewContainerRef$.pipe((0,c.U)(Boolean)),this.allowRMB$=this.documentsManager.allowRMB$,this.autoplay$=this.documentsManager.videoAutoplay$}onToggleInlineMode(){this.documentViewerService.toggleInlineMode()}onToggleFitToScreen(){this.documentViewerService.toggleFitToScreen()}onToggleFullScreen(){this.documentViewerService.toggleFullscreen()}}return ne.\u0275fac=function(x){return new(x||ne)(n.Y36(E.Y5),n.Y36(p.D),n.Y36(S.H))},ne.\u0275cmp=n.Xpm({type:ne,selectors:[["app-video-renderer"]],inputs:{videoSrc:"videoSrc",originalSize:"originalSize",zoom:"zoom",isFitToScreenAllowed:"isFitToScreenAllowed"},decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["viewTmpl",""],[3,"disableVideoRmb","autoplay","videoSrc","width","height","isInlineViewMode","inlineViewModeAllowed","isFittedToScreen","isFitToScreenAllowed","videoError","toggleInlineMode","toggleFitToScreen","toggleFullScreenAndFitToScreen",4,"ngIf"],[3,"message",4,"ngIf"],[3,"disableVideoRmb","autoplay","videoSrc","width","height","isInlineViewMode","inlineViewModeAllowed","isFittedToScreen","isFitToScreenAllowed","videoError","toggleInlineMode","toggleFitToScreen","toggleFullScreenAndFitToScreen"],[3,"message"]],template:function(x,y){if(1&x&&(n.YNc(0,it,2,0,"ng-container",0),n.ALo(1,"async"),n.YNc(2,Ze,2,2,"ng-template",null,1,n.W1O)),2&x){const w=n.MAs(3);n.Q6J("ngIf",n.lcZ(1,2,y.isDemonstrationOn$))("ngIfElse",w)}},dependencies:[e.O5,Fe,Ae,st,e.Ov,s.X$],styles:["[_nghost-%COMP%]{height:100%;width:100%}app-video-player[_ngcontent-%COMP%]{cursor:auto}"],changeDetection:0}),ne})();var rt=t(28387),Ke=t(1349);function Qe(ne,Q){if(1&ne&&(n.TgZ(0,"div",5)(1,"div",6),n._uU(2),n.ALo(3,"translate"),n.qZA(),n.TgZ(4,"div",8),n._uU(5),n.ALo(6,"async"),n.ALo(7,"formatDate"),n.ALo(8,"async"),n.qZA()()),2&ne){const x=n.oxw();n.xp6(2),n.Oqu(n.lcZ(3,2,"DOCUMENT_VIEWER.CHANGED")),n.xp6(3),n.Oqu(n.lcZ(6,4,n.xi3(7,6,n.lcZ(8,9,x.fileModifiedDate$),"dd MMMM, HH:mm")))}}function ut(ne,Q){if(1&ne&&(n.TgZ(0,"div",5)(1,"div",6),n._uU(2),n.ALo(3,"translate"),n.qZA(),n.TgZ(4,"div",8),n._uU(5),n.ALo(6,"async"),n.qZA()()),2&ne){const x=n.oxw();n.xp6(2),n.Oqu(n.lcZ(3,2,"DOCUMENT_VIEWER.RESOLUTION")),n.xp6(3),n.Oqu(n.lcZ(6,4,x.imageSize$))}}const ht=function(ne){return{decimal:ne}};let pt=(()=>{class ne{constructor(x,y){this.documentsManager=x,this.modalRef=y,this.FILE_SIZE_DECIMAL=1,this.document$=this.documentsManager.currentDocument$.pipe((0,m.h)(w=>!!w)),this.fileName$=this.document$.pipe((0,c.U)(w=>w.name)),this.fileSize$=this.document$.pipe((0,c.U)(w=>w.resource.size)),this.fileModifiedDate$=this.document$.pipe((0,c.U)(w=>w.modified)),this.fileCreatedDate$=this.document$.pipe((0,c.U)(w=>w.created)),this.imageSize$=this.document$.pipe((0,c.U)(w=>w.resource.mimeType.startsWith("image")?`${w.resource?.metadata.width} x ${w.resource?.metadata.height}`:null)),this.isFileModifiedDateVisible$=(0,o.aj)([this.fileCreatedDate$,this.fileModifiedDate$]).pipe((0,c.U)(([w,ce])=>w!==ce))}close(){this.modalRef.close()}}return ne.\u0275fac=function(x){return new(x||ne)(n.Y36(E.Y5),n.Y36(_.aiK))},ne.\u0275cmp=n.Xpm({type:ne,selectors:[["app-file-info-popover"]],decls:36,vars:37,consts:[[1,"modal-card"],[1,"header"],["iva-icon-button","",3,"click"],["src","assets/icons/icon24/close.svg"],[1,"info-section","layout-top-padding_16","flex-100"],[1,"layout","layout-row","layout-bottom-margin_16"],[1,"description"],[1,"info","file-name"],[1,"info"],["class","layout layout-row layout-bottom-margin_16",4,"ngIf"]],template:function(x,y){1&x&&(n.TgZ(0,"div",0)(1,"div",1)(2,"h2"),n._uU(3),n.ALo(4,"translate"),n.qZA(),n.TgZ(5,"button",2),n.NdJ("click",function(){return y.close()}),n._UZ(6,"svg-icon",3),n.qZA()(),n.TgZ(7,"div",4)(8,"div",5)(9,"div",6),n._uU(10),n.ALo(11,"translate"),n.qZA(),n.TgZ(12,"div",7),n._uU(13),n.ALo(14,"async"),n.qZA()(),n.TgZ(15,"div",5)(16,"div",6),n._uU(17),n.ALo(18,"translate"),n.qZA(),n.TgZ(19,"div",8),n._uU(20),n.ALo(21,"toByteUnit"),n.ALo(22,"async"),n.qZA()(),n.TgZ(23,"div",5)(24,"div",6),n._uU(25),n.ALo(26,"translate"),n.qZA(),n.TgZ(27,"div",8),n._uU(28),n.ALo(29,"async"),n.ALo(30,"formatDate"),n.ALo(31,"async"),n.qZA()(),n.YNc(32,Qe,9,11,"div",9),n.ALo(33,"async"),n.YNc(34,ut,7,6,"div",9),n.ALo(35,"async"),n.qZA()()),2&x&&(n.xp6(3),n.Oqu(n.lcZ(4,9,"DOCUMENT_VIEWER.INFORMATION")),n.xp6(7),n.Oqu(n.lcZ(11,11,"DOCUMENT_VIEWER.FILE_NAME")),n.xp6(3),n.Oqu(n.lcZ(14,13,y.fileName$)),n.xp6(4),n.Oqu(n.lcZ(18,15,"DOCUMENT_VIEWER.SIZE")),n.xp6(3),n.Oqu(n.xi3(21,17,n.lcZ(22,20,y.fileSize$),n.VKq(35,ht,y.FILE_SIZE_DECIMAL))),n.xp6(5),n.Oqu(n.lcZ(26,22,"DOCUMENT_VIEWER.CREATED")),n.xp6(3),n.Oqu(n.lcZ(29,24,n.xi3(30,26,n.lcZ(31,29,y.fileCreatedDate$),"dd MMMM, HH:mm"))),n.xp6(4),n.Q6J("ngIf",n.lcZ(33,31,y.isFileModifiedDateVisible$)),n.xp6(2),n.Q6J("ngIf",n.lcZ(35,33,y.imageSize$)))},dependencies:[_.r2H,e.O5,_.bk9,e.Ov,s.X$,_.S64,Ke.ik],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;width:400px;border-radius:18px;background-color:rgb(var(--neutral-color-3));color:rgb(var(--white-100))}[_nghost-%COMP%]   .modal-card[_ngcontent-%COMP%]{padding:24px;margin:0}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:rgb(var(--white-100))}[_nghost-%COMP%]   .info-section[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .description[_ngcontent-%COMP%]{color:rgb(var(--font-gray-1-color));margin-right:8px;width:120px}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]{color:rgb(var(--white-100));max-width:220px}[_nghost-%COMP%]   .info.file-name[_ngcontent-%COMP%]{overflow-wrap:break-word;word-wrap:break-word;-ms-word-break:break-all;word-break:break-all;word-break:break-word;-webkit-hyphens:auto;hyphens:auto}"],changeDetection:0}),ne})();var gt=t(69347);function ft(ne,Q){if(1&ne){const x=n.EpF();n.TgZ(0,"button",9,10),n.NdJ("click",function(){const ce=n.CHM(x).item,pe=n.MAs(1);return n.KtG(ce.onClick(pe))}),n.ALo(2,"translate"),n._UZ(3,"svg-icon",11),n.qZA()}if(2&ne){const x=Q.item;n.Q6J("tooltip",n.lcZ(2,3,x.title)),n.uIk("e2e-id",x.e2e),n.xp6(3),n.Q6J("src",x.iconSrc)}}function Et(ne,Q){1&ne&&n._UZ(0,"iva-spinner",17),2&ne&&n.Q6J("size",24)}function mt(ne,Q){1&ne&&n._UZ(0,"svg-icon",18)}function St(ne,Q){if(1&ne){const x=n.EpF();n.TgZ(0,"button",14),n.NdJ("click",function(){n.CHM(x);const w=n.oxw(2);return n.KtG(w.startDemonstration())}),n.ALo(1,"async"),n.YNc(2,Et,1,1,"iva-spinner",15),n.ALo(3,"async"),n.YNc(4,mt,1,0,"ng-template",null,16,n.W1O),n._uU(6),n.ALo(7,"translate"),n.qZA()}if(2&ne){const x=n.MAs(5),y=n.oxw(2);n.Q6J("disabled",n.lcZ(1,4,y.isDemonstrationStarting$)),n.xp6(2),n.Q6J("ngIf",n.lcZ(3,6,y.isDemonstrationStopping$))("ngIfElse",x),n.xp6(4),n.hij(" ",n.lcZ(7,8,"CONFERENCE_SESSION__FILES__START_DEMONSTRATION")," ")}}function at(ne,Q){1&ne&&n._UZ(0,"iva-spinner",17),2&ne&&n.Q6J("size",24)}function vt(ne,Q){1&ne&&n._UZ(0,"svg-icon",18)}function ct(ne,Q){if(1&ne){const x=n.EpF();n.TgZ(0,"button",19),n.NdJ("click",function(){n.CHM(x);const w=n.oxw(2);return n.KtG(w.stopDemonstration())}),n.YNc(1,at,1,1,"iva-spinner",15),n.ALo(2,"async"),n.YNc(3,vt,1,0,"ng-template",null,20,n.W1O),n._uU(5),n.ALo(6,"translate"),n.qZA()}if(2&ne){const x=n.MAs(4),y=n.oxw(2);n.xp6(1),n.Q6J("ngIf",n.lcZ(2,3,y.isDemonstrationStopping$))("ngIfElse",x),n.xp6(4),n.hij(" ",n.lcZ(6,5,"CONFERENCE_SESSION__SHARE_BUTTON_OFF")," ")}}function Ct(ne,Q){if(1&ne&&(n.ynx(0),n.YNc(1,St,8,10,"button",12),n.ALo(2,"async"),n.YNc(3,ct,7,7,"button",13),n.ALo(4,"async"),n.BQk()),2&ne){const x=n.oxw();n.xp6(1),n.Q6J("ngIf",!n.lcZ(2,2,x.isDemonstration$)),n.xp6(2),n.Q6J("ngIf",n.lcZ(4,4,x.isDemonstration$))}}let It=(()=>{class ne{get document(){return this.documentViewerService.document}get pageIndex(){return this.documentViewerService.pageIndex}constructor(x,y,w,ce,pe,ge,j,le){this.documentsManager=x,this.destroy$=y,this.documentService=w,this.documentViewerService=ce,this.fullscreen=pe,this.overlayService=ge,this.conferenceFilesStoreService=j,this.pageSizeService=le,this.documentIndex$=this.documentService.currentDocumentIndex$,this.documentsCount$=this.documentService.documentsCount$,this.canDownload$=this.documentService.canDownload$,this.documentName$=this.documentsManager.currentDocument$.pipe((0,m.h)(q=>!!q),(0,c.U)(q=>q.name)),this.canDemonstrateCurrentDocument$=this.documentsManager.canDemonstrateCurrentDocument$,this.isDemonstration$=this.documentsManager.isOpenedFileDemonstrating$,this.isSmallScreen$=this.pageSizeService.isExtraSmallScreen$,this.demonstrationButtonsVisible$=(0,o.aj)([this.canDemonstrateCurrentDocument$,this.isSmallScreen$]).pipe((0,c.U)(([q,se])=>q&&!se)),this.headerButtons$=(0,o.aj)([this.isSmallScreen$,this.isDemonstration$,this.canDownload$,this.canDemonstrateCurrentDocument$]).pipe((0,c.U)(([q,se,Ce,Pe])=>{const De=q&&Pe?[this.getDemonstrationButton(se),...this.headerButtons]:[...this.headerButtons];return Ce&&De.splice(1,0,this.downloadButton),De})),this.isDemonstrationStarting$=this.conferenceFilesStoreService.isDemonstrationStarting$,this.isDemonstrationStopping$=this.conferenceFilesStoreService.isDemonstrationStopping$,this.headerButtons=[{title:"DOCUMENT_VIEWER.INFORMATION",iconSrc:"assets/icons/icon24/info-stroke.svg",popoverIconSrc:"assets/icons/icon16/info-stroke.svg",onClick:this.openInfoPopover.bind(this)}],this.downloadButton={e2e:"document-viewer-header-download-button",title:"DOCUMENT_VIEWER.DOWNLOAD",iconSrc:"assets/icons/icon24/download.svg",popoverIconSrc:"assets/icons/icon16/download.svg",onClick:()=>this.download()}}ngOnInit(){this.isSmallScreen$.pipe((0,m.h)(()=>!!this.popoverRef),(0,I.R)(this.destroy$)).subscribe(()=>this.popoverRef.close())}closeDocument(){this.documentsManager.setCurrentDocument(null),this.fullscreen.setOff()}openInfoPopover(x){this.popoverRef=this.overlayService.openPopover(pt,x),this.popoverRef.overlayComponent.setTheme(_.Q2A.DARK),this.popoverRef.afterClosed$.pipe((0,I.R)(this.destroy$)).subscribe(()=>this.popoverRef=void 0)}stopDemonstration(){this.documentsManager.stopDemonstration()}toggleDemonstration(){this.documentsManager.isOpenedFileDemonstrating$.value?this.stopDemonstration():this.startDemonstration()}getDemonstrationButton(x){return{title:x?"CONFERENCE_SESSION__FILES__STOP_DEMONSTRATION":"CONFERENCE_SESSION__FILES__START_DEMONSTRATION",iconSrc:"assets/icons/icon16/sharescreen.svg",onClick:this.toggleDemonstration.bind(this)}}download(){this.documentViewerService.downloadDocument()}startDemonstration(){this.documentsManager.startDemonstration(this.document.nodeId,this.pageIndex+1)}}return ne.\u0275fac=function(x){return new(x||ne)(n.Y36(E.Y5),n.Y36(_.z23),n.Y36(S.H),n.Y36(S.H),n.Y36(ye.n),n.Y36(_.Bi9),n.Y36(gt.b),n.Y36(Ee.g))},ne.\u0275cmp=n.Xpm({type:ne,selectors:[["app-document-viewer-header"]],hostBindings:function(x,y){1&x&&n.NdJ("keydown.escape",function(){return y.closeDocument()},!1,n.evT)},features:[n._Bn([_.z23])],decls:24,vars:40,consts:[[1,"file-info"],["ivaFileNameShortener","","e2e-id","document-viewer-header-title",1,"file-name","title-break-words",3,"tooltip"],["e2e-id","document-viewer-header-count",1,"files-count"],["unfolded",""],[1,"control-buttons"],[4,"ngIf"],[1,"layout-left-margin_24",3,"isFolded","itemUnfoldedTemplate","items"],["iva-icon-button","",3,"tooltip","click"],["src","assets/icons/icon24/close.svg"],["iva-icon-button","",1,"layout-right-margin_24",3,"tooltip","click"],["btn",""],[3,"src"],["iva-button","","class","demonstration-button","size","s",3,"disabled","click",4,"ngIf"],["iva-button","","class","demonstration-button","size","s","color","call-end",3,"click",4,"ngIf"],["iva-button","","size","s",1,"demonstration-button",3,"disabled","click"],["inline","",3,"size",4,"ngIf","ngIfElse"],["startIconTmpl",""],["inline","",3,"size"],["src","assets/icons/icon16/screen-share-stroke.svg"],["iva-button","","size","s","color","call-end",1,"demonstration-button",3,"click"],["stopIconTmpl",""]],template:function(x,y){if(1&x&&(n.TgZ(0,"div",0)(1,"div",1),n.ALo(2,"async"),n._uU(3),n.ALo(4,"async"),n.qZA(),n.TgZ(5,"span",2),n._uU(6),n.ALo(7,"async"),n.ALo(8,"translate"),n.ALo(9,"async"),n.qZA()(),n.YNc(10,ft,4,5,"ng-template",null,3,n.W1O),n.TgZ(12,"div",4),n.ALo(13,"async"),n.YNc(14,Ct,5,6,"ng-container",5),n.ALo(15,"async"),n._UZ(16,"iva-foldable-buttons",6),n.ALo(17,"async"),n.ALo(18,"async"),n.TgZ(19,"button",7),n.NdJ("click",function(){return y.closeDocument()}),n.ALo(20,"async"),n.ALo(21,"async"),n.ALo(22,"translate"),n._UZ(23,"svg-icon",8),n.qZA()()),2&x){const w=n.MAs(11);n.xp6(1),n.Q6J("tooltip",n.lcZ(2,16,y.documentName$)),n.xp6(2),n.hij(" ",n.lcZ(4,18,y.documentName$)," "),n.xp6(3),n.lnq(" (",n.lcZ(7,20,y.documentIndex$)+1," ",n.lcZ(8,22,"DOCUMENT_VIEWER.FROM")," ",n.lcZ(9,24,y.documentsCount$),") "),n.xp6(6),n.ekj("layout-right-margin_24",n.lcZ(13,26,y.isSmallScreen$)),n.xp6(2),n.Q6J("ngIf",n.lcZ(15,28,y.demonstrationButtonsVisible$)),n.xp6(2),n.Q6J("isFolded",n.lcZ(17,30,y.isSmallScreen$))("itemUnfoldedTemplate",w)("items",n.lcZ(18,32,y.headerButtons$)),n.xp6(3),n.ekj("layout-left-margin_16",n.lcZ(20,34,y.isSmallScreen$))("layout-right-margin_24",!1===n.lcZ(21,36,y.isSmallScreen$)),n.Q6J("tooltip",n.lcZ(22,38,"DOCUMENT_VIEWER.CLOSE"))}},dependencies:[_.r0F,_.r2H,e.O5,_.Wk1,_.XXv,_.bk9,_.ORR,_.i9q,e.Ov,s.X$],styles:["[_nghost-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:100%;height:64px;min-height:64px;max-height:64px;padding-left:24px;background-color:rgb(var(--neutral-color-2))}[_nghost-%COMP%]   .file-info[_ngcontent-%COMP%]{display:flex;align-items:center;max-width:70%;cursor:default}[_nghost-%COMP%]   .file-name[_ngcontent-%COMP%]{color:rgb(var(--font-main-color));max-width:80%;margin-right:8px}@media screen and (max-width: 1024px){[_nghost-%COMP%]   .file-name[_ngcontent-%COMP%]{max-width:55%}}@media screen and (max-width: 720px){[_nghost-%COMP%]   .file-name[_ngcontent-%COMP%]{max-width:90%}}[_nghost-%COMP%]   .files-count[_ngcontent-%COMP%]{white-space:nowrap;color:rgb(var(--font-gray-1-color))}[_nghost-%COMP%]   .control-buttons[_ngcontent-%COMP%]{display:flex;align-items:center}[_nghost-%COMP%]   .demonstration-button[_ngcontent-%COMP%]{flex-shrink:0}.iva-full-screen[_nghost-%COMP%], .iva-full-screen   [_nghost-%COMP%]{position:absolute;background-color:transparent;height:96px;max-height:96px;z-index:1;background-image:linear-gradient(to top,transparent 94%,rgba(var(--black-100),var(--transparency-30)) 70%,rgba(var(--black-100),var(--transparency-60)) 37%,rgba(var(--black-100),var(--transparency-60))),linear-gradient(to top,transparent,rgba(var(--black-100),var(--transparency-30)) 46%,rgba(var(--black-100),var(--transparency-60)))}.iva-full-screen[_nghost-%COMP%]   .control-buttons[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   *[_ngcontent-%COMP%], .iva-full-screen   [_nghost-%COMP%]   .control-buttons[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{fill:rgba(var(--white-100),var(--transparency-60))}.iva-full-screen[_nghost-%COMP%]   .files-count[_ngcontent-%COMP%], .iva-full-screen   [_nghost-%COMP%]   .files-count[_ngcontent-%COMP%]{color:rgba(var(--white-100),var(--transparency-60))}"],changeDetection:0}),ne})();var tt=t(38689),nt=t(23841),Tt=t(44183);function Ot(ne,Q){if(1&ne){const x=n.EpF();n.TgZ(0,"button",2),n.NdJ("click",function(){n.CHM(x);const w=n.oxw();return n.KtG(w.openPreviousDocument())}),n._UZ(1,"svg-icon",3),n.qZA()}}function Pt(ne,Q){if(1&ne){const x=n.EpF();n.TgZ(0,"button",4),n.NdJ("click",function(){n.CHM(x);const w=n.oxw();return n.KtG(w.openNextDocument())}),n._UZ(1,"svg-icon",5),n.qZA()}}let Mt=(()=>{class ne{get shouldUseDemonstrationKeyMap(){return!!this.documentViewerService.isDemonstration$.value&&!!this.documentsManager.isOpenedFileDemonstrating$.value&&this.documentViewerService.isOfficeDocument}constructor(x,y,w,ce){this.documentsManager=x,this.destroy$=y,this.documentViewerService=w,this.keysPriorityService=ce,this.hasNextDocument$=(0,o.aj)([this.documentViewerService.currentDocumentIndex$,this.documentViewerService.documentsCount$]).pipe((0,c.U)(([pe,ge])=>pe+1<ge)),this.hasPreviousDocument$=this.documentViewerService.currentDocumentIndex$.pipe((0,c.U)(pe=>pe>0))}onArrowRight(){this.shouldUseDemonstrationKeyMap?this.documentViewerService.goToNextPage():this.openNextDocument()}onArrowLeft(){this.shouldUseDemonstrationKeyMap?this.documentViewerService.goToPreviousPage():this.openPreviousDocument()}openNextDocument(){if(!this.keysPriorityService.isFirstPriority(tt.c,nt.g))return;const y=this.documentsManager.allDocuments$.value,w=this.documentViewerService.currentDocumentIndex$.value;if(null===w)return;const ce=y?.[w+1];ce&&this.documentsManager.setCurrentDocument(ce.nodeId)}openPreviousDocument(){if(!this.keysPriorityService.isFirstPriority(tt.c,nt.g))return;const y=this.documentsManager.allDocuments$.value,w=this.documentViewerService.currentDocumentIndex$.value;if(null===w)return;const ce=y?.[w-1];ce&&this.documentsManager.setCurrentDocument(ce.nodeId)}}return ne.\u0275fac=function(x){return new(x||ne)(n.Y36(E.Y5),n.Y36(_.z23),n.Y36(S.H),n.Y36(Tt.H))},ne.\u0275cmp=n.Xpm({type:ne,selectors:[["app-document-viewer-navigation"]],hostBindings:function(x,y){1&x&&n.NdJ("keydown.arrowRight",function(){return y.onArrowRight()},!1,n.evT)("keydown.arrowLeft",function(){return y.onArrowLeft()},!1,n.evT)},features:[n._Bn([_.z23])],decls:4,vars:6,consts:[["iva-round-button","","class","navigation-button navigation-button__left","e2e-id","document-viewer-previous-document-button","color","user-defined",3,"click",4,"ngIf"],["iva-round-button","","class","navigation-button navigation-button__right","e2e-id","document-viewer-next-document-button","color","user-defined",3,"click",4,"ngIf"],["iva-round-button","","e2e-id","document-viewer-previous-document-button","color","user-defined",1,"navigation-button","navigation-button__left",3,"click"],["src","assets/icons/icon24/corner-back.svg"],["iva-round-button","","e2e-id","document-viewer-next-document-button","color","user-defined",1,"navigation-button","navigation-button__right",3,"click"],["src","assets/icons/icon24/corner-right.svg"]],template:function(x,y){1&x&&(n.YNc(0,Ot,2,0,"button",0),n.ALo(1,"async"),n.YNc(2,Pt,2,0,"button",1),n.ALo(3,"async")),2&x&&(n.Q6J("ngIf",n.lcZ(1,2,y.hasPreviousDocument$)),n.xp6(2),n.Q6J("ngIf",n.lcZ(3,4,y.hasNextDocument$)))},dependencies:[_.r2H,e.O5,_.bk9,e.Ov],styles:["[_nghost-%COMP%]   .navigation-button[_ngcontent-%COMP%]{position:absolute;top:50%;width:48px;height:48px;opacity:.88;background-color:rgb(var(--black-100));border:none;margin:0 24px}[_nghost-%COMP%]   .navigation-button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{fill:rgba(var(--white-100),var(--transparency-60))}[_nghost-%COMP%]   .navigation-button__left[_ngcontent-%COMP%]{left:0}[_nghost-%COMP%]   .navigation-button__right[_ngcontent-%COMP%]{right:0}"]}),ne})();var At=t(34922),lt=t(82668),Ye=t(22734),dt=t(94994);let Ge=(()=>{class ne{}return ne.\u0275fac=function(x){return new(x||ne)},ne.\u0275mod=n.oAB({type:ne}),ne.\u0275inj=n.cJS({providers:[i.n,p.D,S.H,Ye.p,{provide:E.Y5,useFactory:At.e,deps:[lt.S,Ye.p,dt.O]}],imports:[_.hJ1,e.ez,h.L,_.l1j,_.ND0,_.SQX,_.Aw6,_.gPf,_.$vc,_.d3,_.thQ,_.kcH,f.m,_.Fme,_.Yql,_.z8t,s.aw,s.aw,r.f]}),ne})();n.B6R(nt.V,[e.O5,_.WAM,_.X60,_.ORR,ee,rt.M,It,Mt],[e.Ov]),n.B6R(ee,[e.O5,_.XFu,_.ORR,Se,Ae,We,fe],[e.Ov,s.X$])},87394:(z,R,t)=>{t.d(R,{H:()=>I});var e=t(5469),s=t(911),h=t(21850),_=t(9112),i=t(88002),f=t(43190),r=t(45435),p=t(46782),u=t(67460),a=t(13001),o=t(46451),l=t(54355),c=t(89017),d=t(21399),v=t(32352);let I=(()=>{class m extends s.z23{get pages(){return this.pages$.value}set pages(E){this.documentViewerStoreService.setPages(E)}get documentType(){return this.documentViewerStoreService.documentType$.value}get isDocument(){return this.documentType===o._o.OFFICE_DOCUMENT}get isImage(){return this.isImage$.value}get isVideo(){return this.isVideo$.value}get isOfficeDocument(){return this.isOfficeDocument$.value}get documentPagesDTO(){return this.documentViewerStoreService.documentPagesDTO$.value}get zoom(){return this.zoom$.value||1}get zoomBiggestValue(){return this.documentViewerStoreService.zoom$.value||0}set zoomBiggestValue(E){this.documentViewerStoreService.setZoomBiggestValue(E)}get document(){return this.document$.value}get originalSize(){return this.documentViewerStoreService.originalSize$.value}set originalSize(E){this.documentViewerStoreService.setOriginalSize(E)}get pageIndex(){return this.isDocument?this.documentViewerStoreService.currentPageIndex:0}get minZoom(){const E=this.pages[this.pageIndex];if(!E)return 1;const{width:n,height:S}=E,C=this.getZoomFittingToScreen({width:n,height:S});return Math.min(C,1)}get isBiggerThenContainer(){const E=this.getContainerAbsoluteSize();return!!this.originalSize&&(this.originalSize.width>E.width||this.originalSize.height>E.height)}get rotateAngle(){return this.documentViewerStoreService.rotateAngle$.value||0}set rotateAngle(E){this.documentViewerStoreService.setRotateAngle(E)}get isReversedMeasures(){return this.rotateAngle%a.kT!=0}get isFittedToScreen(){return this.isFittedToScreen$.value||!1}constructor(E,n,S,C){super(),this.documentsManager=E,this.browserFullscreenService=n,this.documentViewerStoreService=S,this.resourceUrlService=C,this.ZOOM_STEPS=e._Z.settings.DOCUMENT_VIEWER_ZOOM_STEPS,this.currentDocument=null,this.currentDocument$=this.documentsManager.currentDocument$,this.currentDocumentIndex$=(0,s.Hxy)((0,_.aj)([this.documentsManager.allDocuments$,this.documentsManager.currentDocument$]).pipe((0,i.U)(([T,P])=>T?.findIndex(A=>A.nodeId===P?.nodeId)))),this.documentsCount$=this.documentsManager.allDocuments$.pipe((0,i.U)(T=>T.length)),this.canDownload$=this.documentsManager.currentDocument$.pipe((0,f.w)(T=>this.documentsManager.canDownload$(T))),this.isFittedToScreen$=this.documentViewerStoreService.isFittedToScreen$,this.isDemonstration$=this.documentsManager.isOpenedFileDemonstrating$,this.isPointerShown$=(0,s.Hxy)((0,_.aj)([this.isDemonstration$,this.documentsManager.isPointerShown$]).pipe((0,i.U)(([T,P])=>T&&P))),this.documentType$=this.documentViewerStoreService.documentType$,this.isImage$=(0,s.Hxy)(this.documentType$.pipe((0,i.U)(T=>T===o._o.IMAGE))),this.isVideo$=(0,s.Hxy)(this.documentType$.pipe((0,i.U)(T=>T===o._o.VIDEO))),this.isOfficeDocument$=(0,s.Hxy)(this.documentType$.pipe((0,i.U)(T=>T===o._o.OFFICE_DOCUMENT))),this.isSupported$=(0,s.Hxy)(this.documentType$.pipe((0,i.U)(T=>T!==o._o.UNSUPPORTED))),this.document$=this.documentViewerStoreService.document$,this.isConverting$=this.document$.pipe((0,r.h)(T=>!!T),(0,i.U)(T=>T.conversionState===o.u$.IN_PROGRESS)),this.isConversionFailed$=this.document$.pipe((0,r.h)(T=>!!T),(0,i.U)(T=>T.conversionState===o.u$.FAILED)),this.canRotate$=this.isImage$,this.pages$=this.documentViewerStoreService.pages$,this.totalPages$=this.documentViewerStoreService.totalPages$,this.isInlineViewMode$=this.documentsManager.viewMode$.pipe((0,i.U)(T=>T===o.p2.INLINE)),this.originalSize$=this.documentViewerStoreService.originalSize$,this.rotateAngle$=this.documentViewerStoreService.rotateAngle$,this.zoom$=this.documentViewerStoreService.zoom$,this.currentDocument$.pipe((0,p.R)(this.destroy$)).subscribe(T=>{this.currentDocument=T})}setContentElement(E){this.contentElement=E}setViewerElement(E){this.viewerElement=E}toggleInlineMode(){switch(this.documentsManager.viewMode$.value){case o.p2.INLINE:this.documentsManager.setViewMode(o.p2.WIDESCREEN);break;case o.p2.WIDESCREEN:this.documentsManager.setViewMode(o.p2.INLINE)}}toggleFitToScreen(){this.documentViewerStoreService.setIsFittedToScreen(!this.isFittedToScreen$.value),this.isFittedToScreen?(this.setZoomFittingToScreen(),this.isDocument&&setTimeout(()=>{this.documentViewerStoreService.setPageIndexScrollTo(this.documentViewerStoreService.currentPageIndex)},a.BX)):this.documentViewerStoreService.setZoom(1)}toggleFullscreen(){this.documentsManager.setViewMode(o.p2.WIDESCREEN),this.browserFullscreenService.toggle()}updatePagesUrls(E){!this.isImage||!this.originalSize||!this.documentPagesDTO?.length||E>=1&&this.zoomBiggestValue>=1||this.zoomBiggestValue>E||(E=(0,h.Z)(E,0,1),this.pages=this.pages.map(n=>({...n,url:this.resourceUrlService.getResourceUrl(n.resourceId,{size:{width:Math.round(this.originalSize.width*E),height:Math.round(this.originalSize.height*E)}})})),E>this.zoomBiggestValue&&(this.zoomBiggestValue=E))}processZoom(E){this.updatePagesUrls(E);const n=Math.max(this.minZoom,E);this.documentViewerStoreService.setZoom(n)}setDocumentType(){this.documentViewerStoreService.setDocumentType(this.documentsManager.getDocumentType(this.document))}setOriginalSize(){if(!this.isImage&&!this.isVideo)return;const E=this.document.resource?.metadata,n=E?.width,S=E?.height;this.originalSize=n&&S?{width:parseInt(n),height:parseInt(S)}:null}setPages(){if(this.isVideo)return void this.setPagesForVideo();if(!this.documentPagesDTO)return;const E=this.isDocument?{}:this.getContainerAbsoluteSize(),n=this.documentPagesDTO.map((S,C)=>({width:parseInt(S?.metadata?.width||"0"),height:parseInt(S?.metadata?.height||"0"),url:this.resourceUrlService.getResourceUrl(S.resourceId,{size:E}),resourceId:S.resourceId,pageIndex:C}));this.documentViewerStoreService.setPages(n)}setPagesForVideo(){const E=this.document.resource;if(!E)return void console.error("Video document does not contains resource");const n=E.metadata,S=n?.width?parseInt(n.width):0,T=[{height:n?.height?parseInt(n.height):0,width:S,pageIndex:0,resourceId:this.document.resource.resourceId,url:this.resourceUrlService.getResourceUrl(E.resourceId)}];this.documentViewerStoreService.setPages(T)}getContainerAbsoluteSize(){if(!this.contentElement)return{width:0,height:0};const E=window.getComputedStyle(this.contentElement),n=parseFloat(E.marginTop||"0")+parseFloat(E.marginBottom||"0"),S=parseFloat(E.marginLeft||"0")+parseFloat(E.marginRight||"0");return{width:Math.round(this.contentElement.offsetWidth+S),height:Math.round(this.contentElement.offsetHeight+n)}}getZoomFittingToScreen({width:E,height:n}){if(!E||!n)return 0;const{width:S,height:C}=this.getContainerAbsoluteSize();return this.getAspectRatio({width:S,height:C})>this.getAspectRatio({width:E,height:n})?C/n:S/E}getAspectRatio({width:E,height:n}){return E/n}setZoomFittingToScreen(){if(!this.originalSize)return;let E=this.isDocument?this.pages[this.pageIndex].width:this.originalSize.width,n=this.isDocument?this.pages[this.pageIndex].height:this.originalSize.height;this.isReversedMeasures&&([E,n]=[n,E]),this.documentViewerStoreService.setZoom(this.getZoomFittingToScreen({width:E,height:n}))}getPreviousZoomValue(){return[...this.ZOOM_STEPS].sort((E,n)=>n-E).find(E=>E<this.zoom&&E>=this.minZoom)||this.minZoom}getNextZoomValue(){return this.ZOOM_STEPS.find(E=>E>this.zoom)||this.ZOOM_STEPS[this.ZOOM_STEPS.length-1]}handleContainerSizeChange(){this.isFittedToScreen?this.setZoomFittingToScreen():this.zoom<this.minZoom&&this.documentViewerStoreService.setZoom(this.minZoom)}setInitialZoom(){(this.isImage||this.isVideo)&&this.isBiggerThenContainer?(this.documentViewerStoreService.setIsFittedToScreen(!0),this.setZoomFittingToScreen()):(this.documentViewerStoreService.setZoom(1),this.documentViewerStoreService.setIsFittedToScreen(!1))}setZoomByDeltaY(E){const n=E>0?this.getPreviousZoomValue():this.getNextZoomValue();this.processZoom(n)}zoomIn(){this.processZoom(this.getNextZoomValue()),this.documentViewerStoreService.setIsFittedToScreen(!1)}zoomOut(){this.processZoom(this.getPreviousZoomValue()),this.documentViewerStoreService.setIsFittedToScreen(!1)}zoomChange(E){this.processZoom(E),this.documentViewerStoreService.setIsFittedToScreen(!1)}rotate(){this.rotateAngle=this.rotateAngle+90,this.documentViewerStoreService.setIsFittedToScreen(!1)}togglePointer(){this.documentsManager.isPointerShown$.value?this.documentsManager.setPointerHidden():this.documentsManager.setPointerVisible(0,0)}downloadDocument(){const{resourceId:E,name:n}=this.document.resource,S=this.resourceUrlService.getResourceUrl(E,{asAttachment:!0});(0,s.LRf)(S,n)}getContentViewBoxCoordinates(){const E=this.contentElement,{scrollTop:n,scrollLeft:S}=E,C=Math.floor(n/this.zoom);let T=C+Math.floor(E.offsetHeight/this.zoom);const P=Math.floor(S/this.zoom);let A=P+Math.floor(E.offsetWidth/this.zoom);return 0===C&&0===T&&(T=1),0===P&&0===A&&(A=1),{top:C,right:A,bottom:T,left:P}}getViewStateFromCoordinates({top:E,right:n,bottom:S,left:C}){const T=this.contentElement,A=T.offsetWidth,M=+(T.offsetHeight/(S-E)).toFixed(2),L=+(A/(n-C)).toFixed(2),N=Math.min(L,M);return{zoom:N,scrollTop:E*N,scrollLeft:C*N}}goToNextPage(){this.documentViewerStoreService.currentPageIndex+1!==this.totalPages$.value&&this.goToPage(this.documentViewerStoreService.currentPageIndex+1)}goToPreviousPage(){0!==this.documentViewerStoreService.currentPageIndex&&this.goToPage(this.documentViewerStoreService.currentPageIndex-1)}goToPage(E){const n=this.documentViewerStoreService.pages$.value.length;if(!(E>n-1))return this.documentViewerStoreService.setCurrentPageIndex(E),void this.documentViewerStoreService.setPageIndexScrollTo(E);this.documentsManager.fetchNextDocumentPagesUntil$(n-E+1).pipe((0,u.g)(0),(0,p.R)(this.destroy$)).subscribe(()=>{this.documentViewerStoreService.setCurrentPageIndex(E),this.documentViewerStoreService.setPageIndexScrollTo(E)})}}return m.\u0275fac=function(E){return new(E||m)(l.LFG(a.Y5),l.LFG(c.n),l.LFG(d.T),l.LFG(v.Z))},m.\u0275prov=l.Yz7({token:m,factory:m.\u0275fac}),m})()},21399:(z,R,t)=>{t.d(R,{T:()=>f});var e=t(39947),s=t(911),h=t(88002),_=t(46451),i=t(54355);let f=(()=>{class r extends e.F{get currentPageIndex(){return this.getStateProperty("currentPageIndex",!1)}get isScrollingToPage(){return this.getStateProperty("isScrollingToPage",!1)}get pageIndexScrollTo(){return this.getStateProperty("pageIndexScrollTo",!1)}constructor(){super({stateSliceSelector:u=>({document:u?.document,isFittedToScreen:u?.isFittedToScreen,pages:u?.pages,zoom:u?.zoom,zoomBiggestValue:u?.zoomBiggestValue,rotateAngle:u?.rotateAngle,documentType:u?.documentType,documentPagesDTO:u?.documentPagesDTO,originalSize:u?.originalSize,totalPages:u?.totalPages,currentPageIndex:u?.currentPageIndex,isScrollingToPage:u?.isScrollingToPage,pageIndexScrollTo:u?.pageIndexScrollTo})}),this.isFittedToScreen$=(0,s.Hxy)(this.stateChanged.pipe((0,h.U)(u=>u.isFittedToScreen))),this.pages$=(0,s.Hxy)(this.stateChanged.pipe((0,h.U)(u=>u.pages))),this.totalPages$=(0,s.Hxy)(this.stateChanged.pipe((0,h.U)(u=>u.totalPages))),this.zoom$=(0,s.Hxy)(this.stateChanged.pipe((0,h.U)(u=>u.zoom))),this.originalSize$=(0,s.Hxy)(this.stateChanged.pipe((0,h.U)(u=>u.originalSize))),this.rotateAngle$=(0,s.Hxy)(this.stateChanged.pipe((0,h.U)(u=>u.rotateAngle))),this.document$=(0,s.Hxy)(this.stateChanged.pipe((0,h.U)(u=>u.document))),this.documentType$=(0,s.Hxy)(this.stateChanged.pipe((0,h.U)(u=>u.documentType))),this.documentPagesDTO$=(0,s.Hxy)(this.stateChanged.pipe((0,h.U)(u=>u.documentPagesDTO))),this.currentPageIndex$=this.getReactiveStateProperty("currentPageIndex"),this.isScrollingToPage$=this.getReactiveStateProperty("isScrollingToPage"),this.pageIndexScrollTo$=this.getReactiveStateProperty("pageIndexScrollTo"),this.setState({document:void 0,isFittedToScreen:!1,pages:[],zoom:1,zoomBiggestValue:0,rotateAngle:0,documentType:_._o.UNSUPPORTED,documentPagesDTO:null,originalSize:{width:0,height:0},totalPages:0,currentPageIndex:0,isScrollingToPage:!1,pageIndexScrollTo:0},"INIT_STATE")}setIsFittedToScreen(u){this.setState({isFittedToScreen:u},"document_viewer__set-is-fitted-to-screen")}setPages(u){this.setState({pages:u},"document_viewer__set-pages")}setZoom(u){this.setState({zoom:u},"document_viewer__set-zoom")}setZoomBiggestValue(u){this.setState({zoomBiggestValue:u},"document_viewer__set-zoom-biggest-value")}setDocumentType(u){this.setState({documentType:u},"document_viewer__set-document-type")}setDocument(u){this.setState({document:u},"document_viewer__set-document")}setDocumentPagesDTO(u){this.setState({documentPagesDTO:u},"document_viewer__set-document-pages-dtos")}setOriginalSize(u){this.setState({originalSize:u},"document_viewer__set-original-size")}setRotateAngle(u){this.setState({rotateAngle:u},"document_viewer__set-rotate-angle")}setTotalPages(u){this.setState({totalPages:u},"document_viewer__set_total_pages")}setCurrentPageIndex(u){this.setState({currentPageIndex:u},"document_viewer__set_current_page_index")}setIsScrollingToPage(u){this.setState({isScrollingToPage:u},"document_viewer__set_is_scrolling_to_page")}setPageIndexScrollTo(u){this.setState({pageIndexScrollTo:u},"document_viewer__set_page_index_scroll_to")}}return r.\u0275fac=function(u){return new(u||r)},r.\u0275prov=i.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})()},70226:(z,R,t)=>{t.d(R,{q:()=>i,u:()=>_});var e=t(54355),s=t(911),h=t(6190),_=(()=>((_=_||{})[_.PROCEED=0]="PROCEED",_[_.DELETE=1]="DELETE",_[_.CANCEL=2]="CANCEL",_))();let i=(()=>{class f{get data(){return this.modalRef.data}constructor(p){this.modalRef=p,this.OUTPUT_DATA=_}close(p){this.modalRef.close(p)}}return f.\u0275fac=function(p){return new(p||f)(e.Y36(s.aiK))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-exist-conference-draft-modal"]],decls:17,vars:15,consts:[[1,"modal-card","message"],[1,"no-border"],["iva-button","","color","primary",1,"layout-right-margin_16",3,"click"],["iva-button","","color","secondary",1,"layout-right-margin_16",3,"click"],["iva-button","","color","secondary",3,"click"]],template:function(p,u){1&p&&(e.TgZ(0,"div",0)(1,"header"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"section"),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"footer",1)(8,"button",2),e.NdJ("click",function(){return u.close(u.OUTPUT_DATA.PROCEED)}),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"button",3),e.NdJ("click",function(){return u.close(u.OUTPUT_DATA.DELETE)}),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"button",4),e.NdJ("click",function(){return u.close(u.OUTPUT_DATA.CANCEL)}),e._uU(15),e.ALo(16,"translate"),e.qZA()()()),2&p&&(e.xp6(2),e.Oqu(e.lcZ(3,5,u.data.header)),e.xp6(3),e.hij(" ",e.lcZ(6,7,u.data.text)," "),e.xp6(4),e.hij(" ",e.lcZ(10,9,"PROCEED")," "),e.xp6(3),e.hij(" ",e.lcZ(13,11,"DELETE")," "),e.xp6(3),e.hij(" ",e.lcZ(16,13,"CANCEL")," "))},dependencies:[s.r0F,h.X$],styles:[".modal-card[_ngcontent-%COMP%]{max-width:500px}"],changeDetection:0}),f})()},98384:(z,R,t)=>{t.d(R,{a:()=>i});var e=t(54355),s=t(911),h=t(6190);const _=function(f,r){return{short:f,decimal:r}};let i=(()=>{class f{constructor(){this.multi=!1,this.canceled=new e.vpe,this.FILE_SIZE_DECIMAL=1,this.FILE_SIZE_SHORT=!0}}return f.\u0275fac=function(p){return new(p||f)},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-file-upload-progress-item"]],inputs:{progress:"progress",multi:"multi"},outputs:{canceled:"canceled"},decls:10,vars:24,consts:[[1,"layout","layout-row","layout-align-start-center","container"],["theme","dark",1,"layout","layout-right-padding_16","flex-noshrink",3,"mimeType"],[1,"flex-grow","not-scrollable","file-name",3,"tooltip"],[1,"layout","layout-align-end-center","layout-left-margin_8","layout-right-margin_24","flex-noshrink","iva-text_caption-2","font-gray-1-color"],[3,"tooltip","size","progress","click"]],template:function(p,u){1&p&&(e.TgZ(0,"div",0),e._UZ(1,"iva-file-icon",1),e.TgZ(2,"div",2),e._uU(3),e.qZA(),e.TgZ(4,"div",3),e._uU(5),e.ALo(6,"toByteUnit"),e.ALo(7,"toByteUnit"),e.qZA(),e.TgZ(8,"iva-cancelable-progress",4),e.NdJ("click",function(){return u.canceled.emit()}),e.ALo(9,"translate"),e.qZA()()),2&p&&(e.ekj("multi",u.multi),e.xp6(1),e.Q6J("mimeType",u.progress.file.type),e.xp6(1),e.Q6J("tooltip",u.progress.file.name),e.xp6(1),e.hij(" ",u.progress.file.name," "),e.xp6(2),e.AsE(" ",e.xi3(6,10,u.progress.transferred,e.WLB(18,_,u.FILE_SIZE_SHORT,u.FILE_SIZE_DECIMAL))," / ",e.xi3(7,13,u.progress.file.size,e.WLB(21,_,u.FILE_SIZE_SHORT,u.FILE_SIZE_DECIMAL))," "),e.xp6(3),e.Q6J("tooltip",e.lcZ(9,16,"CONFERENCE_SESSION__FILES__CANCEL_FILE_UPLOAD"))("size",24)("progress",u.progress.transferred/u.progress.file.size))},dependencies:[s.MGw,s.f7o,s.i9q,h.X$,s.S64],styles:[".container[_ngcontent-%COMP%]{background-color:rgba(var(--neutral-color-4),var(--transparency-30));-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);border-radius:8px;width:384px;padding:8px 16px}.container.multi[_ngcontent-%COMP%]{border-radius:0}.file-name[_ngcontent-%COMP%]{max-width:100%;position:relative;white-space:nowrap;background:linear-gradient(90deg,rgb(var(--font-gray-1-color)) 0%,rgb(var(--font-gray-1-color)) 50%,rgba(var(--neutral-color-4),var(--transparency-30)) 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent}"],changeDetection:0}),f})()},34533:(z,R,t)=>{t.d(R,{n:()=>m});var e=t(23503),s=t(54355),h=t(6190),_=t(40089),i=t(911),f=t(98384);const r=function(g){return{$implicit:g}};function p(g,E){if(1&g&&s.GkF(0,3),2&g){const n=s.oxw().$implicit;s.oxw();const S=s.MAs(3);s.Q6J("ngTemplateOutlet",S)("ngTemplateOutletContext",s.VKq(2,r,n.length))}}function u(g,E){if(1&g&&(s.ynx(0)(1,3),s.YNc(2,p,1,4,"ng-container",4),s.BQk()()),2&g){const n=E.$implicit;s.oxw();const S=s.MAs(5);s.xp6(1),s.Q6J("ngTemplateOutlet",S)("ngTemplateOutletContext",s.VKq(3,r,n)),s.xp6(1),s.Q6J("ngIf",n.length>1)}}const a=function(g){return{amount:g}};function o(g,E){if(1&g){const n=s.EpF();s.TgZ(0,"div",5)(1,"div",6)(2,"button",7),s.NdJ("click",function(){s.CHM(n);const C=s.oxw();return s.KtG(C.uploadsVisible=!C.uploadsVisible)}),s._UZ(3,"svg-icon",8),s.qZA(),s.TgZ(4,"span",9),s._uU(5),s.ALo(6,"translate"),s.qZA()(),s.TgZ(7,"iva-cancelable-progress",10),s.NdJ("click",function(){s.CHM(n);const C=s.oxw();return s.KtG(C.cancelAll())}),s.ALo(8,"translate"),s.qZA()()}if(2&g){const n=E.$implicit,S=s.oxw();s.ekj("multi-loading__header_collapsed",!S.uploadsVisible),s.xp6(2),s.Q6J("tooltip",S.collapseTooltip),s.xp6(1),s.ekj("multi-loading__rotate-icon_rotated",!S.uploadsVisible),s.xp6(2),s.hij(" ",s.xi3(6,9,"CONFERENCE_SESSION__FILES_MULTIPLE_UPLOAD_HEADER",s.VKq(14,a,n))," "),s.xp6(2),s.Q6J("tooltip",s.lcZ(8,12,"CONFERENCE_SESSION__FILES__CANCEL_FILE_UPLOAD"))("size",24)("progress",S.getProgressesSummary)}}function l(g,E){if(1&g){const n=s.EpF();s.TgZ(0,"app-file-upload-progress-item",14),s.NdJ("canceled",function(){const T=s.CHM(n).$implicit,P=s.oxw(3);return s.KtG(P.cancelUpload(T.key))}),s.qZA()}if(2&g){const n=E.$implicit,S=s.oxw(2).$implicit;s.Q6J("@opacityHide",void 0)("progress",n.value)("multi",S.length>1)}}function c(g,E){if(1&g&&(s.ynx(0),s.TgZ(1,"div",12),s.YNc(2,l,1,3,"app-file-upload-progress-item",13),s.qZA(),s.BQk()),2&g){const n=s.oxw().$implicit,S=s.oxw();s.xp6(2),s.Q6J("ngForOf",n)("ngForTrackBy",S.trackByKey)}}function d(g,E){if(1&g&&(s.Hsn(0),s.YNc(1,c,3,2,"ng-container",11)),2&g){const n=s.oxw();s.xp6(1),s.Q6J("ngIf",n.uploadsVisible)}}const v=["*"];let m=(()=>{class g{get getProgressesSummary(){let n=0,S=0;if(!this.progresses?.size)return 0;for(let C of this.progresses?.values())n+=C?.transferred,S+=C.file.size;return n/S}constructor(n){this.translate=n,this.progresses=new Map([]),this.itemCanceled=new s.vpe,this.uploadsVisible=!0}get collapseTooltip(){return this.translate.instant(this.uploadsVisible?"COLLAPSE":"EXPAND")}trackByKey(n,S){return S.key}cancelUpload(n){this.itemCanceled.emit(n)}cancelAll(){Array.from(this.progresses?.keys()??[]).forEach(n=>this.itemCanceled.emit(n))}}return g.\u0275fac=function(n){return new(n||g)(s.Y36(h.sK))},g.\u0275cmp=s.Xpm({type:g,selectors:[["app-file-upload-progress"]],inputs:{progresses:"progresses"},outputs:{itemCanceled:"itemCanceled"},ngContentSelectors:v,decls:6,vars:3,consts:[[4,"ngWith","ngWithAs"],["multiLoadingHeader",""],["progressesListTmpl",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],[1,"layout-row","layout-align-space-between-center","multi-loading__header"],[1,"layout-row","layout-align-space-between-center","multi-loading__header-info-wrapper"],["iva-icon-button","",1,"layout-right-margin_16","multi-loading__collapse-button",3,"tooltip","click"],["src","assets/icons/icon16/open-down.svg",1,"multi-loading__rotate-icon"],[1,"multi-loading__uploading-amount"],[3,"tooltip","size","progress","click"],[4,"ngIf"],[1,"multi-loading__items-list"],[3,"progress","multi","canceled",4,"ngFor","ngForOf","ngForTrackBy"],[3,"progress","multi","canceled"]],template:function(n,S){1&n&&(s.F$t(),s.YNc(0,u,3,5,"ng-container",0),s.ALo(1,"mapEntries"),s.YNc(2,o,9,16,"ng-template",null,1,s.W1O),s.YNc(4,d,2,1,"ng-template",null,2,s.W1O)),2&n&&s.Q6J("ngWithAs",s.lcZ(1,1,S.progresses))},dependencies:[_.sg,_.O5,_.tP,i.bk9,i.r2H,i.MGw,i.XFu,i.i9q,f.a,h.X$,i.QzR],styles:[".multi-loading__collapse-button[_ngcontent-%COMP%]{display:flex;width:32px;justify-content:center}.multi-loading__rotate-icon[_ngcontent-%COMP%]{transition:transform .1s linear}.multi-loading__rotate-icon_rotated[_ngcontent-%COMP%]{transform:rotate(180deg)}.multi-loading__header[_ngcontent-%COMP%]{height:48px;padding:0 16px;background-color:rgba(var(--neutral-color-4),var(--transparency-30));border-radius:8px 8px 0 0;border:1px solid rgb(var(--neutral-color-4));border-bottom:none;width:100%}.multi-loading__header_collapsed[_ngcontent-%COMP%]{border-radius:8px;border-bottom:1px solid rgb(var(--neutral-color-4))}.multi-loading__header-info-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.multi-loading__uploading-amount[_ngcontent-%COMP%]{color:rgb(var(--font-gray-1-color))}.multi-loading__items-list[_ngcontent-%COMP%]{max-height:144px;overflow-y:auto;overflow-x:hidden}"],data:{animation:[(0,e.X$)("opacityHide",[(0,e.eR)(":enter",[(0,e.oB)({opacity:0}),(0,e.jt)("500ms ease-out",(0,e.oB)({opacity:1}))]),(0,e.eR)(":leave",[(0,e.oB)({opacity:1}),(0,e.jt)("500ms ease-in",(0,e.oB)({opacity:0}))])])]},changeDetection:0}),g})()},65892:(z,R,t)=>{t.d(R,{S:()=>r});var e=t(77323),s=t(54355),h=t(40089),_=t(911);function i(p,u){1&p&&s._UZ(0,"svg-icon",2)}function f(p,u){if(1&p&&s._UZ(0,"iva-file-icon",3),2&p){const a=s.oxw();s.Q6J("mimeType",(null==a.document.resource?null:a.document.resource.mimeType)||"")}}let r=(()=>{class p{get isDocument(){return this.fsItem.type===e.wY.DOCUMENT}get isDirectory(){return this.fsItem.type===e.wY.DIRECTORY}get document(){return this.fsItem}}return p.\u0275fac=function(a){return new(a||p)},p.\u0275cmp=s.Xpm({type:p,selectors:[["app-fs-item-icon"]],inputs:{fsItem:"fsItem"},decls:2,vars:2,consts:[["class","folder-icon","src","assets/icons/icon32/folder.svg",4,"ngIf"],["theme","light",3,"mimeType",4,"ngIf"],["src","assets/icons/icon32/folder.svg",1,"folder-icon"],["theme","light",3,"mimeType"]],template:function(a,o){1&a&&(s.YNc(0,i,1,0,"svg-icon",0),s.YNc(1,f,1,1,"iva-file-icon",1)),2&a&&(s.Q6J("ngIf",o.isDirectory),s.xp6(1),s.Q6J("ngIf",o.isDocument))},dependencies:[h.O5,_.bk9,_.f7o],styles:["[_nghost-%COMP%]   .folder-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{fill:rgb(var(--font-disabled-color))}"],changeDetection:0}),p})()},12965:(z,R,t)=>{t.d(R,{Z:()=>u});var e=t(25917),s=t(67460),h=t(96736),_=t(54355),i=t(40089),f=t(911);function r(a,o){1&a&&(_.TgZ(0,"div",1),_._UZ(1,"iva-spinner"),_.qZA())}let u=(()=>{class a{constructor(l){this.showSpinnerDelay=l,this.isSpinnerVisible$=(0,e.of)(!1).pipe((0,s.g)(this.showSpinnerDelay??500),(0,h.h)(!0))}}return a.\u0275fac=function(l){return new(l||a)(_.$8M("showSpinnerDelay"))},a.\u0275cmp=_.Xpm({type:a,selectors:[["app-fullscreen-loader"]],decls:2,vars:3,consts:[["class","spinner-wrapper",4,"ngIf"],[1,"spinner-wrapper"]],template:function(l,c){1&l&&(_.YNc(0,r,2,0,"div",0),_.ALo(1,"async")),2&l&&_.Q6J("ngIf",_.lcZ(1,1,c.isSpinnerVisible$))},dependencies:[i.O5,f.ORR,i.Ov],styles:["[_nghost-%COMP%]{display:block;position:fixed;top:0;left:0;z-index:9999;width:var(--100vw);height:100vh}[_nghost-%COMP%]   .spinner-wrapper[_ngcontent-%COMP%]{display:flex;width:100%;height:100%;justify-content:space-around;align-items:center;background-color:transparent}"],changeDetection:0}),a})()},42277:(z,R,t)=>{t.d(R,{x:()=>f});var e=t(49718),s=t(49058),h=t(911),_=t(82518),i=t(54355);let f=(()=>{class r{constructor(u,a){this.overlay=u,this.injector=a}ngOnDestroy(){this.leftPanelOverlayRef?.close()}openLeftMenu(){const u=new e.X_({positionStrategy:(new h.G5c).stickToLeft().syncScrollY(),scrollStrategy:this.overlay.scrollStrategies.reposition(),hasBackdrop:!0,backdropClass:"popover-backdrop"}),a=this.overlay.create(u);this.leftPanelOverlayRef=new h.aiK(a,_.x,null,!0);const o=new WeakMap([[h.aiK,this.leftPanelOverlayRef]]),l=new s.nK(this.injector,o);a.attach(new s.C5(h.Bs0,null,l))}}return r.\u0275fac=function(u){return new(u||r)(i.Y36(e.aV),i.Y36(i.zs3))},r.\u0275cmp=i.Xpm({type:r,selectors:[["app-hamburger"]],decls:2,vars:0,consts:[["iva-icon-button","",1,"hamburger",3,"click"],["src","assets/icons/icon24/hamburger.svg"]],template:function(u,a){1&u&&(i.TgZ(0,"button",0),i.NdJ("click",function(){return a.openLeftMenu()}),i._UZ(1,"svg-icon",1),i.qZA())},dependencies:[h.bk9,h.r2H],styles:[":root{--100vh: 100vh;--100vw: 100vw}app-hamburger{display:flex}\n"],encapsulation:2,changeDetection:0}),r})()},11381:(z,R,t)=>{t.d(R,{K:()=>C});var e=t(54355),s=t(76652),h=t(46554),_=t(5469),i=t(911),f=t(76991),r=t(9112),p=t(88002),u=t(6190),a=t(40089);function o(T,P){if(1&T&&(e.TgZ(0,"span",15),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&T){const A=e.oxw();e.xp6(1),e.hij(" ",e.lcZ(2,1,A.labelValue)," ")}}function l(T,P){1&T&&e._UZ(0,"iva-spinner",16),2&T&&e.Q6J("size",24)}const c=function(T){return{count:T}};function d(T,P){if(1&T&&(e.ynx(0),e._uU(1),e.ALo(2,"translate"),e.BQk()),2&T){const A=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,"PASSWORD_VALIDATION.KIND."+A.kind,e.VKq(4,c,A.value))," ")}}function v(T,P){if(1&T&&(e.TgZ(0,"span",23),e._uU(1),e.ALo(2,"translate"),e.YNc(3,d,3,6,"ng-container",24),e.qZA()),2&T){const A=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.xi3(2,2,"PASSWORD_VALIDATION."+A.key,e.VKq(5,c,A.value))," "),e.xp6(2),e.Q6J("ngIf",A.kind)}}function I(T,P){if(1&T&&(e.ynx(0),e._uU(1),e.ALo(2,"translate"),e.BQk()),2&T){const A=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,"PASSWORD_VALIDATION.CLASSES_N",e.VKq(4,c,A.value))," ")}}function m(T,P){1&T&&(e.ynx(0),e._uU(1),e.ALo(2,"translate"),e.BQk()),2&T&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"PASSWORD_VALIDATION.CLASSES")," "))}function g(T,P){if(1&T&&(e.TgZ(0,"span",23),e.YNc(1,I,3,6,"ng-container",24),e.YNc(2,m,3,3,"ng-container",24),e.qZA()),2&T){const A=e.oxw().$implicit,M=e.oxw(3);e.xp6(1),e.Q6J("ngIf",A.value<M.classCounter),e.xp6(1),e.Q6J("ngIf",A.value>=M.classCounter)}}function E(T,P){if(1&T&&(e.TgZ(0,"span",21),e.YNc(1,v,4,7,"span",22),e.YNc(2,g,3,2,"span",22),e.qZA()),2&T){const A=P.$implicit,M=P.index,L=e.oxw(3);e.ekj("layout-top-margin_8",0===A.level)("requirement-item_bullet-nested",!A.noDot&&0===M&&0!==A.level)("layout-left-margin_8",1===A.level)("requirement-item_bullet",!A.noDot&&0===M&&0===A.level)("requirement-item_matched",A.matched),e.xp6(1),e.Q6J("ngIf",A.key!==L.ComplexityRequirementEnum.CLASSES),e.xp6(1),e.Q6J("ngIf",A.key===L.ComplexityRequirementEnum.CLASSES)}}function n(T,P){if(1&T&&(e.TgZ(0,"div",19),e.YNc(1,E,3,12,"span",20),e.qZA()),2&T){const A=P.$implicit;e.ekj("requirement__inner_flat",0===P.index),e.xp6(1),e.Q6J("ngForOf",A)}}function S(T,P){if(1&T&&(e.TgZ(0,"div",17),e.YNc(1,n,2,3,"div",18),e.qZA()),2&T){const A=P.$implicit;e.xp6(1),e.Q6J("ngForOf",A)}}let C=(()=>{class T{get iconSrc(){switch(this.size){case"m":return this.isPasswordShown?"assets/icons/icon24/eye-hide.svg":"assets/icons/icon24/eye-reveal.svg";case"s":case"l":case"xl":case"user-defined":throw new Error(`The ${this.size} size is not supported for InputPasswordComponent`)}}get iconTitle(){return this.translate.instant(this.isPasswordShown?"HIDE_PASSWORD":"SHOW_PASSWORD")}get e2eId(){return this._e2eId}set e2eId(A){this._e2eId=A}constructor(A,M){this.translate=A,this.passwordValidationService=M,this.type="text",this.size="m",this.disabled=!1,this.isPasswordShown=!1,this.classCounter=0,this.ComplexityRequirementEnum=h.I,this.notMatchedRequirements$=this.passwordValidationService.notMatchedRequirements$,this.isLoading$=this.passwordValidationService.isLoading$,this.requirements$=this.passwordValidationService.requirements$,this.matchedRequirements$=(0,r.aj)([this.notMatchedRequirements$,this.requirements$]).pipe((0,p.U)(([L,N])=>(this.classCounter=0,N.map(W=>W.map(b=>{let V;return+b.value<0&&([h.I.UPPER_LETTERS,h.I.LOWER_LETTERS].includes(b.key)&&(V="LETTERS"),b.key===h.I.DIGITS&&(V="DIGITS"),b.key===h.I.OTHER_SYMBOLS&&(V="SYMBOLS")),[h.I.UPPER_LETTERS,h.I.LOWER_LETTERS,h.I.DIGITS,h.I.OTHER_SYMBOLS].includes(b.key)&&0!==b.value&&this.classCounter++,{...b,matched:!L.includes(b.key),kind:V,value:Math.abs(+b.value)}}))))),this.isInvalid$=this.notMatchedRequirements$.pipe((0,p.U)(L=>!!this.value?.length&&!!L.length)),this.labelValue="",this.placeholder=" ",this.autofill="off",this.maxLength=-1,this.passwordVisibilityChanged=new e.vpe,this._e2eId="",this.onTouchedFn=()=>{},this.onChangeFn=()=>{},this.dropdownPositions=[{originX:"center",originY:"bottom",overlayX:"center",overlayY:"top",offsetY:4},{offsetY:4,originX:"center",originY:"top",overlayX:"center",overlayY:"bottom"}],this.debouncedValidate=(0,f.Z)(this.validate.bind(this),_._Z.settings.INPUT_THROTTLE_MS)}writeValue(A){this.value=A}onChange(A){this.value=A,this.debouncedValidate(A),this.onChangeFn(A)}registerOnChange(A){this.onChangeFn=A}registerOnTouched(A){this.onTouchedFn=A}togglePassword(){this.isPasswordShown=!this.isPasswordShown,this.passwordVisibilityChanged.emit()}focusChanged(A,M){A?(this.dropdown?.show(),"string"==typeof M&&!M.length&&this.passwordValidationService.init(this.recoveryToken)):this.dropdown?.hide()}validate(A){A?.length?this.passwordValidationService.validate(A,this.recoveryToken):this.passwordValidationService.resetNotMatchedRequirements()}}return T.\u0275fac=function(A){return new(A||T)(e.Y36(u.sK),e.Y36(_.l2))},T.\u0275cmp=e.Xpm({type:T,selectors:[["app-input-password-with-validation"]],viewQuery:function(A,M){if(1&A&&e.Gf(i.JOL,5),2&A){let L;e.iGM(L=e.CRH())&&(M.dropdown=L.first)}},inputs:{type:"type",size:"size",disabled:"disabled",isPasswordShown:"isPasswordShown",recoveryToken:"recoveryToken",labelValue:"labelValue",placeholder:"placeholder",autocomplete:"autocomplete",autofill:"autofill",maxLength:"maxLength",id:"id",e2eId:"e2eId"},outputs:{passwordVisibilityChanged:"passwordVisibilityChanged"},exportAs:["ivaInputPasswordWithValidation"],features:[e._Bn([{provide:s.JU,useExisting:(0,e.Gpc)(()=>T),multi:!0},_.l2])],decls:20,vars:29,consts:[[1,"input-icon-right"],[1,"layout-column"],["class","layout-bottom-margin_8 layout-left-margin_16 iva-text_color-gray",4,"ngIf"],[1,"input__wrapper"],["dropdownAnchor",""],[3,"reference","positions"],[1,"input-password-with-validation__dropdown"],["class","loader","inline","",3,"size",4,"ngIf"],[1,"input-password-with-validation__dropdown-title"],["class","layout-column requirement",4,"ngWith","ngWithAs"],["ivaInput","",3,"autocomplete","autofill","disabled","id","ngModel","placeholder","size","type","focus","blur","ngModelChange"],["input",""],[1,"icon"],["iva-icon-button","","markerAlign","auto",3,"tooltip","click"],[3,"src"],[1,"layout-bottom-margin_8","layout-left-margin_16","iva-text_color-gray"],["inline","",1,"loader",3,"size"],[1,"layout-column","requirement"],["class","requirement__inner",3,"requirement__inner_flat",4,"ngFor","ngForOf"],[1,"requirement__inner"],["class","layout layout-right-margin_2 requirement-item",3,"layout-top-margin_8","requirement-item_bullet-nested","layout-left-margin_8","requirement-item_bullet","requirement-item_matched",4,"ngFor","ngForOf"],[1,"layout","layout-right-margin_2","requirement-item"],["class","requirement-item__text",4,"ngIf"],[1,"requirement-item__text"],[4,"ngIf"]],template:function(A,M){if(1&A){const L=e.EpF();e.TgZ(0,"div",0)(1,"label",1),e.YNc(2,o,3,3,"span",2),e.TgZ(3,"div",3,4)(5,"iva-dropdown",5)(6,"div",6),e.YNc(7,l,1,1,"iva-spinner",7),e.ALo(8,"async"),e.TgZ(9,"p",8),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.YNc(12,S,2,1,"div",9),e.ALo(13,"async"),e.qZA()(),e.TgZ(14,"input",10,11),e.NdJ("focus",function(){e.CHM(L);const W=e.MAs(15);return e.KtG(M.focusChanged(!0,W.value))})("blur",function(){return M.focusChanged(!1)})("ngModelChange",function(W){return M.onChange(W)}),e.ALo(16,"async"),e.qZA(),e.TgZ(17,"div",12)(18,"button",13),e.NdJ("click",function(){return M.togglePassword()}),e._UZ(19,"svg-icon",14),e.qZA()()()()()}if(2&A){const L=e.MAs(4);e.xp6(2),e.Q6J("ngIf",M.labelValue),e.xp6(3),e.Q6J("reference",L)("positions",M.dropdownPositions),e.xp6(2),e.Q6J("ngIf",e.lcZ(8,21,M.isLoading$)),e.xp6(3),e.hij(" ",e.lcZ(11,23,"PASSWORD_VALIDATION.PASSWORD_MUST_CONTAIN")," "),e.xp6(2),e.Q6J("ngWithAs",e.lcZ(13,25,M.matchedRequirements$)),e.xp6(2),e.ekj("visible-invalid",e.lcZ(16,27,M.isInvalid$)),e.Q6J("autocomplete",M.autocomplete)("autofill",M.autofill)("disabled",M.disabled)("id",M.id)("ngModel",M.value)("placeholder",M.placeholder)("size",M.size)("type",M.isPasswordShown?M.type:"password"),e.uIk("e2e-id",M.e2eId+"-input")("maxLength",M.maxLength),e.xp6(4),e.Q6J("tooltip",M.iconTitle),e.uIk("e2e-id",M.e2eId+(M.isPasswordShown?"-hide-password-btn":"-show-password-btn")),e.xp6(1),e.Q6J("src",M.iconSrc)}},dependencies:[a.sg,a.O5,s.Fj,s.JJ,s.On,i.bk9,i.r2H,i.JOL,i.Vdl,i.XFu,i.ORR,i.i9q,a.Ov,u.X$],styles:['[_nghost-%COMP%]   .input-icon-right[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .input__wrapper[_ngcontent-%COMP%]{position:relative;z-index:1}.input-password-with-validation__dropdown[_ngcontent-%COMP%]{width:100%;border-radius:24px;background-color:rgb(var(--dropdown-bg));border:solid 1px rgb(var(--dropdown-border));box-shadow:0 1px 4px #0000003d;display:block;overflow:auto;padding:16px}.input-password-with-validation__dropdown[_ngcontent-%COMP%]::-webkit-scrollbar{width:22px}.input-password-with-validation__dropdown[_ngcontent-%COMP%]::-webkit-scrollbar-track{border:8px solid transparent;background-clip:padding-box}.input-password-with-validation__dropdown[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border:8px solid transparent;background-clip:padding-box}.input-password-with-validation__dropdown[iva-size=s][_ngcontent-%COMP%]{max-height:156px;border-radius:18px}.input-password-with-validation__dropdown[iva-size=s][_ngcontent-%COMP%]::-webkit-scrollbar{width:18px}.input-password-with-validation__dropdown[iva-size=s][_ngcontent-%COMP%]::-webkit-scrollbar-track{border:6px solid transparent;background-clip:padding-box}.input-password-with-validation__dropdown[iva-size=s][_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border:6px solid transparent;background-clip:padding-box}.input-password-with-validation__dropdown[iva-size=m][_ngcontent-%COMP%]{max-height:234px;border-radius:18px}.input-password-with-validation__dropdown[iva-size=l][_ngcontent-%COMP%]{max-height:312px;border-radius:24px}.input-password-with-validation__dropdown[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]{position:absolute;right:6px;top:6px}.input-password-with-validation__dropdown-title[_ngcontent-%COMP%]{font-size:16px;line-height:1.5;letter-spacing:normal;font-weight:400}.requirement[_ngcontent-%COMP%]{width:100%}.requirement__inner[_ngcontent-%COMP%]{display:flex;flex-flow:row nowrap;white-space:nowrap}.requirement__inner_flat[_ngcontent-%COMP%]{display:block;white-space:normal}.requirement__inner_flat[_ngcontent-%COMP%]   .requirement-item[_ngcontent-%COMP%]{display:inline;padding:0;margin:0}.requirement__inner_flat[_ngcontent-%COMP%]   .requirement-item[_ngcontent-%COMP%]:first-child{padding-left:10px}.requirement-item[_ngcontent-%COMP%]{position:relative;align-items:center;padding:0 0 0 10px}.requirement-item[_ngcontent-%COMP%]:only-child{overflow-wrap:break-word;white-space:normal;flex-flow:row wrap}.requirement-item_bullet[_ngcontent-%COMP%]:before, .requirement-item_bullet-nested[_ngcontent-%COMP%]:before{content:"";width:6px;height:6px;border-radius:50%;display:block;background:rgb(var(--black-100));position:absolute;left:0;top:7px}.requirement-item_bullet-nested[_ngcontent-%COMP%]:before{width:4px;height:4px}.requirement-item__text[_ngcontent-%COMP%]{color:inherit}.requirement-item_matched[_ngcontent-%COMP%]{color:rgb(var(--success-color))}.requirement-item_matched.requirement-item_bullet[_ngcontent-%COMP%]:before, .requirement-item_matched.requirement-item_bullet-nested[_ngcontent-%COMP%]:before{width:6px;height:4px;border-bottom:1px solid rgb(var(--success-color));border-left:1px solid rgb(var(--success-color));transform:rotate(-45deg);border-radius:0;background:transparent}'],changeDetection:0}),T})()},32902:(z,R,t)=>{t.d(R,{P:()=>r});var e=t(54355),s=t(76652),h=t(6190),_=t(40089),i=t(911);function f(p,u){if(1&p&&(e.TgZ(0,"span",8),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&p){const a=e.oxw();e.xp6(1),e.hij(" ",e.lcZ(2,1,a.labelValue)," ")}}let r=(()=>{class p{get iconSrc(){switch(this.size){case"m":return this.isPasswordShown?"assets/icons/icon24/eye-hide.svg":"assets/icons/icon24/eye-reveal.svg";case"s":case"l":case"xl":case"user-defined":throw new Error(`The ${this.size} size is not supported for InputPasswordComponent`)}}get iconTitle(){return this.translate.instant(this.isPasswordShown?"HIDE_PASSWORD":"SHOW_PASSWORD")}get e2eId(){return this._e2eId}set e2eId(a){this._e2eId=a}constructor(a){this.translate=a,this.type="text",this.size="m",this.disabled=!1,this.isPasswordShown=!1,this.invalid=!1,this.labelValue="",this.placeholder=" ",this.autofill="off",this.maxLength=-1,this.passwordVisibilityChanged=new e.vpe,this._e2eId="",this.onTouchedFn=()=>{},this.onChangeFn=()=>{}}writeValue(a){this.value=a}onChange(a){this.value=a,this.onChangeFn(a)}registerOnChange(a){this.onChangeFn=a}registerOnTouched(a){this.onTouchedFn=a}togglePassword(){this.isPasswordShown=!this.isPasswordShown,this.passwordVisibilityChanged.emit()}}return p.\u0275fac=function(a){return new(a||p)(e.Y36(h.sK))},p.\u0275cmp=e.Xpm({type:p,selectors:[["app-input-password"]],inputs:{type:"type",size:"size",disabled:"disabled",isPasswordShown:"isPasswordShown",invalid:"invalid",labelValue:"labelValue",placeholder:"placeholder",autocomplete:"autocomplete",autofill:"autofill",maxLength:"maxLength",id:"id",e2eId:"e2eId"},outputs:{passwordVisibilityChanged:"passwordVisibilityChanged"},exportAs:["ivaInputPassword"],features:[e._Bn([{provide:s.JU,useExisting:(0,e.Gpc)(()=>p),multi:!0}])],decls:8,vars:16,consts:[[1,"input-icon-right"],[1,"layout-column"],["class","layout-bottom-margin_8 layout-left-margin_16 iva-text_color-gray",4,"ngIf"],[1,"input__wrapper"],["ivaInput","",3,"autocomplete","autofill","disabled","id","ngModel","placeholder","size","type","blur","ngModelChange"],[1,"icon"],["iva-icon-button","","markerAlign","auto",3,"tooltip","click"],[3,"src"],[1,"layout-bottom-margin_8","layout-left-margin_16","iva-text_color-gray"]],template:function(a,o){1&a&&(e.TgZ(0,"div",0)(1,"label",1),e.YNc(2,f,3,3,"span",2),e.TgZ(3,"div",3)(4,"input",4),e.NdJ("blur",function(){return o.onTouchedFn()})("ngModelChange",function(c){return o.onChange(c)}),e.qZA(),e.TgZ(5,"div",5)(6,"button",6),e.NdJ("click",function(){return o.togglePassword()}),e._UZ(7,"svg-icon",7),e.qZA()()()()()),2&a&&(e.xp6(2),e.Q6J("ngIf",o.labelValue),e.xp6(2),e.ekj("visible-invalid",o.invalid),e.Q6J("autocomplete",o.autocomplete)("autofill",o.autofill)("disabled",o.disabled)("id",o.id)("ngModel",o.value)("placeholder",o.placeholder)("size",o.size)("type",o.isPasswordShown?o.type:"password"),e.uIk("e2e-id",o.e2eId+"-input")("maxLength",o.maxLength),e.xp6(2),e.Q6J("tooltip",o.iconTitle),e.uIk("e2e-id",o.e2eId+(o.isPasswordShown?"-hide-password-btn":"-show-password-btn")),e.xp6(1),e.Q6J("src",o.iconSrc))},dependencies:[_.O5,s.Fj,s.JJ,s.On,i.bk9,i.r2H,i.Vdl,i.i9q,h.X$],styles:["[_nghost-%COMP%]   .input-icon-right[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .input__wrapper[_ngcontent-%COMP%]{position:relative;z-index:1}"],changeDetection:0}),p})()},50461:(z,R,t)=>{t.d(R,{Z:()=>X});var e=t(54355),s=t(76652),h=t(23e3),_=t(42827),i=t(911),f=t(66682),r=t(88002),p=t(68307),u=t(46782),a=t(17911),o=t(69261),l=t(6190),c=t(25916),d=t(28728),v=t(40089),I=t(84460),m=t(48258);function g(K,oe){1&K&&(e.TgZ(0,"p",14),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&K&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"CONTACTS_PAGE.ONLINE")," "))}function E(K,oe){1&K&&(e.TgZ(0,"p",15),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&K&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"CONTACTS_PAGE.OFFLINE")," "))}function n(K,oe){1&K&&(e.TgZ(0,"p",15),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&K&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"CONTACTS_PAGE.BOT")," "))}function S(K,oe){1&K&&(e.TgZ(0,"p",15),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&K&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"CONTACTS_PAGE.IN_EVENT")," "))}function C(K,oe){1&K&&(e.TgZ(0,"p",15),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&K&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"CONTACTS_PAGE.IN_CALL")," "))}function T(K,oe){1&K&&(e.TgZ(0,"p",15),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&K&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"CONTACTS_PAGE.UNKNOWN")," "))}function P(K,oe){if(1&K){const O=e.EpF();e.TgZ(0,"button",16),e.NdJ("click",function(){e.CHM(O);const k=e.oxw();return e.KtG(k.createOrGetChat(k.interlocutor))}),e.ALo(1,"translate"),e._UZ(2,"svg-icon",17),e.qZA()}2&K&&e.Q6J("tooltip",e.lcZ(1,1,"CHATS.WRITE_MESSAGE"))}function A(K,oe){if(1&K){const O=e.EpF();e.TgZ(0,"button",18),e.NdJ("click",function(){e.CHM(O);const k=e.oxw();return e.KtG(k.doPlanEvent())}),e.ALo(1,"translate"),e._UZ(2,"svg-icon",19),e.qZA()}2&K&&e.Q6J("tooltip",e.lcZ(1,1,"CONTACTS_PAGE.SCHEDULE_EVENT"))}function M(K,oe){if(1&K&&(e.TgZ(0,"div",20)(1,"div",21),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._UZ(4,"iva-editable-text",22),e.qZA()),2&K){const O=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,4,"CONTACTS_PAGE.COMPANY")),e.xp6(2),e.Q6J("readonly",!0)("wideMode",!0)("displayType",O.DISPLAY_TYPE.INPUT)}}function L(K,oe){1&K&&(e._UZ(0,"svg-icon",26),e.ALo(1,"translate")),2&K&&e.Q6J("tooltip",e.lcZ(1,2,"CONTACTS_PAGE.EMAIL_INFO"))("tooltipMaxWidth",300)}function N(K,oe){if(1&K&&(e.TgZ(0,"div",20)(1,"div",23),e._uU(2),e.ALo(3,"translate"),e.YNc(4,L,2,4,"svg-icon",24),e.qZA(),e._UZ(5,"iva-editable-text",25),e.qZA()),2&K){const O=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,7,"CONTACTS_PAGE.EMAIL")," "),e.xp6(2),e.Q6J("ngIf",!O.isReadonly&&O.isNoteContact),e.xp6(1),e.Q6J("readonly",O.isReadonly||!O.isNoteContact)("maxLength",255)("wideMode",!0)("displayType",O.DISPLAY_TYPE.INPUT)("validator",O.validateEmail)}}function W(K,oe){1&K&&(e._UZ(0,"svg-icon",29),e.ALo(1,"translate")),2&K&&e.Q6J("tooltip",e.lcZ(1,2,"CONTACTS_PAGE.PHONE_INFO"))("tooltipMaxWidth",300)}function b(K,oe){if(1&K&&(e.TgZ(0,"div",20)(1,"div",23),e._uU(2),e.ALo(3,"translate"),e.YNc(4,W,2,4,"svg-icon",27),e.qZA(),e._UZ(5,"iva-editable-text",28),e.qZA()),2&K){const O=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,7,"CONTACTS_PAGE.PHONE")," "),e.xp6(2),e.Q6J("ngIf",!O.isReadonly&&O.isNoteContact),e.xp6(1),e.Q6J("readonly",O.isReadonly||!O.isNoteContact)("maxLength",512)("wideMode",!0)("displayType",O.DISPLAY_TYPE.INPUT)("validator",O.validatePhone)}}function V(K,oe){if(1&K&&(e.TgZ(0,"div",20)(1,"div",21),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._UZ(4,"iva-editable-text",30),e.qZA()),2&K){const O=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,4,"CONTACTS_PAGE.ADDITIONAL_CONTACT")),e.xp6(2),e.Q6J("readonly",!0)("wideMode",!0)("displayType",O.DISPLAY_TYPE.INPUT)}}function D(K,oe){if(1&K&&(e.TgZ(0,"div",20)(1,"div",21),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._UZ(4,"iva-editable-text",31),e.qZA()),2&K){const O=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,4,"CONTACTS_PAGE.ABOUT_ME")),e.xp6(2),e.Q6J("readonly",!0)("wideMode",!0)("displayType",O.DISPLAY_TYPE.INPUT)}}function F(K,oe){if(1&K&&(e.TgZ(0,"div",20)(1,"div",21),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._UZ(4,"iva-editable-text",32),e.qZA()),2&K){const O=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,4,"CONTACTS_PAGE.NOTE")),e.xp6(2),e.Q6J("maxLength",500)("wideMode",!0)("displayType",O.DISPLAY_TYPE.TEXTAREA)}}function J(K,oe){if(1&K&&(e.TgZ(0,"div",20)(1,"div",21),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._UZ(4,"iva-tag-input",33),e.ALo(5,"async"),e.qZA()),2&K){const O=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,4,"CONTACTS_PAGE.TAGS")),e.xp6(2),e.Q6J("editable",!0)("suggestions",e.lcZ(5,6,O.tagsSuggestions$))("maxLength",1024)}}function H(K,oe){if(1&K&&(e.TgZ(0,"div",38)(1,"div",39),e._uU(2),e.qZA(),e._UZ(3,"iva-input-expandable",40),e.qZA()),2&K){const O=e.oxw().$implicit;e.xp6(1),e.Q6J("tooltip",O.name),e.xp6(1),e.Oqu(O.name),e.xp6(1),e.Q6J("value",O.value)}}function Y(K,oe){if(1&K&&(e.ynx(0),e.YNc(1,H,4,3,"div",37),e.BQk()),2&K){const O=oe.$implicit;e.xp6(1),e.Q6J("ngIf",O.value)}}function ee(K,oe){if(1&K){const O=e.EpF();e.TgZ(0,"app-settings-section",34),e.NdJ("contentWasAttached",function(){e.CHM(O);const k=e.oxw();return e.KtG(k.onContentWasAttached())}),e.ALo(1,"translate"),e.ALo(2,"translate"),e.TgZ(3,"div",35),e.YNc(4,Y,2,1,"ng-container",36),e.qZA()()}if(2&K){const O=e.oxw();e.Q6J("openTitle",e.lcZ(1,4,"SETTINGS__PROFILE_SECTION__ADDITIONAL_INFO__SHOW"))("closeTitle",e.lcZ(2,6,"SETTINGS__PROFILE_SECTION__ADDITIONAL_INFO__HIDE"))("isOpened",!1),e.xp6(4),e.Q6J("ngForOf",O.interlocutor.profile.parameters)}}let X=(()=>{class K{constructor(O,U,k,te,fe,de,re,_e){this.cd=O,this.fb=U,this.contactsService=k,this.destroy$=te,this.validationService=fe,this.translate=de,this.chatService=re,this.systemSettingsService=_e,this.isReadonly=!1,this.DISPLAY_TYPE=i.FOL,this.isInvitation=!1,this.canCreateConference=!1,this.canCreateOrGetChat=!0,this.closeInfo=new e.vpe,this.planEvent=new e.vpe,this.contactChanged=new e.vpe,this.form=this.fb.group({name:[""],companyName:[""],additionalContact:[""],aboutSelf:[""],email:[""],phone:[""],tags:[""],note:[""],parameters:this.fb.group({})}),this.ONLINE_STATUS=_.Y,this.tagsSuggestions$=this.contactsService.tagSuggestions$,this.validateEmail=ve=>ve?this.validationService.isValidEmail(ve)?null:this.translate.instant("INTERLOCUTOR_INFO.INVALID_EMAIL"):this.interlocutor.phone?null:this.translate.instant("INTERLOCUTOR_INFO.EMAIL_OR_PHONE_IS_REQUIRED"),this.validatePhone=ve=>ve?this.validationService.isValidPhoneOfVoip(ve)?null:this.translate.instant("INTERLOCUTOR_INFO.INVALID_PHONE"):this.interlocutor.email?null:this.translate.instant("INTERLOCUTOR_INFO.EMAIL_OR_PHONE_IS_REQUIRED"),this.formValueChangesSub()}get isCreateConferenceButtonShown(){return this.canCreateConference&&!this.isBot}get isNoteFieldShown(){return this.isContact&&!this.isInvitation}get interlocutor(){return this._interlocutor}set interlocutor(O){this._interlocutor=O,this.setFormValues(),this.createParametersFormGroup(this.interlocutor.profile?.parameters)}get isContact(){return!!this.interlocutor.contact}get isBot(){return this.interlocutor.interlocutorType===h.x.CHAT_BOT}get isNoteContact(){return this.interlocutor.interlocutorType===h.x.NOTE_CONTACT}get onlineStatus(){return this.isBot?_.Y.BOT:this.contactsService.getContactOnlineStatus(this.interlocutor)}get isTagsShown(){return[h.x.DOMAIN_USER,h.x.COMPANY_CONTACT,h.x.FOREIGN_CONTACT,h.x.NOTE_CONTACT].includes(this.interlocutor.interlocutorType)&&!this.isReadonly}get isAttributesShown(){return!!this.interlocutor.profile?.parameters?.filter(O=>O.value).length}get canGetOrCreateChat(){return!!this.systemSettingsService.getSystemSettingAsBoolean("INSTANT_MESSAGING")&&this.canCreateOrGetChat}formValueChangesSub(){const O=this.form.controls.name.valueChanges.pipe((0,r.U)(de=>({name:de}))),U=this.form.controls.email.valueChanges.pipe((0,r.U)(de=>({email:{value:de}}))),k=this.form.controls.phone.valueChanges.pipe((0,r.U)(de=>({phone:{value:de}}))),te=this.form.controls.note.valueChanges.pipe((0,r.U)(de=>({note:{value:de}}))),fe=this.form.controls.tags.valueChanges.pipe((0,p.b)(de=>this.contactsService.appendTagsSuggestions(de)),(0,r.U)(de=>({tags:{value:de}})));(0,f.T)(O,U,k,fe,te).pipe((0,u.R)(this.destroy$)).subscribe(de=>this.contactChanged.emit(de))}doPlanEvent(){this.planEvent.emit()}onContentWasAttached(){this.cd.detectChanges()}createOrGetChat(O){const U=O.profile?.profileId,k=O.contact?.contactId;this.chatService.createP2PChat(k?{contactId:k}:{profileId:U},!0),this.closeInfo.emit()}setFormValues(){this.form.controls.name.setValue(this.interlocutor?.name,{emitEvent:!1}),this.form.controls.additionalContact.setValue(this.interlocutor.profile?.additionalContact,{emitEvent:!1}),this.form.controls.aboutSelf.setValue(this.interlocutor.profile?.aboutSelf,{emitEvent:!1}),this.form.controls.companyName.setValue(this.interlocutor?.profile?.companyName,{emitEvent:!1}),this.form.controls.email.setValue(this.interlocutor?.email,{emitEvent:!1}),this.form.controls.phone.setValue(this.interlocutor?.phone,{emitEvent:!1}),this.form.controls.tags.setValue(this.interlocutor?.contact?.tags,{emitEvent:!1}),this.form.controls.note.setValue(this.interlocutor?.contact?.note,{emitEvent:!1})}createParametersFormGroup(O=[]){this.form.controls.parameters.controls=O.reduce((k,te)=>({...k,[te.attributeId]:new s.p4(te.value||"")}),{})}}return K.\u0275fac=function(O){return new(O||K)(e.Y36(e.sBO),e.Y36(s.QS),e.Y36(a.P),e.Y36(i.z23),e.Y36(o.RJ),e.Y36(l.sK),e.Y36(c.g),e.Y36(d.Ph))},K.\u0275cmp=e.Xpm({type:K,selectors:[["app-interlocutor-info"]],inputs:{isReadonly:"isReadonly",isInvitation:"isInvitation",canCreateConference:"canCreateConference",canCreateOrGetChat:"canCreateOrGetChat",interlocutor:"interlocutor"},outputs:{closeInfo:"closeInfo",planEvent:"planEvent",contactChanged:"contactChanged"},features:[e._Bn([i.z23])],decls:24,vars:26,consts:[[1,"layout-column","layout-align-start-center","flex-grow",3,"formGroup"],[1,"interlocutor-header"],[1,"avatar"],["e2e-id","interlocutor-info__avatar",3,"avatarResourceId","name","size"],["formControlName","name",1,"layout-top-margin_16","name",3,"tooltip","textClass","readonly","maxLength","minWidth"],[3,"ngSwitch"],["class","online-badge layout-top-margin_8 text-align_center",4,"ngSwitchCase"],["class","offline-badge layout-top-margin_8 text-align_center",4,"ngSwitchCase"],[1,"action-buttons"],["iva-round-button","","e2e-id","interlocutor-info__create-or-get-chat-btn","titlePosition","bottom","type","button",3,"tooltip","click",4,"ngIf"],["iva-round-button","","type","button","titlePosition","bottom","e2e-id","interlocutor-info__schedule-event-btn",3,"tooltip","click",4,"ngIf"],[1,"interlocutor-info"],["class","info-row",4,"ngIf"],["class","layout-bottom-margin_12 layout-top-margin_16","formGroupName","parameters",3,"openTitle","closeTitle","isOpened","contentWasAttached",4,"ngIf"],[1,"online-badge","layout-top-margin_8","text-align_center"],[1,"offline-badge","layout-top-margin_8","text-align_center"],["iva-round-button","","e2e-id","interlocutor-info__create-or-get-chat-btn","titlePosition","bottom","type","button",3,"tooltip","click"],["src","assets/icons/icon16/chat-stroke.svg"],["iva-round-button","","type","button","titlePosition","bottom","e2e-id","interlocutor-info__schedule-event-btn",3,"tooltip","click"],["src","assets/icons/icon16/calendar.svg"],[1,"info-row"],[1,"title"],["formControlName","companyName",1,"info",3,"readonly","wideMode","displayType"],[1,"title","layout-row"],["class","layout layout-left-margin_8 layout-align-center-center","src","assets/icons/icon16/info-stroke.svg","e2e-id","interlocutor-info__email-info",3,"tooltip","tooltipMaxWidth",4,"ngIf"],["e2e-id","interlocutor-info__email","formControlName","email",1,"info",3,"readonly","maxLength","wideMode","displayType","validator"],["src","assets/icons/icon16/info-stroke.svg","e2e-id","interlocutor-info__email-info",1,"layout","layout-left-margin_8","layout-align-center-center",3,"tooltip","tooltipMaxWidth"],["class","layout layout-left-margin_8 layout-align-center-center","src","assets/icons/icon16/info-stroke.svg","e2e-id","interlocutor-info__phone-info",3,"tooltip","tooltipMaxWidth",4,"ngIf"],["formControlName","phone","e2e-id","interlocutor-info__phone",1,"info",3,"readonly","maxLength","wideMode","displayType","validator"],["src","assets/icons/icon16/info-stroke.svg","e2e-id","interlocutor-info__phone-info",1,"layout","layout-left-margin_8","layout-align-center-center",3,"tooltip","tooltipMaxWidth"],["formControlName","additionalContact","e2e-id","interlocutor-info__additional-contact",1,"info",3,"readonly","wideMode","displayType"],["formControlName","aboutSelf","e2e-id","interlocutor-info__about-self",1,"info",3,"readonly","wideMode","displayType"],["formControlName","note","e2e-id","interlocutor-info__note",1,"info",3,"maxLength","wideMode","displayType"],["formControlName","tags","e2e-id","interlocutor-info__tags",3,"editable","suggestions","maxLength"],["formGroupName","parameters",1,"layout-bottom-margin_12","layout-top-margin_16",3,"openTitle","closeTitle","isOpened","contentWasAttached"],[1,"layout-row","info-row"],[4,"ngFor","ngForOf"],["class","info-row__item layout-bottom-margin_24",4,"ngIf"],[1,"info-row__item","layout-bottom-margin_24"],[1,"title",3,"tooltip"],[3,"value"]],template:function(O,U){1&O&&(e.TgZ(0,"form",0)(1,"div",1)(2,"div",2),e._UZ(3,"app-participant-icon",3),e.qZA(),e._UZ(4,"iva-editable-text",4),e.ynx(5,5),e.YNc(6,g,3,3,"p",6),e.YNc(7,E,3,3,"p",7),e.YNc(8,n,3,3,"p",7),e.YNc(9,S,3,3,"p",7),e.YNc(10,C,3,3,"p",7),e.YNc(11,T,3,3,"p",7),e.BQk(),e.TgZ(12,"div",8),e.YNc(13,P,3,3,"button",9),e.YNc(14,A,3,3,"button",10),e.qZA()(),e.TgZ(15,"div",11),e.YNc(16,M,5,6,"div",12),e.YNc(17,N,6,9,"div",12),e.YNc(18,b,6,9,"div",12),e.YNc(19,V,5,6,"div",12),e.YNc(20,D,5,6,"div",12),e.YNc(21,F,5,6,"div",12),e.YNc(22,J,6,8,"div",12),e.YNc(23,ee,5,8,"app-settings-section",13),e.qZA()()),2&O&&(e.Q6J("formGroup",U.form),e.xp6(3),e.Q6J("avatarResourceId",(null==U.interlocutor.profile?null:U.interlocutor.profile.avatarResourceId)||null)("name",U.interlocutor.name)("size",128),e.xp6(1),e.Q6J("tooltip",U.interlocutor.name)("textClass","iva-text_h1")("readonly",U.isReadonly||!U.isNoteContact)("maxLength",255)("minWidth",200),e.xp6(1),e.Q6J("ngSwitch",U.onlineStatus),e.xp6(1),e.Q6J("ngSwitchCase",U.ONLINE_STATUS.ONLINE),e.xp6(1),e.Q6J("ngSwitchCase",U.ONLINE_STATUS.OFFLINE),e.xp6(1),e.Q6J("ngSwitchCase",U.ONLINE_STATUS.BOT),e.xp6(1),e.Q6J("ngSwitchCase",U.ONLINE_STATUS.IN_EVENT),e.xp6(1),e.Q6J("ngSwitchCase",U.ONLINE_STATUS.IN_CALL),e.xp6(1),e.Q6J("ngSwitchCase",U.ONLINE_STATUS.UNKNOWN),e.xp6(2),e.Q6J("ngIf",U.canGetOrCreateChat),e.xp6(1),e.Q6J("ngIf",U.isCreateConferenceButtonShown),e.xp6(2),e.Q6J("ngIf",null==U.interlocutor.profile?null:U.interlocutor.profile.companyName),e.xp6(1),e.Q6J("ngIf",U.interlocutor.email||U.isNoteContact),e.xp6(1),e.Q6J("ngIf",U.interlocutor.phone||U.isNoteContact),e.xp6(1),e.Q6J("ngIf",null==U.interlocutor.profile?null:U.interlocutor.profile.additionalContact),e.xp6(1),e.Q6J("ngIf",(null==U.interlocutor.profile?null:U.interlocutor.profile.aboutSelf)&&!U.isInvitation),e.xp6(1),e.Q6J("ngIf",U.isNoteFieldShown),e.xp6(1),e.Q6J("ngIf",U.isTagsShown),e.xp6(1),e.Q6J("ngIf",U.isAttributesShown))},dependencies:[v.sg,v.O5,v.RF,v.n9,s._Y,s.JJ,s.JL,s.sg,s.u,s.x0,i.bk9,i.r2H,i.xeS,i._jE,i.m7q,i.i9q,I.U,m.u,v.Ov,l.X$],styles:["app-interlocutor-info{display:flex;flex-direction:column;position:relative;width:100%;overflow-y:auto}app-interlocutor-info iva-tag-input .tags iva-editable-tag{margin-right:8px}app-interlocutor-info .interlocutor-header{display:flex;flex-direction:column;align-items:center;width:100%;max-width:100%;padding-top:30px}app-interlocutor-info .interlocutor-header .avatar{display:flex;align-items:center;justify-content:center}app-interlocutor-info .interlocutor-header .name{max-width:80%}app-interlocutor-info .interlocutor-header .online-badge{color:rgb(var(--primary-color))}app-interlocutor-info .interlocutor-header .offline-badge{color:rgb(var(--primary-disabled-color))}app-interlocutor-info .interlocutor-header .action-buttons{display:flex;justify-content:center;margin-top:16px;gap:0 16px}app-interlocutor-info .interlocutor-header .action-buttons button.iva-round-button{background-color:#fff;border:none}app-interlocutor-info .interlocutor-header .action-buttons button.iva-round-button .iva-button_icon svg-icon svg *{fill:rgb(var(--primary-color))}app-interlocutor-info .interlocutor-header .action-buttons button.iva-round-button:hover{background-color:rgb(var(--primary-color))}app-interlocutor-info .interlocutor-header .action-buttons button.iva-round-button:hover svg-icon svg *{fill:rgb(var(--white-100))}app-interlocutor-info .interlocutor-info{align-self:flex-start;padding:0 120px;width:100%}app-interlocutor-info .info-row{flex-wrap:wrap;justify-content:space-between;align-self:flex-start;margin-bottom:24px}app-interlocutor-info .info-row__item{flex:1 1 48%;max-width:48%;max-height:100%}app-interlocutor-info .info-row__item .title{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}app-interlocutor-info .info-row .title{color:rgb(var(--font-gray-1-color))}app-interlocutor-info .info-row .title svg-icon svg *{fill:rgb(var(--font-gray-1-color))}app-interlocutor-info .info-row .info{margin:6px 0;word-break:break-all}app-interlocutor-info .info-row iva-tag-input{min-height:32px;border-bottom:1px solid rgb(var(--neutral-color-6))}app-interlocutor-info .info-row iva-editable-text{width:100%}app-interlocutor-info .info-row iva-editable-text .wrapper{height:27px;max-width:100%}app-interlocutor-info app-settings-section>div{margin:24px 0}\n"],encapsulation:2,changeDetection:0}),K})()},65608:(z,R,t)=>{t.d(R,{m:()=>o});var e=t(54355),s=t(40089),h=t(911),_=t(84460);function i(l,c){if(1&l&&e._UZ(0,"p",6),2&l){const d=e.oxw();e.Q6J("tooltip",d.contactInfo)("innerHTML",d.contactInfo,e.oJD)}}function f(l,c){if(1&l&&(e._UZ(0,"p",6),e.ALo(1,"highlight")),2&l){const d=e.oxw(2);e.Q6J("tooltip",d.contactSearchInfo)("innerHTML",e.Dn7(1,2,d.contactSearchInfo,d.searchFilterValue,!0),e.oJD)}}function r(l,c){if(1&l&&(e._UZ(0,"iva-tag",11),e.ALo(1,"highlight")),2&l){const d=c.$implicit,v=e.oxw(3);e.Q6J("innerHTML",e.Dn7(1,1,d,v.searchFilterValue,!0),e.oJD)}}function p(l,c){if(1&l&&(e.TgZ(0,"div",9),e.YNc(1,r,2,5,"iva-tag",10),e.qZA()),2&l){const d=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",d.tagSearchInfo)}}function u(l,c){if(1&l&&(e.ynx(0),e.YNc(1,f,2,6,"p",7),e.YNc(2,p,2,1,"ng-template",null,8,e.W1O),e.BQk()),2&l){const d=e.MAs(3),v=e.oxw();e.xp6(1),e.Q6J("ngIf",v.contactSearchInfo)("ngIfElse",d)}}let o=(()=>{class l{constructor(){this.searchFilterValue=""}get contactInfo(){return this.interlocutor.email||this.interlocutor.phone||""}get contactSearchInfo(){const d=this.searchFilterValue;return d?this.interlocutor.email?.includes(d)?this.interlocutor.email:this.interlocutor.phone?.includes(d)?this.interlocutor.phone:"":""}get tagSearchInfo(){const d=this.searchFilterValue.toLowerCase();if(!d)return[];const v=this.interlocutor.contact;return(v?v.tags:[]).sort((m,g)=>m.toLowerCase().includes(d)?-1:1).slice(0,4)}}return l.\u0275fac=function(d){return new(d||l)},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-interlocutor-item"]],inputs:{interlocutor:"interlocutor",searchFilterValue:"searchFilterValue"},decls:7,vars:11,consts:[[1,"container"],[1,"flex-noshrink",3,"avatarResourceId","name","size"],[1,"info","flex-grow","layout-column","layout-left-margin_16"],[1,"name","ellipsis",3,"tooltip","innerHTML"],["class","contact-sub-text ellipsis",3,"tooltip","innerHTML",4,"ngIf"],[4,"ngIf"],[1,"contact-sub-text","ellipsis",3,"tooltip","innerHTML"],["class","contact-sub-text ellipsis",3,"tooltip","innerHTML",4,"ngIf","ngIfElse"],["tagsSearchInfo",""],[1,"tags"],[3,"innerHTML",4,"ngFor","ngForOf"],[3,"innerHTML"]],template:function(d,v){1&d&&(e.TgZ(0,"div",0),e._UZ(1,"app-participant-icon",1),e.TgZ(2,"div",2),e._UZ(3,"h3",3),e.ALo(4,"highlight"),e.YNc(5,i,1,2,"p",4),e.YNc(6,u,4,2,"ng-container",5),e.qZA()()),2&d&&(e.xp6(1),e.Q6J("avatarResourceId",null==v.interlocutor.profile?null:v.interlocutor.profile.avatarResourceId)("name",v.interlocutor.name)("size",48),e.xp6(2),e.Q6J("tooltip",v.interlocutor.name)("innerHTML",e.Dn7(4,7,v.interlocutor.name,v.searchFilterValue,!0),e.oJD),e.xp6(2),e.Q6J("ngIf",!v.searchFilterValue),e.xp6(1),e.Q6J("ngIf",v.searchFilterValue))},dependencies:[s.sg,s.O5,h.ZGJ,h.i9q,_.U,h.SgB],styles:["[_nghost-%COMP%]   .container[_ngcontent-%COMP%]{display:flex;align-items:center;height:80px;max-height:80px;min-height:80px;width:100%;padding:16px 16px 16px 12px;background-color:rgb(var(--white-100));cursor:pointer;border-bottom:1px solid rgba(var(--black-100),var(--transparency-5));border-left:4px solid transparent}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]:hover{background-color:rgba(var(--primary-color),var(--transparency-10))}[_nghost-%COMP%]   .name[_ngcontent-%COMP%]{max-width:-moz-fit-content;max-width:fit-content}[_nghost-%COMP%]   .contact-sub-text[_ngcontent-%COMP%]{max-width:-moz-fit-content;max-width:fit-content;color:rgb(var(--font-gray-1-color))}[_nghost-%COMP%]   .contact-sub-text[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{color:rgb(var(--font-gray-1-color))}[_nghost-%COMP%]   .contact-sub-text[_ngcontent-%COMP%]   svg-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{fill:rgb(var(--font-gray-1-color))}[_nghost-%COMP%]   .tags[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;max-height:56px;overflow:hidden}[_nghost-%COMP%]   .tags[_ngcontent-%COMP%]   iva-tag[_ngcontent-%COMP%]{margin-right:4px;margin-bottom:4px}"],changeDetection:0}),l})()},51192:(z,R,t)=>{t.d(R,{G:()=>_});var e=t(95525),s=t(54355),h=t(911);let _=(()=>{class i{constructor(){this.LANGUAGE_ICONS=e.q}getIconByLanguage(r){return this.LANGUAGE_ICONS.find(p=>p.language===r)?.icon||""}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=s.Xpm({type:i,selectors:[["app-interpreter-language-icons"]],inputs:{languagePair:"languagePair"},decls:3,vars:2,consts:[[1,"layout"],[1,"layout","layout-right-margin_12","flex-noshrink",3,"src"],[1,"layout","flex-noshrink",3,"src"]],template:function(r,p){1&r&&(s.TgZ(0,"div",0),s._UZ(1,"svg-icon",1)(2,"svg-icon",2),s.qZA()),2&r&&(s.xp6(1),s.Q6J("src",p.getIconByLanguage(p.languagePair[0])),s.xp6(1),s.Q6J("src",p.getIconByLanguage(p.languagePair[1])))},dependencies:[h.bk9],encapsulation:2,changeDetection:0}),i})()},87590:(z,R,t)=>{t.d(R,{M:()=>u,X:()=>p});var e=t(5469),s=t(49265),h=t(911),_=t(54355);function i(a,o){if(1&a){const l=_.EpF();_.TgZ(0,"app-add-by-single-pane",4),_.NdJ("goToPane",function(d){_.CHM(l);const v=_.oxw();return _.KtG(v.goToPane(d))})("apply",function(d){_.CHM(l);const v=_.oxw();return _.KtG(v.inviteUsers(d))})("closed",function(){_.CHM(l);const d=_.oxw();return _.KtG(d.close())}),_.qZA()}if(2&a){const l=_.oxw();_.Q6J("inputData",l.inputData)}}function f(a,o){if(1&a){const l=_.EpF();_.TgZ(0,"app-add-by-multiple-pane",4),_.NdJ("goToPane",function(d){_.CHM(l);const v=_.oxw();return _.KtG(v.goToPane(d))})("apply",function(d){_.CHM(l);const v=_.oxw();return _.KtG(v.inviteUsers(d))})("closed",function(){_.CHM(l);const d=_.oxw();return _.KtG(d.close())}),_.qZA()}if(2&a){const l=_.oxw();_.Q6J("inputData",l.inputData)}}function r(a,o){1&a&&(_.ynx(0),_._uU(1,"Unknown pane"),_.BQk())}var p=(()=>((p=p||{})[p.ADD_BY_SINGLE=0]="ADD_BY_SINGLE",p[p.ADD_BY_MULTIPLE=1]="ADD_BY_MULTIPLE",p))();let u=(()=>{class a{get inputData(){return this.modalRef.data}constructor(l){this.modalRef=l,this.currentPane=p.ADD_BY_SINGLE,this.PANE=p}close(){this.modalRef.close({apply:!1,interlocutors:[]})}inviteUsers(l){let c=e._Z.settings.CONFERENCE_SESSION_ADD_PARTICIPANTS_LIMIT;c-=this.inputData.inEditSessionInvitedCount||0,l.length>c&&(l=l.slice(0,c)),this.modalRef.close({apply:!0,interlocutors:l})}goToPane(l){this.currentPane=l}}return a.\u0275fac=function(l){return new(l||a)(_.Y36(h.aiK))},a.\u0275cmp=_.Xpm({type:a,selectors:[["app-invite-participants-modal"]],features:[_._Bn([s.a,h.z23])],decls:5,vars:3,consts:[[1,"modal-card"],[3,"ngSwitch"],["class","layout flex-grow",3,"inputData","goToPane","apply","closed",4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"layout","flex-grow",3,"inputData","goToPane","apply","closed"]],template:function(l,c){1&l&&(_.TgZ(0,"div",0),_.ynx(1,1),_.YNc(2,i,1,1,"app-add-by-single-pane",2),_.YNc(3,f,1,1,"app-add-by-multiple-pane",2),_.YNc(4,r,2,0,"ng-container",3),_.BQk(),_.qZA()),2&l&&(_.xp6(1),_.Q6J("ngSwitch",c.currentPane),_.xp6(1),_.Q6J("ngSwitchCase",c.PANE.ADD_BY_SINGLE),_.xp6(1),_.Q6J("ngSwitchCase",c.PANE.ADD_BY_MULTIPLE))},styles:["[_nghost-%COMP%]   .modal-card[_ngcontent-%COMP%]{min-height:calc(var(--100vh) - 100px);min-width:560px;width:560px;max-width:560px}"],changeDetection:0}),a})()},87950:(z,R,t)=>{t.d(R,{J:()=>e});var e=(()=>((e=e||{}).RED="RED",e.YELLOW="YELLOW",e.GREEN="GREEN",e.GREY="GREY",e))()},25529:(z,R,t)=>{t.d(R,{g:()=>C});var e=t(5469),s=t(98390),h=t(79765),_=t(25917),i=t(88002),f=t(43190),r=t(46782),p=t(911),u=t(87177),a=t(30450),o=t(40089),l=t(87950),c=t(72564),d=t(54355),v=t(91583),I=t(6190),m=t(48127),g=t(27683);function E(T,P){if(1&T&&d._UZ(0,"app-landing-page-badge-view",2),2&T){const A=P.$implicit,M=d.oxw().$implicit;d.Q6J("text",M)("color",A)}}function n(T,P){if(1&T&&(d.ynx(0),d.YNc(1,E,1,2,"app-landing-page-badge-view",1),d.ALo(2,"async"),d.BQk()),2&T){const A=d.oxw();d.xp6(1),d.Q6J("ngWithAs",d.lcZ(2,1,A.color$))}}let C=(()=>{class T{constructor(A,M,L,N,W){this.intervalService=A,this.destroy$=M,this.translate=L,this.serverTimeService=N,this.mobileSupportService=W,this.updateTimer=this.intervalService.createTimer("LANDING_PAGE_BADGE_TIMER_NAME",1e3),this.timerSeconds$=this.updateTimer.onFire$.pipe((0,i.U)(()=>this.timerSeconds)),this.color$=this.timerSeconds$.pipe((0,i.U)(this.getColor.bind(this))),this.text$=this.timerSeconds$.pipe((0,f.w)(this.getText$.bind(this))),this.conferenceUpdated$=new h.xQ}get conference(){return this._conference}set conference(A){this._conference=A,this.conferenceUpdated$.next()}get timerSeconds(){if(!this.conference)return 0;const A=this.conference.startDate,M=Date.now();return M<A?Math.round((A-M)/e._Z.settings.MS_IN_SECOND):Math.round((M-A)/e._Z.settings.MS_IN_SECOND)}ngOnInit(){this.initTimer()}initTimer(){this.updateTimer.start(!0),this.timerSeconds$.pipe((0,r.R)(this.destroy$)).subscribe()}getColor(){if(!this.conference||this.conference.state===u.Kv.STOPPED)return l.J.GREY;if(this.conference.state===u.Kv.ACTIVE)return l.J.GREEN;const A=Math.max(this.conference.startDate-this.serverTimeService.now,0),{minutes:M,hours:L,days:N,months:W,years:b}=(0,s.Z)({start:0,end:A});return b||W||N||L?l.J.GREY:M>15?l.J.YELLOW:l.J.RED}getText$(){if(!this.conference)return(0,_.of)(null);if(this.conference.room)return this.conference.deleted?this.translate.stream("LANDING_PAGE.BADGE__ROOM_DELETED"):this.conference.state!==u.Kv.ACTIVE?this.translate.stream("LANDING_PAGE.BADGE__ROOM_ARCHIVED"):(0,_.of)("");if(this.conference.deleted)return this.translate.stream("LANDING_PAGE.BADGE__EVENT_DELETED");if(this.conference.state===u.Kv.STOPPED)return this.translate.stream("LANDING_PAGE.BADGE__EVENT_FINISHED");const A=this.conference.startDate||this.conference.actualStartDate;if(!A)return(0,_.of)(null);if(this.conference.state===u.Kv.ACTIVE){const M=Math.max(this.serverTimeService.now-A,0),{minutes:L,hours:N}=(0,s.Z)({start:0,end:M});return 0===N?this.translate.stream("LANDING_PAGE.BADGE__ALREADY_RUNNING_MINS",{minutes:L}):this.translate.stream("LANDING_PAGE.BADGE__ALREADY_RUNNING_HRS_MINS",{hours:N,minutes:L})}if(this.conference.state===u.Kv.NO_STARTED){const M=Math.max(this.conference.startDate-this.serverTimeService.now,0),{minutes:L,hours:N,days:W,months:b,years:V}=(0,s.Z)({start:0,end:M});return V?this.translate.stream("LANDING_PAGE.BADGE__START_IN_YEARS",{years:V}):b?this.translate.stream("LANDING_PAGE.BADGE__START_IN_MONTHS",{months:b}):W?this.translate.stream("LANDING_PAGE.BADGE__START_IN_DAYS",{days:W}):N?this.translate.stream("LANDING_PAGE.BADGE__START_IN_HOURS",{hours:N}):L?this.translate.stream("LANDING_PAGE.BADGE__START_IN_MINUTES",{minutes:L}):this.translate.stream(this.conference.runType===a.r.AUTO?"LANDING_PAGE.BADGE__START_IN_LESS_MINUTE":this.mobileSupportService.isOnMobileDevice?"LANDING_PAGE.BADGE__AWAITING_START_MOBILE":"LANDING_PAGE.BADGE__AWAITING_START")}return(0,_.of)(null)}}return T.\u0275fac=function(A){return new(A||T)(d.Y36(v.I),d.Y36(p.z23),d.Y36(I.sK),d.Y36(m.v),d.Y36(g.J))},T.\u0275cmp=d.Xpm({type:T,selectors:[["app-landing-page-badge-conference"]],inputs:{conference:"conference"},standalone:!0,features:[d._Bn([p.z23]),d.jDz],decls:2,vars:3,consts:[[4,"ngWith","ngWithAs"],[3,"text","color",4,"ngWith","ngWithAs"],[3,"text","color"]],template:function(A,M){1&A&&(d.YNc(0,n,3,3,"ng-container",0),d.ALo(1,"async")),2&A&&d.Q6J("ngWithAs",d.lcZ(1,1,M.text$))},dependencies:[o.ez,o.Ov,p.IR2,p.XFu,c.h],changeDetection:0}),T})()},23636:(z,R,t)=>{t.d(R,{Y:()=>r});var e=t(40089),s=t(72564),h=t(87950),_=t(6190),i=t(87177),f=t(54355);let r=(()=>{class p{ngOnChanges(a){if(a.conference){let{textToken:o,color:l}=this.getBadgeTextToken();this.textToken=o,this.color=l}}getBadgeTextToken(){return this.conference.state===i.Kv.ACTIVE?this.conference.countOnlineUsers?{textToken:"LANDING_PAGE.BADGE__ROOM_ACTIVE",color:h.J.GREEN}:{textToken:"LANDING_PAGE.BADGE__ROOM_EMPTY",color:h.J.GREY}:this.conference.deleted?{textToken:"LANDING_PAGE.BADGE__ROOM_DELETED",color:h.J.GREY}:{textToken:"LANDING_PAGE.BADGE__ROOM_ARCHIVED",color:h.J.GREY}}}return p.\u0275fac=function(a){return new(a||p)},p.\u0275cmp=f.Xpm({type:p,selectors:[["app-landing-page-badge-room"]],inputs:{conference:"conference"},standalone:!0,features:[f.TTD,f.jDz],decls:2,vars:4,consts:[[3,"text","color"]],template:function(a,o){1&a&&(f._UZ(0,"app-landing-page-badge-view",0),f.ALo(1,"translate")),2&a&&f.Q6J("text",f.lcZ(1,2,o.textToken))("color",o.color)},dependencies:[e.ez,s.h,_.aw,_.X$],changeDetection:0}),p})()},72564:(z,R,t)=>{t.d(R,{h:()=>_});var e=t(40089),s=t(87950),h=t(54355);let _=(()=>{class i{constructor(){this.Color=s.J}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=h.Xpm({type:i,selectors:[["app-landing-page-badge-view"]],inputs:{text:"text",color:"color"},standalone:!0,features:[h.jDz],decls:2,vars:9,consts:[[1,"landing-page-badge"]],template:function(r,p){1&r&&(h.TgZ(0,"div",0),h._uU(1),h.qZA()),2&r&&(h.ekj("red",p.color===p.Color.RED)("yellow",p.color===p.Color.YELLOW)("green",p.color===p.Color.GREEN)("grey",p.color===p.Color.GREY),h.xp6(1),h.hij(" ",p.text,"\n"))},dependencies:[e.ez],styles:[".landing-page-badge[_ngcontent-%COMP%]{padding:4px 10px;height:32px;font-size:18px;font-weight:600;border-radius:8px}.landing-page-badge.red[_ngcontent-%COMP%]{color:rgb(var(--white-color));background-color:rgb(var(--error-color))}.landing-page-badge.yellow[_ngcontent-%COMP%]{color:rgb(var(--white-color));background-color:rgb(var(--warning-color))}.landing-page-badge.green[_ngcontent-%COMP%]{color:rgb(var(--white-color));background-color:rgb(var(--primary-color))}.landing-page-badge.grey[_ngcontent-%COMP%]{color:rgb(var(--white-color));background-color:rgb(var(--dark--font-disabled-color))}.transparent-bg[_nghost-%COMP%]   .landing-page-badge[_ngcontent-%COMP%]{padding:0;background-color:transparent}.mobile-view   [_nghost-%COMP%]   .landing-page-badge[_ngcontent-%COMP%]{height:16px;padding:0 4px;font-size:10px;font-weight:400;border-radius:3px;white-space:nowrap;overflow:hidden;max-width:100%;text-overflow:ellipsis}"],changeDetection:0}),i})()},48160:(z,R,t)=>{t.d(R,{A:()=>l});var e=t(54355),s=t(95525),h=t(76133),_=t(911),i=t(40089),f=t(76652),r=t(6190);function p(c,d){if(1&c&&(e.TgZ(0,"div",8),e._UZ(1,"svg-icon",9),e.TgZ(2,"div",10),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&c){const v=e.oxw().$implicit;e.xp6(1),e.Q6J("src",v.value.icon),e.xp6(2),e.Oqu(e.lcZ(4,2,v.value.title))}}function u(c,d){1&c&&e.YNc(0,p,5,4,"div",7),2&c&&e.Q6J("ngIf",d.$implicit)}function a(c,d){if(1&c&&(e._UZ(0,"iva-select-option",11),e.ALo(1,"translate")),2&c){const v=d.$implicit;e.oxw();const I=e.MAs(1);e.Q6J("value",v)("tooltip",e.lcZ(1,3,v.title))("matcher",I)}}function o(c,d){if(1&c&&(e._UZ(0,"iva-select-option",11),e.ALo(1,"translate")),2&c){const v=d.$implicit;e.oxw();const I=e.MAs(1);e.Q6J("value",v)("tooltip",e.lcZ(1,3,v.title))("matcher",I)}}let l=(()=>{class c{constructor(){this.LANGUAGE_ITEMS=s.q.filter(v=>v.language!==h.S.ORIGINAL),this.languagePairChanged=new e.vpe}get languageFrom(){return this.getLanguageItem(this.languagePair[0])||this.LANGUAGE_ITEMS[0]}set languageFrom(v){this.languagePair[0]=v.language}get languageTo(){return this.getLanguageItem(this.languagePair[1])||this.LANGUAGE_ITEMS[1]}set languageTo(v){this.languagePair[1]=v.language}applyLanguageFrom(v){this.languageFrom=v,this.languagePairChanged.emit([this.languageFrom?.language,this.languageTo?.language])}applyLanguageTo(v){this.languageTo=v,this.languagePairChanged.emit([this.languageFrom?.language,this.languageTo?.language])}getLanguagesToSelect(v){return this.LANGUAGE_ITEMS.filter(I=>I.language!==v?.language)}getLanguageItem(v){return this.LANGUAGE_ITEMS.find(I=>I?.language===v)}}return c.\u0275fac=function(v){return new(v||c)},c.\u0275cmp=e.Xpm({type:c,selectors:[["app-language-pair"]],inputs:{languagePair:"languagePair"},outputs:{languagePairChanged:"languagePairChanged"},features:[e._Bn([_.z23])],decls:11,vars:8,consts:[["languageMatcherTmpl",""],[1,"layout-row","layout-top-margin_16","flex-100"],[1,"layout","flex-grow"],[1,"language","flex-grow",3,"idGetter","matcherTmpl","ngModel","ngModelChange"],["class","language-pair-option",3,"value","tooltip","matcher",4,"ngFor","ngForOf"],[1,"layout","flex-noshrink","layout","layout-align-center-center"],["src","assets/icons/icon16/2-arrows.svg",1,"layout","layout-align-center-center","language-pair"],["class","layout-row layout-align-start-center",4,"ngIf"],[1,"layout-row","layout-align-start-center"],[1,"layout","layout-right-padding_8","flex-noshrink",3,"src"],[1,"ellipsis","flex-grow"],[1,"language-pair-option",3,"value","tooltip","matcher"]],template:function(v,I){if(1&v&&(e.YNc(0,u,1,1,"ng-template",null,0,e.W1O),e.TgZ(2,"div",1)(3,"div",2)(4,"iva-select",3),e.NdJ("ngModelChange",function(g){return I.applyLanguageFrom(g)}),e.YNc(5,a,2,5,"iva-select-option",4),e.qZA()(),e.TgZ(6,"div",5),e._UZ(7,"svg-icon",6),e.qZA(),e.TgZ(8,"div",2)(9,"iva-select",3),e.NdJ("ngModelChange",function(g){return I.applyLanguageTo(g)}),e.YNc(10,o,2,5,"iva-select-option",4),e.qZA()()()),2&v){const m=e.MAs(1);e.xp6(4),e.Q6J("idGetter","language")("matcherTmpl",m)("ngModel",I.languageFrom),e.xp6(1),e.Q6J("ngForOf",I.getLanguagesToSelect(I.languageTo)),e.xp6(4),e.Q6J("idGetter","language")("matcherTmpl",m)("ngModel",I.languageTo),e.xp6(1),e.Q6J("ngForOf",I.getLanguagesToSelect(I.languageFrom))}},dependencies:[i.sg,i.O5,f.JJ,f.On,_.bk9,_.Hr0,_.ZeG,_.i9q,r.X$],styles:["[_nghost-%COMP%]   svg-icon.language-pair[_ngcontent-%COMP%]{margin:0 16px}[_nghost-%COMP%]   svg-icon.language-pair[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{fill:rgb(var(--font-gray-1-color))}"],changeDetection:0}),c})()},63295:(z,R,t)=>{t.d(R,{e:()=>r,n:()=>p});var e=t(54355),s=t(911),h=t(40089),_=t(6190);function i(u,a){if(1&u){const o=e.EpF();e.TgZ(0,"button",9),e.NdJ("click",function(){e.CHM(o);const c=e.oxw();return e.KtG(c.close(c.OUTPUT.CANCEL))}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&u&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"CANCEL")," "))}function f(u,a){if(1&u){const o=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(){e.CHM(o);const c=e.oxw();return e.KtG(c.close(c.OUTPUT.TRANSFER))}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&u&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"CHATS.LEAVING.TRANSFER_BUTTON_TEXT")," "))}var r=(()=>((r=r||{}).TRANSFER="TRANSFER",r.LEAVE="LEAVE",r.CANCEL="CANCEL",r))();let p=(()=>{class u{constructor(o){this.modalRef=o,this.OUTPUT=r}get isOwner(){return this.modalRef.data.isOwner}close(o){this.modalRef.close(o)}}return u.\u0275fac=function(o){return new(o||u)(e.Y36(s.aiK))},u.\u0275cmp=e.Xpm({type:u,selectors:[["ng-component"]],decls:16,vars:12,consts:[[1,"modal-card","message"],[1,"layout","layout-align-space-between"],[1,"title"],["iva-icon-button","",3,"click"],["src","assets/icons/icon24/close.svg"],[1,"no-border"],["iva-button","","class","layout-right-margin_16","color","secondary",3,"click",4,"ngIf"],["iva-button","",1,"layout-right-margin_16",3,"color","click"],["iva-button","","class","layout-right-margin_16","color","primary",3,"click",4,"ngIf"],["iva-button","","color","secondary",1,"layout-right-margin_16",3,"click"],["iva-button","","color","primary",1,"layout-right-margin_16",3,"click"]],template:function(o,l){1&o&&(e.TgZ(0,"div",0)(1,"header",1)(2,"div",2),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",3),e.NdJ("click",function(){return l.close(l.OUTPUT.CANCEL)}),e._UZ(6,"svg-icon",4),e.qZA()(),e.TgZ(7,"section"),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"footer",5),e.YNc(11,i,3,3,"button",6),e.TgZ(12,"button",7),e.NdJ("click",function(){return l.close(l.OUTPUT.LEAVE)}),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.YNc(15,f,3,3,"button",8),e.qZA()()),2&o&&(e.xp6(3),e.Oqu(e.lcZ(4,6,"CHATS.LEAVING.TITLE")),e.xp6(5),e.hij(" ",e.lcZ(9,8,l.isOwner?"CHATS.LEAVING.OWNER_TEXT":"CHATS.LEAVING.TEXT")," "),e.xp6(3),e.Q6J("ngIf",!l.isOwner),e.xp6(1),e.Q6J("color",l.isOwner?"secondary":"primary"),e.xp6(1),e.hij(" ",e.lcZ(14,10,"CHATS.LEAVING.LEAVE_BUTTON_TEXT")," "),e.xp6(2),e.Q6J("ngIf",l.isOwner))},dependencies:[h.O5,s.bk9,s.r0F,s.r2H,_.X$],styles:[".modal-card[_ngcontent-%COMP%]{max-width:500px}"],changeDetection:0}),u})()},23266:(z,R,t)=>{t.d(R,{s:()=>_});var e=t(54355),s=t(911),h=t(6190);let _=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-loader-indicator"]],decls:4,vars:4,consts:[["inline","",1,"layout-align-center-center","layout-right-margin_8",3,"size"],[1,"iva-text_h3","iva-text_color-gray"]],template:function(r,p){1&r&&(e._UZ(0,"iva-spinner",0),e.TgZ(1,"span",1),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&r&&(e.Q6J("size",16),e.xp6(2),e.Oqu(e.lcZ(3,2,"LOADING")))},dependencies:[s.ORR,h.X$],styles:["[_nghost-%COMP%]{display:flex;align-items:center;justify-content:center;align-self:center;background-color:rgb(var(--neutral-color-3));border:1px solid rgb(var(--neutral-color-5));border-radius:24px;padding:8px 16px;width:119px;height:36px}[_nghost-%COMP%]   span[_ngcontent-%COMP%]:first-letter{text-transform:uppercase}"],changeDetection:0}),i})()},84741:(z,R,t)=>{t.d(R,{t:()=>s});var e=t(54355);let s=(()=>{class h{onMouseDown(){this.isClearPageFill.emit(!0)}onMouseUp(){this.isClearPageFill.emit(!1)}constructor(){this.isClearPageFill=new e.vpe}}return h.\u0275fac=function(i){return new(i||h)},h.\u0275dir=e.lG2({type:h,selectors:[["","mouseStateHandler",""]],hostBindings:function(i,f){1&i&&e.NdJ("mousedown",function(){return f.onMouseDown()})("mouseup",function(){return f.onMouseUp()},!1,e.evT)},outputs:{isClearPageFill:"isClearPageFill"}}),h})()},82518:(z,R,t)=>{t.d(R,{x:()=>Y});var e=t(5469),s=t(339),h=t(36612),_=t(911),i=t(88002),f=t(9112),r=t(54355),p=t(61616),u=t(55122),a=t(84717),o=t(16858),l=t(12487),c=t(36487),d=t(6190),v=t(28728),I=t(46237),m=t(32588),g=t(62241),E=t(40089),n=t(84460),S=t(92290);function C(ee,X){1&ee&&r._UZ(0,"div",6)}function T(ee,X){1&ee&&(r.TgZ(0,"div",7),r._UZ(1,"svg-icon",8),r.qZA())}function P(ee,X){if(1&ee&&r._UZ(0,"app-participant-icon",11),2&ee){const K=X.$implicit;r.Q6J("avatarResourceId",K.avatarResourceId)("name",K.name)("showName",!1)}}const A=function(){return{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"}},M=function(ee){return[ee]};function L(ee,X){if(1&ee){const K=r.EpF();r.TgZ(0,"iva-icon-popover-action",9),r.NdJ("itemClick",function(O){r.CHM(K);const U=r.oxw(2);return r.KtG(U.executeAction(O))}),r.YNc(1,P,1,3,"app-participant-icon",10),r.ALo(2,"async"),r.qZA()}if(2&ee){const K=X.ngIf,oe=r.oxw(2);r.Q6J("items",K)("positions",r.VKq(7,M,r.DdM(6,A)))("customButton",!0),r.xp6(1),r.Q6J("ngWithAs",r.lcZ(2,4,oe.profile$))}}function N(ee,X){if(1&ee&&(r.TgZ(0,"div",2),r.YNc(1,C,1,0,"div",3),r.YNc(2,T,2,0,"div",4),r.YNc(3,L,3,9,"iva-icon-popover-action",5),r.ALo(4,"async"),r.qZA()),2&ee){const K=X.$implicit,oe=r.oxw();r.xp6(1),r.Q6J("ngIf",K),r.xp6(1),r.Q6J("ngIf",K),r.xp6(1),r.Q6J("ngIf",r.lcZ(4,3,oe.selfActionsItems$))}}function W(ee,X){if(1&ee&&(r.TgZ(0,"span",28),r._uU(1),r.qZA()),2&ee){const K=X.ngIf;r.xp6(1),r.Oqu(K>99?"99+":K)}}function b(ee,X){if(1&ee){const K=r.EpF();r.ynx(0),r.TgZ(1,"div",25),r.NdJ("click",function(){r.CHM(K);const O=r.oxw(2);return r.KtG(O.goToSection(O.SECTION.CHATS))}),r.YNc(2,W,2,1,"span",26),r.ALo(3,"async"),r._UZ(4,"svg-icon",27),r.TgZ(5,"div",16),r._uU(6),r.ALo(7,"translate"),r.qZA()(),r.BQk()}if(2&ee){const K=r.oxw().$implicit,oe=r.oxw();r.xp6(1),r.ekj("active",K===oe.SECTION.CHATS),r.xp6(1),r.Q6J("ngIf",r.lcZ(3,4,oe.totalUnreadAmount$)),r.xp6(4),r.Oqu(r.lcZ(7,6,"HOME__MENU__CHATS"))}}function V(ee,X){1&ee&&r._UZ(0,"svg-icon",29)}function D(ee,X){1&ee&&r._UZ(0,"svg-icon",29)}function F(ee,X){if(1&ee){const K=r.EpF();r.ynx(0),r.TgZ(1,"div",30),r.NdJ("click",function(){r.CHM(K);const O=r.oxw(2);return r.KtG(O.goToSection(O.SECTION.FILES))}),r._UZ(2,"svg-icon",31),r.TgZ(3,"div",16),r._uU(4),r.ALo(5,"translate"),r.qZA()(),r.BQk()}if(2&ee){const K=r.oxw().$implicit,oe=r.oxw();r.xp6(1),r.ekj("active",K===oe.SECTION.FILES),r.xp6(3),r.Oqu(r.lcZ(5,3,"HOME__MENU__FILES"))}}function J(ee,X){if(1&ee){const K=r.EpF();r.ynx(0),r.YNc(1,b,8,8,"ng-container",12),r.TgZ(2,"div",13),r.NdJ("click",function(){r.CHM(K);const O=r.oxw();return r.KtG(O.goToSection(O.SECTION.CONFERENCES))}),r.TgZ(3,"div",2),r._UZ(4,"svg-icon",14),r.YNc(5,V,1,0,"svg-icon",15),r.ALo(6,"async"),r.qZA(),r.TgZ(7,"div",16),r._uU(8),r.ALo(9,"translate"),r.qZA()(),r.TgZ(10,"div",17),r.NdJ("click",function(){r.CHM(K);const O=r.oxw();return r.KtG(O.goToSection(O.SECTION.ROOMS))}),r.TgZ(11,"div",2),r._UZ(12,"svg-icon",18),r.YNc(13,D,1,0,"svg-icon",15),r.ALo(14,"async"),r.qZA(),r.TgZ(15,"div",16),r._uU(16),r.ALo(17,"translate"),r.qZA()(),r.TgZ(18,"div",19),r.NdJ("click",function(){r.CHM(K);const O=r.oxw();return r.KtG(O.goToSection(O.SECTION.CONTACTS))}),r._UZ(19,"svg-icon",20),r.TgZ(20,"div",16),r._uU(21),r.ALo(22,"translate"),r.qZA()(),r.YNc(23,F,6,5,"ng-container",12),r.TgZ(24,"div",21),r.NdJ("click",function(){r.CHM(K);const O=r.oxw();return r.KtG(O.goToSection(O.SECTION.SETTINGS))}),r._UZ(25,"svg-icon",22),r.TgZ(26,"div",16),r._uU(27),r.ALo(28,"translate"),r.qZA()(),r._UZ(29,"div",23)(30,"app-company-logo",24),r.ALo(31,"async"),r.ALo(32,"async"),r.BQk()}if(2&ee){const K=X.$implicit,oe=r.oxw();r.xp6(1),r.Q6J("ngIf",oe.isChatsEnabled),r.xp6(1),r.ekj("active",K===oe.SECTION.CONFERENCES),r.xp6(3),r.Q6J("ngIf",r.lcZ(6,18,oe.isConferenceSessionRunning$)),r.xp6(3),r.Oqu(r.lcZ(9,20,"HOME__MENU__EVENTS")),r.xp6(2),r.ekj("active",K===oe.SECTION.ROOMS),r.xp6(3),r.Q6J("ngIf",r.lcZ(14,22,oe.isRoomSessionRunning$)),r.xp6(3),r.Oqu(r.lcZ(17,24,"HOME__MENU__ROOMS")),r.xp6(2),r.ekj("active",K===oe.SECTION.CONTACTS),r.xp6(3),r.Oqu(r.lcZ(22,26,"HOME__MENU__CONTACTS")),r.xp6(2),r.Q6J("ngIf",oe.isExperimental),r.xp6(1),r.ekj("active",K===oe.SECTION.SETTINGS),r.xp6(3),r.Oqu(r.lcZ(28,28,"HOME__MENU__SETTINGS")),r.xp6(3),r.Q6J("src",r.lcZ(31,30,oe.companyLogoSrc$))("altText",r.lcZ(32,32,oe.companyName$))}}var H=(()=>((H=H||{})[H.ADMINISTRATION=0]="ADMINISTRATION",H[H.LOGOUT=1]="LOGOUT",H[H.OLD_INTERFACE=2]="OLD_INTERFACE",H[H.PROFILE=3]="PROFILE",H))();let Y=(()=>{class ee{get activeSection(){return this.homeStoreService.activeSection}get isChatsEnabled(){return this.loginService.isChatsEnabled}constructor(K,oe,O,U,k,te,fe,de,re,_e,ve,$,Z){this.modal=K,this.conferenceSessionOpenMode=oe,this.conferencesService=O,this.happyNewYearService=U,this.homeStoreService=k,this.loginService=te,this.navigationQueueService=fe,this.roomsService=de,this.translate=re,this.userSessionStoreService=_e,this.companyInfoService=ve,this.routesService=$,this.chatStoreService=Z,this.isNewYear$=this.happyNewYearService.isNewYear$,this.isExperimental=e._Z.settings.EXPERIMENTAL_FEATURES,this.SECTION=s.$,this.SECTION_ROUTE_MAP=s.Z,this.activeSection$=this.homeStoreService.activeSection$,this.hasAdminAccess$=this.userSessionStoreService.hasAdminAccess$,this.selfActionsItems$=this.hasAdminAccess$.pipe((0,i.U)(B=>this.getSelfActionsItems$(B))),this.profile$=this.userSessionStoreService.sessionInfo$.pipe((0,i.U)(B=>B.user)),this.conferenceSession$=this.homeStoreService.activeConferenceSession$,this.isConferenceSessionRunning$=this.conferenceSession$.pipe((0,i.U)(B=>!!B&&!B.room)),this.isRoomSessionRunning$=this.conferenceSession$.pipe((0,i.U)(B=>!!B&&B.room)),this.inConferenceOrRoom$=(0,f.aj)([this.isConferenceSessionRunning$,this.isRoomSessionRunning$]).pipe((0,i.U)(B=>B.some(Boolean))),this.companyLogoSrc$=this.companyInfoService.companyLogoMainPageSrc$,this.companyName$=this.companyInfoService.companyName$,this.totalUnreadAmount$=this.chatStoreService.totalUnreadAmount$}goToSection(K){if(this.closeOverlay(),K===this.activeSection)return void this.processConferenceSessionOpenModeForActiveSection();const oe=this.SECTION_ROUTE_MAP.find(O=>O.section===K);oe?(this.processConferenceSessionOpenMode(oe.section),this.roomsService.setSelectedConference(null),this.conferencesService.setSelectedConference(null),this.isChatsEnabled&&this.chatStoreService.setCurrentChatId(null),this.navigationQueueService.queueNavigate(oe.route,{queryParamsHandling:"merge"})):console.error(`Cannot find target url for section ${K}`)}processConferenceSessionOpenModeForActiveSection(){this.switchSection(this.activeSection)}processConferenceSessionOpenMode(K){this.conferenceSession$.value&&this.switchSection(K)}switchSection(K){switch(K){case s.$.NONE:break;case s.$.CHATS:case s.$.CONTACTS:case s.$.CONFERENCES:case s.$.ROOMS:this.conferenceSessionOpenMode.avoidWideMode();break;case s.$.FILES:console.warn("Implement me");break;case s.$.SETTINGS:this.conferenceSessionOpenMode.avoidNotPipMode()}}closeOverlay(){this.modal?.close()}getSelfActionsItems$(K){const oe=[{title:this.translate.stream("HOME__SELF_AVATAR_MENU__PROFILE"),iconSrc:"assets/icons/icon16/profile.svg",value:H.PROFILE},{title:this.translate.stream("HOME__SELF_AVATAR_MENU__OLD_INTERFACE"),iconSrc:"assets/icons/icon16/old-interface.svg",value:H.OLD_INTERFACE},{title:this.translate.stream("HOME__SELF_AVATAR_MENU__LOGOUT"),iconSrc:"assets/icons/icon16/exit.svg",value:H.LOGOUT}];if(K){const O={title:this.translate.stream("HOME__SELF_AVATAR_MENU__ADMINISTRATION"),iconSrc:"assets/icons/icon16/admin.svg",value:H.ADMINISTRATION};oe.splice(1,0,O)}return oe}executeAction(K){switch(K){case H.ADMINISTRATION:window.open("/administration.html","_blank");break;case H.LOGOUT:this.loginService.resetLogin();break;case H.OLD_INTERFACE:location.href=(0,h.Z)(this.homeStoreService.activeConferenceSessionId);break;case H.PROFILE:const O=(0,_.Hxy)(this.inConferenceOrRoom$).value;this.routesService.goToProfile(O??!1)}}}return ee.\u0275fac=function(K){return new(K||ee)(r.Y36(_.aiK,8),r.Y36(p.A),r.Y36(u.d),r.Y36(a.V),r.Y36(o.h),r.Y36(e.r6),r.Y36(l.U),r.Y36(c.L),r.Y36(d.sK),r.Y36(v.j8),r.Y36(I.z),r.Y36(m._D),r.Y36(g.s))},ee.\u0275cmp=r.Xpm({type:ee,selectors:[["app-navigation-menu"]],decls:4,vars:6,consts:[["class","relative",4,"ngWith","ngWithAs"],[4,"ngWith","ngWithAs"],[1,"relative"],["class","happy-new-year-bg",4,"ngIf"],["class","happy-new-year-hood",4,"ngIf"],["class","self-avatar","e2e-id","shared-core.navigation-menu.self-actions-popover",3,"items","positions","customButton","itemClick",4,"ngIf"],[1,"happy-new-year-bg"],[1,"happy-new-year-hood"],["src","assets/icons/unsized/holidays-navbar-avatar.svg"],["e2e-id","shared-core.navigation-menu.self-actions-popover",1,"self-avatar",3,"items","positions","customButton","itemClick"],[3,"avatarResourceId","name","showName",4,"ngWith","ngWithAs"],[3,"avatarResourceId","name","showName"],[4,"ngIf"],["e2e-id","shared-core.navigation-menu.conferences",1,"layout","layout-column","layout-align-center-center","menu-item",3,"click"],["src","assets/icons/icon24/events.svg",1,"main-icon"],["class","event-is-on-icon","src","assets/icons/icon16/wifi.svg",4,"ngIf"],[1,"name"],["e2e-id","shared-core.navigation-menu.rooms",1,"layout","layout-column","layout-align-center-center","menu-item",3,"click"],["src","assets/icons/icon24/rooms.svg",1,"main-icon"],["e2e-id","shared-core.navigation-menu.contacts",1,"layout","layout-column","layout-align-center-center","menu-item",3,"click"],["src","assets/icons/icon24/contacts.svg",1,"main-icon"],["e2e-id","shared-core.navigation-menu.settings",1,"layout","layout-column","layout-align-center-center","menu-item",3,"click"],["src","assets/icons/icon24/settings-fill.svg",1,"main-icon"],[1,"flex-grow"],[1,"layout","layout-align-center-center","layout-padding_16",3,"src","altText"],["e2e-id","shared-core.navigation-menu.chats",1,"layout","layout-column","layout-align-center-center","menu-item",3,"click"],["class","chats-unread-amount",4,"ngIf"],["src","assets/icons/icon24/chat-fill.svg",1,"main-icon"],[1,"chats-unread-amount"],["src","assets/icons/icon16/wifi.svg",1,"event-is-on-icon"],["e2e-id","shared-core.navigation-menu.files",1,"layout","layout-column","layout-align-center-center","menu-item",3,"click"],["src","assets/icons/icon24/files-fill.svg",1,"main-icon"]],template:function(K,oe){1&K&&(r.YNc(0,N,5,5,"div",0),r.ALo(1,"async"),r.YNc(2,J,33,34,"ng-container",1),r.ALo(3,"async")),2&K&&(r.Q6J("ngWithAs",r.lcZ(1,2,oe.isNewYear$)),r.xp6(2),r.Q6J("ngWithAs",r.lcZ(3,4,oe.activeSection$)))},dependencies:[E.O5,_.bk9,_.XFu,_.dcW,n.U,S.m,E.Ov,d.X$],styles:["[_ngcontent-%COMP%]:root{--100vh: 100vh;--100vw: 100vw}[_nghost-%COMP%]{display:flex;flex-direction:column;background-color:rgb(var(--dark--neutral-color-3));min-height:600px;height:var(--100vh);width:80px;min-width:80px;max-width:80px}[_nghost-%COMP%]   .self-avatar[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;min-height:56px;height:56px;max-height:56px}[_nghost-%COMP%]   .self-avatar[_ngcontent-%COMP%]   app-participant-icon[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   .menu-item[_ngcontent-%COMP%]{width:100%;min-height:72px;height:72px;max-height:72px;cursor:pointer;position:relative}[_nghost-%COMP%]   app-company-logo[_ngcontent-%COMP%], [_nghost-%COMP%]   .menu-item[_ngcontent-%COMP%]{width:100%;min-height:72px;height:72px;max-height:72px}[_nghost-%COMP%]   .menu-item[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:10px;line-height:1.2;letter-spacing:normal;font-weight:400;color:rgb(var(--dark--font-gray-2-color))}[_nghost-%COMP%]   .menu-item[_ngcontent-%COMP%]   .main-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{fill:rgb(var(--dark--font-gray-2-color))}[_nghost-%COMP%]   .menu-item[_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   .menu-item.active[_ngcontent-%COMP%]{background-color:rgb(var(--dark--neutral-color-2));color:rgb(var(--white-100));border-bottom:1px solid rgba(var(--white-100),var(--transparency-10));border-top:1px solid rgba(var(--white-100),var(--transparency-10))}[_nghost-%COMP%]   .menu-item[_ngcontent-%COMP%]:hover   .name[_ngcontent-%COMP%], [_nghost-%COMP%]   .menu-item.active[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{color:rgb(var(--white-100))}[_nghost-%COMP%]   .menu-item[_ngcontent-%COMP%]:hover   .main-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   *[_ngcontent-%COMP%], [_nghost-%COMP%]   .menu-item.active[_ngcontent-%COMP%]   .main-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{fill:rgb(var(--white-100))}[_nghost-%COMP%]   .event-is-on-icon[_ngcontent-%COMP%]{position:absolute;bottom:-4px;right:-6px}[_nghost-%COMP%]   .happy-new-year-bg[_ngcontent-%COMP%]{position:absolute;top:0;left:0;background-image:url(holidays-navbar-background.ee1e8aa700bb83f0.svg);background-repeat:no-repeat;width:100%;height:100%}[_nghost-%COMP%]   .happy-new-year-hood[_ngcontent-%COMP%]{position:absolute;left:16px;top:8px;z-index:1;pointer-events:none}[_nghost-%COMP%]   .chats-unread-amount[_ngcontent-%COMP%]{min-width:16px;height:16px;display:flex;align-items:center;justify-content:center;border-radius:24px;padding:0 2px;color:rgb(var(--neutral-color-3));background:rgb(var(--primary-color));position:absolute;font-size:10px;border:1px solid rgb(var(--font-main-color));right:21px;top:9px}"],changeDetection:0}),ee})()},3785:(z,R,t)=>{t.d(R,{R:()=>i});var e=t(911),s=t(46782),h=t(54355),_=t(76652);let i=(()=>{class f{constructor(p,u,a){this.el=p,this.control=u,this.destroy$=a}ngOnInit(){this.control&&this.control.valueChanges?.pipe((0,s.R)(this.destroy$)).subscribe(p=>{const u=p.replace(/[^0-9]/g,"");this.control.control?.patchValue(u,{emitEvent:!1})})}onInput(p){let u=p.target.value;u=u.replace(/[^0-9]/g,""),this.el.nativeElement.value=u}onPaste(p){let u=p.clipboardData.getData("text/plain");u=u.replace(/[^0-9]/g,""),document.execCommand("insertText",!1,u),p.preventDefault()}}return f.\u0275fac=function(p){return new(p||f)(h.Y36(h.SBq),h.Y36(_.a5),h.Y36(e.z23))},f.\u0275dir=h.lG2({type:f,selectors:[["","appNumericInput",""]],hostBindings:function(p,u){1&p&&h.NdJ("input",function(o){return u.onInput(o)})("paste",function(o){return u.onPaste(o)})},features:[h._Bn([e.z23])]}),f})()},99141:(z,R,t)=>{t.d(R,{D:()=>o});var e=t(42827),s=t(54355),h=t(40089),_=t(6190);function i(l,c){1&l&&(s.ynx(0),s._uU(1),s.ALo(2,"translate"),s.BQk()),2&l&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"CONTACTS_PAGE.ONLINE")," "))}function f(l,c){1&l&&(s.ynx(0),s._uU(1),s.ALo(2,"translate"),s.BQk()),2&l&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"CONTACTS_PAGE.OFFLINE")," "))}function r(l,c){1&l&&(s.ynx(0),s._uU(1),s.ALo(2,"translate"),s.BQk()),2&l&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"CONTACTS_PAGE.IN_EVENT")," "))}function p(l,c){1&l&&(s.ynx(0),s._uU(1),s.ALo(2,"translate"),s.BQk()),2&l&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"CONTACTS_PAGE.IN_CALL")," "))}function u(l,c){1&l&&(s.ynx(0),s._uU(1),s.ALo(2,"translate"),s.BQk()),2&l&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"CONTACTS_PAGE.UNKNOWN")," "))}function a(l,c){1&l&&(s.ynx(0),s._uU(1),s.ALo(2,"translate"),s.BQk()),2&l&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"CONTACTS_PAGE.BOT")," "))}let o=(()=>{class l{constructor(){this.OnlineStatus=e.Y,this.onlineStatus=e.Y.UNKNOWN}}return l.\u0275fac=function(d){return new(d||l)},l.\u0275cmp=s.Xpm({type:l,selectors:[["app-online-text-status"]],inputs:{onlineStatus:"onlineStatus"},decls:7,vars:7,consts:[[3,"ngSwitch"],[4,"ngSwitchCase"]],template:function(d,v){1&d&&(s.ynx(0,0),s.YNc(1,i,3,3,"ng-container",1),s.YNc(2,f,3,3,"ng-container",1),s.YNc(3,r,3,3,"ng-container",1),s.YNc(4,p,3,3,"ng-container",1),s.YNc(5,u,3,3,"ng-container",1),s.YNc(6,a,3,3,"ng-container",1),s.BQk()),2&d&&(s.Q6J("ngSwitch",v.onlineStatus),s.xp6(1),s.Q6J("ngSwitchCase",v.OnlineStatus.ONLINE),s.xp6(1),s.Q6J("ngSwitchCase",v.OnlineStatus.OFFLINE),s.xp6(1),s.Q6J("ngSwitchCase",v.OnlineStatus.IN_EVENT),s.xp6(1),s.Q6J("ngSwitchCase",v.OnlineStatus.IN_CALL),s.xp6(1),s.Q6J("ngSwitchCase",v.OnlineStatus.UNKNOWN),s.xp6(1),s.Q6J("ngSwitchCase",v.OnlineStatus.BOT))},dependencies:[h.RF,h.n9,_.X$],changeDetection:0}),l})()},84460:(z,R,t)=>{t.d(R,{U:()=>E});var e=t(42827),s=t(5469),h=t(54355),_=t(32352),i=t(40089),f=t(28559),r=t.n(f),p=t(13963);let a=(()=>{class n{constructor(){this.size=32,this.COLORS_COUNT=20}get bgColor(){let T;return T=this.name?this.getIndex(this.name):1,`rgb(var(--ext-color-${T}))`}ngOnInit(){this.updateTitle()}ngOnChanges(){this.updateTitle()}updateTitle(){this.fontSize=this.size/2.2857142857142856;const C=this.name?.split(" ");this.title=(C?.[0]?.[0]||"")+(C?.[1]?.[0]||"")}hashCode(C){let T=0;for(let P=0;P<C.length;P++)T=Math.imul(31,T)+C.charCodeAt(P)|0;return T}getIndex(C){switch(s._Z.settings.DEFAULT_AVATARS_COLOR_ALGORITHM){case p.C.MD5:const M=r()(C).slice(-this.COLORS_COUNT/10-1),L=parseInt(M,16);return Math.abs(L%this.COLORS_COUNT)+1;case p.C.HEX_HASH:const N=this.hashCode(C);return Math.abs(N%this.COLORS_COUNT)+1}}}return n.\u0275fac=function(C){return new(C||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-default-avatar"]],hostVars:8,hostBindings:function(C,T){2&C&&h.Udp("width",T.size,"px")("height",T.size,"px")("font-size",T.fontSize,"px")("background-color",T.bgColor)},inputs:{size:"size",name:"name"},features:[h.TTD],decls:1,vars:1,template:function(C,T){1&C&&h._uU(0),2&C&&h.Oqu(T.title)},styles:["app-default-avatar{display:flex;justify-content:center;align-items:center;background-color:rgb(var(--neutral-color-5));color:rgb(var(--font-gray-1-color));border-radius:50%;text-transform:uppercase}\n"],encapsulation:2,changeDetection:0}),n})();var o=t(911);function l(n,S){if(1&n&&(h.TgZ(0,"div",6),h.ALo(1,"safeCss"),h.qZA()),2&n){const C=h.oxw();h.Udp("background-image",h.lcZ(1,8,C.participantAvatarUrl))("width",C.size,"px")("height",C.size,"px"),h.ekj("layout-bottom-margin",C.showName)}}function c(n,S){if(1&n&&h._UZ(0,"app-default-avatar",7),2&n){const C=h.oxw();h.Q6J("name",C.name)("size",C.size)}}function d(n,S){if(1&n&&(h.TgZ(0,"small",8),h._uU(1),h.qZA()),2&n){const C=h.oxw();h.xp6(1),h.Oqu(C.name)}}const g=300*Math.PI/180;let E=(()=>{class n{get statusBadgeSize(){return Math.max(12,.125*this.size)}get statusIconPath(){return this.statusIcon?`assets/icons/icon${this.statusIconSize}c/${this.statusIcon}.svg`:null}get statusIconSize(){return this.size<=32?12:this.size<=36?14:this.size<=48?16:24}get statusIcon(){switch(this.onlineStatus){case e.Y.ONLINE:return"green_light";case e.Y.IN_CALL:return"finish_call_fill_red";case e.Y.IN_EVENT:return"camera_on_fill_red";case e.Y.CONFERENCE_ONLINE:return"green_light_outline";case e.Y.CONFERENCE_OFFLINE:return"red_light_outline";default:return""}}get left(){return`calc(50% + ${this.size/2*Math.cos(g)}px - ${this.statusBadgeSize/2}px)`}get top(){return`calc(50% + ${this.size/2*Math.sin(g)}px - ${this.statusBadgeSize/2}px)`}constructor(C){this.resourceUrlService=C,this.size=32,this.showName=!1,this.onlineStatus=e.Y.NONE,this.lazyLoadAvatar=!1,this.isSoundActive=!1,this.participantAvatarUrl=""}ngOnInit(){this.lazyLoadAvatar||this.updateAvatar()}ngOnChanges(C){C.avatarResourceId&&!C.avatarResourceId.firstChange&&this.updateAvatar()}updateAvatar(){const T=this.avatarResourceId?this.resourceUrlService.getResourceUrl(this.avatarResourceId,{size:{width:this.size*s._Z.settings.CONFERENCE_CHAT_AVATAR_SIZE_FACTOR},serverAddress:this.serverAddress}):"";this.participantAvatarUrl=`url(${T})`}onIntersectionChange(C){!C||!this.lazyLoadAvatar||this.participantAvatarUrl||this.updateAvatar()}}return n.\u0275fac=function(C){return new(C||n)(h.Y36(_.Z))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-participant-icon"]],hostVars:2,hostBindings:function(C,T){2&C&&h.ekj("active",T.isSoundActive)},inputs:{size:"size",avatarResourceId:"avatarResourceId",name:"name",showName:"showName",onlineStatus:"onlineStatus",serverAddress:"serverAddress",lazyLoadAvatar:"lazyLoadAvatar",isSoundActive:"isSoundActive"},features:[h.TTD],decls:6,vars:13,consts:[["ivaIntersectionObserver","",1,"participant",3,"tooltip","intersectionChange"],[1,"event-status",3,"src"],[1,"participant-icon-border-container"],["class","participant-avatar",3,"layout-bottom-margin","background-image","width","height",4,"ngIf"],[3,"name","size",4,"ngIf"],["class","ellipsis",4,"ngIf"],[1,"participant-avatar"],[3,"name","size"],[1,"ellipsis"]],template:function(C,T){1&C&&(h.TgZ(0,"div",0),h.NdJ("intersectionChange",function(A){return T.onIntersectionChange(A)}),h._UZ(1,"svg-icon",1)(2,"div",2),h.YNc(3,l,2,10,"div",3),h.YNc(4,c,1,2,"app-default-avatar",4),h.YNc(5,d,2,1,"small",5),h.qZA()),2&C&&(h.Q6J("tooltip",T.name),h.xp6(1),h.Udp("bottom",T.top)("left",T.left),h.Q6J("src",T.statusIconPath),h.xp6(1),h.Udp("width",T.size,"px")("height",T.size,"px"),h.xp6(1),h.Q6J("ngIf",T.avatarResourceId),h.xp6(1),h.Q6J("ngIf",!T.avatarResourceId),h.xp6(1),h.Q6J("ngIf",T.showName))},dependencies:[i.O5,a,o.Z76,o.bk9,o.i9q,o.LIB],styles:["app-participant-icon{display:block}app-participant-icon small{display:block}app-participant-icon .participant{text-align:center;position:relative}app-participant-icon .participant-avatar{border-radius:50%;background-size:cover;background-position:center}app-participant-icon .participant-icon-border-container{display:block;position:absolute;padding:1px;box-sizing:content-box;border:1px solid rgb(var(--link-color));top:-2px;left:-2px;border-color:transparent;transition:border-color .35s ease-in;border-radius:50%}app-participant-icon.active .participant-icon-border-container{border-color:rgb(var(--link-color))}app-participant-icon .online-status{position:absolute;width:16px;height:16px;border:2px solid;border-radius:50%}app-participant-icon .event-status{position:absolute;width:16px;height:16px}\n"],encapsulation:2,changeDetection:0}),n})()},35722:(z,R,t)=>{t.d(R,{Q:()=>f});var e=t(54355),s=t(17302),h=t(5469),_=t(911),i=t(6190);let f=(()=>{class r{constructor(){this.generate=new e.vpe}generatePasscode(){const u=(0,s.F)(h._Z.settings.PASSCODE_NUMBERS_COUNT);this.generate.emit(u)}}return r.\u0275fac=function(u){return new(u||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-passcode-generator"]],outputs:{generate:"generate"},decls:3,vars:3,consts:[["iva-icon-button","",3,"tooltip","click"],["src","assets/icons/icon16/refresh.svg"]],template:function(u,a){1&u&&(e.TgZ(0,"button",0),e.NdJ("click",function(){return a.generatePasscode()}),e.ALo(1,"translate"),e._UZ(2,"svg-icon",1),e.qZA()),2&u&&e.Q6J("tooltip",e.lcZ(1,1,"UPDATE"))},dependencies:[_.bk9,_.r2H,_.i9q,i.X$],changeDetection:0}),r})()},28112:(z,R,t)=>{t.d(R,{P:()=>f});var e=t(31652),s=t(911),h=t(54355),_=t(84460),i=t(6190);let f=(()=>{class r{constructor(){this.full=!1}get roleTranslate(){return`LANDING_PAGE.ROLES.${(0,e.tP)(this.ownerId,this.publicParticipant)}`}}return r.\u0275fac=function(u){return new(u||r)},r.\u0275cmp=h.Xpm({type:r,selectors:[["app-public-participant-info"]],inputs:{publicParticipant:"publicParticipant",ownerId:"ownerId",full:"full"},features:[h._Bn([s.z23])],decls:7,vars:10,consts:[[1,"layout-right-margin_16",3,"avatarResourceId","name","size"],[1,"layout-column"],[1,"participant-name","layout-bottom-margin","iva-text_h2","ellipsis",3,"tooltip"],[1,"iva-text_body"]],template:function(u,a){1&u&&(h._UZ(0,"app-participant-icon",0),h.TgZ(1,"div",1)(2,"span",2),h._uU(3),h.qZA(),h.TgZ(4,"span",3),h._uU(5),h.ALo(6,"translate"),h.qZA()()),2&u&&(h.Q6J("avatarResourceId",a.publicParticipant.avatarResourceId||null)("name",a.publicParticipant.name)("size",48),h.xp6(2),h.ekj("participant-name_full",a.full),h.Q6J("tooltip",a.publicParticipant.name),h.xp6(1),h.hij(" ",a.publicParticipant.name," "),h.xp6(2),h.Oqu(h.lcZ(6,8,a.roleTranslate)))},dependencies:[s.i9q,_.U,i.X$],styles:["app-public-participant-info{display:flex;justify-content:flex-start;align-items:center}app-public-participant-info *{color:rgb(var(--font-main-color))}app-public-participant-info .participant-name{max-width:300px}app-public-participant-info .participant-name_full{max-width:100%}\n"],encapsulation:2,changeDetection:0}),r})()},81181:(z,R,t)=>{t.d(R,{x:()=>h});var e=t(68053),s=t(54355);let h=(()=>{class _{transform(f){switch(f){case e.J.LIKE:return"assets/icons/icon32c/reactions/thumbs_up.svg";case e.J.DISLIKE:return"assets/icons/icon32c/reactions/thumbs_down.svg";case e.J.QUESTION:return"assets/icons/icon32c/reactions/question.svg";case e.J.FIRE:return"assets/icons/icon32c/reactions/flame.svg"}}}return _.\u0275fac=function(f){return new(f||_)},_.\u0275pipe=s.Yjl({name:"reactionBubbleIcon",type:_,pure:!0}),_})()},28915:(z,R,t)=>{t.d(R,{h:()=>i});var e=t(54355),s=t(5469),h=t(46679),_=t(81181);let i=(()=>{class f{constructor(){this.hideReaction=new e.vpe,this.timerId=window.setTimeout(()=>this.hideReaction.emit(this.id),s._Z.settings.DEFAULT_REACTION_LIFETIME_MS)}ngOnDestroy(){window.clearTimeout(this.timerId)}}return f.\u0275fac=function(p){return new(p||f)},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-reaction-bubble"]],inputs:{id:"id",reaction:"reaction",name:"name"},outputs:{hideReaction:"hideReaction"},decls:5,vars:5,consts:[[1,"reaction-bubble","layout","layout-align-start-center"],[1,"layout-right-margin_8",3,"src","iconSize"],[1,"name"]],template:function(p,u){1&p&&(e.TgZ(0,"div",0),e._UZ(1,"iva-svg-icon",1),e.ALo(2,"reactionBubbleIcon"),e.TgZ(3,"div",2),e._uU(4),e.qZA()()),2&p&&(e.xp6(1),e.Q6J("src",e.lcZ(2,3,u.reaction))("iconSize",32),e.xp6(3),e.Oqu(u.name))},dependencies:[h.d,_.x],styles:[".reaction-bubble[_ngcontent-%COMP%]{padding:8px 12px 8px 8px;background-color:rgba(var(--neutral-color-5),var(--transparency-80));-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:8px;border-color:rgba(var(--white-100),var(--transparency-5))}.name[_ngcontent-%COMP%]{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;overflow:hidden;word-break:break-all}"],changeDetection:0}),f})()},50940:(z,R,t)=>{t.d(R,{z:()=>r});var e=t(54355),s=t(23503);const h=(0,s.X$)("listAnimation",[(0,s.eR)("* <=> *",[(0,s.IO)(":enter",[(0,s.oB)({opacity:0,transform:"translateY(48px)"}),(0,s.EY)("30ms",(0,s.jt)("300ms ease-out",(0,s.oB)({opacity:1,transform:"translateY(0)"})))],{optional:!0}),(0,s.IO)(":leave",(0,s.jt)("300ms",(0,s.oB)({opacity:0})),{optional:!0})])]);var _=t(40089),i=t(28915);function f(p,u){if(1&p){const a=e.EpF();e.TgZ(0,"app-reaction-bubble",2),e.NdJ("hideReaction",function(){const c=e.CHM(a).$implicit,d=e.oxw();return e.KtG(d.hideReaction.emit(c.id))}),e.qZA()}if(2&p){const a=u.$implicit;e.Q6J("reaction",a.reaction)("name",a.name)}}let r=(()=>{class p{constructor(){this.reactions=[],this.hideReaction=new e.vpe}trackByReactionId(a,o){return o.id}}return p.\u0275fac=function(a){return new(a||p)},p.\u0275cmp=e.Xpm({type:p,selectors:[["app-reaction-bubbles-list"]],inputs:{reactions:"reactions"},outputs:{hideReaction:"hideReaction"},decls:2,vars:3,consts:[[1,"bubbles-container","layout-fill_horisontal","layout-column"],["class","layout-bottom-margin_16",3,"reaction","name","hideReaction",4,"ngFor","ngForOf","ngForTrackBy"],[1,"layout-bottom-margin_16",3,"reaction","name","hideReaction"]],template:function(a,o){1&a&&(e.TgZ(0,"div",0),e.YNc(1,f,1,2,"app-reaction-bubble",1),e.qZA()),2&a&&(e.Q6J("@listAnimation",o.reactions.length),e.xp6(1),e.Q6J("ngForOf",o.reactions)("ngForTrackBy",o.trackByReactionId))},dependencies:[_.sg,i.h],styles:[".bubbles-container[_ngcontent-%COMP%]{max-width:200px}.bubbles-container[_ngcontent-%COMP%]   app-reaction-bubble[_ngcontent-%COMP%] + .bubbles-container[_ngcontent-%COMP%]   app-reaction-bubble[_ngcontent-%COMP%]{margin-top:4px}"],data:{animation:[h]},changeDetection:0}),p})()},14788:(z,R,t)=>{t.d(R,{I:()=>o,T:()=>c});var e=t(54355),s=t(26215),h=t(87519),_=t(59328),i=t(6388),f=t(40089);const r=["scrollItemTemplate"],p=["scrollerItems"],u=function(d){return{$implicit:d}};function a(d,v){if(1&d&&(e.TgZ(0,"div",null,2),e.GkF(2,3),e.qZA()),2&d){const I=v.$implicit,m=e.oxw();e.xp6(2),e.Q6J("ngTemplateOutletContext",e.VKq(2,u,I))("ngTemplateOutlet",m.domTemplate)}}var o=(()=>((o=o||{})[o.TOP=0]="TOP",o[o.BOTTOM=1]="BOTTOM",o[o.INITIAL=2]="INITIAL",o))();let c=(()=>{class d{constructor(I){this.visibleItems=new Set,this.shouldUpdate=!1,this.safeZone=300,this.isScrollerNearTop=new e.vpe,this.isScrollerNearBottom=new e.vpe,this.startOrEndReached=new e.vpe,this.visibleIndexesChanged=new e.vpe,this.domElements$=new s.X([]),this.shouldScroll=!1,this.shouldScrollOffset=0,this.scrollElementIndex=-1,this.scrollCallback=()=>{},this.lastScrollTop=0,this.stopPropagation=!1,this._items=[],this.callback=m=>{let g=null,E=null;m.forEach(n=>{const S=this.domElements$.value.map(T=>T.nativeElement).indexOf(n.target);n.isIntersecting?this.visibleItems.add(S):this.visibleItems.delete(S);let C=Array.from(this.visibleItems);C.length||(C=[0,0]),g=Math.min(...C)??null,E=Math.max(...C)??null}),this.visibleIndexesChanged.emit([g,E])},this.observer=new IntersectionObserver(this.callback,{root:this.scrollContainer?.nativeElement,rootMargin:"0px 0px 0px 0px",threshold:1}),this.scrollContainer=I,this.domElements$.pipe((0,h.x)(i.Z),(0,_.G)()).subscribe(([m,g])=>{this.visibleItems.clear(),m.forEach(E=>this.observer.unobserve(E.nativeElement)),g.forEach(E=>this.observer.observe(E.nativeElement))})}get items(){return this._items}set items(I){(0,i.Z)(I,this._items)||(this._items=I,this.shouldUpdate=!0)}onScroll(I){if(this.stopPropagation)return void I.stopPropagation();const m=this.scrollContainer?.nativeElement.scrollTop??0;let g;g=m>this.lastScrollTop?o.BOTTOM:o.TOP,this.lastScrollTop=m<=0?0:m,g===o.BOTTOM&&this.isScrollNearBottom()&&(this.isScrollerNearBottom.emit(),this.startOrEndReached.emit(g)),g===o.TOP&&this.isScrollNearTop()&&(this.isScrollerNearTop.emit(),this.startOrEndReached.emit(g))}get containerHeight(){return this.scrollContainer?.nativeElement?.offsetHeight||0}ngAfterViewInit(){this.scrollElement=this.scrollContainer?.nativeElement}ngAfterViewChecked(){this.shouldScroll&&this.scrollToElementIndex(this.scrollElementIndex,this.shouldScrollOffset,this.scrollCallback),this.shouldUpdate&&this.updateDomElements()}updateDomElements(){this.shouldUpdate=!1;const I=this.scrollerItems?.toArray();this.domElements$.next(I??[])}setScrollPosition(I,m=0,g){this.shouldScroll=!0,this.shouldScrollOffset=m,this.scrollElementIndex=I,this.scrollCallback=g||(()=>{})}scrollToElementIndex(I,m=0,g){this.stopPropagation=!0;const E=this.scrollerItems?.toArray()[I]?.nativeElement;E&&this.scrollTo(E.offsetTop+m,g),this.stopPropagation=!1,this.shouldScroll=!1}isScrollNearBottom(I){return!!this.scrollElement&&Math.ceil(this.scrollElement.scrollTop+this.scrollElement.getBoundingClientRect().height)>=this.scrollElement.scrollHeight-(void 0===I?this.safeZone:I)}isScrollNearTop(I){return!!this.scrollElement&&this.scrollElement.scrollTop<=(void 0===I?this.safeZone:I)}scrollTo(I,m){const g=+I.toFixed(),E=this.scrollContainer.nativeElement.scrollHeight,n=this.scrollContainer.nativeElement.offsetHeight,S=()=>{const C=+this.scrollContainer.nativeElement.scrollTop.toFixed();(C===g||E-C<=n)&&m&&(this.scrollContainer?.nativeElement.removeEventListener("scroll",S),m())};this.scrollContainer?.nativeElement.addEventListener("scroll",S),S(),this.scrollContainer?.nativeElement.scrollTo({top:I})}}return d.\u0275fac=function(I){return new(I||d)(e.Y36(e.SBq))},d.\u0275cmp=e.Xpm({type:d,selectors:[["app-scroller"]],contentQueries:function(I,m,g){if(1&I&&e.Suo(g,r,5),2&I){let E;e.iGM(E=e.CRH())&&(m.domTemplate=E.first)}},viewQuery:function(I,m){if(1&I&&e.Gf(p,5),2&I){let g;e.iGM(g=e.CRH())&&(m.scrollerItems=g)}},hostBindings:function(I,m){1&I&&e.NdJ("scroll",function(E){return m.onScroll(E)})},inputs:{safeZone:"safeZone",items:"items"},outputs:{isScrollerNearTop:"isScrollerNearTop",isScrollerNearBottom:"isScrollerNearBottom",startOrEndReached:"startOrEndReached",visibleIndexesChanged:"visibleIndexesChanged"},decls:2,vars:1,consts:[[1,"scroller-container"],[4,"ngFor","ngForOf"],["scrollerItems",""],[3,"ngTemplateOutletContext","ngTemplateOutlet"]],template:function(I,m){1&I&&(e.TgZ(0,"div",0),e.YNc(1,a,3,4,"div",1),e.qZA()),2&I&&(e.xp6(1),e.Q6J("ngForOf",m.items))},dependencies:[f.sg,f.tP],styles:["[_nghost-%COMP%]{display:block;width:100%;height:100%;overflow-y:scroll}"],changeDetection:0}),d})()},54490:(z,R,t)=>{t.d(R,{g:()=>d});var e=t(54355),s=t(76652),h=t(5469),_=t(911),i=t(22759),f=t(54395),r=t(88002),p=t(68307),u=t(46782),a=t(6190),o=t(40089);const l=["searchEl"];function c(v,I){if(1&v){const m=e.EpF();e.TgZ(0,"button",7),e.NdJ("click",function(){e.CHM(m);const E=e.oxw();return e.KtG(E.clearSearchFilter())}),e._UZ(1,"svg-icon",8),e.qZA()}if(2&v){const m=e.oxw();e.Q6J("tooltip",m.clearButtonTooltipText)}}let d=(()=>{class v{set searchSize(m){this._searchSize=m}get searchSize(){return this._searchSize}get resultSearchSize(){return this.isUserDefined?"m":this._searchSize}get clearButtonTooltipText(){return this.translate.instant(this.searchValue?"CLEAR_SEARCH":"CANCEL_SEARCH")}get isUserDefined(){return"user-defined"===this._searchSize}get showClearButton(){return this.alwaysShowClearButton||!!this.searchValue}constructor(m,g){this.destroy$=m,this.translate=g,this._searchSize="s",this.searchValue="",this.alwaysShowClearButton=!1,this.autofocus=!1,this.placeholder="",this.searchValueChange=new e.vpe,this.cleared=new e.vpe,this.onChangeFn=()=>{},this.onTouchedFn=()=>{}}ngOnChanges(m){m.placeholder&&(this.placeholder=m.placeholder.currentValue)}ngAfterViewInit(){this.autofocus&&this.searchEl.nativeElement.focus(),(0,i.R)(this.searchEl.nativeElement,"input").pipe((0,f.b)(h._Z.settings.INPUT_THROTTLE_MS),(0,r.U)(()=>this.searchEl.nativeElement.value),(0,p.b)(m=>this.processSearchValueChange(m)),(0,u.R)(this.destroy$)).subscribe()}registerOnChange(m){this.onChangeFn=m}registerOnTouched(){}writeValue(m){this.searchValue=m}clearSearchFilterAndFocus(){this.clearSearchFilter(),this.searchEl.nativeElement.focus()}clearSearchFilter(){this.processSearchValueChange(""),this.cleared.emit()}processSearchValueChange(m){this.searchValue=m,this.searchValueChange.emit(m),this.onTouchedFn(),this.onChangeFn(m)}}return v.\u0275fac=function(m){return new(m||v)(e.Y36(_.z23),e.Y36(a.sK))},v.\u0275cmp=e.Xpm({type:v,selectors:[["app-search"]],viewQuery:function(m,g){if(1&m&&e.Gf(l,5),2&m){let E;e.iGM(E=e.CRH())&&(g.searchEl=E.first)}},hostVars:2,hostBindings:function(m,g){2&m&&e.ekj("user-defined-size",g.isUserDefined)},inputs:{searchSize:"searchSize",searchValue:"searchValue",alwaysShowClearButton:"alwaysShowClearButton",autofocus:"autofocus",placeholder:"placeholder"},outputs:{searchValueChange:"searchValueChange",cleared:"cleared"},features:[e._Bn([_.z23,{provide:s.JU,useExisting:(0,e.Gpc)(()=>v),multi:!0}]),e.TTD],decls:7,vars:4,consts:[[1,"flex-grow","input-icon-right","input-icon-left","search"],["ivaInput","",1,"search-input",3,"size","ngModel","placeholder","keydown.escape"],["searchEl",""],[1,"icon-left"],["src","assets/icons/icon16/search.svg"],[1,"icon-right"],["iva-icon-button","",3,"tooltip","click",4,"ngIf"],["iva-icon-button","",3,"tooltip","click"],["src","assets/icons/icon16/close.svg"]],template:function(m,g){1&m&&(e.TgZ(0,"div",0)(1,"input",1,2),e.NdJ("keydown.escape",function(){return g.clearSearchFilterAndFocus()}),e.qZA(),e.TgZ(3,"div",3),e._UZ(4,"svg-icon",4),e.qZA(),e.TgZ(5,"div",5),e.YNc(6,c,2,1,"button",6),e.qZA()()),2&m&&(e.xp6(1),e.Q6J("size",g.resultSearchSize)("ngModel",g.searchValue)("placeholder",g.placeholder),e.xp6(5),e.Q6J("ngIf",g.showClearButton))},dependencies:[o.O5,s.Fj,s.JJ,s.On,_.bk9,_.r2H,_.Vdl,_.i9q],styles:["[_nghost-%COMP%]   .search[_ngcontent-%COMP%]{width:100%}.user-defined-size[_nghost-%COMP%]   .search-input[_ngcontent-%COMP%]{width:100%}"],changeDetection:0}),v})()},38961:(z,R,t)=>{t.d(R,{j:()=>v});var e=t(26215),s=t(54355),h=t(34330),_=t(78519),i=t(40089),f=t(911),r=t(54490),p=t(42277);function u(I,m){1&I&&s._UZ(0,"app-hamburger",3)}function a(I,m){if(1&I){const g=s.EpF();s.TgZ(0,"button",6),s.NdJ("click",function(){s.CHM(g);const n=s.oxw(2);return s.KtG(n.setSearchMode())}),s._UZ(1,"svg-icon",7),s.qZA()}if(2&I){const g=s.oxw(2);s.Q6J("tooltip",g.searchButtonTooltip)}}function o(I,m){if(1&I&&(s.ynx(0),s.TgZ(1,"h1",4),s._uU(2),s.qZA(),s.YNc(3,a,2,1,"button",5),s.Hsn(4),s.BQk()),2&I){const g=s.oxw();s.xp6(2),s.Oqu(g.title),s.xp6(1),s.Q6J("ngIf",g.showSearchButton)}}function l(I,m){if(1&I){const g=s.EpF();s.ynx(0),s.TgZ(1,"app-search",8),s.NdJ("cleared",function(){s.CHM(g);const n=s.oxw();return s.KtG(n.setDefaultMode())})("searchValueChange",function(n){s.CHM(g);const S=s.oxw();return s.KtG(S.onSearchValueChanged(n))}),s.qZA(),s.BQk()}if(2&I){const g=s.oxw();s.xp6(1),s.Q6J("autofocus",!0)("searchSize","m")("searchValue",g.searchValue)("alwaysShowClearButton",!0)("placeholder",g.searchPlaceholder)}}const c=["*"];var d=(()=>((d=d||{})[d.DEFAULT=0]="DEFAULT",d[d.SEARCH=1]="SEARCH",d))();let v=(()=>{class I{get searchValue(){return this._searchValue||""}constructor(g,E){this.pageSizeService=g,this.homeSectionSearchService=E,this.title="",this.searchPlaceholder="",this.searchButtonTooltip="",this.showSearchButton=!1,this.HeaderMode=d,this.headerMode$=new e.X(d.DEFAULT),this.isMediumScreen$=this.pageSizeService.isMediumScreen$,this._searchValue=null}ngOnInit(){this.initSearchValue()}initSearchValue(){this._searchValue=this.homeSectionSearchService.getSectionSearchState(this.section),this._searchValue&&this.headerMode$.next(d.SEARCH)}setSearchMode(){this.headerMode$.next(d.SEARCH),this.homeSectionSearchService.setSectionSearchState(this.section,"")}setDefaultMode(){this.headerMode$.next(d.DEFAULT),this.homeSectionSearchService.setSectionSearchState(this.section,null)}onSearchValueChanged(g){this.homeSectionSearchService.setSectionSearchState(this.section,g),this._searchValue=g}}return I.\u0275fac=function(g){return new(g||I)(s.Y36(h.g),s.Y36(_.y))},I.\u0275cmp=s.Xpm({type:I,selectors:[["app-section-header-wrapper"]],inputs:{title:"title",section:"section",searchPlaceholder:"searchPlaceholder",searchButtonTooltip:"searchButtonTooltip",showSearchButton:"showSearchButton"},ngContentSelectors:c,decls:6,vars:8,consts:[["class","layout-right-margin_16",4,"ngIf"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"layout-right-margin_16"],[1,"flex-grow","ellipsis"],["iva-icon-button","","class","layout-right-margin_16","e2e-id","contacts-header__search-btn",3,"tooltip","click",4,"ngIf"],["iva-icon-button","","e2e-id","contacts-header__search-btn",1,"layout-right-margin_16",3,"tooltip","click"],["src","assets/icons/icon16/search.svg"],[1,"flex-grow",3,"autofocus","searchSize","searchValue","alwaysShowClearButton","placeholder","cleared","searchValueChange"]],template:function(g,E){1&g&&(s.F$t(),s.YNc(0,u,1,0,"app-hamburger",0),s.ALo(1,"async"),s.ynx(2,1),s.ALo(3,"async"),s.YNc(4,o,5,2,"ng-container",2),s.YNc(5,l,2,5,"ng-container",2),s.BQk()),2&g&&(s.Q6J("ngIf",s.lcZ(1,4,E.isMediumScreen$)),s.xp6(2),s.Q6J("ngSwitch",s.lcZ(3,6,E.headerMode$)),s.xp6(2),s.Q6J("ngSwitchCase",E.HeaderMode.DEFAULT),s.xp6(1),s.Q6J("ngSwitchCase",E.HeaderMode.SEARCH))},dependencies:[i.O5,i.RF,i.n9,f.bk9,f.hTy,f.r2H,f.i9q,r.g,p.x,i.Ov],styles:["[_nghost-%COMP%]{display:flex;align-items:center;flex-grow:1;height:56px;padding:0 16px;background:rgb(var(--white-100));border-bottom:1px solid rgba(var(--black-100),var(--transparency-5));border-right:1px solid rgba(var(--black-100),var(--transparency-5));box-sizing:content-box}[_nghost-%COMP%]   .section-header__hamburger[_ngcontent-%COMP%]{margin-right:16px}"],changeDetection:0}),I})()},25642:(z,R,t)=>{t.d(R,{l:()=>p});var e=t(76133),s=t(54355),h=t(911),_=t(84460),i=t(48160),f=t(6190);const r=[e.S.RUSSIAN,e.S.ENGLISH];let p=(()=>{class u{get isSelectedLanguagePairValid(){return!!this.languagePair&&!!this.languagePair[0]&&!!this.languagePair[1]}get inputData(){return this.modalRef.data}get participant(){return this.inputData.participant}get participantLanguagePair(){return this.inputData.participant.interpreterLanguagesPair?.length?this.inputData.participant.interpreterLanguagesPair:r}constructor(o){this.modalRef=o,this.languagePair=this.participantLanguagePair}handleLanguagePairChange(o){this.languagePair=o}close(){this.modalRef.close({isConfirmed:!1})}confirmLanguagePair(){this.modalRef.close({isConfirmed:!0,languagePair:this.languagePair})}}return u.\u0275fac=function(o){return new(o||u)(s.Y36(h.aiK))},u.\u0275cmp=s.Xpm({type:u,selectors:[["app-select-language-pair-modal"]],decls:20,vars:15,consts:[[1,"modal-card","select-language-modal"],[1,"no-border"],["iva-icon-button","",3,"click"],["src","assets/icons/icon16/close.svg"],[1,"layout","layout-fill","layout-column","flex-grow","white-100"],[1,"layout-row","layout-align-start-center","flex-grow"],[1,"layout-right-margin_10",3,"avatarResourceId","name","showName"],[1,"participant-name","ellipsis"],[3,"languagePair","languagePairChanged"],[1,"flex","no-border"],["iva-button","","color","secondary",1,"layout-align-center","layout-right-margin_16","layout-align-center-center",3,"click"],["iva-button","",1,"layout-align-center","layout-align-center-center",3,"disabled","click"]],template:function(o,l){1&o&&(s.TgZ(0,"div",0)(1,"header",1)(2,"h2"),s._uU(3),s.ALo(4,"translate"),s.qZA(),s.TgZ(5,"button",2),s.NdJ("click",function(){return l.close()}),s._UZ(6,"svg-icon",3),s.qZA()(),s.TgZ(7,"section",4)(8,"div",5),s._UZ(9,"app-participant-icon",6),s.TgZ(10,"div",7),s._uU(11),s.qZA()(),s.TgZ(12,"app-language-pair",8),s.NdJ("languagePairChanged",function(d){return l.handleLanguagePairChange(d)}),s.qZA()(),s.TgZ(13,"footer",9)(14,"button",10),s.NdJ("click",function(){return l.close()}),s._uU(15),s.ALo(16,"translate"),s.qZA(),s.TgZ(17,"button",11),s.NdJ("click",function(){return l.confirmLanguagePair()}),s._uU(18),s.ALo(19,"translate"),s.qZA()()()),2&o&&(s.xp6(3),s.Oqu(s.lcZ(4,9,"LANGUAGE_PAIR_MODAL.TITLE")),s.xp6(6),s.Q6J("avatarResourceId",l.participant.avatarResourceId)("name",l.participant.name)("showName",!1),s.xp6(2),s.Oqu(l.participant.name),s.xp6(1),s.Q6J("languagePair",l.participantLanguagePair),s.xp6(3),s.hij(" ",s.lcZ(16,11,"CANCEL")," "),s.xp6(2),s.Q6J("disabled",!l.isSelectedLanguagePairValid),s.xp6(1),s.hij(" ",s.lcZ(19,13,"LANGUAGE_PAIR_MODAL.CONFIRM")," "))},dependencies:[h.bk9,h.r0F,h.r2H,_.U,i.A,f.X$],styles:["[_nghost-%COMP%]   .select-language-modal[_ngcontent-%COMP%]{width:560px;border-radius:18px;border:1px solid rgb(var(--neutral-color-4))}[_nghost-%COMP%]   header[_ngcontent-%COMP%]{align-items:center!important;justify-content:space-between!important}[_nghost-%COMP%]   section[_ngcontent-%COMP%]{max-width:560px;padding:0 24px!important}[_nghost-%COMP%]   footer[_ngcontent-%COMP%]{padding-top:32px!important}[_nghost-%COMP%]   .iva-button[_ngcontent-%COMP%]{width:130px}"],changeDetection:0}),u})()},13263:(z,R,t)=>{t.d(R,{B:()=>f});var e=t(54355),s=t(911),h=t(40089),_=t(6190);function i(r,p){if(1&r){const u=e.EpF();e.TgZ(0,"iva-checkbox",9),e.NdJ("checkedChange",function(){const l=e.CHM(u).$implicit,c=e.oxw();return e.KtG(c.toggleOption(l))}),e.ALo(1,"translate"),e.TgZ(2,"span",10),e._uU(3),e.ALo(4,"translate"),e.qZA()()}if(2&r){const u=p.$implicit,a=e.oxw();e.Q6J("disabled",!!u.isDisabled)("checked",a.isOptionChecked(u))("tooltip",e.lcZ(1,4,u.title)),e.xp6(3),e.hij(" ",e.lcZ(4,6,u.title)," ")}}let f=(()=>{class r{get title(){return this.modalRef.data?.title||""}get allOptions(){return this.modalRef.data?.options||[]}constructor(u){this.modalRef=u,this.options=[...this.modalRef.data?.options],this.selectedOptions=[...this.modalRef.data.selectedOptions]}getOptionIndex(u){return this.selectedOptions.findIndex(a=>a.value===u.value)}isOptionChecked(u){return-1!==this.getOptionIndex(u)}toggleOption(u){const a=this.getOptionIndex(u);-1===a?this.selectedOptions.push(u):this.selectedOptions.splice(a,1)}apply(){this.modalRef.close(this.selectedOptions)}close(){this.modalRef.close()}}return r.\u0275fac=function(u){return new(u||r)(e.Y36(s.aiK))},r.\u0275cmp=e.Xpm({type:r,selectors:[["ng-component"]],decls:16,vars:10,consts:[[1,"modal-card"],[1,"title"],["iva-icon-button","",3,"click"],["src","assets/icons/icon24/close.svg"],[1,"layout-column"],["class","layout-bottom-margin_16",3,"disabled","checked","tooltip","checkedChange",4,"ngFor","ngForOf"],[1,"footer","no-border"],["iva-button","","color","secondary",1,"layout-right-margin_16",3,"click"],["iva-button","",3,"click"],[1,"layout-bottom-margin_16",3,"disabled","checked","tooltip","checkedChange"],[1,"select-option__value"]],template:function(u,a){1&u&&(e.TgZ(0,"div",0)(1,"header")(2,"h2",1),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",2),e.NdJ("click",function(){return a.close()}),e._UZ(6,"svg-icon",3),e.qZA()(),e.TgZ(7,"section",4),e.YNc(8,i,5,8,"iva-checkbox",5),e.qZA(),e.TgZ(9,"footer",6)(10,"button",7),e.NdJ("click",function(){return a.close()}),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"button",8),e.NdJ("click",function(){return a.apply()}),e._uU(14),e.ALo(15,"translate"),e.qZA()()()),2&u&&(e.xp6(3),e.hij(" ",e.lcZ(4,4,a.title)," "),e.xp6(5),e.Q6J("ngForOf",a.allOptions),e.xp6(3),e.hij(" ",e.lcZ(12,6,"CANCEL")," "),e.xp6(3),e.hij(" ",e.lcZ(15,8,"SELECT")," "))},dependencies:[h.sg,s.bk9,s.r0F,s.r2H,s.bK4,s.i9q,_.X$],styles:["[_nghost-%COMP%]   .modal-card[_ngcontent-%COMP%]{width:500px}[_nghost-%COMP%]   .select-option__value[_ngcontent-%COMP%]{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1;overflow:hidden;word-break:break-word}"],changeDetection:0}),r})()},21088:(z,R,t)=>{t.d(R,{r:()=>_});var e=t(54355),s=t(911),h=t(6190);let _=(()=>{class i{constructor(){this.isLinkStyle=!1,this.isOpened=!1}get tooltip(){return this.isOpened?this.customCollapseTooltipPath||"COLLAPSE":this.customExpandTooltipPath||"EXPAND"}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-settings-section-toggle-button"]],inputs:{isLinkStyle:"isLinkStyle",isOpened:"isOpened",customExpandTooltipPath:"customExpandTooltipPath",customCollapseTooltipPath:"customCollapseTooltipPath"},decls:2,vars:7,consts:[["src","assets/icons/icon16/open-down.svg",1,"layout-right-margin_8","toggle-icon",3,"tooltip"]],template:function(r,p){1&r&&(e._UZ(0,"svg-icon",0),e.ALo(1,"translate")),2&r&&(e.ekj("toggle-icon_rotated",p.isOpened)("link-color",p.isLinkStyle),e.Q6J("tooltip",e.lcZ(1,5,p.tooltip)))},dependencies:[s.bk9,s.i9q,h.X$],styles:["[_nghost-%COMP%]   svg-icon.toggle-icon[_ngcontent-%COMP%]{display:flex;transition:transform linear .3s}[_nghost-%COMP%]   svg-icon.toggle-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{fill:rgb(var(--font-main-color))}[_nghost-%COMP%]   svg-icon.toggle-icon_rotated[_ngcontent-%COMP%]{transform:rotate(180deg)}[_nghost-%COMP%]   svg-icon.link-color[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{fill:rgb(var(--link-color))}"],changeDetection:0}),i})()},48258:(z,R,t)=>{t.d(R,{u:()=>a});var e=t(54355),s=t(911),h=t(40089),_=t(21088),i=t(6190);function f(o,l){if(1&o&&(e.TgZ(0,"div",5),e._UZ(1,"app-settings-section-toggle-button",6),e.TgZ(2,"label",7),e.ALo(3,"translate"),e._uU(4),e.qZA()()),2&o){const c=e.oxw();e.xp6(1),e.Q6J("isOpened",c.isOpened)("isLinkStyle",c.isLinkStyle),e.xp6(1),e.ekj("iva-text_h3",!c.isLinkStyle)("iva-text_body-2",c.isLinkStyle)("link-color",c.isLinkStyle),e.Q6J("tooltip",e.lcZ(3,10,c.isOpened?"COLLAPSE":"EXPAND")),e.xp6(2),e.Oqu(c.title)}}function r(o,l){if(1&o&&e.GkF(0,8),2&o){const c=e.oxw();e.Q6J("ngTemplateOutlet",c.headerTmpl)}}function p(o,l){if(1&o){const c=e.EpF();e.TgZ(0,"div",9),e.NdJ("created",function(){e.CHM(c);const v=e.oxw();return e.KtG(v.onCreated())}),e.Hsn(1),e.qZA()}2&o&&e.Q6J("@expandCollapseHeight",void 0)}const u=["*"];let a=(()=>{class o{get title(){return this.isOpened&&this.closeTitle?this.closeTitle:this.openTitle}constructor(c){this.elementRef=c,this.openTitle="",this.isOpened=!0,this.isLinkStyle=!1,this.disableToggle=!1,this.opened=new e.vpe,this.closed=new e.vpe,this.contentWasAttached=new e.vpe}onCreated(){this.contentWasAttached.emit()}toggleOpen(){this.disableToggle||(this.isOpened=!this.isOpened,this.isOpened?this.opened.emit():this.closed.emit())}}return o.\u0275fac=function(c){return new(c||o)(e.Y36(e.SBq))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-settings-section"]],inputs:{openTitle:"openTitle",closeTitle:"closeTitle",isOpened:"isOpened",isLinkStyle:"isLinkStyle",disableToggle:"disableToggle",headerTmpl:"headerTmpl"},outputs:{opened:"opened",closed:"closed",contentWasAttached:"contentWasAttached"},ngContentSelectors:u,decls:5,vars:6,consts:[[1,"section-header",3,"click"],["class","layout layout-align-start-center flex-grow",4,"ngIf"],[3,"ngTemplateOutlet",4,"ngIf"],[1,"container"],[3,"created",4,"ngIf"],[1,"layout","layout-align-start-center","flex-grow"],[3,"isOpened","isLinkStyle"],[3,"tooltip"],[3,"ngTemplateOutlet"],[3,"created"]],template:function(c,d){1&c&&(e.F$t(),e.TgZ(0,"div",0),e.NdJ("click",function(){return d.toggleOpen()}),e.YNc(1,f,5,12,"div",1),e.YNc(2,r,1,1,"ng-container",2),e.qZA(),e.TgZ(3,"div",3),e.YNc(4,p,2,1,"div",4),e.qZA()),2&c&&(e.ekj("--not-collapsible",d.disableToggle),e.xp6(1),e.Q6J("ngIf",!d.headerTmpl),e.xp6(1),e.Q6J("ngIf",d.headerTmpl),e.xp6(1),e.Q6J("@emptyEnter",void 0),e.xp6(1),e.Q6J("ngIf",d.isOpened))},dependencies:[h.O5,h.tP,s.srH,s.i9q,_.r,i.X$],styles:["app-settings-section .section-header{cursor:pointer;padding:8px 0;color:rgb(var(--font-main-color))}app-settings-section .section-header.--not-collapsible{cursor:default}app-settings-section .section-header.link-color{color:rgb(var(--link-color))}app-settings-section .section-header label{cursor:pointer}app-settings-section .container{overflow:hidden}\n"],encapsulation:2,data:{animation:[s.KbG,s.U1s,s.qSC]},changeDetection:0}),o})()},20971:(z,R,t)=>{t.d(R,{g:()=>ge}),t(26435);var s=t(40089),h=t(61860),_=t(911),i=t(54355);let f=(()=>{class j{}return j.\u0275fac=function(q){return new(q||j)},j.\u0275mod=i.oAB({type:j}),j.\u0275inj=i.cJS({imports:[s.ez,h.m,_.IR2]}),j})();t(44647);let p=(()=>{class j{}return j.\u0275fac=function(q){return new(q||j)},j.\u0275mod=i.oAB({type:j}),j.\u0275inj=i.cJS({}),j})();t(70226),t(65892),t(50461),t(65608);var c=t(23e3),d=t(84460),v=t(6190);function I(j,le){1&j&&(i.TgZ(0,"div",10),i._uU(1),i.ALo(2,"translate"),i.qZA()),2&j&&(i.xp6(1),i.hij(" ",i.lcZ(2,1,"EXTERNAL")," "))}function m(j,le){1&j&&(i.TgZ(0,"div",10),i._uU(1),i.ALo(2,"translate"),i.qZA()),2&j&&(i.xp6(1),i.hij(" ",i.lcZ(2,1,"CHAT_BOT")," "))}function g(j,le){if(1&j&&(i.TgZ(0,"div",11),i._uU(1),i.qZA()),2&j){const q=i.oxw();i.Q6J("tooltip",q.contactString),i.xp6(1),i.hij(" ",q.contactString," ")}}function E(j,le){if(1&j&&(i.TgZ(0,"div",12),i._uU(1),i.ALo(2,"translate"),i.qZA()),2&j){const q=i.oxw();i.xp6(1),i.hij(" ",i.lcZ(2,1,q.alreadyInvitedTextPath)," ")}}function n(j,le){1&j&&(i.TgZ(0,"div",12),i._uU(1),i.ALo(2,"translate"),i.qZA()),2&j&&(i.xp6(1),i.hij(" ",i.lcZ(2,1,"CONFERENCE_SESSION.INVITE_USER_TO_CONFERENCE.NOT_REGISTERED")," "))}let S=(()=>{class j{constructor(){this.isChat=!1,this.selected=!1,this.canSelect=!0,this.selectedChange=new i.vpe}get isDisabled(){return this.interlocutor.invitedToContext||!this.selected&&!this.canSelect}get isHighlighted(){return this.selected||!!this.interlocutor?.invitedToContext}get contactString(){return this.interlocutor?.email?`${this.interlocutor.email}${this.interlocutor?.phone?", "+this.interlocutor?.phone:""}`:this.interlocutor?.phone||""}get alreadyInvitedTextPath(){return this.isChat?"CONFERENCE_SESSION.INVITE_USER_TO_CONFERENCE.ALREADY_INVITED_TO_CHAT":"CONFERENCE_SESSION.INVITE_USER_TO_CONFERENCE.ALREADY_INVITED"}get isBotInterlocutor(){return this.interlocutor.interlocutorType===c.x.CHAT_BOT}emitSelect(){this.selectedChange.emit(this.isDisabled?void 0:!this.selected)}}return j.\u0275fac=function(q){return new(q||j)},j.\u0275cmp=i.Xpm({type:j,selectors:[["app-interlocutors-item"]],inputs:{interlocutor:"interlocutor",isChat:"isChat",selected:"selected",canSelect:"canSelect"},outputs:{selectedChange:"selectedChange"},decls:13,vars:18,consts:[[1,"interlocutors-item_wrapper",3,"click"],[1,"interlocutors-item_container","neutral-color-4_border-bottom","layout-padding","layout-left-margin_24","layout-right-margin_24"],[1,"layout-right-margin_12",3,"name","avatarResourceId","size"],[1,"layout","flex-1","layout-column","layout-align-center"],[1,"layout","interlocutor-top"],["tooltipAlign","start",1,"ellipsis","break-words",3,"tooltip"],["class","flat-badge blue layout-left-margin_8",4,"ngIf"],["class","helper-text ellipsis","tooltipAlign","start",3,"tooltip",4,"ngIf"],["class","helper-text",4,"ngIf"],[3,"disabled","checked","checkedChange"],[1,"flat-badge","blue","layout-left-margin_8"],["tooltipAlign","start",1,"helper-text","ellipsis",3,"tooltip"],[1,"helper-text"]],template:function(q,se){1&q&&(i.TgZ(0,"div",0),i.NdJ("click",function(){return se.emitSelect()}),i.TgZ(1,"div",1),i._UZ(2,"app-participant-icon",2),i.TgZ(3,"div",3)(4,"div",4)(5,"div",5),i._uU(6),i.qZA(),i.YNc(7,I,3,3,"div",6),i.YNc(8,m,3,3,"div",6),i.qZA(),i.YNc(9,g,2,2,"div",7),i.YNc(10,E,3,3,"div",8),i.YNc(11,n,3,3,"div",8),i.qZA(),i.TgZ(12,"iva-checkbox",9),i.NdJ("checkedChange",function(){return se.emitSelect()}),i.qZA()()()),2&q&&(i.ekj("interlocutors-item_wrapper-selected",se.isHighlighted)("interlocutors-item_wrapper-not-selected",!se.isHighlighted)("interlocutors-item_wrapper-disabled",se.isDisabled),i.xp6(2),i.Q6J("name",se.interlocutor.name)("avatarResourceId",null==se.interlocutor.profile?null:se.interlocutor.profile.avatarResourceId)("size",36),i.xp6(3),i.Q6J("tooltip",se.interlocutor.name),i.xp6(1),i.hij(" ",se.interlocutor.name," "),i.xp6(1),i.Q6J("ngIf",se.interlocutor.ldapUser),i.xp6(1),i.Q6J("ngIf",se.isBotInterlocutor),i.xp6(1),i.Q6J("ngIf",!se.interlocutor.invitedToContext&&!se.interlocutor.pseudo),i.xp6(1),i.Q6J("ngIf",se.interlocutor.invitedToContext),i.xp6(1),i.Q6J("ngIf",se.interlocutor.pseudo),i.xp6(1),i.Q6J("disabled",se.isDisabled)("checked",se.interlocutor.invitedToContext||se.selected))},dependencies:[s.O5,_.bK4,_.i9q,d.U,v.X$],styles:["app-interlocutors-item .interlocutors-item_wrapper{cursor:pointer}app-interlocutors-item .interlocutors-item_wrapper-selected{background-color:rgb(var(--dropdown-item-selected-bg))}app-interlocutors-item .interlocutors-item_wrapper-not-selected:hover{background-color:rgb(var(--dropdown-item-hover-bg))}app-interlocutors-item .interlocutors-item_wrapper-disabled{cursor:not-allowed}app-interlocutors-item .interlocutors-item_container{height:51px;display:flex;align-items:center}app-interlocutors-item .helper-text{color:rgb(var(--font-gray-1-color))}app-interlocutors-item .interlocutor-top{align-items:center;max-width:320px;overflow:hidden;display:flex}app-interlocutors-item app-participant-icon app-default-avatar{background-color:rgb(var(--neutral-color-6))}\n"],encapsulation:2,changeDetection:0}),j})();var C=t(5469),T=t(28970),P=t(76991),A=t(26215),M=t(68307),L=t(88002),N=t(46782),W=t(87519),b=t(45435),V=t(43190),D=t(60986),F=t(18216),J=t(49265),H=t(69261);function Y(j,le){if(1&j){const q=i.EpF();i.ynx(0),i.TgZ(1,"app-interlocutors-item",8),i.NdJ("selectedChange",function(Ce){const De=i.CHM(q).ngIf,Ue=i.oxw();return i.KtG(Ue.onSelect(Ce,De))}),i.qZA(),i.BQk()}if(2&j){const q=le.ngIf,se=i.oxw();i.xp6(1),i.Q6J("interlocutor",q)("selected",se.isSelected(q))}}function ee(j,le){if(1&j){const q=i.EpF();i.TgZ(0,"app-interlocutors-item",9),i.NdJ("selectedChange",function(Ce){const De=i.CHM(q).$implicit,Ue=i.oxw();return i.KtG(Ue.onSelect(Ce,De))}),i.qZA()}if(2&j){const q=le.$implicit,se=i.oxw();i.Q6J("interlocutor",q)("canSelect",se.canAddInterlocutors)("isChat",se.isChat)("selected",se.isSelected(q))}}function X(j,le){1&j&&i._UZ(0,"iva-spinner",10),2&j&&i.Q6J("size",24)}function K(j,le){if(1&j&&(i.TgZ(0,"div",11)(1,"div"),i._uU(2),i.ALo(3,"translate"),i.qZA(),i._UZ(4,"br"),i.TgZ(5,"div"),i._uU(6),i.ALo(7,"translate"),i.qZA()()),2&j){const q=i.oxw();i.xp6(2),i.hij(" ",i.lcZ(3,2,"CONFERENCE_SESSION.INVITE_USER_TO_CONFERENCE.NOT_FOUND")," "),i.xp6(4),i.hij(" ",i.lcZ(7,4,q.hasVVoIPSupportMessage)," ")}}let oe=(()=>{class j{set searchValue(q){this._searchValue=q,this.onSearchValueChangeDebounced(this.searchValue)}get searchValue(){return this._searchValue}get hasVVoIPSupportMessage(){return this.hasVVoIPSupport?"CONFERENCE_SESSION.INVITE_USER_TO_CONFERENCE.YOU_CAN_ADD_VOIP":"CONFERENCE_SESSION.INVITE_USER_TO_CONFERENCE.YOU_CAN_ADD"}get isChat(){return"CHAT_ROOM"===this.searchContext?.contextType}constructor(q,se,Ce,Pe,De,Ue,Dt,yt){this.interlocutorsApi=q,this.interlocutorsService=se,this.sourceHelper=Ce,this.destroy$=Pe,this.cd=De,this.validationService=Ue,this.toastr=Dt,this.translate=yt,this._searchValue="",this.canAddInterlocutors=!0,this.items=[],this.loading=!0,this.loadMore$=new A.X(!1),this.pseudoUserCard$=new A.X(null),this.hidePseudoInterlocutor=!1,this.hasVVoIPSupport=!1,this.selectedItems=[],this.selectedItemsChanged=new i.vpe,this.compareInterlocutors=(Nt,Rt)=>Nt?.id===Rt?.id,this.trackById=(Nt,Rt)=>Rt.id,this.onSearchValueChangeDebounced=(0,P.Z)(this.handleSearchInputChange.bind(this),C._Z.settings.INPUT_THROTTLE_MS)}ngOnInit(){this.setGettingNewItems()}handleHasPseudoUserCard(q){if(this.hidePseudoInterlocutor)return void this.pseudoUserCard$.next(null);const se=this.searchValue,Ce={interlocutorType:c.x.GUEST_USER,name:se,invitedToContext:!1,pseudo:!0,id:se},Pe=this.validationService.isValidEmail(se),De=this.hasVVoIPSupport&&(this.validationService.isValidPhone(se)||this.validationService.isValidVoip(se));if(Pe){if(Ce.email=se,q.filter(Ue=>Ue.email===se).length)return void this.pseudoUserCard$.next(null);this.pseudoUserCard$.next(Ce)}else if(De){if(Ce.phone=se,q.filter(Ue=>Ue.phone?.includes(se)).length)return void this.pseudoUserCard$.next(null);this.pseudoUserCard$.next(Ce)}else this.pseudoUserCard$.next(null)}handleSearchInputChange(q){this.sourceHelper.dropStateToDefault(),this.interlocutorsApi.findInterlocutors({searchCriteria:q,searchContext:this.searchContext,limit:20,sources:this.sourceHelper.getInterlocutorsSourcesForRequest(this.isChat,!0)}).pipe((0,M.b)(se=>this.sourceHelper.setSourceResponseToState(se.sources)),(0,L.U)(se=>this.interlocutorsService.mapInterlocutors(se)),(0,M.b)(se=>this.handleHasPseudoUserCard(se)),(0,N.R)(this.destroy$)).subscribe(se=>{this.virtualScroller?.scrollToIndex(0,!0,0,0,()=>{this.items=se,this.updateExtraInvited(),this.loading=!1,this.cd.detectChanges()})})}updateExtraInvited(){if(this.extraSelectedInterlocutorIds)for(const q of this.items)q.invitedToContext||(q.invitedToContext=this.extraSelectedInterlocutorIds.includes((0,T.Yw)(q)))}onSelect(q,se){void 0!==q||se.invitedToContext?(q?this.selectedItems.push(se):this.selectedItems=this.selectedItems.filter(Ce=>Ce.id!==se.id),this.selectedItemsChanged.emit(this.selectedItems)):this.toastr.info(this.translate.instant("CHATS.CREATION.MAX_USERS_IN_GROUP_CHAT_REACHED",{maxAmount:C._Z.settings.CHAT_PARTICIPANTS_LIMIT}))}isSelected(q){return this.selectedItems.some(se=>se.id===q.id)}setGettingNewItems(){this.loadMore$.pipe((0,W.x)(),(0,b.h)(q=>q),(0,V.w)(()=>this.interlocutorsApi.findInterlocutors({searchCriteria:this.searchValue,searchContext:this.searchContext,limit:20,sources:this.sourceHelper.getInterlocutorsSourcesForRequest(this.isChat,!0)})),(0,M.b)(q=>this.sourceHelper.addSourceResponseToState(q.sources)),(0,L.U)(q=>this.interlocutorsService.mapInterlocutors(q)),(0,N.R)(this.destroy$)).subscribe(q=>{this.items=this.items.concat(q),this.loadMore$.next(!1),this.cd.markForCheck()},()=>this.loadMore$.next(!1))}notAvailableToLoadMoreItems(q){const se=q.endIndex!==this.items.length-1,Ce=this.loadMore$.value,Pe=!this.sourceHelper.canLoadMore();return se||Ce||Pe||0===this.items.length}loadMore(q){this.notAvailableToLoadMoreItems(q)||(this.loadMore$.next(!0),this.cd.markForCheck())}}return j.\u0275fac=function(q){return new(q||j)(i.Y36(D.B),i.Y36(F.p),i.Y36(J.a),i.Y36(_.z23),i.Y36(i.sBO),i.Y36(H.RJ),i.Y36(_._Wo),i.Y36(v.sK))},j.\u0275cmp=i.Xpm({type:j,selectors:[["app-invite-interlocutors-list"]],viewQuery:function(q,se){if(1&q&&i.Gf(_.Vwb,5),2&q){let Ce;i.iGM(Ce=i.CRH())&&(se.virtualScroller=Ce.first)}},inputs:{searchValue:"searchValue",canAddInterlocutors:"canAddInterlocutors",hidePseudoInterlocutor:"hidePseudoInterlocutor",hasVVoIPSupport:"hasVVoIPSupport",searchContext:"searchContext",extraSelectedInterlocutorIds:"extraSelectedInterlocutorIds",selectedItems:"selectedItems"},outputs:{selectedItemsChanged:"selectedItemsChanged"},decls:10,vars:11,consts:[[1,"layout-column","flex-grow","virtual-scroll-container"],[3,"items","compareItems","vsEnd"],["scroll",""],[4,"ngIf"],[3,"interlocutor","canSelect","isChat","selected","selectedChange",4,"ngFor","ngForOf","ngForTrackBy"],[1,"loader"],["inline","",3,"size",4,"ngIf"],["class","empty",4,"ngIf"],[3,"interlocutor","selected","selectedChange"],[3,"interlocutor","canSelect","isChat","selected","selectedChange"],["inline","",3,"size"],[1,"empty"]],template:function(q,se){if(1&q&&(i.TgZ(0,"div",0)(1,"virtual-scroller",1,2),i.NdJ("vsEnd",function(Pe){return se.loadMore(Pe)}),i.YNc(3,Y,2,2,"ng-container",3),i.ALo(4,"async"),i.YNc(5,ee,1,4,"app-interlocutors-item",4),i.TgZ(6,"div",5),i.YNc(7,X,1,1,"iva-spinner",6),i.qZA(),i.YNc(8,K,8,6,"div",7),i.ALo(9,"async"),i.qZA()()),2&q){const Ce=i.MAs(2);i.xp6(1),i.Q6J("items",se.items)("compareItems",se.compareInterlocutors),i.xp6(2),i.Q6J("ngIf",i.lcZ(4,7,se.pseudoUserCard$)),i.xp6(2),i.Q6J("ngForOf",Ce.viewPortItems)("ngForTrackBy",se.trackById),i.xp6(2),i.Q6J("ngIf",se.loadMore$.value||se.loading),i.xp6(1),i.Q6J("ngIf",0===(null==se.items?null:se.items.length)&&!se.loading&&!se.loadMore$.value&&null===i.lcZ(9,9,se.pseudoUserCard$))}},dependencies:[s.sg,s.O5,_.Vwb,_.ORR,S,s.Ov,v.X$],styles:["[_nghost-%COMP%]   .virtual-scroll-container[_ngcontent-%COMP%]{border-top:1px solid rgba(var(--white-100),var(--transparency-5))}[_nghost-%COMP%]   .virtual-scroll-container[_ngcontent-%COMP%]   virtual-scroller[_ngcontent-%COMP%]{min-height:100%;width:100%}[_nghost-%COMP%]   .loader[_ngcontent-%COMP%]{display:flex;height:35px;justify-content:center;align-items:center}[_nghost-%COMP%]   .empty[_ngcontent-%COMP%]{padding:0 24px}"],changeDetection:0}),j})(),O=(()=>{class j{constructor(){this.remove=new i.vpe}}return j.\u0275fac=function(q){return new(q||j)},j.\u0275cmp=i.Xpm({type:j,selectors:[["app-selected-interlocutor"]],inputs:{interlocutor:"interlocutor"},outputs:{remove:"remove"},decls:7,vars:8,consts:[[1,"container"],["iva-icon-button","","size","s",1,"remove-button",3,"tooltip"],["src","assets/icons/icon16/close.svg",3,"click"],[3,"name","avatarResourceId","size"],[1,"name","break-words",3,"tooltip"]],template:function(q,se){if(1&q&&(i.TgZ(0,"div",0)(1,"button",1),i.ALo(2,"translate"),i.TgZ(3,"svg-icon",2),i.NdJ("click",function(){return se.remove.emit()}),i.qZA()(),i._UZ(4,"app-participant-icon",3),i.TgZ(5,"div",4),i._uU(6),i.qZA()()),2&q){let Ce,Pe,De,Ue;i.xp6(1),i.Q6J("tooltip",i.lcZ(2,6,"DELETE")),i.xp6(3),i.Q6J("name",null==(Ce=se.interlocutor)?null:Ce.name)("avatarResourceId",null==(Pe=se.interlocutor)||null==Pe.profile?null:Pe.profile.avatarResourceId)("size",36),i.xp6(1),i.Q6J("tooltip",null==(De=se.interlocutor)?null:De.name),i.xp6(1),i.hij(" ",null==(Ue=se.interlocutor)?null:Ue.name," ")}},dependencies:[_.bk9,_.r2H,_.i9q,d.U,v.X$],styles:[".container[_ngcontent-%COMP%]{width:64px;height:64px;display:flex;flex-direction:column;justify-content:center;align-items:center;position:relative;cursor:default;padding:4px}.remove-button[_ngcontent-%COMP%]{z-index:1;position:absolute;top:3px;right:3px;width:12px;height:12px}.name[_ngcontent-%COMP%]{width:64px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}"],changeDetection:0}),j})();var U=t(87590);let k=(()=>{class j{}return j.\u0275fac=function(q){return new(q||j)},j.\u0275mod=i.oAB({type:j}),j.\u0275inj=i.cJS({imports:[s.ez,p,_.IR2,_.cVB]}),j})(),te=(()=>{class j{}return j.\u0275fac=function(q){return new(q||j)},j.\u0275mod=i.oAB({type:j}),j.\u0275inj=i.cJS({imports:[h.m,_.IR2]}),j})();var fe=t(75079),de=t(49510);const re="[^()<>@,;]+",ve=new RegExp("^("+H.ZI+`|["\xab]*(${re})\\s\\(${H.ZI}\\)[\xbb"]*|["\xab]*(${re})\\s<${H.ZI}>[\xbb"]*)$`,"i");let $=(()=>{class j{extractEmail(q){const se=q.match(H.dj);if(se)return se[0]}isValidItem(q){return ve.test(q)}extractName(q){const se=q.match(ve);if(se)return se[5]||se[9]}parse(q){const se=[],Ce=[],Pe=q.trim().split(/,|;|\n/).map(De=>De.trim());for(const De of Pe){if(!De)continue;if(!this.isValidItem(De)){se.push(De);continue}const Ue=this.extractEmail(De);if(!Ue){se.push(De);continue}const Dt=this.extractName(De);Ce.push({email:Ue,name:Dt})}return{parsed:Ce,errored:se}}}return j.\u0275fac=function(q){return new(q||j)},j.\u0275prov=i.Yz7({token:j,factory:j.\u0275fac,providedIn:"root"}),j})();var Z=t(76652),B=t(97380);const ie=function(j){return{limit:j}};let G=(()=>{class j{constructor(){this.message=""}get limit(){return C._Z.settings.CONFERENCE_SESSION_ADD_PARTICIPANTS_LIMIT}}return j.\u0275fac=function(q){return new(q||j)},j.\u0275cmp=i.Xpm({type:j,selectors:[["app-limit-warning"]],inputs:{message:"message"},decls:5,vars:7,consts:[[1,"container","layout-row"],["src","assets/icons/icon16/attention.svg",1,"layout","layout-right-margin_8","layout-align-center-center","flex-noshrink",3,"tooltip"],[1,"text","flex-grow"]],template:function(q,se){1&q&&(i.TgZ(0,"div",0),i._UZ(1,"svg-icon",1),i.ALo(2,"translate"),i.TgZ(3,"div",2),i._uU(4),i.qZA()()),2&q&&(i.xp6(1),i.Q6J("tooltip",i.xi3(2,2,"CONFERENCE_SESSION__PARTICIPANTS_LIST__ERRORS__ADD__LIMIT_TOOLTIP",i.VKq(5,ie,se.limit))),i.xp6(3),i.Oqu(se.message))},dependencies:[_.bk9,_.i9q,v.X$],styles:["[_nghost-%COMP%]   .container[_ngcontent-%COMP%]{background-color:rgba(var(--warning-color),var(--transparency-20));padding:8px 24px}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{color:rgb(var(--warning-color))}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   svg-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{fill:rgb(var(--warning-color))}"],changeDetection:0}),j})();const ae=function(j){return{limit:j}};function he(j,le){if(1&j&&(i._UZ(0,"app-limit-warning",11),i.ALo(1,"translate")),2&j){const q=i.oxw();i.Q6J("message",i.xi3(1,1,"CONFERENCE_SESSION__PARTICIPANTS_LIST__ERRORS__ADD__LIMIT_WARNING_2",i.VKq(4,ae,q.invitedUsersLimit)))}}function Se(j,le){if(1&j&&(i.ynx(0),i.TgZ(1,"h3",15),i._uU(2),i.ALo(3,"translate"),i.TgZ(4,"span",16),i._uU(5),i.qZA()(),i.BQk()),2&j){const q=i.oxw().$implicit;i.xp6(2),i.hij(" ",i.lcZ(3,2,q.title)," "),i.xp6(3),i.Oqu(q.count)}}function Oe(j,le){if(1&j){const q=i.EpF();i.TgZ(0,"div",17)(1,"div",18)(2,"iva-editable-text",19),i.NdJ("valueChange",function(Ce){i.CHM(q);const Pe=i.oxw().$implicit,De=i.oxw();return i.KtG(De.applyErrored(Ce,Pe))}),i.qZA()(),i.TgZ(3,"button",20),i.NdJ("click",function(){i.CHM(q);const Ce=i.oxw().$implicit,Pe=i.oxw();return i.KtG(Pe.removeErrored(Ce))}),i.ALo(4,"translate"),i._UZ(5,"svg-icon",21),i.qZA()()}if(2&j){const q=i.oxw().$implicit;i.xp6(2),i.Q6J("wideMode",!0)("value",q),i.xp6(1),i.Q6J("tooltip",i.lcZ(4,3,"DELETE"))}}function Ae(j,le){if(1&j){const q=i.EpF();i.TgZ(0,"div",22)(1,"div",23),i._uU(2),i.qZA(),i.TgZ(3,"button",24),i.NdJ("click",function(){i.CHM(q);const Ce=i.oxw().$implicit,Pe=i.oxw();return i.KtG(Pe.removeParsed(Ce))}),i.ALo(4,"translate"),i._UZ(5,"svg-icon",21),i.qZA()()}if(2&j){const q=i.oxw().$implicit;i.xp6(2),i.AsE("",q.name," <",q.email,">"),i.xp6(1),i.Q6J("tooltip",i.lcZ(4,3,"DELETE"))}}function Me(j,le){if(1&j&&(i.ynx(0),i.YNc(1,Se,6,4,"ng-container",12),i.YNc(2,Oe,6,5,"div",13),i.YNc(3,Ae,6,5,"div",14),i.BQk()),2&j){const q=le.$implicit,se=i.oxw();i.xp6(1),i.Q6J("ngIf",se.isHeader(q)&&q.count),i.xp6(1),i.Q6J("ngIf",se.isErrored(q)),i.xp6(1),i.Q6J("ngIf",se.isParsed(q))}}let Te=(()=>{class j{set parseResult(q){this._parseResult=q,this.updateItems()}get parseResult(){return this._parseResult}get limit(){return C._Z.settings.CONFERENCE_SESSION_ADD_PARTICIPANTS_LIMIT}get invitedUsersLimit(){return this.limit-this.alreadyAdded}get alreadyAdded(){return this.inEditSessionInvitedCount||0}get restCount(){return this.limit-this.alreadyAdded-(this.parseResult?.parsed.length||0)}get isLimitWarningShown(){return this.restCount<=0}constructor(q){this.interlocutorsImportService=q,this.rawText="",this.items=[],this.inEditSessionInvitedCount=0,this.parseResultChange=new i.vpe}isErrored(q){return"string"==typeof q}isHeader(q){return void 0!==q.count}isParsed(q){return void 0!==q.email}updateItems(){this.items=this.parseResult?[{title:"CONFERENCE_SESSION.IMPORT_USER_TO_CONFERENCE.MISTAKES",count:this.parseResult.errored.length},...this.parseResult.errored,{title:"CONFERENCE_SESSION.IMPORT_USER_TO_CONFERENCE.CORRECT",count:this.parseResult.parsed.length},...this.parseResult.parsed]:[]}parseAndAdd(){if(!this.parseResult)return;const q=this.interlocutorsImportService.parse(this.rawText);this.parseResult.parsed.push(...q.parsed),this.parseResult.errored.push(...q.errored),this.rawText="",this.updateItems(),this.parseResultChange.emit(this.parseResult)}applyErrored(q,se){if(!this.parseResult)return;this.parseResult.errored=(0,B.Z)(this.parseResult.errored,se);const Ce=this.interlocutorsImportService.parse(q);this.parseResult.parsed.push(...Ce.parsed),this.parseResult.errored.push(...Ce.errored),this.parseResult.errored=(0,fe.Z)(this.parseResult.errored),this.parseResult.parsed=(0,de.Z)(this.parseResult.parsed,Pe=>Pe.email),this.updateItems(),this.parseResultChange.emit(this.parseResult)}removeErrored(q){this.parseResult&&(this.parseResult.errored=this.parseResult.errored.filter(se=>se!==q),this.updateItems(),this.parseResultChange.emit(this.parseResult))}removeParsed(q){this.parseResult&&(this.parseResult.parsed=this.parseResult.parsed.filter(se=>se!==q),this.updateItems(),this.parseResultChange.emit(this.parseResult))}}return j.\u0275fac=function(q){return new(q||j)(i.Y36($))},j.\u0275cmp=i.Xpm({type:j,selectors:[["app-multiple-add"]],inputs:{parseResult:"parseResult",inEditSessionInvitedCount:"inEditSessionInvitedCount"},outputs:{parseResultChange:"parseResultChange"},decls:13,vars:12,consts:[[1,"layout-column","layout-fill"],[1,"input-icon-right","layout-margin_24"],["ivaInput","",3,"placeholder","ngModel","ngModelChange","keydown.enter"],[1,"icon","layout-align-center-center"],["iva-round-button","","size","s",3,"tooltip","disabled","click"],["src","assets/icons/icon16/arrow-right.svg"],["class","layout-bottom-margin_24 flex-noshrink",3,"message",4,"ngIf"],[1,"layout-column","layout-left-margin_16","layout-right-margin_16","layout-bottom-margin_16","flex-grow"],[3,"items","enableUnequalChildrenSizes"],["scroller",""],[4,"ngFor","ngForOf"],[1,"layout-bottom-margin_24","flex-noshrink",3,"message"],[4,"ngIf"],["class","layout-row errored-item",4,"ngIf"],["class","layout-row correct-item",4,"ngIf"],[1,"layout-bottom-margin_16"],[1,"layout-left-margin_12"],[1,"layout-row","errored-item"],[1,"layout","flex-grow"],["dropdownContainerClass","app-multiple-add__dropdown_container",3,"wideMode","value","valueChange"],["iva-icon-button","",3,"tooltip","click"],["src","assets/icons/icon16/trash.svg"],[1,"layout-row","correct-item"],[1,"flex-grow","ellipsis"],["iva-icon-button","",1,"layout-left-margin_8","flex-noshrink",3,"tooltip","click"]],template:function(q,se){if(1&q&&(i.TgZ(0,"div",0)(1,"div",1)(2,"input",2),i.NdJ("ngModelChange",function(Pe){return se.rawText=Pe})("keydown.enter",function(){return se.rawText&&se.parseAndAdd()}),i.ALo(3,"translate"),i.qZA(),i.TgZ(4,"div",3)(5,"button",4),i.NdJ("click",function(){return se.parseAndAdd()}),i.ALo(6,"translate"),i._UZ(7,"svg-icon",5),i.qZA()()(),i.YNc(8,he,2,6,"app-limit-warning",6),i.TgZ(9,"div",7)(10,"virtual-scroller",8,9),i.YNc(12,Me,4,3,"ng-container",10),i.qZA()()()),2&q){const Ce=i.MAs(11);i.xp6(2),i.Q6J("placeholder",i.lcZ(3,8,"CONFERENCE_SESSION.IMPORT_USER_TO_CONFERENCE.SUBHEADER"))("ngModel",se.rawText),i.xp6(3),i.Q6J("tooltip",i.lcZ(6,10,"ADD"))("disabled",!se.rawText),i.xp6(3),i.Q6J("ngIf",se.isLimitWarningShown),i.xp6(2),i.Q6J("items",se.items)("enableUnequalChildrenSizes",!0),i.xp6(2),i.Q6J("ngForOf",Ce.viewPortItems)}},dependencies:[s.sg,s.O5,Z.Fj,Z.JJ,Z.On,_.bk9,_.Vwb,_.r2H,_.xeS,_.Vdl,_.i9q,G,v.X$],styles:["app-multiple-add{max-height:100%}app-multiple-add .correct-item{padding:12px 24px}app-multiple-add .correct-item button{display:none}app-multiple-add .correct-item:hover{background-color:rgb(var(--neutral-color-4))}app-multiple-add .correct-item:hover button{display:block}app-multiple-add iva-editable-text .editable-text-container{padding:12px 8px 12px 24px}app-multiple-add .errored-item{padding-right:12px}app-multiple-add .errored-item button{display:none}app-multiple-add .errored-item:hover{background-color:rgba(var(--error-color),var(--transparency-10))}app-multiple-add .errored-item:hover button{display:block}app-multiple-add virtual-scroller{height:100%;width:100%}.app-multiple-add__dropdown_container{margin:12px 8px 12px 24px}\n"],encapsulation:2}),j})();const Re=function(j){return{limit:j}};function xe(j,le){if(1&j){const q=i.EpF();i.TgZ(0,"div",14)(1,"textarea",15),i.NdJ("ngModelChange",function(Ce){i.CHM(q);const Pe=i.oxw();return i.KtG(Pe.rawText=Ce)}),i.ALo(2,"translate"),i.qZA(),i.TgZ(3,"button",16),i.NdJ("click",function(){i.CHM(q);const Ce=i.oxw();return i.KtG(Ce.parse())}),i.ALo(4,"translate"),i._UZ(5,"svg-icon",17),i.qZA()()}if(2&j){const q=i.oxw();i.xp6(1),i.Q6J("placeholder",i.xi3(2,4,"CONFERENCE_SESSION.IMPORT_USER_TO_CONFERENCE.PLACEHOLDER",i.VKq(9,Re,q.addParticipantsLimit)))("ngModel",q.rawText),i.xp6(2),i.Q6J("disabled",!q.rawText)("tooltip",i.lcZ(4,7,"ADD"))}}function Le(j,le){if(1&j){const q=i.EpF();i.TgZ(0,"app-multiple-add",18),i.NdJ("parseResultChange",function(Ce){i.CHM(q);const Pe=i.oxw();return i.KtG(Pe.onParseResultChange(Ce))}),i.qZA()}if(2&j){const q=i.oxw();i.Q6J("parseResult",q.parseResult)("inEditSessionInvitedCount",q.inputData.inEditSessionInvitedCount||0)}}let ye=(()=>{class j{get addParticipantsLimit(){return C._Z.settings.CONFERENCE_SESSION_ADD_PARTICIPANTS_LIMIT}constructor(q){this.interlocutorsImportService=q,this.wasParsed=!1,this.interlocutors=[],this.rawText="",this.goToPane=new i.vpe,this.closed=new i.vpe,this.apply=new i.vpe}doApply(){this.apply.emit(this.interlocutors)}doClose(){this.closed.emit()}goBack(){this.goToPane.emit(U.X.ADD_BY_SINGLE)}parse(){this.wasParsed=!0,this.parseResult=this.interlocutorsImportService.parse(this.rawText),this.parseResult.errored=(0,fe.Z)(this.parseResult.errored),this.parseResult.parsed=(0,de.Z)(this.parseResult.parsed,q=>q.email),this.onParseResultChange(this.parseResult)}onParseResultChange(q){this.interlocutors=q.parsed.map((se,Ce)=>({name:se.name||se.email,email:se.email,pseudo:!0,id:`${se.name}_${se.email}_${Ce}`,invitedToContext:!1,interlocutorType:c.x.GUEST_USER}))}}return j.\u0275fac=function(q){return new(q||j)(i.Y36($))},j.\u0275cmp=i.Xpm({type:j,selectors:[["app-add-by-multiple-pane"]],inputs:{inputData:"inputData"},outputs:{goToPane:"goToPane",closed:"closed",apply:"apply"},decls:27,vars:25,consts:[[1,"layout-column","flex-grow"],["iva-icon-button","",3,"tooltip","click"],["src","assets/icons/icon16/arrow-left.svg"],[1,"title","layout-left-margin_16"],["iva-icon-button","",3,"click"],["src","assets/icons/icon24/close.svg"],[1,"layout","layout-column","flex-grow"],[1,"layout-row","layout-margin_24","flex-noshrink"],["src","assets/icons/icon16/info-stroke.svg",1,"info-icon","layout-left-margin_16",3,"tooltip","tooltipIsHTML"],["class","layout-left-margin_24 layout-right-margin_24 layout-bottom-margin_24 flex-grow relative",4,"ngIf"],["class","flex-grow",3,"parseResult","inEditSessionInvitedCount","parseResultChange",4,"ngIf"],[1,"flex"],["iva-button","","color","secondary",1,"layout-align-center","layout-right-margin_8","layout-align-center-center",3,"click"],["iva-button","",1,"layout-align-center","layout-align-center-center",3,"disabled","click"],[1,"layout-left-margin_24","layout-right-margin_24","layout-bottom-margin_24","flex-grow","relative"],["ivaInput","",1,"flex-grow",3,"placeholder","ngModel","ngModelChange"],["iva-round-button","","size","l",1,"parse-button",3,"disabled","tooltip","click"],["src","assets/icons/icon24/arrow-right.svg"],[1,"flex-grow",3,"parseResult","inEditSessionInvitedCount","parseResultChange"]],template:function(q,se){1&q&&(i.TgZ(0,"div",0)(1,"header")(2,"button",1),i.NdJ("click",function(){return se.goBack()}),i.ALo(3,"translate"),i._UZ(4,"svg-icon",2),i.qZA(),i.TgZ(5,"div",3)(6,"h2"),i._uU(7),i.ALo(8,"translate"),i.qZA()(),i.TgZ(9,"button",4),i.NdJ("click",function(){return se.doClose()}),i._UZ(10,"svg-icon",5),i.qZA()(),i.TgZ(11,"div",6)(12,"div",7)(13,"div"),i._uU(14),i.ALo(15,"translate"),i.qZA(),i._UZ(16,"svg-icon",8),i.ALo(17,"translate"),i.qZA(),i.YNc(18,xe,6,11,"div",9),i.YNc(19,Le,1,2,"app-multiple-add",10),i.qZA(),i.TgZ(20,"footer",11)(21,"button",12),i.NdJ("click",function(){return se.doClose()}),i._uU(22),i.ALo(23,"translate"),i.qZA(),i.TgZ(24,"button",13),i.NdJ("click",function(){return se.doApply()}),i._uU(25),i.ALo(26,"translate"),i.qZA()()()),2&q&&(i.xp6(2),i.Q6J("tooltip",i.lcZ(3,10,"CONFERENCE_SESSION.IMPORT_USER_TO_CONFERENCE.BACK")),i.xp6(5),i.Oqu(i.lcZ(8,12,"CONFERENCE_SESSION.IMPORT_USER_TO_CONFERENCE.HEADER")),i.xp6(7),i.Oqu(i.lcZ(15,14,"CONFERENCE_SESSION.IMPORT_USER_TO_CONFERENCE.SUBHEADER")),i.xp6(2),i.Q6J("tooltip",i.xi3(17,16,"CONFERENCE_SESSION.IMPORT_USER_TO_CONFERENCE.INFO_TITLE",i.VKq(23,Re,se.addParticipantsLimit)))("tooltipIsHTML",!0),i.xp6(2),i.Q6J("ngIf",!se.wasParsed),i.xp6(1),i.Q6J("ngIf",se.wasParsed),i.xp6(3),i.hij(" ",i.lcZ(23,19,"CANCEL")," "),i.xp6(2),i.Q6J("disabled",!se.interlocutors.length),i.xp6(1),i.hij(" ",i.lcZ(26,21,"ADD")," "))},dependencies:[s.O5,Z.Fj,Z.JJ,Z.On,_.bk9,_.r0F,_.r2H,_.Vdl,_.i9q,Te,v.X$],styles:["[_nghost-%COMP%]   .info-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{fill:rgb(var(--neutral-color-6))}[_nghost-%COMP%]   textarea[_ngcontent-%COMP%]{max-height:unset}[_nghost-%COMP%]   .parse-button[_ngcontent-%COMP%]{position:absolute;bottom:16px;right:16px}"],changeDetection:0}),j})();var Ee=t(54490);function me(j,le){if(1&j){const q=i.EpF();i.TgZ(0,"div",3)(1,"a",4),i.NdJ("click",function(){i.CHM(q);const Ce=i.oxw();return i.KtG(Ce.goToImport.emit())}),i._uU(2),i.ALo(3,"translate"),i.qZA()()}2&j&&(i.xp6(2),i.Oqu(i.lcZ(3,1,"IMPORT")))}let ue=(()=>{class j{constructor(){this.searchValue="",this.showImport=!0,this.searchValueChange=new i.vpe,this.goToImport=new i.vpe}}return j.\u0275fac=function(q){return new(q||j)},j.\u0275cmp=i.Xpm({type:j,selectors:[["app-interlocutors-search"]],inputs:{searchValue:"searchValue",showImport:"showImport"},outputs:{searchValueChange:"searchValueChange",goToImport:"goToImport"},decls:4,vars:6,consts:[[1,"layout-row","search-container"],["searchSize","m",1,"flex-grow",3,"autofocus","placeholder","searchValue","searchValueChange"],["class","layout layout-align-center-center layout-left-margin_16 flex-noshrink",4,"ngIf"],[1,"layout","layout-align-center-center","layout-left-margin_16","flex-noshrink"],[1,"pseudo-link",3,"click"]],template:function(q,se){1&q&&(i.TgZ(0,"div",0)(1,"app-search",1),i.NdJ("searchValueChange",function(Pe){return se.searchValueChange.emit(Pe)}),i.ALo(2,"translate"),i.qZA(),i.YNc(3,me,4,3,"div",2),i.qZA()),2&q&&(i.xp6(1),i.Q6J("autofocus",!0)("placeholder",i.lcZ(2,4,"CONFERENCE_SESSION.INVITE_USER_TO_CONFERENCE.INPUT_PLACEHOLDER"))("searchValue",se.searchValue),i.xp6(2),i.Q6J("ngIf",se.showImport))},dependencies:[s.O5,_.hTy,Ee.g,v.X$],styles:["[_nghost-%COMP%]   .search-container[_ngcontent-%COMP%]{margin:16px 24px}"],changeDetection:0}),j})();function Ie(j,le){if(1&j&&i._UZ(0,"app-limit-warning",14),2&j){const q=i.oxw();i.Q6J("message",q.limitWarningText)}}function Ne(j,le){if(1&j){const q=i.EpF();i.TgZ(0,"app-selected-interlocutor",15),i.NdJ("remove",function(){const Pe=i.CHM(q).$implicit,De=i.oxw();return i.KtG(De.removeSelected(Pe))}),i.qZA()}2&j&&i.Q6J("interlocutor",le.$implicit)}const Ve=function(j){return{count:j}};function je(j,le){if(1&j&&(i.TgZ(0,"div",16),i._uU(1),i.ALo(2,"translate"),i.qZA()),2&j){const q=i.oxw();i.xp6(1),i.hij(" ",i.xi3(2,1,"CONFERENCE_SESSION.INVITE_USER_TO_CONFERENCE.SELECTED_USERS",i.VKq(4,Ve,q.selectedItems.length))," ")}}let ze=(()=>{class j{constructor(q){this.translate=q,this.selectedItems=[],this.goToPane=new i.vpe,this.closed=new i.vpe,this.apply=new i.vpe,this.searchValue="",this.trackById=(se,Ce)=>Ce.id}get limitWarningText(){return this.inputData.isChat?this.translate.instant("CHATS.GROUP_CHAT_LIMIT_WARNING",{count:this.limit}):this.translate.instant("CONFERENCE_SESSION__PARTICIPANTS_LIST__ERRORS__ADD__LIMIT_WARNING",{count:this.restCount})}get restCount(){return this.limit-(this.inputData.isChat?this.inputData.extraSelectedInterlocutorIds?.length||0:this.inputData.inEditSessionInvitedCount||0)-this.selectedItems.length}get isLimitWarningShown(){return!!this.inputData.isChat||this.restCount<=C._Z.settings.CONFERENCE_SESSION_ADD_PARTICIPANTS_LIMIT_WARNING}get isLimitExcited(){return this.restCount<=0}get extraSelectedInterlocutorIds(){return this.inputData.extraSelectedInterlocutorIds}get hasVVoIPSupport(){return this.inputData.hasVVoIPSupport}get searchContext(){return this.inputData.searchContext}get limit(){return this.inputData.isChat?C._Z.settings.CHAT_PARTICIPANTS_LIMIT:C._Z.settings.CONFERENCE_SESSION_ADD_PARTICIPANTS_LIMIT}removeSelected(q){this.selectedItems=this.selectedItems.filter(se=>se.id!==q.id)}doApply(){this.apply.emit(this.selectedItems)}doClose(){this.closed.emit()}goToImport(){this.goToPane.emit(U.X.ADD_BY_MULTIPLE)}}return j.\u0275fac=function(q){return new(q||j)(i.Y36(v.sK))},j.\u0275cmp=i.Xpm({type:j,selectors:[["app-add-by-single-pane"]],inputs:{inputData:"inputData"},outputs:{goToPane:"goToPane",closed:"closed",apply:"apply"},decls:23,vars:27,consts:[[1,"layout-column","flex-grow"],[1,"title"],["iva-icon-button","",3,"tooltip","click"],["src","assets/icons/icon24/close.svg"],[1,"layout","layout-column","flex-grow"],[1,"flex-noshrink",3,"showImport","searchValue","searchValueChange","goToImport"],["class","flex-noshrink",3,"message",4,"ngIf"],[1,"layout","flex-grow",3,"searchValue","canAddInterlocutors","hasVVoIPSupport","hidePseudoInterlocutor","extraSelectedInterlocutorIds","searchContext","selectedItems","selectedItemsChanged"],["vertical-to-horizontal-scroll","",1,"selected","layout-left-padding_24","layout-right-padding_24",3,"hidden"],["class","layout-right-margin_8",3,"interlocutor","remove",4,"ngFor","ngForOf","ngForTrackBy"],[1,"flex"],["class","selected-text",4,"ngIf"],["iva-button","","color","secondary",1,"layout-align-center","layout-right-margin_8","layout-align-center-center",3,"click"],["iva-button","",1,"layout-align-center","layout-align-center-center",3,"disabled","click"],[1,"flex-noshrink",3,"message"],[1,"layout-right-margin_8",3,"interlocutor","remove"],[1,"selected-text"]],template:function(q,se){1&q&&(i.TgZ(0,"div",0)(1,"header")(2,"div",1)(3,"h2"),i._uU(4),i.ALo(5,"translate"),i.qZA()(),i.TgZ(6,"button",2),i.NdJ("click",function(){return se.doClose()}),i.ALo(7,"translate"),i._UZ(8,"svg-icon",3),i.qZA()(),i.TgZ(9,"div",4)(10,"app-interlocutors-search",5),i.NdJ("searchValueChange",function(Pe){return se.searchValue=Pe})("goToImport",function(){return se.goToImport()}),i.qZA(),i.YNc(11,Ie,1,1,"app-limit-warning",6),i.TgZ(12,"app-invite-interlocutors-list",7),i.NdJ("selectedItemsChanged",function(Pe){return se.selectedItems=Pe}),i.qZA(),i.TgZ(13,"div",8),i.YNc(14,Ne,1,1,"app-selected-interlocutor",9),i.qZA()(),i.TgZ(15,"footer",10),i.YNc(16,je,3,6,"div",11),i.TgZ(17,"button",12),i.NdJ("click",function(){return se.doClose()}),i._uU(18),i.ALo(19,"translate"),i.qZA(),i.TgZ(20,"button",13),i.NdJ("click",function(){return se.doApply()}),i._uU(21),i.ALo(22,"translate"),i.qZA()()()),2&q&&(i.xp6(4),i.Oqu(i.lcZ(5,19,"CONFERENCE_SESSION.INVITE_USER_TO_CONFERENCE.TITLE")),i.xp6(2),i.Q6J("tooltip",i.lcZ(7,21,"CLOSE")),i.xp6(4),i.Q6J("showImport",!se.inputData.hideImport)("searchValue",se.searchValue),i.xp6(1),i.Q6J("ngIf",se.isLimitWarningShown),i.xp6(1),i.Q6J("searchValue",se.searchValue)("canAddInterlocutors",!se.isLimitExcited)("hasVVoIPSupport",se.hasVVoIPSupport)("hidePseudoInterlocutor",!!se.inputData.isChat)("extraSelectedInterlocutorIds",se.extraSelectedInterlocutorIds)("searchContext",se.searchContext)("selectedItems",se.selectedItems),i.xp6(1),i.Q6J("hidden",!se.selectedItems.length),i.xp6(1),i.Q6J("ngForOf",se.selectedItems)("ngForTrackBy",se.trackById),i.xp6(2),i.Q6J("ngIf",se.selectedItems.length),i.xp6(2),i.hij(" ",i.lcZ(19,23,"CANCEL")," "),i.xp6(2),i.Q6J("disabled",!se.selectedItems.length),i.xp6(1),i.hij(" ",i.lcZ(22,25,"ADD")," "))},dependencies:[s.sg,s.O5,_.bk9,_.r0F,_.r2H,_.i9q,_.Sdq,oe,G,O,ue,v.X$],styles:["[_nghost-%COMP%]   app-interlocutors-item[_ngcontent-%COMP%]{display:block;width:100%;height:51px}[_nghost-%COMP%]   .selected[_ngcontent-%COMP%]{display:flex;align-items:center;overflow-x:auto;max-height:80px;height:80px;min-height:80px;box-shadow:var(--box-shadow-m);z-index:1;clip-path:polygon(-100% -100%,100% -100%,100% 100%,0 100%)}[_nghost-%COMP%]   .selected-text[_ngcontent-%COMP%]{align-self:flex-start;display:flex;flex:1;align-items:center;height:100%;color:rgb(var(--font-gray-1-color))}[_nghost-%COMP%]   footer[_ngcontent-%COMP%]{flex:0 0 83px}"],changeDetection:0}),j})(),we=(()=>{class j{}return j.\u0275fac=function(q){return new(q||j)},j.\u0275mod=i.oAB({type:j}),j.\u0275inj=i.cJS({imports:[h.m,_.IR2,te,k]}),j})();i.B6R(U.M,[s.RF,s.n9,s.ED,ye,ze],[]),t(48160),t(28112),t(81181),t(28915),t(50940),t(21088);let ke=(()=>{class j{}return j.\u0275fac=function(q){return new(q||j)},j.\u0275mod=i.oAB({type:j}),j.\u0275inj=i.cJS({}),j})();t(43724),t(72525),t(1656),t(69416),t(92290),t(89993),t(75713);let We=(()=>{class j{}return j.\u0275fac=function(q){return new(q||j)},j.\u0275mod=i.oAB({type:j}),j.\u0275inj=i.cJS({imports:[h.m,_.IR2]}),j})();var rt=t(14751),tt=(t(98384),t(34533),t(12965),t(42277),t(32902),t(51192),t(84741),t(82518),t(25642),t(13263),t(48258),t(33677),t(27305),t(46679),t(93336),t(34435)),Mt=(t(23266),t(356),t(99141),t(38961),t(25529)),At=t(23636),lt=t(72564);t(35722),t(60570),t(63295),t(11381),t(3785),t(14788);const pe=[p,We,rt.L,_.tDS,we,k,te,_.vO,tt.f,ke,f,Mt.g,At.Y,lt.h];let ge=(()=>{class j{}return j.\u0275fac=function(q){return new(q||j)},j.\u0275mod=i.oAB({type:j}),j.\u0275inj=i.cJS({imports:[h.m,_.IR2,pe,p,We,rt.L,_.tDS,we,k,te,_.vO,tt.f,ke,f]}),j})()},33677:(z,R,t)=>{t.d(R,{O:()=>f});var e=t(54355),s=t(40089),h=t(27305),_=t(6190);function i(r,p){if(1&r&&(e._UZ(0,"app-statistics-item",2),e.ALo(1,"translate")),2&r){const u=p.$implicit;e.Q6J("value",u.value)("text",e.lcZ(1,2,u.title))}}let f=(()=>{class r{}return r.\u0275fac=function(u){return new(u||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-statistics-common-info"]],inputs:{infoItems:"infoItems"},decls:2,vars:1,consts:[[1,"common-info-container"],[3,"value","text",4,"ngFor","ngForOf"],[3,"value","text"]],template:function(u,a){1&u&&(e.TgZ(0,"div",0),e.YNc(1,i,2,4,"app-statistics-item",1),e.qZA()),2&u&&(e.xp6(1),e.Q6J("ngForOf",a.infoItems))},dependencies:[s.sg,h.e,_.X$],styles:["app-statistics-common-info button.options>.iva-button_icon>svg-icon:not(.fake) svg *{fill:rgb(var(--primary-color))}app-statistics-common-info button.options>.iva-button_icon>svg-icon:not(.fake):hover svg *{fill:rgb(var(--primary-hover-color))}app-statistics-common-info button.options>.iva-button_icon>svg-icon:not(.fake):active svg *{fill:rgb(var(--primary-click-color))}app-statistics-common-info .common-info-container{display:flex;flex-wrap:wrap}app-statistics-common-info .common-info-container app-statistics-item{width:320px;margin-bottom:24px;margin-right:14px}\n"],encapsulation:2,changeDetection:0}),r})()},27305:(z,R,t)=>{t.d(R,{e:()=>s});var e=t(54355);let s=(()=>{class h{constructor(){this.value="0",this.text=""}}return h.\u0275fac=function(i){return new(i||h)},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-statistics-item"]],inputs:{value:"value",text:"text"},decls:5,vars:2,consts:[[1,"layout-row"],[1,"value"],[1,"text"]],template:function(i,f){1&i&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2),e._uU(4),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(f.value),e.xp6(2),e.Oqu(f.text))},styles:["[_nghost-%COMP%]{display:flex}[_nghost-%COMP%]   .value[_ngcontent-%COMP%]{font-size:33px;font-weight:400;line-height:1.33;letter-spacing:-.5px;color:rgb(var(--primary-color));margin-right:8px}[_nghost-%COMP%]   .text[_ngcontent-%COMP%]{font-size:12px;line-height:1.33;letter-spacing:normal;font-weight:400;color:rgb(var(--font-gray-1-color));display:flex;align-items:center}"],changeDetection:0}),h})()},46679:(z,R,t)=>{t.d(R,{d:()=>_});var e=t(911),s=t(54355);const h=["*"];let _=(()=>{class i extends e.bk9{constructor(r,p,u,a,o){super(r,p,u,a,o),this.ownRenderer=u,this.src="",this.iconSize=16}ngOnInit(){super.ngOnInit(),this.icon&&this.createSvg()}ngOnChanges(r){r.icon&&this.createSvg()}createSvg(){const r=this.elementRef.nativeElement;r.innerHTML="";const p=this.ownRenderer.createElement("svg","svg"),u=this.ownRenderer.createElement("use","svg");this.ownRenderer.setAttribute(u,"href",`assets/icons/pack/${this.iconPack}.svg#${this.icon}`,"xlink"),this.ownRenderer.appendChild(p,u),this.ownRenderer.appendChild(r,p),this.copyNgContentAttribute(r,p)}}return i.\u0275fac=function(r){return new(r||i)(s.Y36(s.SBq),s.Y36(s.aQg),s.Y36(s.Qsj),s.Y36(e.M6P),s.Y36(s.sBO))},i.\u0275cmp=s.Xpm({type:i,selectors:[["iva-svg-icon"]],hostVars:4,hostBindings:function(r,p){2&r&&s.Udp("width",p.iconSize,"px")("height",p.iconSize,"px")},inputs:{src:"src",icon:"icon",iconPack:"iconPack",iconSize:"iconSize"},features:[s.qOj,s.TTD],ngContentSelectors:h,decls:1,vars:0,template:function(r,p){1&r&&(s.F$t(),s.Hsn(0))},styles:["[_nghost-%COMP%]{display:flex}[_nghost-%COMP%]   svg[_ngcontent-%COMP%]{max-width:100%;max-height:100%}"],changeDetection:0}),i})()},93336:(z,R,t)=>{t.d(R,{o:()=>u});var e=t(5469),s=t(26215),h=t(54355),_=t(911),i=t(40089),f=t(6190);const r=["class","modal"],p=function(a){return{version:a}};let u=(()=>{class a{constructor(l){this.modalRef=l,this.secondsToApply$=new s.X(e._Z.settings.TIME_TO_APPLY_NEW_VERSION_S),this.version=this.modalRef.data,this.intervalId=null}ngOnInit(){this.intervalId=window.setInterval(()=>{0!==this.secondsToApply$.value?this.secondsToApply$.next(this.secondsToApply$.value-1):this.apply()},e._Z.settings.MS_IN_SECOND)}ngOnDestroy(){null!==this.intervalId&&clearInterval(this.intervalId)}apply(){location.reload(),this.close()}close(){this.modalRef.close()}}return a.\u0275fac=function(l){return new(l||a)(h.Y36(_.aiK))},a.\u0275cmp=h.Xpm({type:a,selectors:[["app-version",8,"modal"]],attrs:r,decls:18,vars:18,consts:[[1,"modal-card"],[1,"title"],["iva-icon-button","",3,"click"],["src","assets/icons/icon24/close.svg"],[1,"layout","layout-column","flex"],["iva-button","",1,"layout-right-margin_16",3,"click"],["iva-button","","color","secondary",3,"click"]],template:function(l,c){1&l&&(h.TgZ(0,"div",0)(1,"header")(2,"div",1),h._uU(3),h.ALo(4,"translate"),h.qZA(),h.TgZ(5,"button",2),h.NdJ("click",function(){return c.close()}),h._UZ(6,"svg-icon",3),h.qZA()(),h.TgZ(7,"section",4),h._uU(8),h.ALo(9,"translate"),h.qZA(),h.TgZ(10,"footer")(11,"button",5),h.NdJ("click",function(){return c.apply()}),h._uU(12),h.ALo(13,"translate"),h.ALo(14,"async"),h.qZA(),h.TgZ(15,"button",6),h.NdJ("click",function(){return c.close()}),h._uU(16),h.ALo(17,"translate"),h.qZA()()()),2&l&&(h.xp6(3),h.Oqu(h.lcZ(4,5,"NEW_VERSION")),h.xp6(5),h.hij(" ",h.xi3(9,7,"NEW_VERSION_AVAILABLE",h.VKq(16,p,c.version))," "),h.xp6(4),h.AsE(" ",h.lcZ(13,10,"APPLY")," (",h.lcZ(14,12,c.secondsToApply$),") "),h.xp6(4),h.hij(" ",h.lcZ(17,14,"CANCEL")," "))},dependencies:[_.bk9,_.r0F,_.r2H,i.Ov,f.X$],styles:[".modal-card[_ngcontent-%COMP%]{width:600px;max-width:600px}section[_ngcontent-%COMP%]{text-align:justify}"],changeDetection:0}),a})()},34435:(z,R,t)=>{t.d(R,{f:()=>i});var e=t(1732),s=t(911),h=t(61860),_=t(54355);let i=(()=>{class f{}return f.\u0275fac=function(p){return new(p||f)},f.\u0275mod=_.oAB({type:f}),f.\u0275inj=_.cJS({imports:[h.m,s.IR2,s.CpV,e.L]}),f})()},43724:(z,R,t)=>{t.d(R,{W:()=>r,u:()=>f});var e=t(54355),s=t(911),h=t(75261),_=t(76652),i=t(6190);const f="NEW_INTERFACE_HIDE_TIPS";let r=(()=>{class p{get data(){return this.modalRef.data}get infoIcon(){return`assets/icons/unsized/welcome-modal-${this.data.svg}.svg`}constructor(a,o){this.modalRef=a,this.cookieService=o,this.form={dontShawAgain:!1}}close(){this.modalRef.close()}apply(){this.cookieService.set(f,this.form.dontShawAgain?"true":"false",365,"/"),this.close()}onTipClick(){this.close(),this.data.onTipClick()}}return p.\u0275fac=function(a){return new(a||p)(e.Y36(s.aiK),e.Y36(h.N))},p.\u0275cmp=e.Xpm({type:p,selectors:[["app-welcome-modal"]],decls:27,vars:20,consts:[[1,"modal-card"],[1,"title"],["e2e-id","shared-core.welcome-modal.title"],["iva-icon-button","",3,"click"],["src","assets/icons/icon24/close.svg"],[1,"main-section"],[1,"message"],[1,"picture"],[1,"layout-bottom-margin_32",3,"src"],[1,"tip"],["e2e-id","shared-core.welcome-modal.tip-link",3,"click"],["e2e-id","shared-core.welcome-modal.dont-show-again-checkbox",3,"ngModel","ngModelChange"],["iva-button","","e2e-id","shared-core.welcome-modal.ok-btn",3,"click"]],template:function(a,o){1&a&&(e.TgZ(0,"div",0)(1,"header")(2,"div",1)(3,"h2",2),e._uU(4),e.ALo(5,"translate"),e.qZA()(),e.TgZ(6,"button",3),e.NdJ("click",function(){return o.close()}),e._UZ(7,"svg-icon",4),e.qZA()(),e.TgZ(8,"section",5)(9,"div",6),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"div",7),e._UZ(13,"svg-icon",8),e.qZA(),e.TgZ(14,"div",9),e._uU(15),e.ALo(16,"translate"),e.TgZ(17,"a",10),e.NdJ("click",function(){return o.onTipClick()}),e._uU(18),e.ALo(19,"translate"),e.qZA()()(),e.TgZ(20,"footer")(21,"iva-checkbox",11),e.NdJ("ngModelChange",function(c){return o.form.dontShawAgain=c}),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"button",12),e.NdJ("click",function(){return o.apply()}),e._uU(25),e.ALo(26,"translate"),e.qZA()()()),2&a&&(e.xp6(4),e.Oqu(e.lcZ(5,8,o.data.title)),e.xp6(6),e.hij(" ",e.lcZ(11,10,"WELCOME_MESSAGE__MODAL__CONTENT")," "),e.xp6(3),e.Q6J("src",o.infoIcon),e.xp6(2),e.hij(" ",e.lcZ(16,12,o.data.tip)," "),e.xp6(3),e.Oqu(e.lcZ(19,14,o.data.tipLinkName)),e.xp6(3),e.Q6J("ngModel",o.form.dontShawAgain),e.xp6(1),e.hij(" ",e.lcZ(23,16,"WELCOME__MODAL__DONT_SHOW_AGAIN")," "),e.xp6(3),e.Oqu(e.lcZ(26,18,"OK")))},dependencies:[_.JJ,_.On,s.bk9,s.r0F,s.r2H,s.bK4,i.X$],styles:["[_nghost-%COMP%]   .modal-card[_ngcontent-%COMP%]{min-width:650px;width:650px;max-width:650px}[_nghost-%COMP%]   .modal-card[_ngcontent-%COMP%]   header[_ngcontent-%COMP%], [_nghost-%COMP%]   .modal-card[_ngcontent-%COMP%]   section[_ngcontent-%COMP%], [_nghost-%COMP%]   .modal-card[_ngcontent-%COMP%]   footer[_ngcontent-%COMP%]{border:none}[_nghost-%COMP%]   .modal-card[_ngcontent-%COMP%]   footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}[_nghost-%COMP%]   .modal-card[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{white-space:normal}[_nghost-%COMP%]   .modal-card[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;overflow:hidden}[_nghost-%COMP%]   section[_ngcontent-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   section.main-section[_ngcontent-%COMP%]{padding-top:0;padding-bottom:0}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]{text-align:justify}[_nghost-%COMP%]   .picture[_ngcontent-%COMP%]{display:flex;justify-content:center}[_nghost-%COMP%]   .tip[_ngcontent-%COMP%]{color:rgb(var(--font-gray-1-color))}"],changeDetection:0}),p})()},61860:(z,R,t)=>{t.d(R,{m:()=>l});var e=t(40089),s=t(26738),h=t(76652),_=t(12841),i=t(6190),f=t(911),r=t(54355);let p=(()=>{class c{}return c.\u0275fac=function(v){return new(v||c)},c.\u0275mod=r.oAB({type:c}),c.\u0275inj=r.cJS({imports:[e.ez,f.Yql]}),c})();var u=t(17734),a=t(1349),o=t(51468);let l=(()=>{class c{}return c.\u0275fac=function(v){return new(v||c)},c.\u0275mod=r.oAB({type:c}),c.\u0275inj=r.cJS({providers:[o.JJ,a.ik],imports:[e.ez,h.u5,s.JF,h.UX,_.Bz,f.Yql,i.aw.forChild(),f.Lr3,p,f.cVB,e.ez,h.u5,s.JF,h.UX,_.Bz,u.yI,f.Yql,i.aw,f.Lr3,p,f.cVB]}),c})()},39947:(z,R,t)=>{t.d(R,{F:()=>f});var e=t(6388),s=t(88002),h=t(45435),_=t(10835);const i="84e5a7dc-b757-49a1-ab80-f0a34aa67c70";class f extends _.C{get state(){const p=this.settings.isolateAs,u=this.getState();return p?u[p]:u}initUpdater(){this.storeUpdater?.start(this)}flushUpdater(){this.storeUpdater?.stop()}constructor(p,u){super(p),this.storeUpdater=u}getPropChanged$(p,u,a){const o=c=>{try{return p(c)}catch{return i}};let l=this.stateChangedWithPrev.pipe((0,s.U)(c=>this.processSelector(o,c)),(0,h.h)(c=>!(0,e.Z)(c.current,c.prev)));return void 0!==a&&void 0!==u&&a!==u&&(l=l.pipe((0,h.h)(c=>c.prev===a&&c.current===u))),l}processSelector(p,u){const a=p(u.prev),o=p(u.current);return a===i||o===i?{prev:!0,current:!0}:{prev:a,current:o}}}},16882:(z,R,t)=>{t.d(R,{F:()=>p});var e=t(12841),s=t(6388),h=t(79765),_=t(46782),i=t(45435),f=t(39947),r=t(54355);let p=(()=>{class u extends f.F{constructor(o,l,c,d,v=[],I){super(d,I),this.activatedRoute=o,this.router=l,this.navigationQueueService=c,this.mapToRoute=v,this.destroy$=new h.xQ,this.stateChangedWithPrev.pipe((0,_.R)(this.destroy$)).subscribe(({prev:m,current:g})=>this.processStoreChange(m,g)),setTimeout(()=>this.initFromRoutes),this.router.events.pipe((0,i.h)(m=>m instanceof e.m2),(0,i.h)(()=>!this.navigationQueueService.isNavigationInProgress),(0,_.R)(this.destroy$)).subscribe(()=>this.processRouteChange(this.activatedRoute.snapshot.queryParams)),this.navigationQueueService.navigationBatchIsFinished$.pipe((0,_.R)(this.destroy$)).subscribe(()=>this.processRouteChange(this.activatedRoute.snapshot.queryParams))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}initFromRoutes(){this.processRouteChange(this.activatedRoute.snapshot.queryParams)}processStoreChange(o,l){if(!o||!l)return;let c={};for(const I of this.mapToRoute){const m=I.getStoreValue(o),g=I.getStoreValue(l);m===g||I.getQueryParamsValue(this.activatedRoute.snapshot.queryParams)===g||(c={...c,...I.setQueryParamsValue(g)})}const d=!Object.keys(c).length,v=(0,s.Z)(c,this.activatedRoute.snapshot.queryParams);d||v||this.navigationQueueService.queueNavigate([],{queryParams:c,queryParamsHandling:"merge"})}processRouteChange(o){let l={};for(const d of this.mapToRoute){const v=d.getStoreValue(this.state),I=d.getQueryParamsValue(o);I!==v&&(l={...l,...d.setStoreValue(I)})}Object.keys(l).length&&this.setState(l,"route-changed")}}return u.\u0275fac=function(o){r.$Z()},u.\u0275dir=r.lG2({type:u,features:[r.qOj]}),u})()},70964:(z,R,t)=>{t.d(R,{m:()=>f});var e=t(911),s=t(79765),h=t(15257),_=t(46782),i=(()=>((i=i||{})[i.STARTED=0]="STARTED",i[i.STOPPED=1]="STOPPED",i))();class f extends e.z23{constructor(p){super(),this.cometService=p,this.takeUntilSubj=new s.xQ,this.status=i.STOPPED}start(p){this.status=i.STARTED,this.storeService=p,this.cometService.onConnected$.pipe((0,h.q)(1),(0,_.R)(this.takeUntilSubj)).subscribe(()=>this.initUpdater())}stop(){this.status=i.STOPPED,this.flushUpdater()}flushUpdater(){this.takeUntilSubj.next()}}},22153:(z,R,t)=>{t.d(R,{I:()=>o});var e=t(39947),s=t(54355),h=t(46782),_=t(70964),i=t(5469);let f=(()=>{class l extends _.m{constructor(d){super(d)}initUpdater(){this.cometService.getChildNumberedEventByClass$("ForwardToAnotherConferenceSessionEvent").pipe((0,h.R)(this.takeUntilSubj)).subscribe(this.updateForwardConferenceSessionId.bind(this))}updateForwardConferenceSessionId(d){this.storeService.setConferenceForwardInfo({conferenceSessionId:d.conferenceSessionId,forwardToken:d.forwardToken})}}return l.\u0275fac=function(d){return new(d||l)(s.LFG(i.y_))},l.\u0275prov=s.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})();const r="isEventNotificationsOn",p="isNotificationsWhileParticipatingOn";let o=(()=>{class l extends e.F{get conferenceForwardInfo(){return this.getStateProperty("conferenceForwardInfo",!1)}get rootConferenceTicketInfo(){return this.getStateProperty("rootConferenceTicketInfo",!1)}get isEventNotificationsOn(){return this.getStateProperty("isEventNotificationsOn",!1)}get isNotificationsWhileParticipatingOn(){return this.getStateProperty("isNotificationsWhileParticipatingOn",!1)}get userWasInCurrentConference(){return this.getStateProperty("userIsInConference",!1)}constructor(d){super({stateSliceSelector:v=>({conferenceForwardInfo:v?.conferenceForwardInfo,rootConferenceTicketInfo:v?.rootConferenceTicketInfo,isEventNotificationsOn:v?.isEventNotificationsOn,isNotificationsWhileParticipatingOn:v?.isNotificationsWhileParticipatingOn,userIsInConference:v?.userIsInConference})},d),this.updater=d,this.conferenceForwardInfo$=this.getReactiveStateProperty("conferenceForwardInfo"),this.isEventNotificationsOn$=this.getReactiveStateProperty("isEventNotificationsOn"),this.isNotificationsWhileParticipatingOn$=this.getReactiveStateProperty("isNotificationsWhileParticipatingOn"),this.setInitialState()}setInitialState(){this.setState({conferenceForwardInfo:null,rootConferenceTicketInfo:null,isEventNotificationsOn:this.getInitialIsEventNotificationsOnValue(),isNotificationsWhileParticipatingOn:this.getInitialIsNotificationsWhileParticipatingOnValue()},"INITIAL_STATE")}setConferenceForwardInfo(d){this.setState({conferenceForwardInfo:d},"app__set_conference_forward_info")}setRootConferenceTicketInfo(d){this.setState({rootConferenceTicketInfo:d},"app__set_root_conference_ticket_info")}setIsEventNotificationsOn(d){this.setState({isEventNotificationsOn:d},"app__set_is_event_notifications_on"),localStorage.setItem(r,JSON.stringify(d))}setIsNotificationsWhileParticipatingOn(d){this.setState({isNotificationsWhileParticipatingOn:d},"app__set_is_notifications_while_participating_on"),localStorage.setItem(p,JSON.stringify(d))}getInitialIsEventNotificationsOnValue(){const d=this.getNotificationsBooleanValue(r);return null===d||d}getInitialIsNotificationsWhileParticipatingOnValue(){const d=this.getNotificationsBooleanValue(p);return null!==d&&d}getNotificationsBooleanValue(d){switch(localStorage.getItem(d)){case"true":return!0;case"false":return!1;default:return null}}setUserIsInConference(d){this.setState({userIsInConference:d},"app__set_user_is_in_conference")}}return l.\u0275fac=function(d){return new(d||l)(s.LFG(f))},l.\u0275prov=s.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()},62241:(z,R,t)=>{t.d(R,{s:()=>W});var e=t(26614),s=t(84635),h=t(45435),_=t(88002),i=t(87519),f=t(68307),r=t(94612),p=t(46782),u=t(6717),a=t(9112),o=t(26215),l=t(16882),c=t(2706),d=t(24826),v=t(88584),I=t(8568),m=t(57704),g=t(2996),E=t(8207),n=t(54355),S=t(5469),C=t(12841),T=t(12487),P=t(70964),A=t(98640),M=t(36882),L=t(30083);let N=(()=>{class b extends P.m{constructor(D,F){super(D),this.cometService=D,this.loginService=F,this.typingTimers={}}static resetCurrentChatData(D,F){return{room:D={...D,unreadMessagesCount:0},meta:F={...F,lastMessage:null,totalMessagesAmount:0,hasNextPageOnBottom:!1,hasNextPageOnTop:!1},messages:[],draft:{attachment:"",message:"",type:s.Cb.SIMPLE}}}initUpdater(){this.cometService.getChildNumberedEventByClass$("ChatRoomMessageRemoveEvent").pipe((0,p.R)(this.takeUntilSubj)).subscribe(this.removeMessage.bind(this)),this.cometService.getChildNumberedEventByClass$("ChatRoomClearHistoryEvent").pipe((0,p.R)(this.takeUntilSubj)).subscribe(this.clearChatHistory.bind(this)),this.cometService.getChildNumberedEventByClass$("ChatRoomDeleteEvent").pipe((0,p.R)(this.takeUntilSubj)).subscribe(this.deleteChat.bind(this)),this.cometService.getChildNumberedEventByClass$("ChatRoomMessageEditEvent").pipe((0,p.R)(this.takeUntilSubj)).subscribe(this.editMessage.bind(this)),this.cometService.getChildNumberedEventByClass$("ChatMessageMarkEvent").pipe((0,p.R)(this.takeUntilSubj)).subscribe(A.Z),this.cometService.getChildNumberedEventByClass$("ChatUsersChangedEvent").pipe((0,p.R)(this.takeUntilSubj)).subscribe(A.Z),this.cometService.getChildNumberedEventByClass$("ChatRoomLastReadAtChangeEvent").pipe((0,p.R)(this.takeUntilSubj)).subscribe(this.updateUnreadMessageCount.bind(this)),this.cometService.getChildNumberedEventByClass$("ChatRoomUserMessageStatusDateChangeEvent").pipe((0,p.R)(this.takeUntilSubj)).subscribe(this.updateMessageStatuses.bind(this)),this.cometService.getChildNumberedEventByClass$("ChatRoomTypingEvent").pipe((0,p.R)(this.takeUntilSubj)).subscribe(this.handleTyping.bind(this)),this.cometService.getChildNumberedEventByClass$("ChatRoomUsersChangedEvent").pipe((0,p.R)(this.takeUntilSubj)).subscribe(this.handleUsersMoving.bind(this)),this.cometService.getChildNumberedEventByClass$("ChatRoomMessageEvent").pipe((0,p.R)(this.takeUntilSubj)).subscribe(this.addMessage.bind(this)),this.cometService.getChildNumberedEventByClass$("ChatRoomChangedEvent").pipe((0,p.R)(this.takeUntilSubj)).subscribe(this.updateChat.bind(this)),this.cometService.getChildNumberedEventByClass$("RemovalFromChatEvent").pipe((0,p.R)(this.takeUntilSubj)).subscribe(this.handleUserLeaving.bind(this)),this.cometService.getChildNumberedEventByClass$("ContactOnlineEvent").pipe((0,p.R)(this.takeUntilSubj)).subscribe(this.changeContactOnlineStatus.bind(this)),this.cometService.getChildNumberedEventByClass$("ContactChangedEvent").pipe((0,p.R)(this.takeUntilSubj)).subscribe(this.handleContactChangeEvent.bind(this)),this.cometService.getChildNumberedEventByClass$("ChatRoomUserChangeEvent").pipe((0,p.R)(this.takeUntilSubj)).subscribe(this.handleUserChangedEvent.bind(this))}clearChatHistory(D){const F=this.storeService.getChat(D.chatRoomId),J=this.storeService.getChatMeta(D.chatRoomId);if(!F||!J)return;const H=b.resetCurrentChatData(F,J);this.storeService.addOrUpdateChat(D.chatRoomId,H.room,H.meta,H.messages);const Y={...this.storeService.currentChat};Y&&(Y.unreadMessagesCount=0,Y.totalMessagesCount=0,Y.typing=[],Y.state=e.zY.NONE,this.storeService.setCurrentChat(Y))}updateChat(D){if(!D.chatRoom)return;let F={...this.storeService.getChat(D.chatRoom.id)};if(!F)return;F.isChatHistoryAccessLimited!==D.chatRoom.isChatHistoryAccessLimited&&this.storeService.needToRestoreCurrentChatMessages$.next(),F={...F,...D.chatRoom},this.storeService.addOrUpdateChat(D.chatRoom.id,F);let H=this.storeService.currentChat;H?.id!==D.chatRoom.id||!H||(H={...H,...Object.fromEntries(Object.entries(F).filter(([Y,ee])=>H.hasOwnProperty(Y)))},this.storeService.setCurrentChat(H))}addMessage(D){if(!D.message&&!D.systemMessage)return;const F=D.systemMessage??D.message??null,J=D.messageOwnerProfileId===this.loginService.profileId,H=this.storeService.getChat(F.chatRoomId)?{...this.storeService.getChat(F.chatRoomId)}:null,Y=this.storeService.getChatMeta(F.chatRoomId)?{...this.storeService.getChatMeta(F.chatRoomId)}:void 0,ee=!!Y,X={...this.storeService.currentChat};if(!H&&F&&X?.id!==F.chatRoomId)return void this.storeService.fetchChatCard(F.chatRoomId);if(Y&&(Y.state=e.zY.NONE,Y.lastMessage=F,Y.typing=[]),F&&H&&(H.lastMessageAt=F.createdAt,H.lastMessageUpdatedAt=F.updatedAt),J){if(H){H.unreadMessagesCount=0;const re=F?.createdAt,_e={...H.users.find(ve=>ve.profileId===this.loginService.profileId)};_e&&re&&(_e.lastReadAt=re)}}else H&&H.unreadMessagesCount++;Y&&(Y.totalMessagesAmount?Y.totalMessagesAmount++:Y.totalMessagesAmount=1,this.storeService.setChatsMeta({...this.storeService.chatsMeta,[F.chatRoomId]:Y}));const oe=D.systemMessage?.systemMessageInfo?.messageType===s.hE.CREATE_CHAT,O=!!F?.forwardMessageAuthor&&D.message?.id!==this.storeService.currentChatMessages.slice(-1)[0]?.id,U=this.storeService.currentChatMessages.some(re=>re.createdAt===D.message?.createdAt&&re.author===D.message.author);(J&&ee&&(F?.type===s.Cb.SYSTEM||O||!U)&&!oe||!J&&ee&&!(Y&&Y.hasNextPageOnBottom))&&this.storeService.addMessage(F.chatRoomId,F),H&&this.storeService.addOrUpdateChat(H.id,H),Y&&H&&this.storeService.setChatMeta(H.id,Y),X?.id===H?.id&&(X.typing=Y?.typing,X.state=Y?.state,X.totalMessagesCount&&(X.totalMessagesCount+=1),J||X.unreadMessagesCount++,this.storeService.setCurrentChat(X))}removeMessage(D){if(!D.chatRoomId)return;const F=this.storeService.getChat(D.chatRoomId);let J=this.storeService.getMessagesByChat(F.id);const H=this.storeService.getChatMeta(F.id),Y=this.storeService.getChatDraftById(F.id),ee=J.find(te=>te.id===D.messageId);J=J.filter(te=>te.id!==D.messageId),this.storeService.setMessagesByChat(F.id,J);const X=this.storeService.getLastDtoMessage(D.chatRoomId);let K;if(X){if(H&&(H.lastMessage={...X}),ee){const te=this.loginService.profileId,fe=F?.users.find(re=>re.profileId===te)?.lastReadAt??0;K=ee.createdAt>fe&&!!F}else K=F?.unreadMessagesCount&&!J;K&&(F&&F.unreadMessagesCount--,H&&(H.totalMessagesAmount?H.totalMessagesAmount--:H.totalMessagesAmount=0))}else this.storeService.fetchChatCard(D.chatRoomId);Y&&Y.editedMessageId&&(Y.originalMessageWasDeleted=!0);const oe=J.filter(te=>te.repliedOn&&te.repliedOn.id===D.messageId);Y?.repliedOn?.id===D.messageId&&(Y.repliedOn.deleted=!0,this.storeService.updateChatDraft(F.id,Y)),oe.length&&oe.forEach(te=>{te.repliedOn.deleted=!0}),this.storeService.addOrUpdateChat(F.id,F),this.storeService.setChatMeta(F.id,H),this.storeService.setChatDraftByChat(F.id,Y);const O=this.storeService.currentChat;if(O&&F.id!==O.id||!O||!O?.totalMessagesCount)return;O.totalMessagesCount-=1,K&&O.unreadMessagesCount--,this.storeService.setCurrentChat(O);const U=this.storeService.currentChatMessagesListToForward?[...this.storeService.currentChatMessagesListToForward]:[];if(!U.length)return;const k=this.storeService.currentChatMessagesListToForward.findIndex(te=>D.messageId===te);k<0||(U.splice(k,1),this.storeService.setCurrentChatMessagesListToForward(U))}deleteChat(D){const F={...this.storeService.chatsList},J={...this.storeService.chatsMeta},H={...this.storeService.chatsMessages},Y={...this.storeService.chatsDrafts};delete F[D.chatRoomId],delete J[D.chatRoomId],delete H[D.chatRoomId],delete Y[D.chatRoomId],this.storeService.setChatsList(F),this.storeService.setChatsDrafts(Y),this.storeService.setChatsMessages(H),this.storeService.setChatsMeta(J),this.storeService.currentChatId===D.chatRoomId&&(this.storeService.setCurrentChatId(null),this.storeService.setCurrentChat(null))}editMessage(D){const F=D.message,J=D.message?.chatRoomId;if(!F||!J)return;let H=[...this.storeService.getMessagesByChat(J)];const Y={...this.storeService.getChatMeta(J)},ee=H.findIndex(K=>K.id===F.id),X=[...H.filter(K=>K.repliedOn&&K.repliedOn.id===F.id)];if(X.length&&X.forEach(K=>{K.repliedOn.message=F.message}),-1!==ee&&(H[ee]={...(0,M.Z)({...H[ee]},F)},Y.lastMessage?.id===F.id)){const K=(0,M.Z)(Y.lastMessage,F);Y.lastMessage={...K}}this.storeService.setMessagesByChat(J,H),this.storeService.setChatMeta(J,Y)}handleUserLeaving(D){const F=this.storeService.currentChatId,J={...this.storeService.chatsList},H=J[D.chatRoomId];delete J[D.chatRoomId],this.storeService.setChatsList(J),F===D.chatRoomId&&(D.messageOwnerProfileId!==this.loginService.profileId&&this.storeService.setLastDeletedFromChat(H),this.storeService.setCurrentChat(null),this.storeService.setCurrentChatId(null))}handleUsersMoving(D){const F=this.storeService.getChat(D.chatRoomId);if(!F)return;const Y=D.changedUsers??[],ee=D.removedUsers??[],K=[...F?.users??[],...D.addedUsers??[]].map(U=>Y.find(te=>te.profileId===U.profileId)??U);F.users=K.filter(U=>!ee.includes(U.profileId)),this.storeService.addOrUpdateChat(D.chatRoomId,F);const oe=this.storeService.currentChat;D.chatRoomId===oe?.id&&(oe.users=[...F.users],this.storeService.setCurrentChat(oe))}handleTyping(D){if(!D.chatRoomId)return;const F=this.storeService.getChatMeta(D.chatRoomId);if(!F)return;const J=D.profileId;let H=F.typing;H.includes(J)||H.push(J),F.state=e.zY.TYPING,this.clearTypingTimeout(D.chatRoomId,J),this.typingTimers[D.chatRoomId]={[J]:window.setTimeout(()=>this.clearTyping(D.chatRoomId,J),S._Z.settings.CONFERENCE_CHAT_SHOW_TYPING_INTERVAL_MS)},this.storeService.setChatMeta(D.chatRoomId,F);const Y=this.storeService.currentChat;Y?.id===D.chatRoomId&&(Y.typing=F.typing,Y.state=F.state,this.storeService.setCurrentChat(Y))}handleContactChangeEvent(D){const F=D.contact?.profile?.profileId;if(!F)return;const J={...this.storeService.chatsList},H={...this.storeService.chatsMessages},Y={...this.storeService.currentChat};Object.keys(J).filter(ee=>J[ee].users.find(X=>X.profileId===F)).forEach(ee=>{const X={...J[ee]},K=[...X.users];X.isGroupChat||(X.chatAvatar=D.contact.profile?.avatarResourceId);const oe=K.findIndex(te=>te.profileId===F);if(-1===oe)return;const O={...K[oe]};if(!O||(O.name=D.contact.name??O.name,O.avatar=D.contact.profile?.avatarResourceId??O.avatar,K[oe]={...O},X.users=[...K],this.storeService.addOrUpdateChat(ee,X),Y?.id!==ee))return;const U=[...Y.users],k={...U[oe]};U[oe]={...k,name:D.contact.name??k.name,avatar:D.contact.profile?.avatarResourceId??O.avatar},Y.users=[...U],this.storeService.setCurrentChat(Y)}),Object.keys(H).filter(ee=>H[ee].find(X=>X.author===F)).forEach(ee=>{let X=[...H[ee]];X=X.map(K=>{const oe={...K},O=oe.forwardMessageAuthor;return O===F&&(oe.forwardMessageAuthorName=D.contact.name??O),oe.author!==F||(oe.authorName=D.contact.name??K.authorName,oe.authorAvatar=D.contact.profile?.avatarResourceId??K.authorAvatar),oe}),this.storeService.setMessagesByChat(ee,X)})}clearTypingTimeout(D,F){const J=this.typingTimers[D],H=J?.[F];H&&(window.clearTimeout(H),delete J[F])}changeContactOnlineStatus(D){if(!D.profileId||!D.presenceStatus)return;const F=this.storeService.chatsList;let J=null;Object.keys(F).filter(Y=>F[Y].users.find(ee=>ee.profileId===D.profileId)&&!F[Y].isGroupChat).map(Y=>(J=Y,F[Y].p2pStatus=D.presenceStatus)),this.storeService.setChatsList(F);const H=this.storeService.currentChat;H?.id!==J||F[J].isGroupChat||(H.p2pStatus=D.presenceStatus,this.storeService.setCurrentChat(H))}clearTyping(D,F){this.clearTypingTimeout(D,F);const J=this.storeService.chatsMeta,H=J[D],Y=H.typing;if(!Y.includes(F))return;H.state=e.zY.NONE,H.typing=Y.filter(X=>X!==F),this.storeService.setChatsMeta(J);const ee=this.storeService.currentChat;ee?.id===D&&(ee.typing=H.typing,ee.state=H.state,this.storeService.setCurrentChat(ee))}updateUnreadMessageCount(D){const F=D.chatRoomId;if(!F)return void console.warn("tried to read messages in the unknown chat");if(!D.lastReadAt)return;const J={...this.storeService.getChat(F)},H=[...J.users],Y=H.findIndex(X=>X.profileId===this.loginService.profileId);if(Y<0)return void console.warn(`tried to read messages in the chat ${F} chat for unknown user`);const ee={...H[Y]};ee.lastReadAt=D.lastReadAt,J.unreadMessagesCount=D.unreadMessagesCount,H[Y]=ee,J.users=H,this.storeService.addOrUpdateChat(F,J)}updateMessageStatuses(D){if(!D.chatRoomId)return;const F=D.chatRoomId,J=this.storeService.getMessagesByChat(F);if(0===J.length)return;D.userMessageStatuses?.map(X=>{const K=this.storeService.getChat(F),oe=K?.users??[],O=oe.findIndex(k=>k.profileId===X.profileId);K&&-1!==O&&oe&&(oe[O]={...oe[O],lastReadAt:X.updatedDate},this.storeService.addOrUpdateChat(F,K))});const Y=(this.storeService.getChat(F)?.users??[]).filter(X=>X.profileId!==this.loginService.profileId).map(X=>X.lastReadAt),ee=(0,L.r)(J,Y);this.storeService.setMessagesByChat(F,ee)}handleUserChangedEvent(D){if(!D.chatRoomId||!D.profileId||D.profileId!==this.loginService.profileId)return;const F={...this.storeService.getChat(D.chatRoomId)};F&&(F.muted=!D.allowNotifications,this.storeService.addOrUpdateChat(D.chatRoomId,F));const J=this.storeService.currentChat;!J||J.id!==D.chatRoomId||(J.muted=!D.allowNotifications,this.storeService.setCurrentChat(J))}}return b.\u0275fac=function(D){return new(D||b)(n.LFG(S.y_),n.LFG(S.r6))},b.\u0275prov=n.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})(),W=(()=>{class b extends l.F{get chatsListViewMode(){return this.getStateProperty("chatsListViewMode")}constructor(D,F,J,H,Y,ee){super(J,H,Y,{stateSliceSelector:X=>({chatsList:X?.chatsList,chatsListViewMode:X?.chatsListViewMode,chatsMeta:X?.chatsMeta,chatsMessages:X?.chatsMessages,chatsDrafts:X?.chatsDrafts,currentChatId:X?.currentChatId,currentChat:X?.currentChat,currentChatMessagesListToForward:X?.currentChatMessagesListToForward||[],hasNext:X?.hasNext,openedChatList:X?.openedChatList,chatCardToDownload:X?.chatCardToDownload,openedDocument:X?.openedDocument,openedDocumentId:X?.openedDocumentId,openedDocumentPages:X?.openedDocumentPages,chatViewMode:X?.chatViewMode,chatInfoMode:X?.chatInfoMode,lastDeletedFromChat:X?.lastDeletedFromChat,newP2PChatToGetStatus:X?.newP2PChatToGetStatus}),isolateAs:"ChatStore"},[{getStoreValue:X=>X.currentChatId,setStoreValue:X=>({currentChatId:X}),getQueryParamsValue:X=>X.currentChatId,setQueryParamsValue:X=>({currentChatId:X})}],ee),this.loginService=D,this.chatApiService=F,this.chatsList$=this.getReactiveStateProperty("chatsList"),this.chatsListViewMode$=this.getReactiveStateProperty("chatsListViewMode"),this.chatsMeta$=this.getReactiveStateProperty("chatsMeta"),this.chatsMessages$=this.getReactiveStateProperty("chatsMessages"),this.hasNext$=this.getReactiveStateProperty("hasNext"),this.currentChatId$=this.getReactiveStateProperty("currentChatId"),this.currentChatMeta$=(0,a.aj)([this.chatsMeta$,this.currentChatId$]).pipe((0,h.h)(([X,K])=>!!X&&!!K),(0,_.U)(([X,K])=>X[K??""]),(0,i.x)()),this.currentChat$=this.getReactiveStateProperty("currentChat"),this.currentChatMessages$=(0,a.aj)([this.currentChatId$,this.chatsMessages$]).pipe((0,h.h)(([X,K])=>!!X&&!!K),(0,_.U)(([X,K])=>K[X]||null),(0,i.x)()),this.chatsDrafts$=this.getReactiveStateProperty("chatsDrafts"),this.currentChatDraft$=(0,a.aj)([this.currentChatId$,this.chatsDrafts$]).pipe((0,h.h)(([X,K])=>!!X&&!!K),(0,_.U)(([X,K])=>K[X]),(0,i.x)()),this.openedDocumentId$=this.getReactiveStateProperty("openedDocumentId"),this.openedDocument$=this.getReactiveStateProperty("openedDocument"),this.openedDocumentPages$=this.getReactiveStateProperty("openedDocumentPages"),this.chatViewMode$=this.getReactiveStateProperty("chatViewMode"),this.chatInfoMode$=this.getReactiveStateProperty("chatInfoMode"),this.chatCardToDownload$=this.getReactiveStateProperty("chatCardToDownload"),this.totalUnreadAmount$=this.chatsList$.pipe((0,_.U)(X=>Object.values(X??{}).map(K=>K?.unreadMessagesCount??0).reduce((K,oe)=>K+oe,0))),this.needToRestoreCurrentChatMessages$=new o.X(void 0),this.lastDeletedFromChat$=this.getReactiveStateProperty("lastDeletedFromChat"),this.currentChatMessagesListToForward$=this.getReactiveStateProperty("currentChatMessagesListToForward"),this.newP2PChatToGetStatus$=this.getReactiveStateProperty("newP2PChatToGetStatus"),this.setInitialState(),this.initFromRoutes(),this.handleChatCardToDownloadChanges()}get chatViewMode(){return this.getStateProperty("chatViewMode",!1)}get hasNext(){return this.getStateProperty("hasNext",!1)}get lastDeletedFromChat(){return this.getStateProperty("lastDeletedFromChat")}get chatInfoMode(){return this.getStateProperty("chatInfoMode",!1)}get chatsList(){return this.getStateProperty("chatsList")}get chatsMessages(){return this.getStateProperty("chatsMessages")}get chatsMeta(){return this.getStateProperty("chatsMeta")}get currentChatId(){return this.getStateProperty("currentChatId",!1)}get openedChatList(){return this.getStateProperty("openedChatList",!1)}get currentChatMeta(){const D=this.currentChatId;return D?this.chatsMeta[D]??null:null}get currentChatMessages(){const D=this.currentChatId;return D?this.getMessagesByChat(D):[]}get chatCardToDownload(){return this.getStateProperty("chatCardToDownload",!1)}get currentChatDraft(){return this.getDraft(this.currentChatId)}get currentChat(){return this.getStateProperty("currentChat")}get currentChatMessagesListToForward(){return this.getStateProperty("currentChatMessagesListToForward")}get chatsDrafts(){return this.getStateProperty("chatsDrafts")}getChatMessagesByChatId(D){return this.chatsMessages[D]??[]}chatExists(D){return!!this.chatsList[D]}setChatsList(D){this.setState(F=>(F.chatsList={...D},F),"chat__set_chats_list_in_store")}setChatsListViewMode(D){this.setState({chatsListViewMode:D},"chat__set_chats_list_view_mode_in_store")}setCurrentChat(D){this.setState(F=>(F.currentChat=D?{...D}:null,F),"chat__set_current_chat_in_store")}setCurrentChatMessagesListToForward(D){this.setState(F=>(F.currentChatMessagesListToForward=D?[...D]:[],F),"chat__set_current_chat_in_store")}createCurrentChat(D,F,J){const H=F??this.chatsList[D??""],Y=J??this.chatsMeta[D??""];return H&&Y?{id:H.id,createdBy:H.createdBy,createdAt:H.createdAt,name:H.name,isGroupChat:H.isGroupChat,chatAvatar:H.chatAvatar,isChatHistoryAccessLimited:H.isChatHistoryAccessLimited,users:[...H.users],call:H.call,unreadMessagesCount:H.unreadMessagesCount,p2pStatus:H.p2pStatus,muted:H.muted,typing:[...Y.typing],state:Y.state}:null}getChatMessageById(D,F){return this.getChatMessagesByChatId(D).find(J=>J.id===F)}getChat(D){return this.chatsList[D]}getChatMeta(D){return this.chatsMeta[D]}getReplyOn(D){return this.chatsDrafts[D].repliedOn}getDraft(D){return this.chatsDrafts[D]??void 0}getMessagesByChat(D){return this.chatsMessages[D]??[]}getChatDraftById(D){return this.chatsDrafts[D]}getOpenedChatList(){return this.state.openedChatList}getLastDtoMessage(D){return(0,u.Z)(this.getMessagesByChat(D),c.M)}getFirstDtoMessage(D){return this.getMessagesByChat(D).find(c.M)}getChatName(D){return this.chatExists(D)?this.getChat(D)?.name:void 0}updateChatDraft(D,F){localStorage.setItem(`chat_${D}_draft`,JSON.stringify(F));const J={...this.chatsDrafts};let H={...J[D]};!F.attachment&&!H.attachment&&(H.attachment=""),H={...H,...F},J[D]={...H},this.setChatsDrafts(J)}setChatViewMode(D){D.selectedChat&&D.selectedChat!==this.currentChat?.id&&this.setCurrentChatId(D.selectedChat),this.setState({chatViewMode:D},"chat__set_chat_view_mode")}setLastDeletedFromChat(D){this.setState(F=>(F.lastDeletedFromChat={...D},F),"chat__set_last_deleted_from_chat")}setChatInfoMode(D){this.setState({chatInfoMode:D},"chat__set_chat_info_mode")}setHasNext(D){this.setState({hasNext:D},"chat__set_has_next")}createMetaStub(){return{hasNextPageOnTop:!1,hasNextPageOnBottom:!1,isFetching:!1,typing:[],state:e.zY.NONE,lastMessage:null,hidden:!1,totalMessagesAmount:null}}updateChatMessage(D,F,J,H=!1){this.setState(Y=>{const ee={...Y.chatsMessages},X=[...ee[D]],K=X.findIndex(oe=>oe.id===F);return X.splice(K,1,H?{...J}:{...Object.assign({},X[K],J)}),ee[D]=X,Y.chatsMessages=ee,Y},`update_message_${F}_in_chat_${D}`)}setChatMeta(D,F){this.chatExists(D)?this.setState(J=>{const H={...J.chatsMeta};return H[D]={...H[D],...F},J.chatsMeta=H,J},`chat__${D}_update_meta`):console.warn(`Cant set meta of unexisting chat. Chat with id ${D} not found in store`)}setChatsMeta(D){this.setState(F=>(F.chatsMeta={...D},F),"chat__all_chats_meta_updated_by_once")}setChatsMessages(D){this.setState(F=>(F.chatsMessages={...D},F),"chat__all_messages_updated_by_once")}setMessagesByChat(D,F){const J={...this.chatsMessages};J[D]=[...F],this.setChatsMessages(J)}addMessage(D,F){const J=[...this.getChatMessagesByChatId(D),F];this.setMessagesByChat(D,J)}deleteMessage(D,F){if(!this.chatExists(D))return void console.warn(`Cant delete message from unexisting chat. Chat with id ${D} not found in store`);let J=this.getChatMessagesByChatId(D);const H=J.findIndex(ee=>ee.id===F);if(H<0)return void console.warn(`Cant find message to delete. Message with id ${F} not found in chat ${D}`);const Y=J[H];(0,c.M)(Y)&&(Y.deleted=!0,J=J.map(ee=>{const X=ee;return X.id===F?{...X,deleted:!0}:(X.repliedOn?.id===F&&(X.repliedOn.deleted=!0),X)}),this.setMessagesByChat(D,J))}setReplyMessage(D,F){if(this.chatExists(D)){if(!F||F.chatRoomId===D)return this.updateChatDraft(D,{repliedOn:F}),this.getReplyOn(D);console.warn(`Cant set reply message in ${D}. Message with id ${F.id} does not belong to this chat`)}else console.warn(`Cant set reply message of unexisting chat. Chat with id ${D} not found in store`)}setEditMessage(D,F){this.chatExists(D)?F.chatRoomId===D?this.updateChatDraft(D,{editedMessageId:F.id,originalMessage:F.message,message:F.message,editedMessageAttachment:F.attachment,originalMessageCreatedAt:F.createdAt}):console.warn(`Cant set edit message in ${D}. Message with id ${F.id} does not belong to this chat`):console.warn(`Cant set edit message of unexisting chat. Chat with id ${D} not found in store`)}addChatToOpened(D){const F=[...this.state.openedChatList,D],J=Array.from(new Set(F));return this.setState({openedChatList:J},`chat__add_chat_${D}_to_opened_chat_list`),this.getOpenedChatList()}addOrUpdateChat(D,F,J,H){const Y={...this.chatsList},ee=this.chatExists(D);if(Y[D]=F,this.setState(X=>(X.chatsList=Y,X),`chat__${D}_was_added_or_updated`),!ee){const X=Object.assign({},this.createMetaStub(),J);this.setChatMeta(D,X),F.createdBy!==this.loginService.profileId&&!F.isGroupChat&&this.setNewP2PChatToGetStatus(D)}H&&ee&&this.setMessagesByChat(D,H)}deleteChat(D){const F=this.chatsList;delete F[D],this.setChatsList(F),this.deleteChatMessages(D),this.deleteChatMeta(D),this.deleteChatDraft(D)}deleteChatMessages(D){const F=this.chatsMessages;delete F[D],this.setChatsMessages(F)}deleteChatMeta(D){const F=this.chatsMeta;delete F[D],this.setChatsMeta(F)}deleteChatDraft(D){const F=this.chatsDrafts;delete F[D],this.setChatsDrafts(F)}setChatsDrafts(D){this.setState({chatsDrafts:{...D}},"chat__all_chats_drafts_updated_by_once")}setChatDraftByChat(D,F){const J=this.chatsDrafts;J[D]={...F},this.setChatsDrafts(J)}fetchChatCard(D){this.setState({chatCardToDownload:D},"chat__chat_card_to_download_updated_in_store")}setInitialState(){this.setState({chatsList:null,currentChatId:null,chatsMessages:{},chatsDrafts:{},chatsMeta:{},currentChat:null,openedChatList:[],chatCardToDownload:null,openedDocumentPages:null,chatViewMode:{mode:e.ej.LOADING},chatInfoMode:I.P.DEFAULT,lastDeletedFromChat:void 0},"CHAT_INITIAL_STATE")}resetInitChat(){this.setState({chatsList:null},"chat__chat_list_reset")}resetChatDraft(D){localStorage.removeItem(`chat_${D}_draft`);const J={...this.chatsDrafts};J[D]={editedMessageId:void 0,originalMessage:void 0,message:"",attachment:"",editedMessageAttachment:void 0,repliedOn:void 0,type:s.Cb.SIMPLE,originalMessageWasDeleted:!1},this.setChatsDrafts(J)}resetAllDrafts(){Object.keys(this.chatsDrafts).forEach(D=>{this.chatsDrafts[D]&&this.resetChatDraft(D)})}removeClientMessage(D,F){this.setState(J=>{const H={...J.chatsMessages};let Y=[...H[D]];return Y=Y.filter(ee=>ee.id!==F.id),H[D]=[...Y],J.chatsMessages=H,J},`remove_client_message_${F.id}_from_chat_${D}`)}setCurrentChatId(D,F=""){this.setState({currentChatId:D},`set_current_chat_id_by_${F}`),this.setCurrentChat(this.createCurrentChat(D))}setNewP2PChatToGetStatus(D){this.setState({newP2PChatToGetStatus:D},"set_new_p2p_chat_to_get_status")}setOpenedDocument(D){this.setState({openedDocument:D},"set_current_document")}setOpenedDocumentId(D){const F=this.currentChatMessages.filter(J=>!!J.attachment&&!!(0,d.X)(J.attachment)).map(J=>J.attachment).map(v.A).find(J=>J.nodeId===D);this.setOpenedDocument(F||null)}setOpenedDocumentPages(D){this.setState({openedDocumentPages:D},"set_current_document_pages")}handleChatCardToDownloadChanges(){this.chatCardToDownload$.pipe((0,h.h)(D=>!!D),(0,f.b)(()=>this.fetchChatCard(null)),(0,r.b)(D=>this.chatApiService.getChat(D,{requestedData:[m.YS.LAST_MESSAGE,m.YS.UNREAD_COUNT]})),(0,_.U)(D=>{const F=(0,g.c)([D],this.loginService.profileId)[D.id];return{chatId:D.id,updatedChat:F,chatMeta:{hasNextPageOnTop:!1,hasNextPageOnBottom:!1,isFetching:!1,typing:[],state:e.zY.NONE,lastMessage:D.lastMessage??null,hidden:!1,totalMessagesAmount:null}}}),(0,p.R)(this.destroy$)).subscribe(({chatId:D,updatedChat:F,chatMeta:J})=>{if(this.currentChat?.id===D)return;this.addOrUpdateChat(D,F,J);const Y=this.createCurrentChat(D);Y?.users.find(X=>X.profileId===this.loginService.profileId)?.role===E.yP.OWNER&&(this.setCurrentChat(Y),this.setCurrentChatId(D))})}}return b.\u0275fac=function(D){return new(D||b)(n.LFG(S.r6),n.LFG(m.sb),n.LFG(C.gz),n.LFG(C.F0),n.LFG(T.U),n.LFG(N))},b.\u0275prov=n.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})()},26614:(z,R,t)=>{t.d(R,{Iq:()=>e,ej:()=>h,zY:()=>s});var e=(()=>((e=e||{}).DEFAULT="DEFAULT",e.STUB="STUB",e.SEARCH="SEARCH",e.LOADING="LOADING",e.EMPTY_SEARCH="EMPTY_SEARCH",e))(),s=(()=>((s=s||{})[s.CALLING_BY_SELF=0]="CALLING_BY_SELF",s[s.CALLING_BY_USER=1]="CALLING_BY_USER",s[s.CALL_END=2]="CALL_END",s[s.TYPING=3]="TYPING",s[s.LAST_MESSAGE_BY_SELF=4]="LAST_MESSAGE_BY_SELF",s[s.LAST_MESSAGE_BY_USER=5]="LAST_MESSAGE_BY_USER",s[s.NONE=6]="NONE",s))(),h=(()=>((h=h||{}).LOADING="LOADING",h.NO_CHAT="NO_CHAT",h.CHAT="CHAT",h.CHAT_INFO="CHAT_INFO",h.CHAT_CREATION="CHAT_CREATION",h))()},30083:(z,R,t)=>{t.d(R,{d:()=>_,r:()=>i});var e=t(8207),s=t(27598),h=t(84635);function _(f,r,p,u){const a=d=>{let v=0;switch(d){case e.yP.OWNER:v=2;break;case e.yP.ADMIN:v=1}return v},o=a(p),c=a(u)-o;return 0!==c?c:(0,s.m2)(f,r)}function i(f,r){for(let p=f.length-1;p>=0;p--){const u=f[p];if(u.status===h.rJ.ALL_READ)break;let o;o=r.some(l=>u.createdAt>l)?r.some(l=>u.createdAt<=l)?h.rJ.PARTLY_READ:h.rJ.DELIVERED:h.rJ.ALL_READ,f[p]={...u,status:o}}return[...f]}},79784:(z,R,t)=>{t.d(R,{C:()=>e,w:()=>s});const e="COMMON";var s=(()=>((s=s||{})[s.MODERATION=0]="MODERATION",s[s.PERSONAL_CHATS=1]="PERSONAL_CHATS",s[s.PARTICIPANTS_LIST=2]="PARTICIPANTS_LIST",s))()},13810:(z,R,t)=>{t.d(R,{P:()=>I});var e=t(87177),s=t(5469),h=t(79784),_=t(38221),f=t(911),r=t(76610),p=t(28559),u=t.n(p),a=t(20945),o=t(46782),l=t(51011),c=t(70964),d=t(54355),v=t(27789);let I=(()=>{class m extends c.m{constructor(E,n,S){super(E),this.loginService=n,this.conferencePermissionsService=S,this.typingTimers={},this.chatMessagesCount=0,this.collectChatMessagesCountIntervalSec=1,this.chatMessagesCountHistory=[],this.maxChartMassagesCountHistoryLength=120,this.chartChatMessagesCountUpdateIntervalSec=1,s._Z.settings.CONFERENCE_SESSION_ENABLE_CHAT_PROFILING&&this.startProfileChatMessagesCount()}startProfileChatMessagesCount(){(0,a.F)(this.collectChatMessagesCountIntervalSec*f.cK$).pipe((0,o.R)(this.destroy$)).subscribe(()=>{this.chatMessagesCountHistory.push(this.chatMessagesCount/this.collectChatMessagesCountIntervalSec),this.chatMessagesCountHistory.length>=this.maxChartMassagesCountHistoryLength&&this.chatMessagesCountHistory.shift(),this.chatMessagesCount=0}),(0,a.F)(this.chartChatMessagesCountUpdateIntervalSec*f.cK$).pipe((0,o.R)(this.destroy$)).subscribe(()=>{console.clear(),(0,l.$)(_.plot(this.chatMessagesCountHistory,{height:40})),(0,l.$)(`Chat messages per sec: ${this.chatMessagesCountHistory[this.chatMessagesCountHistory.length-1]}`)})}flushTimers(){Object.values(this.typingTimers).forEach(E=>Object.values(E).forEach(n=>window.clearTimeout(n)))}initUpdater(){this.cometService.getChildNumberedEventByClass$("ConferenceChatMessageEvent").pipe((0,o.R)(this.takeUntilSubj)).subscribe(this.addMessage.bind(this)),this.cometService.getChildNumberedEventByClass$("ConferenceChatMessageRemovedEvent").pipe((0,o.R)(this.takeUntilSubj)).subscribe(this.removeMessage.bind(this)),this.cometService.getChildNumberedEventByClass$("ConferenceChatParticipantMessagesRemovedEvent").pipe((0,o.R)(this.takeUntilSubj)).subscribe(this.removeAllParticipantsMessages.bind(this)),this.cometService.getChildNumberedEventByClass$("ConferenceChatTypingEvent").pipe((0,o.R)(this.takeUntilSubj)).subscribe(this.updateTyping.bind(this)),this.cometService.getChildNumberedEventByClass$("ConferenceSessionParticipantDataChangeEvent").pipe((0,o.R)(this.takeUntilSubj)).subscribe(this.updateParticipantData.bind(this)),this.cometService.getChildNumberedEventByClass$("ConferenceChatClearedEvent").pipe((0,o.R)(this.takeUntilSubj)).subscribe(this.processClearChat.bind(this))}flushUpdater(){this.flushTimers(),this.takeUntilSubj.next()}addMessage(E){this.chatMessagesCount++;const n=E.message.targetParticipantId?E.message.authorParticipantId:h.C;if(E.afterModeratedAction){if(E.message.authorProfileId===this.loginService.loginInfo?.user.profileId)return void this.storeService.updateMessageModeration(E.message,n);E.messageOwnerProfileId!==this.loginService.profileId&&(this.removeModerationMessage(E.message.messageId),this.storeService.decModerationMessagesCount())}else if(E.messageOwnerSessionIdHash===u()(this.loginService.sessionId)&&E.message.authorProfileId===this.loginService.loginInfo?.user.profileId)return;if(E.message.moderationStatus===e.M6.NOT_MODERATED)return this.storeService.moderationMessagesHasNext||this.storeService.appendModerationMessages([E.message]),void this.storeService.incModerationMessagesCount();const T=n===this.storeService.currentChatId;E.message.moderationStatus===e.M6.APPROVED&&(!document.hasFocus()||!T)&&this.storeService.addUnreadMessages(E.message),n!==h.C&&this.storeService.addOpenedChat({avatarId:E.message.authorAvatarId,name:E.message.authorName,participantId:E.message.authorParticipantId,profileId:E.message.authorProfileId}),(n!==h.C||E.message.moderationStatus===e.M6.APPROVED||!this.conferencePermissionsService.isSelfParticipantModerator)&&!this.storeService.conferenceChatsMeta[n].hasPreviousPage&&this.storeService.appendMessages([E.message],n),this.clearTyping(n,E.message.authorParticipantId)}removeMessage(E){const n=this.storeService.getMessageInfoById(E.messageId);this.storeService.removeMessageByMessageInfo(n,{participantId:E.deletedByParticipantId,profileId:E.deletedByProfileId},this.storeService.currentChatId!==n?.chatId);const C=this.removeModerationMessage(E.messageId);this.storeService.decModerationMessagesCount(C),this.updateRepliedMessages(E.messageId),this.handleRepliedMessageRemove(E.messageId)}updateRepliedMessages(E){const n=this.storeService.messages;for(const[,S]of Object.entries(n))S.forEach(C=>{"repliedOn"in C&&!C.repliedOn.deleted&&C.repliedOn.messageId===E&&(C.repliedOn.deleted=!0)});this.storeService.setAllMessages((0,r.Z)(n),"conference_chat_replies_updated_after_host_message_removed")}handleRepliedMessageRemove(E){const n=this.storeService.repliedMessage;n&&n.message?.messageId===E&&this.storeService.setRepliedMessage(null)}removeModerationMessage(E){const n=this.storeService.removeModerationMessages(S=>S.messageId===E);return this.storeService.rejectingMessageId===E&&this.storeService.setRejectingMessageId(null),n}removeAllParticipantsMessages(E){this.storeService.removeParticipantMessages(E.authorProfileId,E.deletedByParticipantId,!0),this.storeService.removeParticipantModerationMessages(E.authorProfileId);const n={};Object.entries(this.storeService.unreadMessages).forEach(([C,T])=>{n[C]=T.filter(P=>P.authorProfileId!==E.authorProfileId)}),this.storeService.setUnreadMessages(n);const S=this.storeService.moderationMessages.filter(C=>C.authorProfileId!==E.authorProfileId);this.storeService.setModerationMessages(S),this.storeService.setRepliedMessage(null)}updateTyping(E){const S=this.storeService.typings,T=E.authorParticipantId,P=E.targetParticipantId?T:h.C;if(this.loginService.profileId===E.authorProfileId)return;S[P]=S[P]||{},S[P][T]=E,this.storeService.setTypings(S,"add"),this.typingTimers[P]=this.typingTimers[P]||{};const A=this.typingTimers[P];this.clearTypingTimeout(P,T),A[T]=window.setTimeout(()=>this.clearTyping(P,T),s._Z.settings.CONFERENCE_CHAT_SHOW_TYPING_INTERVAL_MS)}clearTyping(E,n){this.clearTypingTimeout(E,n);const S=this.storeService.typings;S[E]&&(delete S[E][n],this.storeService.setTypings(S,"delete"))}clearTypingTimeout(E,n){const S=this.typingTimers[E],C=S?.[n];C&&(window.clearTimeout(C),delete S[n])}updateParticipantData(E){const n={...this.storeService.messages},S=Object.keys(n).reduce((A,M)=>[...A,...n[M]],[]).filter(A=>A.authorProfileId===E.profileId),C=Object.keys(n).reduce((A,M)=>[...A,...n[M]],[]).filter(A=>"repliedOn"in A&&A.repliedOn.authorProfileId===E.profileId);S.forEach(A=>{A.authorAvatarId=E.avatarResourceId,A.authorName=E.name}),C.forEach(A=>{A.repliedOn.authorName=E.name}),this.storeService.setAllMessages((0,r.Z)(n),"updateParticipantData_via_ConferenceSessionParticipantDataChangeEvent");const T=this.storeService.openedChats,P=T.findIndex(A=>A.participantId===E.participantId);-1!==P&&(T[P]={...T[P],name:E.name,avatarId:E.avatarResourceId},this.storeService.setOpenedChats(T))}processClearChat(E){this.storeService.clearMessages()}}return m.\u0275fac=function(E){return new(E||m)(d.LFG(s.y_),d.LFG(s.r6),d.LFG(v.A))},m.\u0275prov=d.Yz7({token:m,factory:m.\u0275fac}),m})()},69347:(z,R,t)=>{t.d(R,{b:()=>d});var e=t(23726),s=t(77323),h=t(46451),_=t(9112),i=t(88002),f=t(87519),r=t(39947),p=t(27598),u=t(54355),a=t(46782),o=t(70964),l=t(5469);let c=(()=>{class v extends o.m{constructor(m){super(m)}initUpdater(){this.cometService.getChildNumberedEventByClass$("ConferenceSessionDocumentCreateEvent").pipe((0,a.R)(this.takeUntilSubj)).subscribe(this.addDocument.bind(this)),this.cometService.getChildNumberedEventByClass$("ConferenceSessionDirectoryCreateEvent").pipe((0,a.R)(this.takeUntilSubj)).subscribe(this.addDirectory.bind(this)),this.cometService.getChildNumberedEventByClass$("ConferenceSessionDocumentUpdateEvent").pipe((0,a.R)(this.takeUntilSubj)).subscribe(this.updateDocument.bind(this)),this.cometService.getChildNumberedEventByClass$("ConferenceSessionDirectoryUpdateEvent").pipe((0,a.R)(this.takeUntilSubj)).subscribe(this.updateDirectory.bind(this)),this.cometService.getChildNumberedEventByClass$("ConferenceSessionDocumentDeleteEvent").pipe((0,a.R)(this.takeUntilSubj)).subscribe(this.removeDocument.bind(this)),this.cometService.getChildNumberedEventByClass$("ConferenceSessionDirectoryDeleteEvent").pipe((0,a.R)(this.takeUntilSubj)).subscribe(this.removeDirectory.bind(this))}addDocument(m){this.storeService.addItemToFsMap(m.document,"by_ConferenceSessionDocumentCreateEvent")}addDirectory(m){this.storeService.addItemToFsMap(m.directory,"by_ConferenceSessionDirectoryCreateEvent")}updateDocument(m){this.storeService.updateItemInFsMap(m.document,"by_ConferenceSessionDocumentUpdateEvent")}updateDirectory(m){this.storeService.updateItemInFsMap(m.directory,"by_ConferenceSessionDocumentUpdateEvent"),this.storeService.updateDirectoryInPath(m.directory,"by_ConferenceSessionDirectoryUpdateEvent")}removeDocument(m){this.storeService.removeItemFromFsMap(m.documentId,"by_ConferenceSessionDocumentDeleteEvent")}removeDirectory(m){this.storeService.removeItemFromFsMap(m.directoryId,"by_ConferenceSessionDirectoryDeleteEvent"),this.storeService.deleteDirectoryInPath(m.directoryId)}}return v.\u0275fac=function(m){return new(m||v)(u.LFG(l.y_))},v.\u0275prov=u.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})(),d=(()=>{class v extends r.F{get openedFilePages(){return this.getStateProperty("openedFilePages",!1)}get isDemonstrationStarting(){return this.getStateProperty("isDemonstrationStarting",!1)}get isDemonstrationStopping(){return this.getStateProperty("isDemonstrationStopping",!1)}get filesAndDirectoriesMap(){return this.getStateProperty("filesAndDirectoriesMap",!1)}get currentDirectoryItems(){const m=this.currentDirectory?.nodeId||this.rootFolderId;return this.filesAndDirectoriesMap?.has(m)?this.filesAndDirectoriesMap?.get(m):[]}get documents(){return this.currentDirectoryItems.filter(m=>m.type===s.wY.DOCUMENT)}get currentDirectory(){return this.getStateProperty("currentDirectory",!1)}get currentDirectoryPath(){return this.getStateProperty("currentDirectoryPath",!1)}get isInitialDataFetched(){return this.getStateProperty("isInitialDataFetched",!1)}get isNextPageFetching(){return this.getStateProperty("isNextPageFetching",!1)}get sortField(){return this.getStateProperty("sortField",!1)}get orderAsc(){return this.getStateProperty("orderAsc",!1)}get hasNext(){const m=this.currentDirectory?.nodeId||this.rootFolderId;return this.hasDirectoryNext?.get(m)??!1}get hasDirectoryNext(){return this.getStateProperty("hasDirectoryNext",!1)}get openedFileId(){return this.getStateProperty("openedFileId",!1)}get rootFolderId(){return this.getStateProperty("rootFolderId",!1)}get isNextDocumentPagesFetching(){return this.getStateProperty("isNextDocumentPagesFetching",!1)}get isNextDocumentPagesFetchingUntil(){return this.getStateProperty("isNextDocumentPagesFetchingUntil",!1)}get videoAutoplay(){return this.getStateProperty("videoAutoplay",!1)}constructor(m){super({stateSliceSelector:g=>({isInitialDataFetching:g?.isInitialDataFetching,isNextPageFetching:g?.isNextPageFetching,sortField:g?.sortField,orderAsc:g?.orderAsc,hasNext:g?.hasNext,hasDirectoryNext:g?.hasDirectoryNext,isInitialDataFetched:g?.isInitialDataFetched,openedFileId:g?.openedFileId,openedFilePages:g?.openedFilePages,documentViewMode:g?.documentViewMode,documentViewModeFilter:g?.documentViewModeFilter,isPointerShown:g?.isPointerShown,currentDirectory:g?.currentDirectory,currentDirectoryPath:g?.currentDirectoryPath,filesAndDirectoriesMap:g?.filesAndDirectoriesMap,isDemonstrationStarting:g?.isDemonstrationStarting,isDemonstrationStopping:g?.isDemonstrationStopping,rootFolderId:g?.rootFolderId,isCurrentDirectoryPathFetching:g?.isCurrentDirectoryPathFetching,isNextDocumentPagesFetching:g?.isNextDocumentPagesFetching,isNextDocumentPagesFetchingUntil:g?.isNextDocumentPagesFetchingUntil,videoAutoplay:g?.videoAutoplay})},m),this.updater=m,this.currentDirectory$=this.stateChanged.pipe((0,i.U)(g=>g.currentDirectory),(0,f.x)()),this.currentDirectoryPath$=this.getReactiveStateProperty("currentDirectoryPath"),this.filesAndDirectories$=this.getReactiveStateProperty("filesAndDirectoriesMap"),this.currentDirectoryItems$=(0,_.aj)([this.filesAndDirectories$,this.currentDirectory$]).pipe((0,i.U)(([g,E])=>g?.get(E?.nodeId||this.rootFolderId)||[])),this.documents$=this.currentDirectoryItems$.pipe((0,i.U)(g=>g?.filter(E=>E.type===s.wY.DOCUMENT)||[])),this.isInitialDataFetching$=this.stateChanged.pipe((0,i.U)(g=>g.isInitialDataFetching)),this.isNextPageFetching$=this.stateChanged.pipe((0,i.U)(g=>g.isNextPageFetching)),this.hasNext$=this.stateChanged.pipe((0,i.U)(g=>g.hasNext)),this.isInitialDataFetched$=this.stateChanged.pipe((0,i.U)(g=>g.isInitialDataFetched)),this.openedFileId$=this.getReactiveStateProperty("openedFileId"),this.openedFile$=(0,_.aj)([this.openedFileId$,this.documents$]).pipe((0,i.U)(([g,E])=>E?.find(n=>n.nodeId===g)||null)),this.openedFilePages$=this.getReactiveStateProperty("openedFilePages"),this.documentViewMode$=this.stateChanged.pipe((0,i.U)(g=>g.documentViewMode),(0,f.x)()),this.documentViewModeFilter$=this.getReactiveStateProperty("documentViewModeFilter"),this.isCurrentDirectoryPathFetching$=this.getReactiveStateProperty("isCurrentDirectoryPathFetching"),this.sortField$=this.stateChanged.pipe((0,i.U)(g=>g.sortField)),this.orderAsc$=this.stateChanged.pipe((0,i.U)(g=>g.orderAsc)),this.isPointerShown$=this.stateChanged.pipe((0,i.U)(g=>g.isPointerShown)),this.isDemonstrationStarting$=this.stateChanged.pipe((0,i.U)(g=>g.isDemonstrationStarting)),this.isDemonstrationStopping$=this.stateChanged.pipe((0,i.U)(g=>g.isDemonstrationStopping)),this.filesAndDirectoriesMap$=this.getReactiveStateProperty("filesAndDirectoriesMap"),this.isNextDocumentPagesFetching$=this.getReactiveStateProperty("isNextDocumentPagesFetching"),this.isNextDocumentPagesFetchingUntil$=this.getReactiveStateProperty("isNextDocumentPagesFetchingUntil"),this.videoAutoplay$=this.getReactiveStateProperty("videoAutoplay"),this.setInitialState()}setInitialState(){this.setState({isInitialDataFetching:!1,isNextPageFetching:!1,sortField:e._.NAME,orderAsc:!0,hasNext:!0,hasDirectoryNext:new Map,isInitialDataFetched:!1,openedFileId:null,openedFilePages:null,documentViewMode:h.p2.WIDESCREEN,documentViewModeFilter:h.lj.ALL,isPointerShown:!1,currentDirectory:null,currentDirectoryPath:null,filesAndDirectoriesMap:null,isDemonstrationStarting:!1,isDemonstrationStopping:!1,rootFolderId:null,isCurrentDirectoryPathFetching:!1,isNextDocumentPagesFetching:!1,isNextDocumentPagesFetchingUntil:!1,videoAutoplay:!0},"INIT_STATE")}setRootDirectoryId(m){this.setState({rootFolderId:m},"root_directory_id_set")}setCurrentDirectory(m){this.setOrderAsc(!0),this.setState({currentDirectory:m},"")}setCurrentDirectoryPath(m,g=""){this.setState({currentDirectoryPath:m?.reverse()??null},`conference_files_set_path${this.getReasonPostfix(g)}`)}setFilesAndDirectoriesMap(m,g=""){const E=m&&new Map(m);this.setState({filesAndDirectoriesMap:E},`conference_files_set_fs-map${this.getReasonPostfix(g)}`)}setHasDirectoryNext(m){this.setState({hasDirectoryNext:m},"")}updateDirectoryInHasNext(m,g){const E=this.hasDirectoryNext;E.set(m,g),this.setHasDirectoryNext(E)}getTempDataOfFsMap(m){const g=this.filesAndDirectoriesMap||new Map,E=g.get(m.parentFolderId)||[],n=E?.findIndex(S=>S.nodeId===m.nodeId);return{filesAndDirectories:g,updatedItemDirectoryContent:E,indexOfUpdatedItem:n}}getReasonPostfix(m=""){return m?`_${m}`:""}updateItemInFsMap(m,g=""){const{filesAndDirectories:E,updatedItemDirectoryContent:n,indexOfUpdatedItem:S}=this.getTempDataOfFsMap(m);if(null!=S&&-1!==S){n[S]=m;const C=(0,p.fe)(n,this.sortField,this.orderAsc);E.set(m.parentFolderId,C)}m.nodeId===this.currentDirectory?.nodeId&&this.setCurrentDirectory(m),this.setFilesAndDirectoriesMap(E,`conference_files__update_item_in_fs-map${this.getReasonPostfix(g)}`)}addItemToFsMap(m,g=""){const{filesAndDirectories:E,updatedItemDirectoryContent:n,indexOfUpdatedItem:S}=this.getTempDataOfFsMap(m),C=[...n,m],T=(0,p.fe)(C,this.sortField,this.orderAsc);this.hasNext&&T[T.length-1]===m||(-1===S&&E.set(m.parentFolderId,T),this.setFilesAndDirectoriesMap(E,`conference_files__add_item_in_fs-map${this.getReasonPostfix(g)}`))}appendItemsToFsMap(m){const g=this.filesAndDirectoriesMap;if(!g)return;const E=g.get(m[0].parentFolderId);g.set(m[0].parentFolderId,[...E,...m]),this.setFilesAndDirectoriesMap(g,"conference_files__append_items_to_fs-map")}removeItemFromFsMap(m,g=""){const E=this.filesAndDirectoriesMap;if(!E)return;const n=[...E].flatMap(([C,T])=>T).find(C=>C.nodeId===m),S=n?.parentFolderId;if(n?.type===s.wY.DIRECTORY){let T=function(A){A?.forEach(M=>{M.type===s.wY.DIRECTORY&&(C.push(M.nodeId),T(E.get(M.nodeId)))})};const C=[m];T(E.get(m)),C.forEach(A=>E.delete(A)),C.find(A=>A===this.currentDirectory?.nodeId)&&this.setCurrentDirectory(null)}if(S){let C=E.get(S);C=C.filter(T=>T.nodeId!==m),E.set(S,C)}this.setFilesAndDirectoriesMap(E,`conference_files__remove_item_from_fs-map${this.getReasonPostfix(g)}`)}addDirectoryWithContentToFsMap(m,g){const E=this.filesAndDirectoriesMap||new Map;E.set(m,g),this.setFilesAndDirectoriesMap(E,"conference_files__add_directory_with_content_to_fs-map")}updateDirectoryInPath(m,g=""){const E=this.currentDirectoryPath,n=E?.findIndex(S=>S?.nodeId===m.nodeId);E&&-1!==n&&(E[n]=m,this.setCurrentDirectoryPath(E.reverse(),"conference_files__update_directory_path"+this.getReasonPostfix(g)))}deleteDirectoryInPath(m){const g=this.currentDirectoryPath,E=g?.findIndex(n=>n?.nodeId===m);if(g&&-1!==E){const n=g.slice(E),S=this.currentDirectory;n.find(T=>T?.nodeId===S?.nodeId)&&this.setCurrentDirectory(null)}}setIsInitialDataFetching(m){this.setState({isInitialDataFetching:m},"conference_files__set_is_initial_data_fetching")}setIsNextPageFetching(m){this.setState({isNextPageFetching:m},"conference_files__set_is-next-page-fetching")}setIsInitialDataFetched(m){this.setState({isInitialDataFetched:m},"conference_files__set_is_initial_data_fetched")}setHasNext(m){this.setState({hasNext:m},"conference_files__set_has_next")}setOrderAsc(m){this.setState({orderAsc:m},"conference_files__set_order_asc")}setSortField(m){this.setState({sortField:m},"conference_files__set_sort_field")}setOpenedFileId(m){this.setState({openedFileId:m,openedFilePages:null},"conference_files__set_opened_file_id")}setOpenedFilePages(m){this.setState({openedFilePages:m},"conference_files__set_opened_file_pages")}setDocumentViewMode(m){this.setState({documentViewMode:m},"conference_files__set_document_view_mode")}setDocumentViewModeFilter(m){this.setState({documentViewModeFilter:m},"conference_files__set_document_view_mode_filter")}setPointerShown(m){this.setState({isPointerShown:m},"conference_files__set_is_pointer_shown")}setIsDemonstrationStarting(m){this.setState({isDemonstrationStarting:m},"conference_files__set_is_demonstration_starting")}setIsDemonstrationStopping(m){this.setState({isDemonstrationStopping:m},"conference_files__set_is_demonstration_stopping")}setIsCurrentDirectoryPathFetching(m){this.setState({isCurrentDirectoryPathFetching:m},"conference_files__set_is_current_directory_path_fetching")}setIsNextDocumentPagesFetching(m){this.setState({isNextDocumentPagesFetching:m},"conference_files__set_is_next_document_pages_fetching")}setIsNextDocumentPagesFetchingUntil(m){this.setState({isNextDocumentPagesFetchingUntil:m},"conference_files__set_is_next_document_pages_fetching_until")}setVideoAutoplay(m){this.setState({videoAutoplay:m},"conference_files__set_video_autoplay")}}return v.\u0275fac=function(m){return new(m||v)(u.LFG(c))},v.\u0275prov=u.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})()},27598:(z,R,t)=>{t.d(R,{ce:()=>r,fe:()=>_,m2:()=>i});var e=t(23726),s=t(77323);function _(o,l,c){let d=o;const v=c?1:-1;switch(l){case e._.NAME:d=o.sort((I,m)=>v*function p(o,l){const c=a(o,l);return null!==c?c:i(o.name,l.name)}(I,m));break;case e._.SIZE:d=o.sort((I,m)=>v*u(I,m,"size"));break;case e._.CHANGED_DATE:d=o.sort((I,m)=>v*u(I,m,"createdDate"))}return d}function i(o,l){return o.localeCompare(l,"en-us",{ignorePunctuation:!0})}function r(o,l){return o.localeCompare(l,"en-us",{numeric:!0,sensitivity:"base",ignorePunctuation:!0})}function u(o,l,c){const d=a(o,l);return null!==d?d:(o.resource?.[c]||0)-(l.resource?.[c]||0)}function a(o,l){return o.type===s.wY.DIRECTORY&&l.type===s.wY.DIRECTORY?o.name.localeCompare(l.name):o.type===s.wY.DIRECTORY&&l.type===s.wY.DOCUMENT?-1:o.type===s.wY.DOCUMENT&&l.type===s.wY.DIRECTORY?1:null}t(31652)},23316:(z,R,t)=>{t.d(R,{C:()=>r});var e=t(49062),s=t(911),h=t(88002),_=t(87519),i=t(39947),f=t(54355);let r=(()=>{class p extends i.F{constructor(){super({stateSliceSelector:a=>({openedPane:a?.openedPane,prevOpenedPane:a?.prevOpenedPane,selectedParticipantId:a?.selectedParticipantId,participantsFilter:a?.participantsFilter,isParticipantsSelectionMode:a?.isParticipantsSelectionMode,selectedParticipantIds:a?.selectedParticipantIds,activeListSection:a?.activeListSection,participantsSearchValue:a?.participantsSearchValue,notConnectedParticipantsHasNextPage:a?.notConnectedParticipantsHasNextPage,notConnectedParticipantsIsFirstPageFetching:a?.notConnectedParticipantsIsFirstPageFetching,notConnectedParticipantsIsFirstPageFetched:a?.notConnectedParticipantsIsFirstPageFetched,notConnectedParticipantsIsNextPageFetching:a?.notConnectedParticipantsIsNextPageFetching}),isolateAs:"ConferenceParticipantsListStore"}),this.participantsFilter$=this.stateChanged.pipe((0,h.U)(a=>a?.participantsFilter),(0,_.x)(),(0,s.yvm)(!1)),this.activeListSection$=this.getReactiveStateProperty("activeListSection"),this.openedPane$=this.getReactiveStateProperty("openedPane"),this.prevOpenedPane$=this.getReactiveStateProperty("prevOpenedPane"),this.selectedParticipantId$=this.getReactiveStateProperty("selectedParticipantId"),this.isParticipantsSelectionMode$=this.getReactiveStateProperty("isParticipantsSelectionMode"),this.selectedParticipantIds$=this.getReactiveStateProperty("selectedParticipantIds"),this.participantsSearchValue$=this.getReactiveStateProperty("participantsSearchValue"),this.notConnectedParticipantsHasNextPage$=this.getReactiveStateProperty("notConnectedParticipantsHasNextPage"),this.notConnectedParticipantsIsFirstPageFetching$=this.getReactiveStateProperty("notConnectedParticipantsIsFirstPageFetching"),this.notConnectedParticipantsIsFirstPageFetched$=this.getReactiveStateProperty("notConnectedParticipantsIsFirstPageFetched"),this.notConnectedParticipantsIsNextPageFetching$=this.getReactiveStateProperty("notConnectedParticipantsIsNextPageFetching"),this.setInitialState()}get participantsFilter(){return this.getStateProperty("participantsFilter")}get activeListSection(){return this.getStateProperty("activeListSection",!1)}get openedPane(){return this.getStateProperty("openedPane",!1)}get prevOpenedPane(){return this.getStateProperty("prevOpenedPane",!1)}get selectedParticipantId(){return this.getStateProperty("selectedParticipantId",!1)}get isParticipantsSelectionMode(){return this.getStateProperty("isParticipantsSelectionMode",!1)}get selectedParticipantIds(){return this.getStateProperty("selectedParticipantIds",!1)}get participantsSearchValue(){return this.getStateProperty("participantsSearchValue",!1)}get notConnectedParticipantsHasNextPage(){return this.getStateProperty("notConnectedParticipantsHasNextPage",!1)}get notConnectedParticipantsIsFirstPageFetching(){return this.getStateProperty("notConnectedParticipantsIsFirstPageFetching",!1)}get notConnectedParticipantsIsFirstPageFetched(){return this.getStateProperty("notConnectedParticipantsIsFirstPageFetched",!1)}get notConnectedParticipantsIsNextPageFetching(){return this.getStateProperty("notConnectedParticipantsIsNextPageFetching",!1)}setInitialState(){this.setState({selectedParticipantId:null,openedPane:e.Uj.LIST,prevOpenedPane:null,participantsFilter:e.wn.CONNECTED,isParticipantsSelectionMode:!1,selectedParticipantIds:[],activeListSection:e.Qu.PARTICIPANTS,participantsSearchValue:"",notConnectedParticipantsHasNextPage:!0,notConnectedParticipantsIsFirstPageFetching:!1,notConnectedParticipantsIsFirstPageFetched:!1,notConnectedParticipantsIsNextPageFetching:!1},"INIT_STATE")}setSelectedParticipantId(a){this.setState({selectedParticipantId:a},"conference_session__participants_list__set_selected_participant_id")}setOpenedPane(a){this.setState({openedPane:a},"conference_session__participants_list__set_opened_pane")}setParticipantsFilter(a){this.setState({participantsFilter:a},"conference_session__participants_list__set_filter")}setParticipantsSelectionMode(a){this.setState({isParticipantsSelectionMode:a},"conference-session__set_is_participants_selection_mode")}setSelectedParticipantIds(a){this.setState({selectedParticipantIds:a},"conference-session__set_selected_participant_ids")}setActiveListSection(a){this.setState({activeListSection:a},"conference-session__set_active_list_section")}setParticipantsSearchValue(a){this.setState({participantsSearchValue:a},"conference-session__set_participants_search_value")}setNotConnectedParticipantsHasNextPage(a){this.setState({notConnectedParticipantsHasNextPage:a},"conference-session__set_not_connected_participants_has_next_page")}setNotConnectedParticipantsIsFirstPageFetching(a){this.setState({notConnectedParticipantsIsFirstPageFetching:a},"conference-session__set_not_connected_participants_is_first_page_fetching")}setNotConnectedParticipantsIsNextPageFetching(a){this.setState({notConnectedParticipantsIsNextPageFetching:a},"conference-session__set_not_connected_participants_is_next_page_fetching")}setNotConnectedParticipantsIsFirstPageFetched(a){this.setState({notConnectedParticipantsIsFirstPageFetched:a},"conference-session__set_not_connected_participants_is_next_page_fetched")}setPrevOpenedPane(a){this.setState({prevOpenedPane:a},"conference-session__set_prev_opened_pane")}}return p.\u0275fac=function(a){return new(a||p)},p.\u0275prov=f.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()},49062:(z,R,t)=>{t.d(R,{D:()=>e,DC:()=>i,Qu:()=>_,Uj:()=>h,wn:()=>s});var e=(()=>((e=e||{}).ALL="ALL",e.CONNECTED="CONNECTED",e.NOT_CONNECTED="NOT_CONNECTED",e))();const s={ALL:{type:e.ALL,title:"CONFERENCE_SESSION__PARTICIPANTS_LIST__FILTER_ALL"},CONNECTED:{type:e.CONNECTED,title:"CONFERENCE_SESSION__PARTICIPANTS_LIST__FILTER_CONNECTED"},NOT_CONNECTED:{type:e.NOT_CONNECTED,title:"CONFERENCE_SESSION__PARTICIPANTS_LIST__FILTER_NOT_CONNECTED"}};var h=(()=>((h=h||{})[h.LIST=0]="LIST",h[h.PARTICIPANT_INFO=1]="PARTICIPANT_INFO",h[h.SETTINGS=2]="SETTINGS",h[h.SEARCH_PARTICIPANTS=3]="SEARCH_PARTICIPANTS",h))(),_=(()=>((_=_||{})[_.PARTICIPANTS=0]="PARTICIPANTS",_[_.LOBBY=1]="LOBBY",_[_.GROUPS=2]="GROUPS",_))();function i(f){return void 0!==f.mediaState}},67756:(z,R,t)=>{t.d(R,{t:()=>a});var e=t(68053),s=t(39947),h=t(54355),_=t(46782),i=t(70964),f=t(5469);let r=(()=>{class o extends i.m{constructor(c){super(c)}initUpdater(){this.cometService.getChildNumberedEventByClass$("ConferenceSessionParticipantReactionEvent").pipe((0,_.R)(this.takeUntilSubj)).subscribe(this.addReaction.bind(this))}addReaction({reaction:c,name:d,participantId:v,activityTime:I}){this.storeService.addReaction({reaction:c,name:d,participantId:v,activityTime:I})}}return o.\u0275fac=function(c){return new(c||o)(h.LFG(f.y_))},o.\u0275prov=h.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var p=t(28728),u=t(6190);let a=(()=>{class o extends s.F{get reactionsNotifications(){return this.getStateProperty("reactionsNotifications",!1)}get lastUsersReactions(){return this.getStateProperty("lastUsersReactions",!1)}get lastReaction(){return this.getStateProperty("lastReaction",!1)}constructor(c,d,v){super({stateSliceSelector:I=>({lastReaction:I?.lastReaction,reactionsNotifications:I?.reactionsNotifications,lastUsersReactions:I?.lastUsersReactions})},c),this.updater=c,this.conferenceSessionStoreService=d,this.translate=v,this.lastReactionId=0,this.reactionsNotifications$=this.getReactiveStateProperty("reactionsNotifications"),this.lastUsersReactions$=this.getReactiveStateProperty("lastUsersReactions"),this.lastReaction$=this.getReactiveStateProperty("lastReaction"),this.setInitialState()}setInitialState(){this.lastReactionId=0,this.setState({lastReaction:e.J.LIKE,reactionsNotifications:[],lastUsersReactions:[]},"INIT_STATE")}setLastReaction(c){this.setState({lastReaction:c},"conference-session__set-last-reaction")}addReaction(c){const d=this.getNewReaction(c),v=this.getNewLastReaction(c),I=[...this.lastUsersReactions.filter(({participantId:m})=>m!==c.participantId),v];this.setState({reactionsNotifications:[...this.reactionsNotifications,d],lastUsersReactions:I},"conference-session__add-reaction")}removeReaction(c){const d=this.reactionsNotifications.filter(v=>v.id!==c);this.setState({reactionsNotifications:d},"conference-session__remove-reaction")}removeLastReaction(){const c=this.reactionsNotifications.slice(1);this.setState({reactionsNotifications:c},"conference-session__remove-last-reaction")}removeLastUsersReaction(c){const d=this.lastUsersReactions.filter(v=>v.participantId!==c);this.setState({lastUsersReactions:d},"conference-session__remove-last-users-reaction")}getNewReaction({name:c,participantId:d,reaction:v}){return{reaction:v,name:this.conferenceSessionStoreService.conferenceMediaInfo.participantId===d?this.translate.instant("CONFERENCE_SESSION__YOUR_REACTION"):c,id:++this.lastReactionId}}getNewLastReaction({participantId:c,reaction:d,activityTime:v}){return{participantId:c,reaction:d,activityTime:v}}}return o.\u0275fac=function(c){return new(c||o)(h.LFG(r),h.LFG(p.mK),h.LFG(u.sK))},o.\u0275prov=h.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},77097:(z,R,t)=>{t.d(R,{mK:()=>X,yl:()=>F,P4:()=>V,rY:()=>J,Od:()=>D,Du:()=>b});var e=t(70291),s=t(59600),h=t(31652),_=t(49062),i=t(911),f=t(97380),r=t(76610),p=t(33637),u=t(79765),a=t(88002),o=t(87519),l=t(59746),c=t(45435),d=t(8040),v=t(39947),I=t(623),m=t(54355),g=t(23316),E=t(75261),n=t(85762),S=t(87177),C=t(76133),T=t(5469),P=t(62152),A=t(26215),M=t(46782),L=t(70964),N=t(69347);let W=(()=>{class K extends L.m{constructor(O,U,k,te){super(O),this.conferenceFilesStoreService=U,this.conferenceParticipantsListStoreService=k,this.loginService=te,this._soundActivities$=new A.X({}),this.soundActivities$=this._soundActivities$.asObservable()}initUpdater(){this.cometService.getChildNumberedEventByClass$("ActiveConferenceSessionChangedEvent").pipe((0,M.R)(this.takeUntilSubj)).subscribe(this.updateCurrentSession.bind(this)),this.cometService.getChildNumberedEventByClass$("MediaRoomStreamChangedEvent").pipe((0,M.R)(this.takeUntilSubj)).subscribe(this.updateMediaStream.bind(this)),this.cometService.getChildNumberedEventByClass$("ConferenceSessionParticipantPermissionsChangeEvent").pipe((0,M.R)(this.takeUntilSubj)).subscribe(this.updateParticipantPermissions.bind(this)),this.cometService.getChildNumberedEventByClass$("ConferenceSessionRecordingStateChangedEvent").pipe((0,M.R)(this.takeUntilSubj)).subscribe(this.updateRecording.bind(this)),this.cometService.getChildNumberedEventByClass$("ConferenceSessionTranscriptionStateChangedEvent").pipe((0,M.R)(this.takeUntilSubj)).subscribe(this.updateTranscription.bind(this)),this.cometService.getChildNumberedEventByClass$("ConferenceSessionPresentationChangeEvent").pipe((0,M.R)(this.takeUntilSubj)).subscribe(this.updateMediaState.bind(this)),this.cometService.getChildNumberedEventByClass$("MediaParticipantStateChangedEvent").pipe((0,M.R)(this.takeUntilSubj)).subscribe(this.updateParticipantState.bind(this)),this.cometService.getChildNumberedEventByClass$("ParticipantChangeRoleEvent").pipe((0,M.R)(this.takeUntilSubj)).subscribe(this.updateParticipantRole.bind(this)),this.cometService.getChildNumberedEventByClass$("ConferenceSessionParticipantInterpretationLangPairChangeEvent").pipe((0,M.R)(this.takeUntilSubj)).subscribe(this.updateInterpreterLanguagePair.bind(this)),this.cometService.getChildNumberedEventByClass$("ConferenceSessionPresentationStateChangeEvent").pipe((0,M.R)(this.takeUntilSubj)).subscribe(this.updatePresentationState.bind(this)),this.cometService.getChildNumberedEventByClass$("ConferenceSessionParticipantJoinEvent").pipe((0,M.R)(this.takeUntilSubj)).subscribe(this.joinParticipant.bind(this)),this.cometService.getChildNumberedEventByClass$("ConferenceSessionParticipantLeaveEvent").pipe((0,M.R)(this.takeUntilSubj)).subscribe(this.leaveParticipant.bind(this)),this.cometService.getChildNumberedEventByClass$("ConferenceSessionParticipantsAddEvent").pipe((0,M.R)(this.takeUntilSubj)).subscribe(this.addInvitedParticipants.bind(this)),this.cometService.getChildNumberedEventByClass$("ConferenceSessionParticipantsRemoveEvent").pipe((0,M.R)(this.takeUntilSubj)).subscribe(this.removeInvitedParticipants.bind(this)),this.cometService.getChildNumberedEventByClass$("PublishPresetsChangedEvent").pipe((0,M.R)(this.takeUntilSubj)).subscribe(this.updatePublishQualityPreset.bind(this)),this.cometService.getChildNumberedEventByClass$("OwnConferenceSessionParticipantMediaSettingsChangeEvent").pipe((0,M.R)(this.takeUntilSubj)).subscribe(this.updateMediaSettings.bind(this)),this.cometService.getChildNumberedEventByClass$("ConferenceSessionParticipantDataChangeEvent").pipe((0,M.R)(this.takeUntilSubj)).subscribe(this.updateParticipantData.bind(this)),this.cometService.getChildNumberedEventByClass$("ConferenceSessionParticipantBroadcastLangChangeEvent").pipe((0,M.R)(this.takeUntilSubj)).subscribe(this.updateBroadcastLanguage.bind(this)),this.cometService.getChildNumberedEventByClass$("ConferenceSessionParticipantTranslationDirectionChangeEvent").pipe((0,M.R)(this.takeUntilSubj)).subscribe(this.updateTranslationDirection.bind(this)),this.cometService.getChildNumberedEventByClass$("ConferenceSessionJoinDataChangedEvent").pipe((0,M.R)(this.takeUntilSubj)).subscribe(this.updateJoinData.bind(this)),this.cometService.getChildNumberedEventByClass$("ConferenceSessionLayoutChangedEvent").pipe((0,M.R)(this.takeUntilSubj)).subscribe(this.updateConferenceLayout.bind(this)),this.cometService.getChildNumberedEventByClass$("ParticipantHandStateChangedEvent").pipe((0,M.R)(this.takeUntilSubj)).subscribe(this.updateParticipantHandState.bind(this)),this.cometService.getChildNumberedEventByClass$("ParticipantSoundActivityChangeEvent").pipe((0,M.R)(this.takeUntilSubj)).subscribe(this.processSoundActivity.bind(this)),this.cometService.getChildNumberedEventByClass$("ParticipantCallRequestEvent").pipe((0,M.R)(this.takeUntilSubj)).subscribe(this.processCall.bind(this)),this.cometService.getChildNumberedEventByClass$("ConferenceSessionAttentionRequestChangedEvent").pipe((0,M.R)(this.takeUntilSubj)).subscribe(this.handleAttentionRequestChanges.bind(this)),this.cometService.getChildNumberedEventByClass$("ConferenceSessionWebinarUrlChangedEvent").pipe((0,M.R)(this.takeUntilSubj)).subscribe(this.processWebinarUrlChanged.bind(this))}updateParticipant(O,U,k=""){this.storeService.updateParticipant(O,U,k)}updateNotConnectedParticipant(O,U,k=""){this.storeService.updateNotConnectedParticipant(O,U,k)}handleAttentionRequestChanges(O){if(this.storeService.currentSession.conferenceSessionId===O.conferenceSessionId){const k=this.storeService.conferenceMediaInfo;k.attentionRequested=O.attentionRequested,this.storeService.setMediaInfo(k)}else this.storeService.setAttentionRequestedGroup(O.attentionRequested?{name:O.conferenceSessionName,groupId:O.conferenceSessionId}:null)}processSoundActivity(O){const k=O.participantSoundActivities.reduce((te,fe)=>({...te,[fe.key]:fe.value}),{});this._soundActivities$.next(k),window.clearTimeout(this.resetSoundActivityTimeoutId),this.resetSoundActivityTimeoutId=window.setTimeout(()=>{this._soundActivities$.next({})},T._Z.settings.CONFERENCE_SESSION_RESET_SOUND_ACTIVITY_INTERVAL_MS)}updateCurrentSession(O){if(!this.storeService.conferenceMediaInfo)return;const U=(0,r.Z)(O.conferenceSession);U.attendeePermissions=(0,P.e)(U.attendeePermissions,this.storeService.pannedConferenceUpdateInfo.changedAttendeePermissions);const k={...this.storeService.conferenceMediaInfo,conferenceSession:U};this.storeService.setMediaInfo(k,"update_media_info_by_ActiveConferenceSessionChangedEvent")}updateMediaStream(O){this.storeService.conferenceMediaInfo&&this.updateParticipant(O.participantId,U=>{const k=(0,h.qk)(U)?.[h.Ah[O.streamType]];return k&&(k.state=O.mediaState),U},"update_media_info_by_MediaRoomStreamChangedEvent")}updateParticipantPermissions(O){if(O.messageOwnerProfileId===this.loginService.profileId)return;this.updateParticipant(O.participantId,k=>({...k,permissions:O.permissions}),"update_media_info_by_ParticipantChangePermissionsEvent");const U={...this.storeService.conferenceMediaInfo};U.ownParticipantData.subscribeLimit=O.subscribeLimit,this.storeService.setMediaInfo(U,"update_media_info_by_ParticipantChangePermissionsEvent")}updateRecording(O){const U=this.storeService.conferenceMediaInfo,k={...U,conferenceSession:{...U.conferenceSession,recording:O.recording}};this.storeService.setMediaInfo(k,"update_media_info_by_ConferenceSessionRecordingStateChangedEvent")}updateTranscription(O){const U=this.storeService.conferenceMediaInfo,k={...U,conferenceSession:{...U.conferenceSession,transcribing:O.transcribing}};this.storeService.setMediaInfo(k,"update_media_info_by_ConferenceSessionTranscriptionStateChangedEvent")}updateMediaState(O){if(this.conferenceFilesStoreService.isDemonstrationStopping&&O.presentation||this.conferenceFilesStoreService.isDemonstrationStarting&&!O.presentation)return;const U={...this.storeService.conferenceMediaInfo};U.demonstrationState=O.demonstrationState,U.presentation=O.presentation,this.storeService.setMediaInfo(U,"update_media_info_by_ConferenceSessionPresentationChangeEvent")}updateParticipantState(O){this.updateParticipant(O.participantId,U=>({...U,mediaState:O.activeState}),"update_media_info_by_MediaParticipantStateChangedEvent")}updateParticipantRole(O){this.storeService.participants.find(k=>k.participantId===O.participantId)?this.updateParticipant(O.participantId,k=>({...k,roles:O.roles}),"update_media_info_by_ParticipantChangeRoleEvent"):this.updateNotConnectedParticipant(O.participantId,k=>({...k,roles:O.roles}),"ParticipantChangeRoleEvent"),this.updateRootGroupParticipant(O)}updateRootGroupParticipant(O){const U=this.storeService.rootGroupParticipant,k=this.storeService.groupedBy;U?.participantId===O.participantId&&k===O.conferenceSessionId&&(U.roles=O.roles,this.storeService.setRootGroupParticipant((0,r.Z)(U)))}updateInterpreterLanguagePair(O){this.updateParticipant(O.participantId,U=>({...U,settings:{...U.settings,interpreterLanguagesPair:O.interpreterLanguagesPair}}),"update_media_info_by_InterpreterLanguagePairChangedEvent"),this.updateNotConnectedParticipant(O.participantId,U=>({...U,settings:{...U.settings,interpreterLanguagesPair:O.interpreterLanguagesPair}}),"update_media_info_by_InterpreterLanguagePairChangedEvent")}updateBroadcastLanguage(O){this.updateParticipant(O.participantId,U=>{const k=U.settings?{...U.settings,broadcastLanguage:O.broadcastLanguage??C.S.ORIGINAL}:void 0;return{...U,settings:k}},"update_media_info_by_ConferenceSessionParticipantBroadcastLangChangeEvent")}updateTranslationDirection(O){this.updateParticipant(O.participantId,U=>{const k=U.webMediaInfo?{...U.webMediaInfo,translationDirection:O.translationDirection}:void 0;return{...U,webMediaInfo:k}},"update_media_info_by_ConferenceSessionParticipantTranslationDirectionChangeEvent")}updatePresentationState(O){const U={...this.storeService.conferenceMediaInfo};U.presentation?(U.presentation={...U.presentation,state:O.presentationState},this.storeService.setMediaInfo(U,"update_media_info_by_ConferenceSessionPresentationStateChangeEvent")):console.warn("Attempt to update conferenceMediaInfo.presentation via ConferenceSessionPresentationStateChangeEvent which is undefined")}joinParticipant(O){if(!this.storeService.conferenceMediaInfo)return;const U={...this.storeService.conferenceMediaInfo};if(!U?.participants)return;const k=U.participants.findIndex(({participantId:te})=>te===O.participant.participantId);if(-1===k)U.participants=[...U.participants,O.participant];else{const te=U.participants[k],fe=te.webMediaInfo,re=O.participant,ve=O.participant.vvoipMediaInfo;O.participant.webMediaInfo&&(re.vvoipMediaInfo=te.vvoipMediaInfo),ve&&(re.webMediaInfo=fe),U.participants[k]=re}this.storeService.setMediaInfo(U,"update_media_info_by_ConferenceSessionParticipantJoinEvent"),this.storeService.removeNotConnectedParticipantsByProfileIds([O.participant.profileId])}leaveParticipant(O){if(!this.storeService.conferenceMediaInfo)return;const U={...this.storeService.conferenceMediaInfo},k=U.participants.findIndex($=>$.participantId===O.participantId);if(-1===k)return void console.error(`Attempt to remove participant which does not exist from conference with id: ${O.participantId}`);const te=U.participants[k];if(O.participantType===s.AV.WEB&&O.messageOwnerProfileId===this.loginService.profileId||te.webMediaInfo&&O.participantType===s.AV.VVoIP||te.vvoipMediaInfo&&O.participantType===s.AV.WEB)return;if(te.webMediaInfo&&te.vvoipMediaInfo)return O.participantType===s.AV.VVoIP?te.vvoipMediaInfo=void 0:te.webMediaInfo=void 0,void this.storeService.setMediaInfo(U,"update_media_info_by_ConferenceSessionParticipantLeaveEvent");te.vvoipMediaInfo&&this.storeService.resetSelectedParticipant(),U.participants.splice(k,1),U.participants=[...U.participants],this.storeService.setMediaInfo(U,"update_media_info_by_ConferenceSessionParticipantLeaveEvent");const re=this.conferenceParticipantsListStoreService.openedPane===_.Uj.SEARCH_PARTICIPANTS,_e=te.name.toLowerCase().includes(this.conferenceParticipantsListStoreService.participantsSearchValue.toLowerCase());if(!re||_e){if(!te.isRegisteredUser&&!te.isInvited)return void(this.conferenceParticipantsListStoreService.selectedParticipantId===te.participantId&&this.conferenceParticipantsListStoreService.setOpenedPane(_.Uj.LIST));this.storeService.addNotConnectedParticipants([{participantId:te.participantId,avatarResourceId:te.avatarResourceId,name:te.name,profileId:te.profileId,roles:te.roles,isRegisteredUser:te.isRegisteredUser,inviteResponseType:te.inviteResponseType,inviteResponseDate:te.inviteResponseDate,isInvited:te.isInvited}])}}addInvitedParticipants(O){this.conferenceParticipantsListStoreService.notConnectedParticipantsIsFirstPageFetched&&this.storeService.addNotConnectedParticipants(O.participants)}removeInvitedParticipants(O){this.storeService.removeParticipantsByParticipantsIds(O.participantIds)}updatePublishQualityPreset({activePreset:O}){const U={...this.storeService.conferenceMediaInfo,qualityPreset:O};this.storeService.setMediaInfo(U,"update_media_info_by_PublishPresetsChangedEvent")}updateMediaSettings({maxMediaProfile:O,outputAudioGain:U,layout:k}){const te=this.storeService.conferenceMediaInfo,fe={...te,ownParticipantData:{...te.ownParticipantData,maxMediaProfile:O,outputAudioGain:U,layout:k}};this.storeService.setMediaInfo(fe,"update_media_info_by_OwnConferenceSessionParticipantMediaSettingsChangeEvent")}updateParticipantData(O){this.storeService.conferenceMediaInfo.participants.find(te=>te.participantId===O.participantId)?this.updateParticipant(O.participantId,te=>({...te,avatarResourceId:O.avatarResourceId,name:O.name}),"ConferenceSessionParticipantDataChangeEvent"):this.updateNotConnectedParticipant(O.participantId,te=>({...te,avatarResourceId:O.avatarResourceId,name:O.name}),"ConferenceSessionParticipantDataChangeEvent")}updateJoinData(O){this.storeService.setJoinData(O.joinData,"ConferenceSessionJoinDataChangedEvent")}updateConferenceLayout(O){const U=this.storeService.conferenceMediaInfo,k={...U,conferenceSession:{...U.conferenceSession,layout:O.layout}};this.storeService.setMediaInfo(k,"update_media_info_by_ConferenceSessionLayoutChangedEvent")}updateParticipantHandState(O){this.updateParticipant(O.participantId,k=>(k.webMediaInfo.handState=O.handRaised,k),"update_media_info_by_ParticipantHandStateChangedEvent");const U=this.storeService.conferenceMediaInfo.participants.find(({participantId:k})=>O.participantId===k);this.storeService.setLastParticipantHandUp(O.handRaised?U:null)}processCall(O){this.storeService.setParticipantCallRequest(O.participantId,{status:O.status,started:O.started})}processWebinarUrlChanged(O){if(!this.storeService.conferenceMediaInfo)return void console.warn("conferenceMediaInfo is empty during ConferenceSessionWebinarUrlChangedEvent processing");const U={...this.storeService.conferenceMediaInfo.webinarTranslationInfo};switch(O.mediaPublicationType){case S.Uj.WEBINAR_MAIN_DATA:U.flvMainContentUrl=O.flvSubscribeUrl;break;case S.Uj.WEBINAR_ADDITIONAL_DATA:U.flvAdditionalContentUrl=O.flvSubscribeUrl;break;default:return void console.warn(`Unsupported mediaPublicationType: ${O.mediaPublicationType} during ConferenceSessionWebinarUrlChangedEvent processing`)}const k={...this.storeService.conferenceMediaInfo,webinarTranslationInfo:U};switch(this.storeService.setMediaInfo(k),O.mediaPublicationType){case S.Uj.WEBINAR_MAIN_DATA:this.storeService.needReconnectMainFlv$.next();break;case S.Uj.WEBINAR_ADDITIONAL_DATA:this.storeService.needReconnectAdditionalFlv$.next()}}}return K.\u0275fac=function(O){return new(O||K)(m.LFG(T.y_),m.LFG(N.b),m.LFG(g.C),m.LFG(T.r6))},K.\u0275prov=m.Yz7({token:K,factory:K.\u0275fac,providedIn:"root"}),K})();const b="turnOnMicOnStart",V="turnOnCamOnStart",D="turnOnMicOnRestoreConference",F="turnOnCamOnRestoreConference",J="turnOnMainVideoMutedOnRestoreConference",H="showDeviceSettingsOnStart",Y="SHOW_LEFT_PANEL_STORAGE_STATE",ee="IS_SMALL_LEFT_PANEL_STORAGE_STATE";let X=(()=>{class K extends v.F{get activeTab(){return this.state.activeTab}get hasActiveTab(){return this.activeTab!==I.zr.NONE}get UI(){return this.state.UI}get isReactionsEnabled(){return!!this.state.conferenceMediaInfo?.conferenceSession?.features?.includes(s.vs.REACTIONS)}get groupedBy(){return this.state.conferenceMediaInfo?.conferenceSession.groupedBy}get rootGroupParticipant(){return this.getStateProperty("rootGroupParticipant",!1)}get isAudioOn(){return this.getStateProperty("isAudioOn",!1)}get isVideoOn(){return this.getStateProperty("isVideoOn",!1)}get isJoined(){return this.getStateProperty("isJoined",!1)}get conferenceMediaInfo(){return this.getStateProperty("conferenceMediaInfo",!1)}get notConnectedParticipantsMeta(){return this.getStateProperty("notConnectedParticipantsMeta",!1)}get currentSession(){return this.conferenceMediaInfo?.conferenceSession}get openedPanes(){return this.getStateProperty("openedPanes",!1)}get isChatOpened(){return this.openedPanes.includes(I.nu.CHAT)}get isParticipantsListOpened(){return this.openedPanes.includes(I.nu.PARTICIPANTS_LIST)}get joinData(){return this.getStateProperty("joinData",!1)}get isRecording(){return this.getStateProperty("conferenceMediaInfo",!1).conferenceSession.recording}get isTranscript(){return this.getStateProperty("conferenceMediaInfo",!1).conferenceSession.transcribing}get lobbyConferenceSession(){return this.getStateProperty("lobbyConferenceSession",!1)}get joinedWithEventBusId(){return this.getStateProperty("joinedWithEventBusId",!1)}get participantCallsProgresses(){return this.getStateProperty("participantCallsProgresses",!1)}get attentionRequested(){return this.conferenceMediaInfo?.attentionRequested??!1}get conferenceSessionId(){return this.getStateProperty("conferenceSessionId",!1)}get showDeviceSettingsOnStart(){return this.getStateProperty("showDeviceSettingsOnStart",!1)}get participants(){return this.conferenceMediaInfo?.participants??[]}get isConferenceFinishedManually(){return this.getStateProperty("isConferenceFinishedManually",!1)}get isHeaderFooterShown(){return this.getStateProperty("isHeaderFooterShown",!1)}constructor(O,U,k,te,fe,de){super({stateSliceSelector:re=>({conferenceMediaInfo:re?.conferenceMediaInfo,isMainVideoMuted:re?.isMainVideoMuted,originalLanguageVolume:re?.originalLanguageVolume,originalLanguageSignalUrl:re?.originalLanguageSignalUrl,isAudioOn:re?.isAudioOn,isVideoOn:re?.isVideoOn,conferenceSessionId:re?.conferenceSessionId,isAdditionalContentDemonstrationOn:re?.isAdditionalContentDemonstrationOn,showDeviceSettingsOnStart:re?.showDeviceSettingsOnStart,activeTab:re?.activeTab,isJoining:re?.isJoining,isJoined:re?.isJoined,joinedWithEventBusId:re?.joinedWithEventBusId,openedPanes:re?.openedPanes,notConnectedParticipantsMeta:re?.notConnectedParticipantsMeta,joinData:re?.joinData,isJoinDataFetching:re?.isJoinDataFetching,lastParticipantHandUp:re?.lastParticipantHandUp,demonstrateTab:re?.demonstrateTab,lobbyConferenceSession:re?.lobbyConferenceSession,isConferenceSessionStarting:re?.isConferenceSessionStarting,participantCallsProgresses:re?.participantCallsProgresses,isRootGroupParticipantFetching:re?.isRootGroupParticipantFetching,rootGroupParticipant:re?.rootGroupParticipant,isLeaveGroupButtonDisabled:re?.isLeaveGroupButtonDisabled,attentionRequestedGroup:re?.attentionRequestedGroup,isConferenceFinishedManually:re?.isConferenceFinishedManually,showLeftPanel:re?.showLeftPanel,isSmallLeftPanel:re?.isSmallLeftPanel,isHeaderFooterShown:re?.isHeaderFooterShown,mainPlacementContent:re?.mainPlacementContent,UI:re?.UI})},te),this.conferenceParticipantsListStoreService=O,this.cookieService=U,this.mediaSourceStoreService=k,this.updater=te,this.loginService=fe,this.toastr=de,this.pannedConferenceUpdateInfo={request:{},changedAttendeePermissions:[]},this.openedPanes$=this.getReactiveStateProperty("openedPanes"),this.mainVideoContent$=this.getReactiveStateProperty("mainPlacementContent"),this.additionalVideoContent$=this.mainVideoContent$.pipe((0,a.U)(re=>re===e.LG.MAIN_CONTENT?e.LG.ADDITIONAL_CONTENT:e.LG.MAIN_CONTENT)),this.isAudioOn$=this.getReactiveStateProperty("isAudioOn"),this.isVideoOn$=this.getReactiveStateProperty("isVideoOn"),this.conferenceMediaInfo$=this.getReactiveStateProperty("conferenceMediaInfo"),this.isRecording$=this.conferenceMediaInfo$.pipe((0,a.U)(re=>!!re?.conferenceSession.recording)),this.isTranscribing$=this.conferenceMediaInfo$.pipe((0,a.U)(re=>!!re?.conferenceSession.transcribing)),this.isJoining$=this.getReactiveStateProperty("isJoining"),this.isJoined$=this.getReactiveStateProperty("isJoined").pipe((0,i.yvm)(!1)),this.isChatOpened$=this.openedPanes$.pipe((0,a.U)(re=>re.includes(I.nu.CHAT)),(0,o.x)()),this.isParticipantsListOpened$=this.openedPanes$.pipe((0,a.U)(re=>re.includes(I.nu.PARTICIPANTS_LIST)),(0,o.x)()),this.participants$=this.conferenceMediaInfo$.pipe((0,a.U)(re=>re?.participants||[]),(0,l.QV)(p.P)),this.notConnectedParticipantsMeta$=this.getReactiveStateProperty("notConnectedParticipantsMeta").pipe((0,l.QV)(p.P)),this.ownParticipantData$=this.conferenceMediaInfo$.pipe((0,a.U)(re=>re?.ownParticipantData)),this.conferenceSession$=this.conferenceMediaInfo$.pipe((0,a.U)(re=>re?.conferenceSession)),this.availableInterpretationLanguages$=this.conferenceMediaInfo$.pipe((0,a.U)(re=>re?.conferenceSession.availableInterpretationLanguages),(0,o.x)()),this.qualityPreset$=this.conferenceMediaInfo$.pipe((0,a.U)(re=>re?.qualityPreset),(0,c.h)(re=>!!re),(0,o.x)()),this.maxMediaProfileId$=this.conferenceMediaInfo$.pipe((0,a.U)(re=>re?.ownParticipantData?.maxMediaProfile),(0,c.h)(re=>!!re),(0,o.x)()),this.isMainVideoMuted$=this.getReactiveStateProperty("isMainVideoMuted"),this.originalLanguageVolume$=this.getReactiveStateProperty("originalLanguageVolume"),this.originalLanguageSignalUrl$=this.getReactiveStateProperty("originalLanguageSignalUrl"),this.isJoinDataFetching$=this.getReactiveStateProperty("isJoinDataFetching"),this.joinData$=this.getReactiveStateProperty("joinData"),this.lastParticipantHandUp$=this.getReactiveStateProperty("lastParticipantHandUp").pipe((0,o.x)((re,_e)=>re?.participantId===_e?.participantId)),this.activeTab$=this.getReactiveStateProperty("activeTab"),this.hasActiveTab$=this.activeTab$.pipe((0,a.U)(re=>re!==I.zr.NONE)),this.isFullscreen$=this.getReactiveStateProperty("UI").pipe((0,a.U)(re=>re.isFullscreen)),this.showLeftPanel$=this.getReactiveStateProperty("showLeftPanel"),this.isSmallLeftPanel$=this.getReactiveStateProperty("isSmallLeftPanel"),this.isAdditionalContentDemonstrationOn$=this.getReactiveStateProperty("isAdditionalContentDemonstrationOn"),this.demonstrateTab$=this.getReactiveStateProperty("demonstrateTab"),this.showDeviceSettingsOnStart$=this.stateChanged.pipe((0,a.U)(re=>re.showDeviceSettingsOnStart)),this.soundActivities$=this.updater.soundActivities$,this.lobbyConferenceSession$=this.stateChanged.pipe((0,a.U)(re=>re.lobbyConferenceSession)),this.isConferenceSessionStarting$=this.stateChanged.pipe((0,a.U)(re=>re.isConferenceSessionStarting),(0,o.x)()),this.participantCallsProgresses$=this.getReactiveStateProperty("participantCallsProgresses"),this.attentionRequested$=this.conferenceMediaInfo$.pipe((0,a.U)(re=>re?.attentionRequested),(0,o.x)()),this.groupedBy$=this.stateChanged.pipe((0,a.U)(re=>re?.conferenceMediaInfo?.conferenceSession.groupedBy),(0,o.x)()),this.leaveGroupButtonDisabled$=this.stateChanged.pipe((0,a.U)(re=>re?.isLeaveGroupButtonDisabled),(0,o.x)()),this.rootGroupParticipant$=this.getReactiveStateProperty("rootGroupParticipant"),this.isReactionsEnabled$=this.stateChanged.pipe((0,a.U)(re=>!!re?.conferenceMediaInfo?.conferenceSession.features?.includes(s.vs.REACTIONS))),this.attentionRequestedGroup$=this.getReactiveStateProperty("attentionRequestedGroup"),this.conferenceSessionId$=this.getReactiveStateProperty("conferenceSessionId"),this.compareParticipantsByRole=(re,_e)=>{const ve=this.conferenceMediaInfo.conferenceSession.ownerProfileId;if(!ve)return 0;const $=(0,h.tP)(ve,re),Z=(0,h.tP)(ve,_e);return $===h.vP?-1:Z===h.vP?1:(0,h.vZ)(re,_e)},this.NOT_CONNECTED_PARTICIPANTS_SORT_ORDER=[this.compareParticipantsByRole,h.JG],this.isHeaderFooterShown$=this.getReactiveStateProperty("isHeaderFooterShown"),this.needReconnectMainFlv$=new u.xQ,this.needReconnectAdditionalFlv$=new u.xQ,this.fallbackCookie(),this.setInitialState()}setInitialState(){const O="true"===this.cookieService.get(H);this.setState({isMainVideoMuted:!d.N.production,originalLanguageVolume:20,originalLanguageSignalUrl:null,isAudioOn:!1,isVideoOn:!1,isAdditionalContentDemonstrationOn:!1,showDeviceSettingsOnStart:O,activeTab:I.zr.NONE,isJoining:!1,isJoined:!1,joinedWithEventBusId:null,openedPanes:[],notConnectedParticipantsMeta:{participants:[],count:0},joinData:null,isJoinDataFetching:!1,lastParticipantHandUp:null,demonstrateTab:i.I8J?I.Ct.SCREEN:I.Ct.DOCUMENT,conferenceMediaInfo:null,lobbyConferenceSession:null,isConferenceSessionStarting:!1,participantCallsProgresses:{},isRootGroupParticipantFetching:!1,rootGroupParticipant:null,isLeaveGroupButtonDisabled:!1,attentionRequestedGroup:null,isConferenceFinishedManually:!1,showLeftPanel:this.getInitialShowLeftPanelState(),isSmallLeftPanel:this.getInitialIsSmallLeftPanelState(),isHeaderFooterShown:!0,mainPlacementContent:e.LG.MAIN_CONTENT,UI:{wasInFullScreen:!1,isFullscreen:!1}},"INIT_STATE")}setShowLeftPanel(O){this.setState({showLeftPanel:O},"conference-session__set_show-left-panel"),localStorage.setItem(Y,JSON.stringify(O))}getInitialShowLeftPanelState(){return"true"===localStorage.getItem(Y)}setIsSmallLeftPanel(O){this.setState({isSmallLeftPanel:O},"conference-session__set_is-small-left-panel"),localStorage.setItem(ee,JSON.stringify(O))}getInitialIsSmallLeftPanelState(){return"true"===localStorage.getItem(ee)}setDemonstrateTab(O){this.setState({demonstrateTab:O},"conference-session__set_demonstrate_tab")}toggleChat(){this.togglePane(I.nu.CHAT)}toggleParticipantsList(){this.togglePane(I.nu.PARTICIPANTS_LIST)}setOpenedPanes(O,U=""){this.setState({openedPanes:O},"conference-session__set_opened_panes"+(U=U?`_by_${U}`:""))}setIsJoining(O){this.setState(O?{isJoining:O}:{isJoining:O,isJoined:!0},"conference-session__update_isJoining")}setIsJoined(O){this.setState({isJoined:O},"conference-session__update_isJoined")}setActiveTab(O){this.setState({activeTab:O},"conference-session__update_activeTab")}setConferenceName(O){const U=this.conferenceMediaInfo;U.conferenceSession.name=O,this.setMediaInfo(U,"conference-session__update_conference_name")}setConferenceSessionId(O){this.setState({conferenceSessionId:O},"conference-session__update_conferenceSessionId")}setMediaInfo(O,U="conference-session__update_media_info"){this.setState({conferenceMediaInfo:O},U)}setAttentionRequested(O){const U=this.conferenceMediaInfo;U.attentionRequested=O,this.setMediaInfo(U,"conference-session__update_conference_attention_request")}addNotConnectedParticipants(O){if(!O.length)return;const U={...this.notConnectedParticipantsMeta},k=[...U.participants],te=k.length?k.length-1:0,fe=k[te]?.participantId;let de=0;O.forEach(_e=>{k.find($=>$.participantId===_e.participantId)||(de++,k.push(_e))});const re=(0,h.dU)(k,this.NOT_CONNECTED_PARTICIPANTS_SORT_ORDER);if(fe){const _e=re.findIndex($=>$.participantId===fe);this.conferenceParticipantsListStoreService.notConnectedParticipantsHasNextPage&&re.splice(_e,re.length)}U.participants=re,U.count+=de,this.setState({notConnectedParticipantsMeta:U},"conference-session__not_connected_participants__add_participants")}removeNotConnectedParticipantsByProfileIds(O){const U=this.notConnectedParticipantsMeta.participants.filter(k=>O.includes(k.profileId));this.removeNotConnectedParticipants(U),O.length&&this.incCountOfNotConnectedParticipants(-O.length)}removeParticipantsByParticipantsIds(O){const U=this.conferenceMediaInfo.participants.filter(de=>O.includes(de.participantId)),k=U.map(de=>de.participantId),te=(0,f.Z)(O,...k),fe=this.notConnectedParticipantsMeta.participants.filter(de=>te.includes(de.participantId));te.length&&this.incCountOfNotConnectedParticipants(-te.length),fe.length&&this.removeNotConnectedParticipants(fe),U.length&&this.removeConnectedParticipants(U)}removeNotConnectedParticipants(O){const U={...this.notConnectedParticipantsMeta},{participants:k}=U;O.forEach(te=>k.splice(k.indexOf(te),1)),this.setState({notConnectedParticipantsMeta:U},"conference-session__not_connected_participants__remove_not_connected_participants")}incCountOfNotConnectedParticipants(O){const U=this.notConnectedParticipantsMeta,k=U.count+O;k<0||(U.count=k,this.setState({notConnectedParticipantsMeta:U},"conference-session__not_connected_participants__inc_count_of_not_connected_participants"))}removeConnectedParticipants(O){const U=this.conferenceMediaInfo.participants;O.forEach(te=>U.splice(U.indexOf(te),1));const k={...this.conferenceMediaInfo,participants:U};this.setState({conferenceMediaInfo:k},"conference-session__connected_participants__remove_participants")}setNotConnectedParticipants(O,U=""){U=U?`_by_${U}`:"";const k={...this.notConnectedParticipantsMeta};k.participants=[...O],this.setState({notConnectedParticipantsMeta:k},`conference-session__not_connected_participants__set_participants${U}`)}appendNotConnectedParticipants(O){const U={...this.notConnectedParticipantsMeta},k=U.participants.map(te=>te.participantId);O=O.filter(te=>!k.includes(te.participantId)),U.participants.push(...O),this.setState({notConnectedParticipantsMeta:U},"conference-session__not_connected_participants__append")}setNotConnectedParticipantsTotalCount(O){const U=this.notConnectedParticipantsMeta;U.count=O,this.setState({notConnectedParticipantsMeta:U},"conference-session__not_connected_participants__set_total_count")}toggleMute(){this.mediaSourceStoreService.setMuteOnRestore(!this.state.isMainVideoMuted),this.setState(O=>({isMainVideoMuted:!O.isMainVideoMuted}),"conference-session__toggle_mute")}setMute(O){this.setState({isMainVideoMuted:O},"conference-session__set_mute")}toggleKind(O){this.setKindOnOff(O,!("audio"===O?this.state.isAudioOn:this.state.isVideoOn))}setKindOnOff(O,U){const k="audio"===O?{isAudioOn:U}:{isVideoOn:U};"audio"===O&&this.mediaSourceStoreService.setTurnOnMicOnRestore(U),"video"===O&&this.mediaSourceStoreService.setTurnOnCamOnRestore(U),this.setState(k,`conference-session__set_${O}_to_${U}`)}setIsAdditionalContentDemonstrationOn(O){this.setState({isAdditionalContentDemonstrationOn:O},"conference-session__update_isAdditionalContentDemonstrationOn")}setShowDeviceSettingsOnStart(O){this.setState({showDeviceSettingsOnStart:O},"conference-session__update_showDeviceSettingsOnStart"),this.cookieService.set(H,String(O),365,"/")}applyPreviousConferenceSettings(){this.setKindOnOff("audio","true"===this.cookieService.get(D)),this.setKindOnOff("video","true"===this.cookieService.get(F))}setJoinData(O,U){this.setState({joinData:O},`conference-session__set_joinData_by_${U}`)}setIsJoinDataFetching(O){this.setState({isJoinDataFetching:O},"conference-session__set_isJoinDataFetching")}setLastParticipantHandUp(O){this.setState({lastParticipantHandUp:O},"conference-session__set_last_participant_hand_up")}setLobbyConferenceSession(O){this.setState({lobbyConferenceSession:O},"conference-session__set_lobby-conference-session")}setJoinedWithEventBusId(O){this.setState({joinedWithEventBusId:O},"conference-session__set-joined-with-event-bus-id")}setOriginalLanguageVolume(O){this.setState({originalLanguageVolume:O},"conference-session__set-original-language-volume")}setOriginalLanguageSignalUrl(O){this.setState({originalLanguageSignalUrl:O},"conference-session__set-original-language-signal-url")}setIsConferenceSessionStarting(O){this.setState({isConferenceSessionStarting:O},"conference-session__set_is_conference_session_starting")}setParticipantCallRequest(O,U){this.updateNotConnectedParticipant(O,k=>({...k,callRequest:U}))}setParticipantCallsProgresses(O){this.setState({participantCallsProgresses:O},"conference-session__set_participant_calls_progresses")}setParticipantCallStartInProgress(O,U){const te={...this.participantCallsProgresses,[O]:{...this.participantCallsProgresses[O]||{isStartInProgress:!1,isEndInProgress:!1},isStartInProgress:U}};this.setParticipantCallsProgresses(te)}setParticipantCallEndInProgress(O,U){const te={...this.participantCallsProgresses,[O]:{...this.participantCallsProgresses[O]||{isStartInProgress:!1,isEndInProgress:!1},isEndInProgress:U}};this.setParticipantCallsProgresses(te)}updateParticipant(O,U,k=""){if(!this.conferenceMediaInfo)return;const te={...this.conferenceMediaInfo,participants:[...this.conferenceMediaInfo.participants]},fe=te.participants.findIndex(re=>re.participantId===O);if(-1===fe)return console.error(`Attempt to update participant which does not exist from conference with id: ${O}`),void this.resetSelectedParticipant();const de=(0,r.Z)(te.participants[fe]);te.participants[fe]=U(de),this.setMediaInfo(te,k),this.resetSelectedParticipant(de)}updateNotConnectedParticipant(O,U,k=""){const te=this.notConnectedParticipantsMeta.participants,fe=te.findIndex($=>$.participantId===O);if(-1===fe)return console.error(`Attempt to update not connected participant which does not exist from conference with id: ${O}`),void this.resetSelectedParticipant();const de=(0,r.Z)(te[fe]);te[fe]=U(de);const re=(0,h.dU)(te,this.NOT_CONNECTED_PARTICIPANTS_SORT_ORDER),_e=re.findIndex($=>$.profileId===de.profileId);_e===re.length-1&&this.conferenceParticipantsListStoreService.notConnectedParticipantsHasNextPage&&re.pop(),this.setNotConnectedParticipants(re,k),this.resetSelectedParticipant(re[_e])}resetSelectedParticipant(O){this.conferenceParticipantsListStoreService.openedPane===_.Uj.PARTICIPANT_INFO&&(O&&O.participantId===this.conferenceParticipantsListStoreService.selectedParticipantId&&O.vvoipMediaInfo||!O)&&(this.conferenceParticipantsListStoreService.setOpenedPane(this.conferenceParticipantsListStoreService.prevOpenedPane??_.Uj.LIST),this.conferenceParticipantsListStoreService.setSelectedParticipantId(null),this.toastr.error({translationKey:"CONFERENCES__LIST__CONFERENCE_INFO__PARTICIPANTS_LIST__ERRORS__COMMON_ERROR"}))}setIsRootGroupParticipantFetching(O){this.setState({isRootGroupParticipantFetching:O},"conference-session__set_is_root_group_participant_fetching")}setRootGroupParticipant(O){this.setState({rootGroupParticipant:O},"conference-session__set_root_group_participant")}setLeaveGroupButtonDisabled(O){this.setState({isLeaveGroupButtonDisabled:O},"conference-session_set-leave-grou-button-disabled")}togglePane(O){const U=this.openedPanes,k=U.indexOf(O);-1===k?U.push(O):U.splice(k,1),this.setState({openedPanes:[...U]},`conference-session__toggle_pane_${O}`)}fallbackCookie(){const O=this.cookieService.get(b),U=this.cookieService.get(V),k=this.cookieService.get(H);if(O||this.cookieService.set(b,"true",365,"/"),U||this.cookieService.set(V,"false",365,"/"),!k){const te=String(this.loginService.isGuest);this.cookieService.set(H,te,365,"/")}}setAttentionRequestedGroup(O){this.setState({attentionRequestedGroup:O},"conference_session_set-attention-requested-group")}setIsConferenceFinishedManually(O){this.setState({isConferenceFinishedManually:O},"conference_session__set_is_conference_finished_manually")}setIsHeaderFooterShown(O){this.setState({isHeaderFooterShown:O},"conference_session__set_is_header_footer_shown")}setMainVideoContent(O){this.setState({mainPlacementContent:O},"conference_session__set_main_video_content")}swapVideoContent(){this.setState({mainPlacementContent:this.state.mainPlacementContent===e.LG.MAIN_CONTENT?e.LG.ADDITIONAL_CONTENT:e.LG.MAIN_CONTENT},"conference_session__swap_additional_video_content_with_main_video_content")}setUI(O){this.setState(U=>{const te={...{...U.UI},...O};return U.UI=te,U},"conference-session_UI_update")}}return K.\u0275fac=function(O){return new(O||K)(m.LFG(g.C),m.LFG(E.N),m.LFG(n.Y),m.LFG(W),m.LFG(T.r6),m.LFG(i._Wo))},K.\u0275prov=m.Yz7({token:K,factory:K.\u0275fac,providedIn:"root"}),K})()},623:(z,R,t)=>{t.d(R,{Ct:()=>h,aG:()=>_,nu:()=>s,zr:()=>e});var e=(()=>((e=e||{})[e.NONE=0]="NONE",e[e.INFO=1]="INFO",e[e.FILES=2]="FILES",e[e.SETTINGS=3]="SETTINGS",e[e.WHITEBOARD=4]="WHITEBOARD",e[e.INQUIRY=5]="INQUIRY",e))(),s=(()=>((s=s||{}).CHAT="CHAT",s.PARTICIPANTS_LIST="PARTICIPANTS_LIST",s))(),h=(()=>((h=h||{})[h.SCREEN=0]="SCREEN",h[h.DOCUMENT=1]="DOCUMENT",h))(),_=(()=>((_=_||{})[_.NONE=0]="NONE",_[_.PARTICIPANTS_LIST=1]="PARTICIPANTS_LIST",_[_.CHAT=2]="CHAT",_[_.CONFERENCE_INFO=3]="CONFERENCE_INFO",_))()},50268:(z,R,t)=>{t.d(R,{Ct:()=>s.Ct,Du:()=>e.Du,Od:()=>e.Od,P4:()=>e.P4,aG:()=>s.aG,mK:()=>e.mK,nu:()=>s.nu,rY:()=>e.rY,yl:()=>e.yl,zr:()=>s.zr});var e=t(77097),s=t(623)},35672:(z,R,t)=>{t.d(R,{l:()=>p});var e=t(77323),s=t(911),h=t(36882),_=t(49510),i=t(88002),f=t(16882),r=t(97591);class p extends f.F{get infoViewMode(){return this.getStateProperty("infoViewMode",!1)}get hasNextPage(){return this.getStateProperty("hasNextPage",!1)}get conferences(){return this.getStateProperty("conferences",!1)}get currentDirectoryId(){return this.getStateProperty("currentDirectoryId",!1)}get currentDirectoryPath(){return this.getStateProperty("currentDirectoryPath",!1)}get selectedConferenceItemId(){return this.getStateProperty("selectedConferenceItemId",!1)}get selectedConferenceSessionId(){return this.getStateProperty("selectedConferenceSessionId",!1)}get participants(){return this.getStateProperty("participants",!1)}get isParticipantsFirstPageFetching(){return this.getStateProperty("isParticipantsFirstPageFetching",!1)}get isParticipantsNextPageFetching(){return this.getStateProperty("isParticipantsNextPageFetching",!1)}get hasParticipantsNextPage(){return this.getStateProperty("hasParticipantsNextPage",!1)}get fsItems(){return this.getStateProperty("fsItems",!1)}get totalFsItemsCount(){return this.getStateProperty("totalFsItemsCount",!1)}get totalParticipantsCount(){return this.getStateProperty("totalParticipantsCount",!1)}get isFsItemsFirstPageFetching(){return this.getStateProperty("isFsItemsFirstPageFetching",!1)}get isFsItemsNextPageFetching(){return this.getStateProperty("isFsItemsNextPageFetching",!1)}get hasFsItemsNextPage(){return this.getStateProperty("hasFsItemsNextPage",!1)}get isTemplatesFetched(){return this.getStateProperty("isTemplatesFetched",!1)}get isTemplatesFetching(){return this.getStateProperty("isTemplatesFetching",!1)}get templates(){return this.templates$.value}get isEditDraftCreating(){return this.getStateProperty("isEditDraftCreating",!1)}get originEditDraft(){return this.getStateProperty("originEditDraft",!1)}get openedDocument(){return this.getStateProperty("openedDocument",!1)}constructor(a,o,l,c,d,v=[],I){super(a,o,l,{stateSliceSelector:m=>({conferences:m?.conferences,isConferencesFetched:m?.isConferencesFetched,selectedConferenceItemId:m?.selectedConferenceItemId,selectedConferenceSessionId:m?.selectedConferenceSessionId,isFirstPageFetched:m?.isFirstPageFetched,isFirstPageFetching:m?.isFirstPageFetching,isNextPageFetching:m?.isNextPageFetching,isPreviousPageFetching:m?.isPreviousPageFetching,hasNextPage:m?.hasNextPage,hasPreviousPage:m?.hasPreviousPage,participants:m?.participants,isParticipantsFirstPageFetching:m?.isParticipantsFirstPageFetching,isParticipantsNextPageFetching:m?.isParticipantsNextPageFetching,hasParticipantsNextPage:m?.hasParticipantsNextPage,totalParticipantsCount:m?.totalParticipantsCount,fsItems:m?.fsItems,totalFsItemsCount:m?.totalFsItemsCount,isFsItemsFirstPageFetching:m?.isFsItemsFirstPageFetching,isFsItemsNextPageFetching:m?.isFsItemsNextPageFetching,hasFsItemsNextPage:m?.hasFsItemsNextPage,currentDirectoryId:m?.currentDirectoryId,currentDirectoryPath:m?.currentDirectoryPath,isTemplatesFetching:m?.isTemplatesFetching,isTemplatesFetched:m?.isTemplatesFetched,templates:m?.templates,infoViewMode:m?.infoViewMode,draftParticipantsSearchValue:m?.draftParticipantsSearchValue,isEditDraftCreating:m?.isEditDraftCreating,originEditDraft:m?.originEditDraft,openedDocument:m?.openedDocument,openedDocumentId:m?.openedDocumentId,openedDocumentPages:m?.openedDocumentPages,...d?d(m):{}}),isolateAs:c},[{getStoreValue:m=>m.selectedConferenceItemId,setStoreValue:m=>({selectedConferenceItemId:m||null}),getQueryParamsValue:m=>m[this.selectedItemQueryParamName]??null,setQueryParamsValue:m=>({[this.selectedItemQueryParamName]:m})},{getStoreValue:m=>m.selectedConferenceSessionId,setStoreValue:m=>({selectedConferenceSessionId:m||null}),getQueryParamsValue:m=>m[this.selectedConferenceSessionIdQueryParamName]??null,setQueryParamsValue:m=>({[this.selectedConferenceSessionIdQueryParamName]:m})},...v],I),this.infoViewMode$=this.getReactiveStateProperty("infoViewMode"),this.draftParticipantsSearchValue$=this.getReactiveStateProperty("draftParticipantsSearchValue"),this.isFirstPageFetched$=(0,s.Hxy)(this.getReactiveStateProperty("isFirstPageFetched")),this.isFirstPageFetching$=(0,s.Hxy)(this.getReactiveStateProperty("isFirstPageFetching")),this.isNextPageFetching$=(0,s.Hxy)(this.getReactiveStateProperty("isNextPageFetching")),this.isPreviousPageFetching$=(0,s.Hxy)(this.getReactiveStateProperty("isPreviousPageFetching")),this.hasNextPage$=(0,s.Hxy)(this.getReactiveStateProperty("hasNextPage")),this.hasPreviousPage$=(0,s.Hxy)(this.getReactiveStateProperty("hasPreviousPage")),this.conferences$=(0,s.Hxy)(this.getReactiveStateProperty("conferences")),this.currentDirectoryId$=this.getReactiveStateProperty("currentDirectoryId"),this.currentDirectoryPath$=this.getReactiveStateProperty("currentDirectoryPath"),this.selectedConferenceItemId$=this.getReactiveStateProperty("selectedConferenceItemId"),this.participants$=(0,s.Hxy)(this.getReactiveStateProperty("participants")),this.isParticipantsFirstPageFetching$=this.getReactiveStateProperty("isParticipantsFirstPageFetching"),this.isParticipantsNextPageFetching$=this.getReactiveStateProperty("isParticipantsNextPageFetching"),this.hasParticipantsNextPage$=this.getReactiveStateProperty("hasParticipantsNextPage"),this.fsItems$=this.getReactiveStateProperty("fsItems"),this.totalFsItemsCount$=this.getReactiveStateProperty("totalFsItemsCount"),this.totalParticipantsCount$=this.getReactiveStateProperty("totalParticipantsCount"),this.isFsItemsFirstPageFetching$=this.getReactiveStateProperty("isFsItemsFirstPageFetching"),this.isFsItemsNextPageFetching$=this.getReactiveStateProperty("isFsItemsNextPageFetching"),this.hasFsItemsNextPage$=this.getReactiveStateProperty("hasFsItemsNextPage"),this.isTemplatesFetched$=this.getReactiveStateProperty("isTemplatesFetched"),this.isTemplatesFetching$=this.getReactiveStateProperty("isTemplatesFetching"),this.templates$=(0,s.Hxy)(this.getReactiveStateProperty("templates"),[]),this.defaultTemplate$=this.templates$.pipe((0,i.U)(m=>m.find(g=>g.isDefault)||m[0])),this.isEditDraftCreating$=this.getReactiveStateProperty("isEditDraftCreating",!1),this.originEditDraft$=this.stateChanged.pipe((0,i.U)(m=>m.originEditDraft)),this.openedDocument$=this.getReactiveStateProperty("openedDocument"),this.openedDocumentPages$=this.getReactiveStateProperty("openedDocumentPages")}setInitialState(){this.setState({conferences:[],isConferencesFetched:!1,selectedConferenceItemId:null,selectedConferenceSessionId:null,isFirstPageFetched:!1,isFirstPageFetching:!1,isNextPageFetching:!1,isPreviousPageFetching:!1,hasNextPage:!0,hasPreviousPage:!0,participants:[],isParticipantsFirstPageFetching:!1,isParticipantsNextPageFetching:!1,hasParticipantsNextPage:!0,totalParticipantsCount:0,fsItems:[],totalFsItemsCount:0,isFsItemsFirstPageFetching:!1,isFsItemsNextPageFetching:!1,hasFsItemsNextPage:!0,currentDirectoryId:null,currentDirectoryPath:[],isTemplatesFetching:!1,isTemplatesFetched:!1,templates:[],infoViewMode:r.D.INFO,draftParticipantsSearchValue:"",isEditDraftCreating:!1,originEditDraft:null,openedDocument:null,openedDocumentId:null,openedDocumentPages:null},"INIT_STATE")}setConferences(a,o=""){o&&(o=` by_${o}`),this.setState({conferences:a},`conferences__set-conferences${o}`)}setIsConferencesFetched(a){this.setState({isConferencesFetched:a},"conferences__set-is-conferences-fetched")}setSelectedConferenceItemId(a){this.setState({selectedConferenceItemId:a},"conferences__set-selected-conference-item-id")}setSelectedConferenceSessionId(a){this.setState({selectedConferenceSessionId:a},"conferences__set-selected-conference-session-item-id")}setIsFirstPageFetched(a){this.setState({isFirstPageFetched:a},"conferences__set-is-first-page-fetched")}setIsFirstPageFetching(a){this.setState({isFirstPageFetching:a},"conferences__set-is-first-page-fetching")}setIsNextPageFetching(a){this.setState({isNextPageFetching:a},"conferences__set-is-next-page-fetching")}setIsPreviousPageFetching(a){this.setState({isPreviousPageFetching:a},"conferences__set-is-previous-page-fetching")}setHasNextPage(a){this.setState({hasNextPage:a},"conferences__set-has-next-page")}setHasPreviousPage(a){this.setState({hasPreviousPage:a},"conferences__set-has-previous-page")}setIsTemplatesFetched(a){this.setState({isTemplatesFetched:a},"conferences__set-is-templates-fetched")}setIsTemplatesFetching(a){this.setState({isTemplatesFetching:a},"conferences__set-is-templates-fetching")}setTemplates(a){this.setState({templates:a},"conferences__set-templates")}setInfoViewMode(a){this.setState({infoViewMode:a},"conferences__set-info-view-mode")}setDraftParticipantsSearchValue(a){this.setState({draftParticipantsSearchValue:a},"conferences__set-draft-search-value")}setIsEditDraftCreating(a){this.setState({isEditDraftCreating:a},"conferences__set-is-edit-draft-creating")}setOriginEditDraft(a,o=""){this.setState({originEditDraft:a},`conferences__set-origin-edit-draft${o=o&&`_by_${o}`}`)}setParticipants(a,o=""){o&&(o=` by_${o}`),this.setState({participants:a},`conferences__set-participants${o}`)}appendParticipants(a){const o=[...this.state.participants,...a];this.setState({participants:o},"append-participants")}setIsParticipantsFirstPageFetching(a){this.setState({isParticipantsFirstPageFetching:a},"conferences__set_is_participants_first_page_fetching")}setIsParticipantsNextPageFetching(a){this.setState({isParticipantsNextPageFetching:a},"conferences__set_is_participants_next_page_fetching")}setHasParticipantsNextPage(a){this.setState({hasParticipantsNextPage:a},"conferences__set_has_participants_next_page")}setFsItems(a,o=""){o&&(o=` by_${o}`),this.setState({fsItems:a},`conferences__set-fs-items${o}`)}appendFsItems(a){const o=[...this.state.fsItems,...a];this.setState({fsItems:o},"append-fs-items")}setIsFsItemsFirstPageFetching(a){this.setState({isFsItemsFirstPageFetching:a},"conferences__set_is_fs-items_first_page_fetching")}setIsFsItemsNextPageFetching(a){this.setState({isFsItemsNextPageFetching:a},"conferences__set_is_fs-items_next_page_fetching")}setHasFsItemsNextPage(a){this.setState({hasFsItemsNextPage:a},"conferences__set_has_fs-items_next_page")}getConferenceId(a){return a.schedule?`${a.conferenceId}_${a.sessionNumber}`:a.conferenceSessionId}initComputedConference(a){return{...a,id:this.getConferenceId(a),isFirstOfDate:!1}}updateIsFirstDate(a){for(let o=0;o<a.length;o++){const l=a[o-1],c=a[o];c.isFirstOfDate=!l||!this.areConferencesOnTheSameDay(l,c)}}areConferencesOnTheSameDay(a,o){const l=s.IjF.createDate(a.startDate),c=s.IjF.createDate(o.startDate);return s.IjF.isSameDate(l,c)}normalizeConferences(a){const o=a.map(this.initComputedConference.bind(this)).sort((l,c)=>l.startDate-c.startDate);return this.updateIsFirstDate(o),this.getUniqueConferences(o)}appendConferences(a){const o=this.conferences$.value,l=this.normalizeConferences([...o,...a]),c=l.slice(o.length);return this.setConferences(l,"append"),c}prependConferences(a){const o=this.conferences$.value,l=this.normalizeConferences([...a,...o]),c=l.slice(0,a.length);return this.setConferences(l,"prepend"),c}insertConference(a){if(this.conferences$.value?.some(d=>d.id===this.getConferenceId(a)))return;const o=this.conferences$.value,l=this.initComputedConference(a),c=this.normalizeConferences([...o,a]);this.hasPreviousPage$.value&&c[0].id===l.id||this.hasNextPage$.value&&c[c.length-1].id===l.id||this.setConferences(c,"insert-conference")}insertConferences(a){const l=this.normalizeConferences([...this.conferences$.value,...a]);this.setConferences(l,"insert-conferences")}removeConferences(a,o){const c=this.conferences$.value.filter(d=>!a(d));this.setConferences(c,o)}updateParticipant(a,o,l){const c=[...this.participants],d=c.findIndex(a);-1!==d&&(c[d]=o(c[d]),this.setParticipants(c,l))}updateConferences(a){let o=a.reduce((l,c)=>{const d=l.findIndex(v=>c.conferenceId===v.conferenceId&&c.sessionNumber===v.sessionNumber);return d>-1&&(l[d]=(0,h.Z)({},l[d],c)),l},[...this.conferences]);o=this.normalizeConferences(o),this.setConferences(o,"update-conference-sessions")}updateConference(a,o,l){let c=this.processUpdateConference(a,o);c&&(c=this.normalizeConferences(c),this.setConferences(c,l))}processUpdateConference(a,o){const l=[...this.conferences];for(let c=0;c<l.length;c++){if(!a(l[c]))continue;const v=c,I=l[v],m=o(I);I.hasOwnProperty("backgroundImageId")&&!m.hasOwnProperty("backgroundImageId")&&(m.backgroundImageId=null),l[v]=m}return l}removeParticipant(a){const o=this.participants$.value,l=o.findIndex(c=>c.participantId===a);-1!==l&&(o.splice(l,1),this.setParticipants(o,"conference-session-participant-remove"))}getUniqueConferences(a){return(0,_.Z)(a,"id")}updateOriginEditDraft(a){const o=this.originEditDraft;o&&this.setOriginEditDraft({...o,...a})}setCurrentDirectoryId(a){this.setState({currentDirectoryId:a},"conferences__set_current_directory_id")}resetCurrentDirectoryPath(){this.setState({currentDirectoryPath:[]},"conferences__reset_current_directory_path")}pushCurrentDirectoryPath(a){const o=[...this.currentDirectoryPath,a];this.setState({currentDirectoryPath:o},"conferences__push_current_directory_path")}popCurrentDirectoryPath(){const a=[...this.currentDirectoryPath];a.pop(),this.setState({currentDirectoryPath:a},"conferences__pop_current_directory_info")}trimCurrentDirectoryPathTo(a){const o=this.currentDirectoryPath.findIndex(c=>c.nodeId===a.nodeId);if(-1===o)return;const l=this.currentDirectoryPath.slice(0,o+1);this.setState({currentDirectoryPath:l},"conferences__trim_current_directory_path_to")}setOpenedDocument(a){this.setState({openedDocument:a},"conferences__set_opened_document")}setOpenedDocumentId(a){const o=this.fsItems.find(l=>l.nodeId===a&&l.type===e.wY.DOCUMENT)||null;this.setOpenedDocument(o)}setOpenedDocumentPages(a){this.setState({openedDocumentPages:a},"conferences__set_opened_document_pages")}setTotalFsItemsCount(a){this.setState({totalFsItemsCount:a},"conferences__set_total_fs_items_count")}setTotalParticipantsCount(a){this.setState({totalParticipantsCount:a},"conferences__set_total_participants_count")}}},97591:(z,R,t)=>{t.d(R,{D:()=>e});var e=(()=>((e=e||{}).INFO="INFO",e.DRAFT="DRAFT",e.EDIT_PERIODICAL="EDIT_PERIODICAL",e.EDIT_SINGLE="EDIT_SINGLE",e))()},21152:(z,R,t)=>{t.d(R,{v:()=>p});var e=t(8239),s=t(87177),h=t(5469),_=t(43257),i=t(45435),f=t(46782),r=t(70964);class p extends r.m{constructor(a,o,l){super(a),this.loginService=o,this.conferencesApiService=l}initUpdater(){this.cometService.getChildNumberedEventByClass$("ConferenceCreatedEvent").pipe((0,i.h)(a=>this.conferencesPredicate(a)),(0,f.R)(this.takeUntilSubj)).subscribe(this.processConferenceCreation.bind(this)),this.cometService.getChildNumberedEventByClass$("ConferenceInvitationEvent").pipe((0,i.h)(a=>this.conferencesPredicate(a)),(0,f.R)(this.takeUntilSubj)).subscribe(a=>this.processConferenceInvitation(a.conferenceSession)),this.cometService.getChildNumberedEventByClass$("ConferenceSessionInvitationEvent").pipe((0,i.h)(a=>this.conferencesPredicate(a)),(0,f.R)(this.takeUntilSubj)).subscribe(this.processConferenceSessionInvitation.bind(this)),this.cometService.getChildNumberedEventByClass$("ConferenceChangedEvent").pipe((0,f.R)(this.takeUntilSubj)).subscribe(this.processConferenceChange.bind(this)),this.cometService.getChildNumberedEventByClass$("ConferenceSessionChangedEvent").pipe((0,i.h)(a=>this.conferencesPredicate(a)),(0,f.R)(this.takeUntilSubj)).subscribe(this.processConferenceSessionChange.bind(this)),this.cometService.getChildNumberedEventByClass$("ConferenceRemovedEvent").pipe((0,f.R)(this.takeUntilSubj)).subscribe(this.processConferenceRemove.bind(this)),this.cometService.getChildNumberedEventByClass$("ConferenceSessionRemovedEvent").pipe((0,f.R)(this.takeUntilSubj)).subscribe(this.processConferenceSessionRemove.bind(this)),this.cometService.getChildNumberedEventByClass$("ConferenceSessionOnlineParticipantsCountChangeEvent").pipe((0,f.R)(this.takeUntilSubj)).subscribe(this.processConferenceSessionOnlineParticipantsCount.bind(this)),this.cometService.getChildNumberedEventByClass$("ConferenceSessionFinishedEvent").pipe((0,f.R)(this.takeUntilSubj)).subscribe(this.processConferenceSessionFinished.bind(this)),this.cometService.getChildNumberedEventByClass$("ConferenceSessionJoinDataChangedEvent").pipe((0,f.R)(this.takeUntilSubj)).subscribe(this.processConferenceSessionJoinDataChangedEvent.bind(this)),this.cometService.getChildNumberedEventByClass$("ParticipantChangeRoleEvent").pipe((0,f.R)(this.takeUntilSubj)).subscribe(this.processConferenceSessionParticipantChangeRoleEvent.bind(this)),this.cometService.getChildNumberedEventByClass$("ConferenceSessionParticipantPermissionsChangeEvent").pipe((0,f.R)(this.takeUntilSubj)).subscribe(this.updateParticipantPermissions.bind(this)),this.cometService.getChildNumberedEventByClass$("ConferenceParticipantRoleChangeEvent").pipe((0,f.R)(this.takeUntilSubj)).subscribe(this.processConferenceParticipantRoleChangeEvent.bind(this)),this.cometService.getChildNumberedEventByClass$("ConferenceSessionParticipantInvitationResponseEvent").pipe((0,f.R)(this.takeUntilSubj)).subscribe(this.processConferenceSessionParticipantInvitationResponseEvent.bind(this)),this.cometService.getChildNumberedEventByClass$("ConferenceParticipantInvitationResponseEvent").pipe((0,f.R)(this.takeUntilSubj)).subscribe(this.processConferenceParticipantInvitationResponseEvent.bind(this)),this.cometService.getChildNumberedEventByClass$("ConferenceSessionParticipantRemovedNotificationEvent").pipe((0,f.R)(this.takeUntilSubj)).subscribe(this.processConferenceSessionParticipantRemovedNotificationEvent.bind(this)),this.cometService.getChildNumberedEventByClass$("ConferenceParticipantRemovedNotificationEvent").pipe((0,f.R)(this.takeUntilSubj)).subscribe(this.processConferenceParticipantRemovedNotificationEvent.bind(this)),this.cometService.getChildNumberedEventByClass$("ActiveConferenceSessionChangedEvent").pipe((0,f.R)(this.takeUntilSubj)).subscribe(this.processActiveConferenceSessionChangedEvent.bind(this)),this.cometService.getChildNumberedEventByClass$("ParticipantChangeRoleEvent").pipe((0,f.R)(this.takeUntilSubj)).subscribe(this.processParticipantChangeRoleEvent.bind(this))}processConferenceCreation(a){var o=this;return(0,e.Z)(function*(){yield o.processConferenceInvitation(a.conferenceSession)})()}processConferenceInvitation(a){var o=this;return(0,e.Z)(function*(){if(!a.schedule)return void o.storeService.insertConference(a);const l=o.storeService.conferences$.value,c=l[0],d=Date.now(),v=(0,_.Z)(d).getTime(),I=l.filter(E=>E.startDate>d).length,m=h._Z.settings.CONFERENCES_PAGE_SIZE;let g;if(I<m){const E=yield o.conferencesApiService.findConferenceSessions({limit:m,dateFrom:c?.startDate||v,conferenceId:a.conferenceId}).toPromise();g=E.data,o.storeService.setHasNextPage(E.hasNext)}else g=yield o.fetchAllConferenceSessions(a.conferenceId,v);o.storeService.insertConferences(g)})()}processConferenceSessionInvitation(a){this.storeService.insertConference(a.conferenceSession)}processConferenceChange(a){var o=this;return(0,e.Z)(function*(){const l=o.storeService.conferences$.value;if(!l.length)return;const c=yield o.fetchAllConferenceSessions(a.conferenceId,l[0].startDate);o.storeService.updateConferences(c);const d=o.storeService.originEditDraft;if(!d)return;const v=c.find(I=>I.conferenceSessionId===d.conferenceSessionId);v&&o.storeService.updateOriginEditDraft({actualStartDate:v.actualStartDate,startDate:v.startDate,createDate:v.createDate,state:v.state,name:v.name,description:v.description,duration:v.duration})})()}processConferenceSessionChange(a){const o=a.conferenceSession;this.storeService.updateConference(c=>c.conferenceSessionId===a.conferenceSessionId,c=>({...c,...o}),"conference-session-changed-event"),this.storeService.originEditDraft?.conferenceSessionId===a.conferenceSessionId&&this.storeService.updateOriginEditDraft({actualStartDate:o.actualStartDate,startDate:o.startDate,createDate:o.createDate,state:o.state,name:o.name,description:o.description,duration:o.duration,backgroundImageId:o.backgroundImageId})}processConferenceRemove(a){this.storeService.removeConferences(l=>l.conferenceId===a.conferenceId,"remove-conference"),this.storeService.originEditDraft?.conferenceId===a.conferenceId&&this.storeService.setOriginEditDraft(null)}processConferenceSessionRemove(a){this.storeService.removeConferences(l=>l.conferenceSessionId===a.conferenceSessionId,"remove-conference"),this.storeService.originEditDraft?.conferenceSessionId===a.conferenceSessionId&&this.storeService.setOriginEditDraft(null)}fetchAllConferenceSessions(a,o){var l=this;return(0,e.Z)(function*(){const c=l.storeService.conferences$.value;let d=o;const v=c[c.length-1].startDate,I=[];let m=!0;const g=h._Z.settings.CONFERENCES_PAGE_PERIODICAL_CONFERENCES_FETCH_LIMIT;do{try{const E=yield l.conferencesApiService.findConferenceSessions({limit:g,dateFrom:d-1,dateTo:v,conferenceId:a}).toPromise();m=E.hasNext;const n=E.data;I.push(...n),d=n[n.length-1].startDate}catch{break}}while(m);return I})()}processConferenceSessionOnlineParticipantsCount(a){this.storeService.updateConference(o=>o.conferenceSessionId===a.conferenceSessionId,o=>({...o,onlineParticipantsCount:a.onlineParticipantsCount,lastMediaSessionStartDate:a.lastMediaSessionStartDate}),"conference-session-online-participants-count-change-event")}processConferenceSessionFinished(a){if(a.leaveConferenceReason!==s.Jm.CONFERENCE_FINISHED)return;const o=[...this.storeService.conferences],l=o.findIndex(d=>d.conferenceSessionId===a.conferenceSessionId);if(-1===l)return void console.warn(`Attempt to finish conference which does not exist. ConferenceSessionId: ${a.conferenceSessionId}`);o[l]={...o[l],state:s.Kv.STOPPED},this.storeService.setConferences(o,"conference-finished");const c=this.storeService.originEditDraft;c&&(c.state=s.Kv.STOPPED,this.storeService.setOriginEditDraft(c,"conference-finished"))}processConferenceSessionJoinDataChangedEvent(a){const o=[...this.storeService.conferences],l=o.findIndex(c=>c.conferenceSessionId===a.conferenceSessionId);-1!==l?(o[l]={...o[l],conferenceNumber:a.joinData.conferenceNumber},this.storeService.setConferences(o,"conference-join-data-update")):console.warn(`Attempt to update join data conference which does not exist. ConferenceSessionId: ${a.conferenceSessionId}`)}getSelectedConference(){const o=this.storeService.selectedConferenceItemId;return this.storeService.conferences$.value.find(l=>l.id===o)}processConferenceSessionParticipantChangeRoleEvent(a){const l=this.storeService.conferences$.value.find(v=>v.conferenceSessionId===a.conferenceSessionId);l&&l.personalParticipationInfo.conferenceSessionParticipantId===a.participantId&&this.storeService.updateConference(m=>m.conferenceSessionId===a.conferenceSessionId,m=>(m.personalParticipationInfo.conferenceSessionRoles=a.roles,m),"conference-session-changed-event");const c=this.storeService.originEditDraft;c?.conferenceSessionId===a.conferenceSessionId&&c.personalParticipationInfo.conferenceSessionParticipantId===a.participantId&&(c.personalParticipationInfo.conferenceSessionRoles=a.roles,this.storeService.setOriginEditDraft(c,"ParticipantChangeRoleEvent"));const d=this.getSelectedConference();!d||d.conferenceSessionId!==a.conferenceSessionId||this.storeService.updateParticipant(v=>v.participantId===a.participantId,v=>({...v,roles:a.roles}),"conference-session-participant-change-role")}processConferenceParticipantRoleChangeEvent(a){this.storeService.conferences$.value.find(d=>d.conferenceId===a.conferenceId)&&this.storeService.updateConference(d=>d.conferenceSessionId===a.conferenceId,d=>(d.personalParticipationInfo.conferenceRoles=a.roles,d.personalParticipationInfo.conferenceSessionRoles=a.roles,d),"conference-participant-change-role");const c=this.getSelectedConference();!c||c.conferenceId!==a.conferenceId||this.storeService.updateParticipant(d=>d.participantId===a.participantId,d=>({...d,roles:a.roles}),"conference-participant-change-role")}processConferenceSessionParticipantInvitationResponseEvent(a){const o=this.getSelectedConference();o&&o.conferenceSessionId===a.conferenceSessionId&&this.storeService.updateParticipant(d=>d.participantId===a.participantId,d=>({...d,inviteResponseType:a.inviteResponseType}),"conference-participant-change-invite-response-type");const l=this.storeService.conferences,c=l.findIndex(d=>d.conferenceSessionId===a.conferenceSessionId);-1!==c&&(l[c]={...l[c],personalParticipationInfo:{...l[c].personalParticipationInfo,conferenceSessionInviteResponse:a.inviteResponseType}},this.storeService.setConferences(l,"ConferenceSessionParticipantInvitationResponseEvent"))}processConferenceParticipantInvitationResponseEvent(a){const o=this.getSelectedConference();o&&o.conferenceId===a.conferenceId&&this.storeService.updateParticipant(d=>d.participantId===a.participantId,d=>({...d,inviteResponseType:a.inviteResponseType}),"conference-participant-change-invite-response-type");const l=this.storeService.conferences,c=l.find(d=>d.conferenceId===a.conferenceId);c&&(c.personalParticipationInfo.conferenceInviteResponse=a.inviteResponseType),this.storeService.setConferences(l,"ConferenceParticipantInvitationResponseEvent")}processConferenceSessionParticipantRemovedNotificationEvent(a){if(a.profileId===this.loginService.profileId)return void this.storeService.removeConferences(l=>l.conferenceSessionId===a.conferenceSessionId,"by_ConferenceSessionParticipantRemovedNotificationEvent");const o=this.getSelectedConference();!o||o.conferenceSessionId!==a.conferenceSessionId||this.storeService.removeParticipant(a.participantId)}processConferenceParticipantRemovedNotificationEvent(a){if(a.profileId===this.loginService.profileId)return void this.storeService.removeConferences(l=>l.conferenceId===a.conferenceId,"by_ConferenceParticipantRemovedNotificationEvent");const o=this.getSelectedConference();!o||o.conferenceId!==a.conferenceId||this.storeService.removeParticipant(a.participantId)}processActiveConferenceSessionChangedEvent(a){this.storeService.updateConference(o=>o.conferenceSessionId===a.conferenceSession.conferenceSessionId,o=>(o.state=a.conferenceSession.state,o.lastMediaSessionStartDate=a.conferenceSession.lastMediaSessionStartDate,o.name=a.conferenceSession.name,o.description=a.conferenceSession.description,o.actualStartDate=a.conferenceSession.actualStartDate,o.duration=a.conferenceSession.duration,o.settings.features=a.conferenceSession.features,o.availableInterpretationLanguages=a.conferenceSession.availableInterpretationLanguages,o),"conference-session-changed-event")}processParticipantChangeRoleEvent(a){}updateParticipantPermissions(a){if(a.messageOwnerProfileId===this.loginService.profileId)return;const o=this.storeService.conferences,l=this.storeService.conferences.find(c=>c.conferenceSessionId===a.conferenceSessionId);l&&(l.personalParticipationInfo.conferenceSessionPermissions=[...a.permissions]),this.storeService.setConferences(o,"ConferenceParticipantInvitationResponseEvent")}}},21122:(z,R,t)=>{t.d(R,{LO:()=>h,ST:()=>f,UD:()=>u,e8:()=>i,jK:()=>_,oK:()=>p,qj:()=>r,ts:()=>e,v:()=>s});var e=(()=>((e=e||{})[e.WEEK_1=1]="WEEK_1",e[e.WEEK_2=2]="WEEK_2",e[e.WEEK_3=3]="WEEK_3",e[e.WEEK_4=4]="WEEK_4",e))(),s=(()=>((s=s||{})[s.MONTH_1=1]="MONTH_1",s[s.MONTH_2=2]="MONTH_2",s[s.MONTH_3=3]="MONTH_3",s[s.MONTH_4=4]="MONTH_4",s[s.MONTH_5=5]="MONTH_5",s[s.MONTH_6=6]="MONTH_6",s))(),h=(()=>((h=h||{})[h.MONTH_DAY_NUMBER_1=1]="MONTH_DAY_NUMBER_1",h[h.MONTH_DAY_NUMBER_2=2]="MONTH_DAY_NUMBER_2",h[h.MONTH_DAY_NUMBER_3=3]="MONTH_DAY_NUMBER_3",h[h.MONTH_DAY_NUMBER_4=4]="MONTH_DAY_NUMBER_4",h))(),_=(()=>((_=_||{})[_.MONTH_WEEK_DAY_1=1]="MONTH_WEEK_DAY_1",_[_.MONTH_WEEK_DAY_2=2]="MONTH_WEEK_DAY_2",_[_.MONTH_WEEK_DAY_3=3]="MONTH_WEEK_DAY_3",_[_.MONTH_WEEK_DAY_4=4]="MONTH_WEEK_DAY_4",_[_.MONTH_WEEK_DAY_5=5]="MONTH_WEEK_DAY_5",_[_.MONTH_WEEK_DAY_6=6]="MONTH_WEEK_DAY_6",_[_.MONTH_WEEK_DAY_7=7]="MONTH_WEEK_DAY_7",_))(),i=(()=>((i=i||{})[i.DAY=0]="DAY",i[i.DATE=1]="DATE",i))(),f=(()=>((f=f||{})[f.SINGLE=0]="SINGLE",f[f.BUSINESS_DAYS=1]="BUSINESS_DAYS",f[f.DAILY=2]="DAILY",f[f.WEEKLY=3]="WEEKLY",f[f.MONTHLY=4]="MONTHLY",f))(),r=(()=>((r=r||{})[r.M_30=0]="M_30",r[r.M_60=1]="M_60",r[r.M_90=2]="M_90",r[r.CUSTOM=3]="CUSTOM",r))(),p=(()=>((p=p||{}).TEXT="TEXT",p.PARAGRAPH="PARAGRAPH",p.SINGLE_CHOICE="SINGLE_CHOICE",p.MULTIPLE_CHOICES="MULTIPLE_CHOICES",p.SINGLE_CHOICE_CUSTOM="SINGLE_CHOICE_CUSTOM",p.MULTIPLE_CHOICES_CUSTOM="MULTIPLE_CHOICES_CUSTOM",p))(),u=(()=>((u=u||{}).JOIN="JOIN",u.SELF_REGISTRATION="SELF_REGISTRATION",u))()},96699:(z,R,t)=>{t.d(R,{r:()=>a});var e=t(5469),s=t(88002),h=t(35672),_=t(97591),i=t(54355),f=t(38507),r=t(37641),p=t(12841),u=t(12487);let a=(()=>{class o extends h.l{get draft(){return this.getStateProperty("draft")}get editDraft(){return this.getStateProperty("editDraft")}constructor(c,d,v,I,m){super(v,I,m,"ConferencesStoreService",g=>({draft:g?.draft,editDraft:g?.editDraft,isQuickConferenceCreating:g?.isQuickConferenceCreating}),[{getStoreValue:g=>g.infoViewMode,setStoreValue:g=>({infoViewMode:g}),getQueryParamsValue:g=>g.conferenceInfoViewMode??_.D.INFO,setQueryParamsValue:g=>({conferenceInfoViewMode:g})}],d),this.conferenceDraftPersistence=c,this.updater=d,this.draft$=this.getReactiveStateProperty("draft"),this.editDraft$=this.getReactiveStateProperty("draft"),this.isQuickConferenceCreating$=this.stateChanged.pipe((0,s.U)(g=>g.isQuickConferenceCreating)),this.selectedItemQueryParamName="conferenceItemId",this.selectedConferenceSessionIdQueryParamName="conferenceItem_conferenceSessionId",this.setInitialState(),this.initFromRoutes()}setInitialState(){super.setInitialState(),this.setState({draft:this.conferenceDraftPersistence.getDraftFromLocalStorage(e._Z.settings.CONFERENCE_DRAFT_LOCAL_STORE_NAME),editDraft:this.conferenceDraftPersistence.getDraftFromLocalStorage(e._Z.settings.CONFERENCE_EDIT_DRAFT_LOCAL_STORE_NAME),isQuickConferenceCreating:!1},"INIT_STATE")}setDraft(c){this.setState({draft:c},"conferences__set-draft")}getSavedDraft(){return this.conferenceDraftPersistence.getDraftFromLocalStorage(e._Z.settings.CONFERENCE_DRAFT_LOCAL_STORE_NAME)}setDraftAndSave(c){this.conferenceDraftPersistence.setDraftToLocalStorage(e._Z.settings.CONFERENCE_DRAFT_LOCAL_STORE_NAME,c),this.setDraft(c)}setEditDraft(c){this.setState({editDraft:c},"conferences__set-conference-session-edit-draft")}getSavedEditDraft(){return this.conferenceDraftPersistence.getDraftFromLocalStorage(e._Z.settings.CONFERENCE_EDIT_DRAFT_LOCAL_STORE_NAME)}setEditDraftAndSave(c){this.conferenceDraftPersistence.setDraftToLocalStorage(e._Z.settings.CONFERENCE_EDIT_DRAFT_LOCAL_STORE_NAME,c),this.setEditDraft(c)}setIsQuickConferenceCreating(c){this.setState({isQuickConferenceCreating:c},"conferences__is_quick_conference_creating")}}return o.\u0275fac=function(c){return new(c||o)(i.LFG(f.H),i.LFG(r.m),i.LFG(p.gz),i.LFG(p.F0),i.LFG(u.U))},o.\u0275prov=i.Yz7({token:o,factory:o.\u0275fac}),o})()},37641:(z,R,t)=>{t.d(R,{m:()=>i});var e=t(21152),s=t(54355),h=t(5469),_=t(31585);let i=(()=>{class f extends e.v{constructor(p,u,a){super(p,u,a),this.conferencesPredicate=o=>!o.conferenceSession.room}}return f.\u0275fac=function(p){return new(p||f)(s.LFG(h.y_),s.LFG(h.r6),s.LFG(_.A))},f.\u0275prov=s.Yz7({token:f,factory:f.\u0275fac}),f})()},11038:(z,R,t)=>{t.d(R,{Z:()=>m});var e=t(3178),s=t(5469),h=t(27598),_=t(95828),i=t(911),f=t(36882),r=t(9112),p=t(88002),u=t(87519),a=t(16882),o=t(54355),l=t(12841),c=t(12487),d=t(70964),v=t(46782);let I=(()=>{class g extends d.m{constructor(n,S){super(n),this.loginService=S}initUpdater(){this.cometService.getChildNumberedEventByClass$("ContactAddedEvent").pipe((0,v.R)(this.takeUntilSubj)).subscribe(this.addContacts.bind(this)),this.cometService.getChildNumberedEventByClass$("ContactChangedEvent").pipe((0,v.R)(this.takeUntilSubj)).subscribe(this.changeContact.bind(this)),this.cometService.getChildNumberedEventByClass$("ContactRemovedEvent").pipe((0,v.R)(this.takeUntilSubj)).subscribe(this.processContactRemovedEvent.bind(this)),this.cometService.getChildNumberedEventByClass$("ContactBlockedEvent").pipe((0,v.R)(this.takeUntilSubj)).subscribe(this.blockContact.bind(this)),this.cometService.getChildNumberedEventByClass$("ContactUnblockedEvent").pipe((0,v.R)(this.takeUntilSubj)).subscribe(this.unblockContact.bind(this)),this.cometService.getChildNumberedEventByClass$("ContactOnlineEvent").pipe((0,v.R)(this.takeUntilSubj)).subscribe(this.processContactOnlineStatus.bind(this)),this.cometService.getChildNumberedEventByClass$("ContactInvitationCreatedEvent").pipe((0,v.R)(this.takeUntilSubj)).subscribe(this.processContactInvitationCreated.bind(this)),this.cometService.getChildNumberedEventByClass$("ContactInvitationRemovedEvent").pipe((0,v.R)(this.takeUntilSubj)).subscribe(this.processContactInvitationRemoved.bind(this))}addContacts(n){const S=n.contacts.map(A=>({...A,isPartial:!0})),C=S.filter(A=>!this.storeService.contacts.find(M=>(0,_.xQ)(A)===(0,_.xQ)(M))),T=S.filter(A=>!!this.storeService.contacts.find(M=>(0,_.xQ)(A)===(0,_.xQ)(M)));if(this.storeService.addContacts(C,"ContactAddedEvent"),!T.length)return;const P=this.storeService.startTransactionPositive("update contacts by ContactAddedEvent");for(const A of T)P.updateContact(A);P.commit()}changeContact(n){const S=[...this.storeService.contacts],C=n.contact.contact.contactId,T=S.findIndex(P=>P.contact?.contactId===C);if(-1!==T&&(S[T]={...n.contact},S[T].contact={...S[T].contact,tags:n.contact.contact.tags},this.storeService.setContacts(S,"ContactChangedEvent"),this.storeService.selectedContact?.contact.contactId===C)){const P={...S[T],contact:{...S[T].contact,tags:n.contact.contact.tags}};this.storeService.setSelectedContact(P)}}processContactRemovedEvent(n){this.storeService.removeContacts(n.contactIds)}blockContact(n){this.storeService.removeContacts(n.contactIds)}unblockContact(n){const S=(0,_.kw)(n.contact);this.storeService.contacts.find(T=>(0,_.xQ)(T)===(0,_.xQ)(n.contact))?this.storeService.updateContact(S,"ContactUnblockedEvent"):this.storeService.addContacts([S],"ContactUnblockedEvent")}processContactOnlineStatus(n){const S=[...this.storeService.contacts],C=S.findIndex(T=>T.profile?.profileId===n.profileId);-1!==C&&(S[C]={...S[C],onlineStatus:n.presenceStatus},this.storeService.setContacts(S,"ContactOnlineEvent"))}processContactInvitationCreated(n){this.storeService.prependInvitation({interlocutor:n.interlocutor,notificationDate:n.notificationDate},"ContactInvitationCreatedEvent")}processContactInvitationRemoved(n){n.messageOwnerProfileId!==this.loginService.profileId&&this.storeService.removeInvitation(n.profileId,"ContactInvitationRemovedEvent")}}return g.\u0275fac=function(n){return new(n||g)(o.LFG(s.y_),o.LFG(s.r6))},g.\u0275prov=o.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})(),m=(()=>{class g extends a.F{get isFirstPageFetched(){return this.getStateProperty("isFirstPageFetched",!1)}get contacts(){return this.getStateProperty("contacts",!1)}get totalCount(){return this.getStateProperty("totalCount",!1)}get selectedContactId(){return this.getStateProperty("selectedContactId",!1)}get selectedContact(){return this.getStateProperty("selectedContact",!1)}get selectedInvitationId(){return this.getStateProperty("selectedInvitationId",!1)}get isInvitationsFirstPageFetched(){return this.getStateProperty("isInvitationsFirstPageFetched",!1)}get isInvitationsFirstPageFetching(){return this.getStateProperty("isInvitationsFirstPageFetching",!1)}get hasInvitationsNextPage(){return this.getStateProperty("hasInvitationsNextPage",!1)}get invitations(){return this.getStateProperty("invitations",!1)}get totalInvitationsCount(){return this.getStateProperty("totalInvitationsCount",!1)}get selectedInvitation(){return this.invitations.find(n=>(0,_.KO)(n.interlocutor)===this.selectedInvitationId)||null}get shownInvitationsCount(){return this.getStateProperty("shownInvitationsCount")}constructor(n,S,C,T){super(n,S,C,{stateSliceSelector:P=>({isFirstPageFetched:P.isFirstPageFetched,isFirstPageFetching:P.isFirstPageFetching,isNextPageFetching:P.isNextPageFetching,isContactsFetched:P.isContactsFetched,hasNextPage:P.hasNextPage,selectedContactId:P.selectedContactId,contacts:P.contacts,totalCount:P.totalCount,tagSuggestions:P.tagSuggestions,isTagsSuggestionsFetched:P.isTagsSuggestionsFetched,selectedInvitationId:P.selectedInvitationId,invitations:P.invitations,hasInvitationsNextPage:P.hasInvitationsNextPage,isInvitationsFirstPageFetched:P.isInvitationsFirstPageFetched,isInvitationsFirstPageFetching:P.isInvitationsFirstPageFetching,isInvitationsNextPageFetching:P.isInvitationsNextPageFetching,totalInvitationsCount:P.totalInvitationsCount,isFullContactInfoFetching:P.isFullContactInfoFetching,infoViewMode:P.infoViewMode,shownInvitationsCount:P.shownInvitationsCount,selectedContact:P.selectedContact})},[{getStoreValue:P=>P.selectedContactId,setStoreValue:P=>({selectedContactId:P||null}),getQueryParamsValue:P=>P[this.selectedContactIdQueryParamName],setQueryParamsValue:P=>({[this.selectedContactIdQueryParamName]:P})},{getStoreValue:P=>P.selectedInvitationId,setStoreValue:P=>({selectedInvitationId:P||null}),getQueryParamsValue:P=>P[this.selectedInvitationIdQueryParamName],setQueryParamsValue:P=>({[this.selectedInvitationIdQueryParamName]:P})}],T),this.updater=T,this.selectedContactIdQueryParamName="contactId",this.selectedInvitationIdQueryParamName="invitationId",this.isFirstPageFetched$=this.stateChanged.pipe((0,p.U)(P=>P.isFirstPageFetched),(0,u.x)()),this.isFirstPageFetching$=(0,i.Hxy)(this.stateChanged.pipe((0,p.U)(P=>P.isFirstPageFetching),(0,u.x)())),this.isNextPageFetching$=(0,i.Hxy)(this.stateChanged.pipe((0,p.U)(P=>P.isNextPageFetching),(0,u.x)())),this.hasNextPage$=(0,i.Hxy)(this.stateChanged.pipe((0,p.U)(P=>P.hasNextPage),(0,u.x)())),this.isTagsSuggestionsFetched$=(0,i.Hxy)(this.stateChanged.pipe((0,p.U)(P=>P.isTagsSuggestionsFetched),(0,u.x)())),this.contacts$=this.stateChanged.pipe((0,p.U)(P=>P.contacts)),this.selectedContactId$=this.stateChanged.pipe((0,p.U)(P=>P.selectedContactId),(0,u.x)()),this.selectedContact$=this.getReactiveStateProperty("selectedContact"),this.tagSuggestions$=(0,i.Hxy)(this.stateChanged.pipe((0,p.U)(P=>P.tagSuggestions))),this.selectedInvitationId$=this.stateChanged.pipe((0,p.U)(P=>P.selectedInvitationId),(0,u.x)()),this.isInvitationsFirstPageFetched$=(0,i.Hxy)(this.stateChanged.pipe((0,p.U)(P=>P.isInvitationsFirstPageFetched),(0,u.x)())),this.isInvitationsFirstPageFetching$=this.stateChanged.pipe((0,p.U)(P=>P.isInvitationsFirstPageFetching),(0,u.x)()),this.isInvitationsNextPageFetching$=this.stateChanged.pipe((0,p.U)(P=>P.isInvitationsNextPageFetching),(0,u.x)()),this.invitations$=this.stateChanged.pipe((0,p.U)(P=>P.invitations)),this.totalInvitationsCount$=this.stateChanged.pipe((0,p.U)(P=>P.totalInvitationsCount),(0,u.x)()),this.isFullContactInfoFetching$=this.stateChanged.pipe((0,p.U)(P=>P.isFullContactInfoFetching),(0,u.x)()),this.selectedInvitation$=(0,i.Hxy)((0,r.aj)([this.invitations$,this.selectedInvitationId$]).pipe((0,p.U)(([P,A])=>A&&P.find(M=>(0,_.KO)(M.interlocutor)===A)||null))),this.infoViewMode$=this.stateChanged.pipe((0,p.U)(P=>P.infoViewMode),(0,u.x)()),this.shownInvitationsCount$=this.stateChanged.pipe((0,p.U)(P=>P.shownInvitationsCount),(0,u.x)()),this.setInitialState(),this.initFromRoutes()}setInitialState(){this.setState({contacts:[],isContactsFetched:!1,selectedContactId:null,isFirstPageFetched:!1,isFirstPageFetching:!1,isNextPageFetching:!1,hasNextPage:!0,totalCount:0,tagSuggestions:[],isTagsSuggestionsFetched:!1,selectedInvitationId:null,invitations:[],hasInvitationsNextPage:!1,isInvitationsFirstPageFetched:!1,isInvitationsFirstPageFetching:!1,isInvitationsNextPageFetching:!1,totalInvitationsCount:0,isFullContactInfoFetching:!1,infoViewMode:e.h.CONTACT_INFO,shownInvitationsCount:s._Z.settings.MIN_CONTACT_REQUESTS_SHOWN_COUNT,selectedContact:null},"INIT_STATE")}setContacts(n,S=""){S&&(S=` by_${S}`),this.setState({contacts:n},`contacts__set-contacts${S}`)}setSelectedContactId(n){this.setState({selectedContactId:n},"contacts__set-selected-contact-id")}setSelectedInvitationId(n){this.setState({selectedInvitationId:n},"contacts__set-selected-invitation-id")}setIsFirstPageFetching(n){this.setState({isFirstPageFetching:n},"contacts__set-is-first-page-fetching")}setIsFirstPageFetched(n){this.setState({isFirstPageFetched:n},"contacts__set-is-first-page-fetched")}setHasNextPage(n){this.setState({hasNextPage:n},"contacts__set-has-next-page")}setIsNextPageFetching(n){this.setState({isNextPageFetching:n},"contacts__set-next-page-fetching")}addContacts(n,S=""){S=S?`_by_${S}`:"";let P,T=[...this.contacts,...n].sort((A,M)=>(0,h.m2)(A.name,M.name));if(this.hasInvitationsNextPage){for(P=T.length-1;P>=0;--P){const A=T[P];if(!n.find(L=>(0,_.xQ)(A)===(0,_.xQ)(L)))break}T=T.slice(0,P+1),this.setContacts(T,S)}else this.setContacts(T,S)}appendContacts(n){const S=[...this.contacts,...n];this.setState({contacts:S},"contacts__append-contacts")}removeContact(n){this.removeContacts([n])}removeContacts(n){const S=this.contacts.filter(T=>!n.includes((0,_.xQ)(T)));this.setContacts(S,"ContactRemovedEvent"),n.includes(this.selectedContactId)&&this.setSelectedContactId(null)}setTotalCount(n){this.setState({totalCount:n},"contacts__set-search-filter-value")}normalizeContacts(n){return n.sort((S,C)=>(0,h.m2)(S.name,C.name))}updateContact(n,S=""){S=S?`update-contact_by_${S}`:"update-contact";const C=n.contact.contactId;let T=null;const P=this.contacts.map(A=>A.contact.contactId===C?(T=Object.assign({},A,n),T):A);this.setContacts(P,S),C===this.selectedContactId&&this.setSelectedContact(T)}flushContactsCash(){const n=this.contacts.map(S=>({...S,isPartial:!0}));this.updateContacts(n)}updateContacts(n){const S=this.contacts.map(C=>{const T=n.find(({contact:P})=>P.contactId===C.contact.contactId);return T?(0,f.Z)(C,T):C});this.setContacts(S)}setTagSuggestions(n){this.setState({tagSuggestions:n},"contacts__set-tag-suggestion")}setInvitations(n,S=""){this.setState({invitations:n},"contacts__set-invitations"+(S=S?`_by_${S}`:""))}appendInvitations(n,S=""){const T=[...this.invitations,...n];this.setInvitations(T,"append-invitations")}setIsInvitationsFirstPageFetched(n){this.setState({isInvitationsFirstPageFetched:n},"contacts__set-is-invitations-first-page-fetched")}setIsInvitationsFirstPageFetching(n){this.setState({isInvitationsFirstPageFetching:n},"contacts__set-is-invitations-first-page-fetching")}setIsInvitationsNextPageFetching(n){this.setState({isInvitationsNextPageFetching:n},"contacts__set-is-invitations-next-page-fetching")}setTotalInvitationsCount(n,S=""){this.setState({totalInvitationsCount:n},"contacts__set-total-invitations-count"+(S=S?`_by_${S}`:""))}setHasInvitationsHasNextPage(n){this.setState({hasInvitationsNextPage:n},"contacts__set-has-invitations-next-page")}setIsFullContactInfoLoading(n){this.setState({isFullContactInfoFetching:n},"contacts__set-is_full_contact_info_loading")}prependInvitation(n,S=""){const T=[n,...this.invitations];this.setInvitations(T,S),this.setTotalInvitationsCount(this.totalInvitationsCount+1,"addInvitation")}removeInvitation(n,S=""){const T=this.invitations.filter(M=>M.interlocutor.profile?.profileId!==n);this.setInvitations(T,S),this.selectedInvitationId===n&&this.setSelectedInvitationId(null),this.setTotalInvitationsCount(this.totalInvitationsCount-1,"removeInvitation")}setInfoViewMode(n){this.setState({infoViewMode:n},"contacts__set-info-view-mode")}setShownInvitationsCount(n){this.setState({shownInvitationsCount:n},"contacts__set-shown-invitations-count")}setSelectedContact(n){this.setState({selectedContact:n},"contact__set_selected_contact")}}return g.\u0275fac=function(n){return new(n||g)(o.LFG(l.gz),o.LFG(l.F0),o.LFG(c.U),o.LFG(I))},g.\u0275prov=o.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()},95828:(z,R,t)=>{t.d(R,{B8:()=>f,KO:()=>h,kw:()=>i,w_:()=>_,xQ:()=>s});var e=t(42827);function s(r){return r.contact.contactId}function h(r){return r.profile.profileId}function _(r){return{...r,isPartial:!0}}function i(r){return{...r,onlineStatus:e.Y.UNKNOWN,isPartial:!1}}function f(r){return{...r,onlineStatus:e.Y.UNKNOWN}}},10835:(z,R,t)=>{t.d(R,{C:()=>a});var e=t(26215),s=t(88002),h=t(45435),_=t(87519),i=t(911);class r{deepClone(l){return l}fixPropertyValue(l,c,d){const v=l[d];switch(typeof v){case"object":if(v instanceof i.mzB){const m=new i.mzB;m.setTime(v.getTime()),c[d]=m}else if(v instanceof Date){const m=new Date;m.setTime(v.getTime()),c[d]=m}else v instanceof RegExp?c[d]=this.newRegExp(v):v instanceof Map?c[d]=new Map(v):v instanceof Set?c[d]=new Set(v):null==v?c[d]=v:this.fixTypes(v,c[d]);break;case"number":isNaN(v)?c[d]=NaN:v==1/0&&(c[d]=1/0)}}fixTypes(l,c){if(l instanceof Array)for(let d=0;d<l.length;d++)this.fixPropertyValue(l,c,d);else Object.getOwnPropertyNames(l).forEach(v=>{this.fixPropertyValue(l,c,v)})}newRegExp(l){const c=String(l),d=c.lastIndexOf("/");return new RegExp(c.slice(1,d),c.slice(d+1))}}const u=new class p{constructor(){this.storeState=null,this.clonerService=new r,this.extensions=[],this.settingsDefaults={trackStateHistory:!1,logStateChanges:!1,stateSliceSelector:null},this.stateHistory=[],this.globalStateDispatcher=new e.X(null),this.globalStateWithChangesDispatcher=new e.X({}),this.globalSettings=null,this.services=[]}initializeState(l){if(this.storeState)throw Error("The store state has already been initialized. initializeStoreState() can only be called once BEFORE any store state has been set.");return this.setStoreState(l)}getStoreState(l=null,c=!0,d){let v=null;if(this.storeState){const I=d?this.storeState[d]:this.storeState;l?I.hasOwnProperty(l)&&(v=I[l]):v=I,v&&c&&(v=this.deepClone(v))}return v}getNewStoreState(l,c,d=void 0,v=!0){return v?d?{...l,[d]:{...l[d],...this.deepClone(c)[d]}}:{...l,...this.deepClone(c)}:d?{...l,[d]:{...l[d],...c[d]}}:{...l,...c}}setStoreState(l,c=void 0,d=!0){const v=this.getStoreState(null,d,void 0);this.storeState=this.getNewStoreState(v,l,c,d)}clearStoreState(){this.storeState=null}deepClone(l){return this.clonerService.deepClone(l)}addExtension(l){this.extensions.push(l),l.init()}};class a{get stateHistory(){return u.stateHistory}constructor(l){this.dispatcher$=new e.X({prev:null,state:null,stateChanges:void 0}),this.stateQueue=[],this.settings={...u.settingsDefaults,...l,...u.globalSettings},this.stateChanged=this.dispatcher$.pipe((0,s.U)(c=>c.state),(0,h.h)(c=>null!==c)),this.stateChangedWithPrev=this.dispatcher$.pipe((0,h.h)(c=>!!c.prev),(0,s.U)(c=>({current:c.state,prev:c.prev}))),this.globalStateChanged=u.globalStateDispatcher.asObservable(),this.stateWithPropertyChanges=this.dispatcher$.pipe((0,s.U)(c=>({state:c.state,stateChanges:c.stateChanges}))),this.globalStateWithPropertyChanges=u.globalStateWithChangesDispatcher.asObservable(),u.services.push(this)}static get globalSettings(){return u.globalSettings}static set globalSettings(l){if(l&&!u.globalSettings)u.globalSettings=l;else{if(!l)throw new Error("Please provide the global settings you would like to apply to Observable Store");if(l&&u.globalSettings)throw new Error("Observable Store global settings may only be set once when the application first loads.")}}static get allStoreServices(){return u.services}static addExtension(l){u.addExtension(l)}static initializeState(l){u.initializeState(l)}static resetState(l,c=!0){u.setStoreState(l),c&&a.dispatchToAllServices(l)}static clearState(l=!0){u.clearStoreState(),l&&a.dispatchToAllServices(null)}static dispatchToAllServices(l){const c=a.allStoreServices;if(c)for(const d of c)d.dispatchState(l)}getState(l=!0){return this.getStateOrSlice(l)}getStateProperty(l,c=!0){return u.getStoreState(l,c,this.settings.isolateAs)}getReactiveStateProperty(l,c=!0){let d=this.stateChanged.pipe((0,s.U)(v=>v[l]));return c&&(d=d.pipe((0,_.x)())),d}getNewState(l,c){switch(typeof l){case"function":const d=this.settings.isolateAs,v=this.getState(c);return l(d?v[d]:v);case"object":return l;default:throw Error("Pass an object or a function for the state parameter when calling setState().")}}setState(l,c,d=!0,v=!0){this.stateQueue.push({state:l,action:c,dispatchState:d,deepCloneState:v}),1===this.stateQueue.length&&this.processQueue()}processQueue(){const l=this.stateQueue[0];if(!l)return;const{deepCloneState:c,state:d,action:v,dispatchState:I}=l,m=this.getState(c),g=this.getNewState(d,c);this.updateState(g,c),this.settings.trackStateHistory&&u.stateHistory.push({action:v,beginState:m,endState:this.getState(c)}),I&&this.dispatchState(d),this.settings.logStateChanges&&console.log("%cSTATE CHANGED","font-weight: bold","\r\nAction: ",v,this.constructor?"\r\nCaller: "+this.constructor.name:"","\r\nState: ",d),this.stateQueue.shift(),this.processQueue()}logStateAction(l,c){this.settings.trackStateHistory&&u.stateHistory.push({action:c,beginState:this.getState(),endState:u.deepClone(l)})}resetStateHistory(){u.stateHistory=[]}updateState(l,c){const d=this.settings.isolateAs;let v=l;d&&(v={[d]:l}),u.setStoreState(v,d,c)}getStateOrSlice(l){const c=u.getStoreState(null,l,void 0);if(this.settings.stateSliceSelector){const d=this.settings.isolateAs,I=this.settings.stateSliceSelector(d?c[d]:c);return d?{[d]:I}:I}return c}dispatchState(l,c=!0){const d=this.getStateOrSlice(!0),v=this.settings.isolateAs,I=v?d[v]:d,m=u.getStoreState(null,!0,void 0),g=this.dispatcher$.value;c&&(u.globalStateDispatcher.next(m),u.globalStateWithChangesDispatcher.next({state:I,stateChanges:l})),this.dispatcher$.next({state:I,prev:g.state,stateChanges:l})}startTransactionPositive(l){const c=this.getState(),d=this.setState,v=Object.create(this);return v.setState=(I,m,g=!0,E=!0)=>(d.call(this,I,m,!1,E),c),v.commit=()=>{this.dispatchState(this.getState())},v.rollback=()=>{this.setState(c,`${l}-transaction-rollback`,!1)},v}startTransactionNegative(l){const c=this.setState;let d=this.getState();const v=Object.create(this);return v.setState=function(I,m,g=!0,E=!0){return d=u.getNewStoreState(d,I,this.settings.isolateAs,E),d},v.commit=function(){c(d,`${l}-transaction-commit`)},v.rollback=function(){d=this.getState()},v}}},73859:(z,R,t)=>{t.d(R,{K:()=>f});var e=t(88002),s=t(45435),h=t(39947),_=t(54355);const i={folder:null,files:[],openedFile:null};let f=(()=>{class r extends h.F{constructor(){super({stateSliceSelector:u=>({folder:u?.folder,files:u?.files,openedFile:u?.openedFile})}),this.folder$=this.stateChanged.pipe((0,e.U)(({folder:u})=>u),(0,s.h)(u=>!!u)),this.files$=this.stateChanged.pipe((0,e.U)(({files:u})=>u),(0,s.h)(u=>!!u)),this.openedFile$=this.stateChanged.pipe((0,e.U)(({openedFile:u})=>u)),this.setState(i,"files__set_initial_state")}setCurrentFolder(u){this.setState({folder:u},"files__set_current_folder")}setFiles(u){this.setState({files:u},"files__set_current_folder_files")}setOpenedFile(u){this.setState({openedFile:u},"files__set_opened_file")}}return r.\u0275fac=function(u){return new(u||r)},r.\u0275prov=_.Yz7({token:r,factory:r.\u0275fac}),r})()},85422:(z,R,t)=>{t.d(R,{l:()=>e});var e=(()=>((e=e||{}).WIDE="WIDE",e.INLINE="INLINE",e.PIP="PIP",e))()},16858:(z,R,t)=>{t.d(R,{h:()=>l});var e=t(911),s=t(66682),h=t(88002),_=t(87519),i=t(46782),f=t(16882),r=t(339),p=t(54355),u=t(12841),a=t(12487),o=t(5469);let l=(()=>{class c extends f.F{get conferenceSessionOpenMode(){return this.conferenceSessionOpenMode$.value}get activeConferenceSessionId(){return this.activeConferenceSessionId$.value}get activeSection(){return this.activeSection$.value}get callingConferenceSessions(){return this.getStateProperty("callingConferenceSessions",!1)}get isConferenceWelcomeModalShown(){return this.getStateProperty("isConferenceWelcomeModalShown",!1)}constructor(v,I,m,g){super(v,I,m,{stateSliceSelector:E=>({activeSection:E?.activeSection,conferenceSessionOpenMode:E?.conferenceSessionOpenMode,activeConferenceSessionId:E?.activeConferenceSessionId,activeConferenceSession:E?.activeConferenceSession,isEnteringConference:E?.isEnteringConference,callingConferenceSessions:E?.callingConferenceSessions,isConferenceWelcomeModalShown:E?.isConferenceWelcomeModalShown})},[{getStoreValue:E=>E.activeConferenceSessionId,setStoreValue:E=>({activeConferenceSessionId:E||null}),getQueryParamsValue:E=>E.conferenceSessionId,setQueryParamsValue:E=>({conferenceSessionId:E||void 0})},{getStoreValue:E=>E.conferenceSessionOpenMode,setStoreValue:E=>({conferenceSessionOpenMode:E||null}),getQueryParamsValue:E=>E.conferenceSessionOpenMode,setQueryParamsValue:E=>({conferenceSessionOpenMode:E})}]),this.activeSessionBroadcastService=g,this.conferenceSessionOpenMode$=(0,e.Hxy)(this.stateChanged.pipe((0,h.U)(E=>E.conferenceSessionOpenMode),(0,_.x)())),this.activeConferenceSessionId$=(0,e.Hxy)(this.stateChanged.pipe((0,h.U)(E=>E.activeConferenceSessionId),(0,_.x)())),this.activeSection$=(0,e.Hxy)(this.stateChanged.pipe((0,h.U)(E=>E.activeSection),(0,_.x)())),this.activeConferenceSession$=(0,e.Hxy)(this.stateChanged.pipe((0,h.U)(E=>E.activeConferenceSession))),this.isEnteringConference$=(0,e.Hxy)(this.stateChanged.pipe((0,h.U)(E=>E.isEnteringConference))),this.callingConferenceSessions$=this.stateChanged.pipe((0,h.U)(E=>E.callingConferenceSessions)),this.setState({activeSection:r.$.NONE,conferenceSessionOpenMode:null,activeConferenceSessionId:null,activeConferenceSession:null,isEnteringConference:!1,callingConferenceSessions:[],isConferenceWelcomeModalShown:!1},"INIT_STATE"),this.initFromRoutes(),(0,s.T)(this.activeSessionBroadcastService.activeBroadcastRequestReceived$,this.activeConferenceSession$).pipe((0,i.R)(this.destroy$)).subscribe(()=>this.activeSessionBroadcastService.sendActiveBroadcastResponse(this.activeConferenceSessionId))}setActiveSection(v){this.setState({activeSection:v},"home__set-active-section")}setConferenceSessionOpenMode(v){this.setState({conferenceSessionOpenMode:v},"home__set-conference-session-open-mode")}setActiveConferenceSessionId(v){this.setState({activeConferenceSessionId:v},"home__set-conference-session-id")}setConferenceSession(v){this.setState({activeConferenceSession:v},"home__set-conference-session")}setIsEnteringConference(v){this.setState({isEnteringConference:v},"home__set-is-entering-conference")}setCallingConferenceSessions(v){this.setState({callingConferenceSessions:v},"home__set-calling-conferenceSession")}addCallingConferenceSession(v){const I=this.callingConferenceSessions;I.push(v),this.setState({callingConferenceSessions:I},"home__add-calling-conferenceSession")}removeCallingConferenceSession(v){const I=this.callingConferenceSessions.filter(m=>m.conferenceSessionId!==v);this.setState({callingConferenceSessions:I},"home__remove-calling-conferenceSession")}setIsConferenceWelcomeModalShown(v){this.setState({isConferenceWelcomeModalShown:v},"home__set-is-conference-welcome-modal-shown")}}return c.\u0275fac=function(v){return new(v||c)(p.LFG(u.gz),p.LFG(u.F0),p.LFG(a.U),p.LFG(o.UC))},c.\u0275prov=p.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()},339:(z,R,t)=>{t.d(R,{$:()=>s,Z:()=>h});var e=t(32588),s=(()=>((s=s||{}).NONE="NONE",s.CHATS="CHATS",s.CONTACTS="CONTACTS",s.CONFERENCES="CONFERENCES",s.ROOMS="ROOMS",s.FILES="FILES",s.SETTINGS="SETTINGS",s))();const h=[{section:s.CHATS,route:e.GG},{section:s.CONTACTS,route:e.pv},{section:s.CONFERENCES,route:e.iV},{section:s.ROOMS,route:e.oD},{section:s.FILES,route:e.Xx},{section:s.SETTINGS,route:e.Sf}]},28728:(z,R,t)=>{t.d(R,{D_:()=>re,CK:()=>u.C,w3:()=>u.w,JD:()=>v,tz:()=>fe.t,nu:()=>I.nu,mK:()=>I.mK,zr:()=>I.zr,uU:()=>L,Ct:()=>I.Ct,Ec:()=>F,aG:()=>I.aG,D1:()=>D,Rp:()=>g.R,hh:()=>b.h,YY:()=>m.Y,Y8:()=>Y,VJ:()=>J,L_:()=>X,TG:()=>V,Lp:()=>H,AZ:()=>K,Ps:()=>oe,x6:()=>te,YS:()=>N,X8:()=>d,Ph:()=>g.P,P4:()=>I.P4,rY:()=>I.rY,Du:()=>I.Du,j8:()=>P});var e=t(5469),s=t(91585),h=t(9112),_=t(26215),i=t(88002),f=t(87519),r=t(16803),p=t(39947),u=t(79784),a=t(54355),o=t(13810),l=t(6190),c=(()=>((c=c||{})[c.START=0]="START",c[c.END=-1]="END",c))(),d=(()=>((d=d||{}).HTTP_REFERENCE_NOT_ALLOWED="HTTP_REFERENCE_NOT_ALLOWED",d))();let v=(()=>{class _e extends p.F{get messageDraft(){return this.messagesDrafts[this.currentChatId]||""}set messageDraft($){this.messagesDrafts[this.currentChatId]=$}get messages(){return this.getStateProperty("conferenceChatsMessages",!1)}get unreadMessages(){return this.getStateProperty("unreadChatMessages",!1)}get moderationMessages(){return this.getStateProperty("moderationMessages",!1)}get moderationMessagesCount(){return this.getStateProperty("moderationMessagesCount",!1)}get isModerationMessagesFetching(){return this.getStateProperty("isModerationMessagesFetching",!1)}get isModerationMessagesNextPageFetching(){return this.getStateProperty("isModerationMessagesNextPageFetching",!1)}get moderationMessagesHasNext(){return this.getStateProperty("moderationMessagesHasNext",!1)}get typings(){return this.getStateProperty("typings",!1)}get conferenceChatsMeta(){return this.getStateProperty("conferenceChatsMeta",!1)}get currentChat(){return this.getStateProperty("currentChat",!1)}get currentChatId(){return this.currentChat?.participantId}get isCurrentChatCommon(){return this.currentChat?.participantId===u.C}get openedChats(){return this.getStateProperty("openedChats",!1)}get hasPreviousPage(){return this.conferenceChatsMeta[this.currentChatId].hasPreviousPage}get hasNextPage(){return this.conferenceChatsMeta[this.currentChatId].hasNextPage}get lastPersonalChatId(){return this.getStateProperty("lastPersonalChatId",!1)}get lastPersonalChat(){return this.openedChats.find($=>$.participantId===this.lastPersonalChatId)||null}get rejectingMessageId(){return this.getStateProperty("rejectingMessageId",!1)}get repliedMessage(){return this.getStateProperty("repliedMessage",!1)}constructor($,Z,B){super({stateSliceSelector:ie=>({moderationMessages:ie?.moderationMessages,conferenceChatsMessages:ie?.conferenceChatsMessages,conferenceChatsMeta:ie?.conferenceChatsMeta,openedChats:ie?.openedChats,currentChat:ie?.currentChat,currentPane:ie?.currentPane,openedChatsFetched:ie?.openedChatsFetched,typings:ie?.typings,lastPersonalChatId:ie?.lastPersonalChatId,isOpenedChatsFetching:ie?.isOpenedChatsFetching,isModerationMessagesFetching:ie?.isModerationMessagesFetching,isModerationMessagesNextPageFetching:ie?.isModerationMessagesNextPageFetching,moderationMessagesHasNext:ie?.moderationMessagesHasNext,moderationMessagesCount:ie?.moderationMessagesCount,rejectingMessageId:ie?.rejectingMessageId,unreadChatMessages:ie?.unreadChatMessages,repliedMessage:ie?.repliedMessage,lastOpenedPane:ie?.lastOpenedPane}),isolateAs:"ConferenceChat"},Z),this.loginService=$,this.updater=Z,this.translate=B,this.messagesDrafts={},this.COMMON_CHAT={participantId:u.C,avatarId:"assets/icons/unsized/common-chat.svg",name:this.translate.stream("CONFERENCE_SESSION__CHAT__COMMON_CHAT"),profileId:u.C},this.currentPane$=this.getReactiveStateProperty("currentPane"),this.lastOpenedPane$=this.getReactiveStateProperty("lastOpenedPane"),this.currentChat$=this.stateChanged.pipe((0,i.U)(ie=>ie.currentChat),(0,f.x)()),this.messagesThrottleTimeMs=e._Z.settings.CONFERENCE_SESSION_CHAT_MESSAGES_THROTTLE_TIME_MS,this.messages$=this.getReactiveStateProperty("conferenceChatsMessages").pipe((0,r.p)(this.messagesThrottleTimeMs,void 0,{leading:!0,trailing:!0})),this.unreadMessages$=this.getReactiveStateProperty("unreadChatMessages"),this.moderationMessages$=this.getReactiveStateProperty("moderationMessages"),this.moderationMessagesCount$=this.getReactiveStateProperty("moderationMessagesCount"),this.isModerationMessagesFetching$=this.getReactiveStateProperty("isModerationMessagesFetching"),this.isModerationMessagesNextPageFetching$=this.getReactiveStateProperty("isModerationMessagesNextPageFetching"),this.typings$=this.getReactiveStateProperty("typings"),this.currentChatTypings$=this.typings$.pipe((0,i.U)(ie=>ie[this.currentChatId])),this.conferenceChatsMeta$=this.getReactiveStateProperty("conferenceChatsMeta"),this.currentChatMeta$=(0,h.aj)([this.conferenceChatsMeta$,this.currentChat$]).pipe((0,i.U)(([ie,G])=>ie[G?.participantId])),this.openedChats$=this.getReactiveStateProperty("openedChats"),this.currentChatChanged$=this.getPropChanged$(ie=>ie.currentChat?.participantId),this.lastPersonalChatId$=this.getReactiveStateProperty("lastPersonalChatId"),this.lastPersonalChat$=(0,h.aj)([this.lastPersonalChatId$,this.openedChats$]).pipe((0,i.U)(([ie,G])=>G.find(ae=>ae.participantId===ie))),this.rejectingMessageId$=this.getReactiveStateProperty("rejectingMessageId"),this.repliedMessage$=this.getReactiveStateProperty("repliedMessage"),this.isChatLoading$=new _.X(!1),this.setInitialState()}setInitialState(){this.setState({openedChats:[],moderationMessages:[],conferenceChatsMessages:{},conferenceChatsMeta:{[u.C]:{hasNextPage:!0,hasPreviousPage:!1,isFirstPageFetched:!1}},currentChat:null,currentPane:this.COMMON_CHAT,openedChatsFetched:!1,typings:{},lastPersonalChatId:null,isOpenedChatsFetching:!1,isModerationMessagesFetching:!1,isModerationMessagesNextPageFetching:!1,moderationMessagesHasNext:!0,moderationMessagesCount:0,rejectingMessageId:null,unreadChatMessages:{},repliedMessage:null,lastOpenedPane:this.COMMON_CHAT},"INIT_STATE")}flushMessages($){const Z={...this.messages,[$]:[]};this.setState({conferenceChatsMessages:Z},"conference_chat__flush_chat_messages")}setAllMessages($,Z){const B={...$};this.setState({conferenceChatsMessages:B},`conference_chat__set_all_chat_messages_by_${Z}`)}setModerationMessages($){this.setState({moderationMessages:$},"conference_chat__set_moderation_messages")}insertModerationMessageByTime($){const B=this.insertMessageByTimeInto(this.moderationMessages,$);this.setState({moderationMessages:[...B]},`conference_chat__insert_moderation_messages_by_time_to_${$.createdAt}`)}appendModerationMessages($){const Z=[...this.moderationMessages,...$];this.setState({moderationMessages:Z},"conference_chat__append_moderation_message")}removeModerationMessages($){const Z=this.moderationMessages.length,B=this.moderationMessages.filter(ie=>!$(ie));return this.setState({moderationMessages:B},"conference_chat__remove_moderation_message"),Z-B.length}prependMessages($,Z){this.insertMessages(c.START,$,Z)}appendMessages($,Z){this.insertMessages(c.END,$,Z)}insertMessages($,Z,B){const ie=this.sortMessages(Z),G=e._Z.settings.CONFERENCE_CHAT_STORE_LIMIT,ae={...this.messages};if(ae[B]=ae[B]?[...ae[B]]:[],$===c.END)ae[B].push(...ie),ae[B].length>G&&(ae[B].splice(0,ae[B].length-G),this.conferenceChatsMeta[B].hasNextPage=!0);else{if(!($>=0))throw new Error("Attempt to insert messages to negative position");ae[B].splice($,0,...Z),ae[B].length>G&&(ae[B].splice(G,ae[B].length-G),this.conferenceChatsMeta[B].hasPreviousPage=!0)}this.setState({conferenceChatsMessages:ae},`conference_chat__insert__chat_messages_by_position_to_${$}`)}insertMessageByTimeInto($,Z){const B=[...$];let ie=!1;for(let G=0;G<B.length-1;G++){const Se=Z.createdAt;if(B[G].createdAt<Se&&Se<B[G+1].createdAt){B.splice(G+1,0,Z),ie=!0;break}}return ie||B.push(Z),B}insertMessageByTime($,Z){const B={...this.messages};B[Z]=B[Z]?[...B[Z]]:[],B[Z]=this.insertMessageByTimeInto(B[Z],$),this.setState({conferenceChatsMessages:B},`conference_chat__insert_chat_messages_by_time_to_${$.createdAt}`)}getMessageInfoById($){const Z=this.messages,B=(0,s._)(Z);let ie,G;for(const he of B)if(ie=Z[he].findIndex(Se=>Se.messageId===$),-1!==ie){G=he;break}const ae=Z[G]?.[ie];return G?{chatId:G,messageIndex:ie,message:ae}:void 0}removeMessageByMessageInfo($,Z,B=!1){const ie={...this.messages},G=$?.messageIndex,ae=$?.chatId,he=$?.message;if(!he)return this.loginService.profileId!==Z.profileId&&console.warn("Attempt to remove conference chat message which does not exist"),null;B||this.loginService.profileId===Z.profileId?ie[ae].splice(G,1):(he.deletedByParticipantId=Z.participantId,he.deletedByProfileId=Z.profileId||null);const Se=this.unreadMessages;return Se[ae]=Se[ae].filter(Oe=>Oe.messageId!==he.messageId),this.setUnreadMessages({...Se}),this.setState({conferenceChatsMessages:ie},"conference_chat__remove_message"),{chatId:ae,messageIndex:G}}removeMessage($,Z,B=!1){const ie=this.getMessageInfoById($);return this.removeMessageByMessageInfo(ie,Z,B)}clearMessages(){const $=this.messages,Z=Object.keys($);for(const B of Z)$[B]=[];this.setState({conferenceChatsMessages:{...$}},"conference_chat__clear_messages"),this.setUnreadMessages({...$}),this.setModerationMessages([]),this.setModerationMessagesCount(0),this.setRepliedMessage(null)}removeParticipantMessages($,Z,B){const ie={...this.messages},G=Object.keys(ie);for(const ae of G)if(B)ie[ae]=ie[ae].filter(he=>he.authorProfileId!==$);else for(let he=0;he<ie[ae].length;he++)ie[ae][he].authorProfileId===$&&(ie[ae][he]={...ie[ae][he],deletedByParticipantId:Z});this.setState({conferenceChatsMessages:ie},"conference_chat__remove_all_participant_messages")}removeParticipantModerationMessages($){const Z=this.moderationMessages.filter(B=>B.authorProfileId!==$);this.setState({moderationMessages:Z},"conference_chat__remove_all_participant_moderation_messages")}setTypings($,Z=""){$={...$},this.setState({typings:$},"conference_chat__set_typings"+(Z?`_by_${Z}`:""))}setOpenedChats($){$.unshift(this.COMMON_CHAT);const Z=$.reduce((B,ie)=>({...B,[ie.participantId]:{hasNextPage:!0,isFirstPageFetched:!1}}),{});($=$.filter(B=>!this.openedChats.some(ie=>B.participantId===ie.participantId))).push(...this.openedChats),this.setState({openedChats:$,conferenceChatsMeta:Z,openedChatsFetched:!0},"conference_chat__set_opened_chats")}addOpenedChat($){const Z=[...this.openedChats];if(Z.find(G=>G.participantId===$.participantId))return;Z.push($);const ie={...this.conferenceChatsMeta,[$.participantId]:{hasNextPage:!1,hasPreviousPage:!1,isFirstPageFetched:!1}};this.setState({openedChats:Z,conferenceChatsMeta:ie},"conference_chat__add_opened_chat")}setCurrentPane($){this.setState({currentPane:$},"conference_chat__set_chat_pane")}setLastOpenedPane($){this.setState({lastOpenedPane:$},"conference_chat__set_last_chat_pane")}setCurrentChat($){$&&this.markChatMessagesAsRead($.participantId),this.setState({currentChat:$},"conference_chat__set_current_chat")}markChatMessagesAsRead($){const Z={...this.unreadMessages,[$]:[]};this.setState({unreadChatMessages:Z},`conference_chat__set_unread_messages_read_for_chat ${$}`)}setChatMeta($,Z){const B={...this.conferenceChatsMeta,[$]:{...this.conferenceChatsMeta[$],...Z}};this.setState({conferenceChatsMeta:B},"conference_chat__set_chat_meta")}addUnreadMessages($){const Z={...this.unreadMessages},B=$.targetParticipantId?$.authorParticipantId:u.C;Z[B]=Z[B]?[...Z[B]]:[],Z[B].push($),this.setUnreadMessages(Z)}setUnreadMessages($){this.setState({unreadChatMessages:$},"conference_chat__set_unread_messages")}addOwnMessage($){const Z={...this.messages},B=$.targetParticipantId||u.C;Z[B]=Z[B]?[...Z[B]]:[],Z[B].push($),this.setState({conferenceChatsMessages:Z},"conference_chat__add_own_chat_message")}enrichOwnMessage($,Z){const B={...this.messages},ie=$.targetParticipantId||u.C,G=B[ie].findIndex(ae=>ae.innerId===$.innerId);-1!==G?(B[ie]=[...B[ie]],B[ie][G]=Z,this.setState({conferenceChatsMessages:B},"conference_chat__enrich_own_chat_message")):console.warn(`Attempt to enrich own message with inner id ${$.innerId} which not exist`)}markMessageSendingFailed($,Z){const B={...this.messages},ie=$.targetParticipantId||u.C,G=B[ie].findIndex(ae=>ae.innerId===$.innerId);-1!==G?(B[ie][G]={...B[ie][G],sendingError:Z},this.setState({conferenceChatsMessages:B},"conference_chat__mark_error_own_chat_message")):console.warn(`Attempt to mark error for own message with inner id ${$.innerId} which not exist`)}updateMessageModeration($,Z){const B={...this.messages},ie=B[Z].findIndex(G=>G.messageId===$.messageId);-1!==ie?(B[Z]=[...B[Z]],B[Z].splice(ie,1),B[Z].push($),this.setState({conferenceChatsMessages:B},"conference_chat__add_own_chat_message")):console.warn(`Attempt to update moderation info for not found message ${$.messageId}`)}sortMessages($){return $.sort((Z,B)=>(Z.moderatedAt||Z.createdAt)-(B.moderatedAt||B.createdAt))}setIsOpenedChatsFetching($){this.setState({isOpenedChatsFetching:$},"conference_chat__is_opened_chats_fetching")}setIsModerationMessagesFetching($){this.setState({isModerationMessagesFetching:$},"conference_chat__is_moderation_messages_fetching")}setIsModerationMessagesNextPageFetching($){this.setState({isModerationMessagesNextPageFetching:$},"conference_chat__is_moderation_messages_next_page_fetching")}setLastPersonalChatId($){this.setState({lastPersonalChatId:$},"conference_chat__set_last_personal_chat_id")}setModerationMessagesCount($){this.setState({moderationMessagesCount:$},"conference_chat__set_moderation_messages_count")}incModerationMessagesCount($=1){this.setState(Z=>({moderationMessagesCount:Z.moderationMessagesCount+$}),"conference_chat__inc_moderation_messages_count")}decModerationMessagesCount($=1){this.setState(Z=>({moderationMessagesCount:Z.moderationMessagesCount-$}),"conference_chat__dec_moderation_messages_count")}setModerationMessagesHasNext($){this.setState({moderationMessagesHasNext:$},"conference_chat__moderation_messages_has_next")}setModerationMessagesModerationStatus($,Z){const B=this.moderationMessages;B.filter(G=>$(G)).forEach(G=>G.moderationStatus=Z),this.setState({moderationMessages:[...B]},"conference_chat__set_moderation_messages_moderation_status")}setRejectingMessageId($){this.setState({rejectingMessageId:$},"conference_chat__set_rejecting_message_id")}setRepliedMessage($){this.setState({repliedMessage:$},"conference_chat__set_replied_message")}}return _e.\u0275fac=function($){return new($||_e)(a.LFG(e.r6),a.LFG(o.P),a.LFG(l.sK))},_e.\u0275prov=a.Yz7({token:_e,factory:_e.\u0275fac}),_e})();var I=t(50268),m=t(85762),g=t(87636),E=t(12989),n=t(911),S=t(46782),C=t(70964);let T=(()=>{class _e extends C.m{constructor($){super($)}initUpdater(){this.cometService.getChildNumberedEventByClass$("ProfileChangedEvent").pipe((0,S.R)(this.takeUntilSubj)).subscribe(this.updateProfile.bind(this)),this.cometService.getChildNumberedEventByClass$("DiskUtilizationChangedEvent").pipe((0,S.R)(this.takeUntilSubj)).subscribe(this.processDiskUtilizationChanged.bind(this))}updateProfile({profile:$}){this.storeService.updateProfile($)}processDiskUtilizationChanged($){this.storeService.updateDiskUtilizationInfo($.diskUtilizationInfo)}}return _e.\u0275fac=function($){return new($||_e)(a.LFG(e.y_))},_e.\u0275prov=a.Yz7({token:_e,factory:_e.\u0275fac,providedIn:"root"}),_e})(),P=(()=>{class _e extends p.F{get sessionInfo(){return this.getStateProperty("sessionInfo",!1)}get profile(){return this.sessionInfo.user}get timeZoneCode(){return this.profile.timeZone}get isAutomaticTimeZone(){return!!this.profile.isTimeZoneAutoSelection}get currentTimeZone(){return this.currentTimeZone$.value}constructor($,Z,B){super({stateSliceSelector:ie=>({sessionInfo:ie?.sessionInfo,isInLogin:ie?.isInLogin})},$),this.updater=$,this.timeZoneService=Z,this.loginService=B,this.sessionInfo$=this.stateChanged.pipe((0,i.U)(ie=>ie.sessionInfo)),this.isInLogin$=this.getReactiveStateProperty("isInLogin"),this.hasAdminAccess$=this.sessionInfo$.pipe((0,i.U)(ie=>!!ie?.hasAdminAccess)),this.canCreateConference$=this.sessionInfo$.pipe((0,i.U)(ie=>!!ie?.user.isConferenceCreationEnabled)),this.profile$=this.sessionInfo$.pipe((0,i.U)(ie=>ie?.user)),this.timeZoneCode$=this.profile$.pipe((0,i.U)(ie=>ie?.isTimeZoneAutoSelection?this.timeZoneService.COMPUTER_TIME_ZONE.code:ie?.timeZone||this.timeZoneService.COMPUTER_TIME_ZONE.code)),this.isAutomaticTimeZone$=this.profile$.pipe((0,i.U)(ie=>ie?.isTimeZoneAutoSelection)),this.currentTimeZone$=(0,n.Hxy)(this.timeZoneCode$.pipe((0,i.U)(ie=>this.timeZoneService.getTimeZoneByCode(ie)||E.G))),this.setInitialState()}setInitialState(){this.setState({sessionInfo:null,isInLogin:!1},"INITIAL_STATE")}setIsInLogin($){this.setState({isInLogin:$},"user_session__set_is_in_login")}updateSessionInfo($){this.setState({sessionInfo:{...$}},"user-session__update_session_info")}updateProfile($){const Z=this.sessionInfo,B=this.loginService.loginToken;Z.user=$,this.loginService.setLoginInfo({...Z,loginToken:B}),this.setState({sessionInfo:Z},"user-session__update_profile")}updateDiskUtilizationInfo($){const Z=this.sessionInfo;Z.diskUtilizationInfo=$,this.setState({sessionInfo:Z},"user-session__update_profile")}setTimeZone($){const Z=this.sessionInfo;Z.user.timeZone=$,this.setState({sessionInfo:Z},"user-session__set-time-zone")}setIsAutomaticTimeZone($){const Z=this.sessionInfo;Z.user.isTimeZoneAutoSelection=$,this.setState({sessionInfo:Z},"user-session__set-is-automatic-time-zone")}}return _e.\u0275fac=function($){return new($||_e)(a.LFG(T),a.LFG(E.F),a.LFG(e.r6))},_e.\u0275prov=a.Yz7({token:_e,factory:_e.\u0275fac,providedIn:"root"}),_e})();var A=t(27944);let M=(()=>{class _e extends C.m{constructor($){super($)}initUpdater(){this.cometService.getChildNumberedEventByClass$("ConferenceWhiteboardSaveChangesEvent").pipe((0,S.R)(this.takeUntilSubj)).subscribe(this.updatePage.bind(this)),this.cometService.getChildNumberedEventByClass$("RenameBookEvent").pipe((0,S.R)(this.takeUntilSubj)).subscribe(this.updateBookInfo.bind(this)),this.cometService.getChildNumberedEventByClass$("ConferenceWhiteboardDeleteBookEvent").pipe((0,S.R)(this.takeUntilSubj)).subscribe(this.processBookDeleteEvent.bind(this))}updatePage($){const Z=this.storeService.books,B=Z[$.bookIndex];if(!B)return void console.warn("Attempt to apply SaveChangeEvent for book which does not exist");const ie=B.pages[$.pageIndex];ie?(($.changes||[]).forEach(ae=>this.storeService.updateElement(ie,ae)),this.storeService.setBooks(Z,"by_SaveChangeEvent")):console.warn("Attempt to apply SaveChangeEvent for page which does not exist")}updateBookInfo($){const Z=this.storeService.books,B=Z[$.bookIndex];B?(B.name=$.bookName,this.storeService.setBooks(Z,"by_RenameBookEvent")):console.warn("Attempt to apply RenameBookEvent for book which does not exist")}processBookDeleteEvent($){const Z=this.storeService.books.filter(B=>B.bookId!==$.bookId);this.storeService.setBooks(Z,"by_ConferenceWhiteboardDeleteBookEvent")}}return _e.\u0275fac=function($){return new($||_e)(a.LFG(e.y_))},_e.\u0275prov=a.Yz7({token:_e,factory:_e.\u0275fac,providedIn:"root"}),_e})(),L=(()=>{class _e extends p.F{get books(){return this.getStateProperty("books",!1)}constructor($,Z){super({stateSliceSelector:B=>({books:B?.books,currentBookIndex:B?.currentBookIndex,currentPageIndex:B?.currentPageIndex})},Z),this.cometService=$,this.updater=Z,this.currentBook$=this.stateChanged.pipe((0,i.U)(B=>B?.books[B?.currentBookIndex])),this.currentPage$=this.stateChanged.pipe((0,i.U)(B=>B?.books[B?.currentBookIndex]?.pages[B?.currentPageIndex])),this.setInitialState()}setInitialState(){this.setState({currentPageIndex:-1,currentBookIndex:-1,books:[]},"INIT_STATE")}isPageExist($,Z){return!!this.books[$]?.pages[Z]}addBookOrPage($){const Z=this.books,B=$.bookDTO[0],ie=Z[B.index];if(ie)ie.pages[B.page.index]=B.page;else{const G=[];G[B.page.index]=B.page,Z[B.index]={pages:G,createBy:B.createBy,index:B.index,name:B.name,pageCount:B.pageCount,bookId:B.bookId}}this.setState({books:Z},"conference_session__whiteboard__add_book_or_page")}setCurrentBookAndPage($,Z){this.setState({currentBookIndex:$,currentPageIndex:Z},"conference_session__whiteboard__set_current_book_and_page")}updateElement($,Z){switch(Z.operationType){case A.C.ADD:$.elementDTOs.push({elementId:Z.shape.shapeId,attrs:Z.shape.attributes,author:Z.shape.authorName,svg:Z.shape.svg??"",elementType:Z.shape.shapeType,authorParticipantId:Z.shape.authorParticipantId,changeDate:Z.shape.changeDate,operationType:A.C.ADD,resourceId:Z.shape.resourceId??""});break;case A.C.DELETE:{const B=$.elementDTOs.findIndex(ie=>ie.elementId===Z.shapeId);if(-1===B)return void console.error(`Attempt to remove not exist element on whiteboard: ${Z.shapeId}`);$.elementDTOs.splice(B,1);break}case A.C.CHANGE:{const B=$.elementDTOs.findIndex(ie=>ie.elementId===Z.shape.shapeId);if(-1===B)return void console.error(`Attempt to change not exist element on whiteboard: ${Z.shape.shapeId} (${Z.shape.svg})`);$.elementDTOs[B]={elementId:Z.shape.shapeId,attrs:Z.shape.attributes,author:Z.shape.authorName,svg:Z.shape.svg??"",elementType:Z.shape.shapeType,authorParticipantId:Z.shape.authorParticipantId,changeDate:Z.shape.changeDate,operationType:A.C.ADD,resourceId:Z.shape.resourceId??""};break}}}setBooks($,Z=""){this.setState({books:$},"conference_session__whiteboard__update_page"+(Z=Z?`_by_${Z}`:""))}}return _e.\u0275fac=function($){return new($||_e)(a.LFG(e.y_),a.LFG(M))},_e.\u0275prov=a.Yz7({token:_e,factory:_e.\u0275fac,providedIn:"root"}),_e})(),N=(()=>{class _e extends p.F{get isDemonstratingStarted(){return this.getStateProperty("isDemonstratingStarted",!1)}get isAudioEnabled(){return this.getStateProperty("isAudioEnabled",!1)}constructor(){super({stateSliceSelector:$=>({isDemonstratingStarted:$?.isDemonstratingStarted,screenDemonstratingSettings:$?.screenDemonstratingSettings,isAudioEnabled:$?.isAudioEnabled,hasAudioStream:$?.hasAudioStream})}),this.isScreenDemonstrationWithAudio$=this.getReactiveStateProperty("isAudioEnabled"),this.hasScreenDemonstrationAudioStream$=this.getReactiveStateProperty("hasAudioStream"),this.setInitialState()}setInitialState(){this.setState({isDemonstratingStarted:!1,screenDemonstratingSettings:null,isAudioEnabled:!1,hasAudioStream:!1},"init_screen_sharing_store")}setIsDemonstratingStarted($){this.setState({isDemonstratingStarted:$},"screen-demonstrate__set_is_demonstrating_started")}switchOffScreenDemonstrating(){this.setState({isDemonstratingStarted:!1},"conference_session_switch_off_screen_sharing")}setScreenDemonstratingSettings($){this.setState(()=>({screenDemonstratingSettings:$}),"screen-demonstrate__set_screen_demonstrating_settings")}setIsAudioEnabled($){this.setState({isAudioEnabled:$},"screen-demonstrate__switch_demonstration_audio_"+($?"on":"off"))}setHasAudioStream($){this.setState({hasAudioStream:$},`demonstrate__switch_demonstration_audio_stream_to_${$.toString().toUpperCase()}`)}}return _e.\u0275fac=function($){return new($||_e)},_e.\u0275prov=a.Yz7({token:_e,factory:_e.\u0275fac,providedIn:"root"}),_e})();t(339);var b=t(16858),V=(()=>((V=V||{}).NO_STARTED="NO_STARTED",V.ACTIVE="ACTIVE",V.PAUSE="PAUSE",V.STOPPED="STOPPED",V))(),D=(()=>((D=D||{}).NAME_CHANGED="NAME_CHANGED",D.DURATION_CHANGED="DURATION_CHANGED",D.COLLAPSED="COLLAPSED",D.EXPANDED="EXPANDED",D.REMOVED="REMOVED",D.OPENED="OPENED",D.CLOSED="CLOSED",D.ENTERED="ENTERED",D))(),F=(()=>((F=F||{}).DEFAULT="DEFAULT",F.WARNING="WARNING",F.CLOSE_TO_END="CLOSE_TO_END",F))(),J=(()=>((J=J||{}).AUTO="AUTO",J.MANUALLY="MANUALLY",J))(),H=(()=>((H=H||{}).EQUITABLE_CONVERSATION="EQUITABLE_CONVERSATION",H.WEBINAR="WEBINAR",H))(),Y=(()=>((Y=Y||{}).NONE="NONE",Y.AUDIO="AUDIO",Y.VIDEO="VIDEO",Y.AUDIO_VIDEO="AUDIO_VIDEO",Y))(),X=(()=>((X=X||{}).ALL_PARTICIPANTS="ALL_PARTICIPANTS",X.ONLY_MODERATORS="ONLY_MODERATORS",X))(),K=(()=>((K=K||{}).HEADER="HEADER",K.PARTICIPANT="PARTICIPANT",K))(),oe=(()=>((oe=oe||{}).DEFAULT="DEFAULT",oe.SELECT="SELECT",oe))(),O=t(27598),U=t(76610),k=t(48735);let te=(()=>{class _e extends p.F{constructor($){super({stateSliceSelector:Z=>({lastFetchedPage:Z?.lastFetchedPage,groupsHasBeenFetched:Z?.groupsHasBeenFetched,pageFetching:Z?.pageFetching,lockSwitchRequesting:Z?.lockSwitchRequesting,initialDataFetched:Z?.initialDataFetched,selectedParticipants:Z?.selectedParticipants,participantsGroupsMode:Z?.participantsGroupsMode,isReadyToUpdateUnmapped:Z?.isReadyToUpdateUnmapped,searchValue:Z?.searchValue,groups:Z?.groups,rootGroup:Z?.rootGroup,fullRemoving:Z?.fullRemoving})},$),this.updater=$,this.pageFetching$=this.stateChanged.pipe((0,i.U)(Z=>Z?.pageFetching)),this.groupsHasBeenFetched$=this.stateChanged.pipe((0,i.U)(Z=>Z?.groupsHasBeenFetched)),this.lockSwitchRequesting$=this.stateChanged.pipe((0,i.U)(Z=>Z?.lockSwitchRequesting)),this.initialDataFetched$=this.stateChanged.pipe((0,i.U)(Z=>Z?.initialDataFetched)),this.selectedParticipants$=this.stateChanged.pipe((0,i.U)(Z=>Z?.selectedParticipants)),this.participantsGroupsMode$=this.stateChanged.pipe((0,i.U)(Z=>Z?.participantsGroupsMode)),this.isReadyToUpdateUnmapped$=this.stateChanged.pipe((0,i.U)(Z=>Z?.isReadyToUpdateUnmapped)),this.searchValue$=this.getReactiveStateProperty("searchValue"),this.groups$=this.getReactiveStateProperty("groups"),this.rootGroup$=this.getReactiveStateProperty("rootGroup"),this.fullRemoving$=this.getReactiveStateProperty("fullRemoving"),this.setInitialState()}get groups(){return this.getStateProperty("groups",!1)}get rootGroup(){return this.getStateProperty("rootGroup",!1)}get pageFetching(){return this.getStateProperty("pageFetching",!1)}get initialDataFetched(){return this.getStateProperty("initialDataFetched",!1)}get participantsGroupsMode(){return this.getStateProperty("participantsGroupsMode",!1)}get selectedParticipants(){return this.getStateProperty("selectedParticipants",!1)}get fullRemoving(){return this.getStateProperty("fullRemoving",!1)}setInitialState(){this.setState({lastFetchedPage:null,groupsHasBeenFetched:!1,pageFetching:!1,lockSwitchRequesting:!1,initialDataFetched:!1,selectedParticipants:[],participantsGroupsMode:oe.DEFAULT,isReadyToUpdateUnmapped:!1,searchValue:null,groups:[],rootGroup:null,fullRemoving:!1},"INIT_STATE")}setGroups($,Z=""){this.setState({groups:$},`groups-list-set-by_${Z}`)}setRootGroup($,Z=""){this.setState({rootGroup:$},`root-group-set-by_${Z}`)}setInitialDataFetched(){this.setState({initialDataFetched:!0},"participants-groups_set-initial-data-fetched")}resetInitialDataFetched(){this.setState({initialDataFetched:!1},"participants-groups_set-initial-data-fetched")}updateGroup($){const Z=this.groups;if(!Z.length)return;const B=Z?.findIndex(ie=>ie.conferenceSessionId===$.conferenceSessionId);void 0!==B&&-1!==B&&(Z[B]={...$},Z.sort((ie,G)=>(0,O.m2)(ie.name,G.name)),this.setGroups((0,U.Z)(Z),"updating-existed-group"))}addGroupsToExisted($,Z=""){$.forEach(ie=>{ie.participants=[]});const B=[...this.groups,...$];this.setGroups((0,U.Z)(B))}removeGroupFromExisted($){const Z=this.groups.filter(B=>B.conferenceSessionId!==$);this.setGroups((0,U.Z)(Z))}setPageFetching($,Z=""){this.setState({pageFetching:$},`participants-groups_set-data-loading-status-by_${Z}`)}setGroupsHasBeenFetchedState($){this.setState({groupsHasBeenFetched:$},"participants-groups_set-data-fetching")}setLockSwitchRequesting($){this.setState({lockSwitchRequesting:$},"participants-groups_set-lock-switch-requesting")}setUnlockedGroups($,Z=""){const B=this.groups;$.forEach(ie=>{const G=B?.find(ae=>ae.conferenceSessionId===ie);G&&(G.state=V.ACTIVE)}),this.setGroups((0,U.Z)(B))}setLockedGroups($,Z=""){const B=this.groups;$.forEach(ie=>{const G=B?.find(ae=>ae.conferenceSessionId===ie);G&&(G.state=V.PAUSE,G.actualStartDate=null)}),this.setGroups((0,U.Z)(B))}lockAllGroups(){const $=this.groups?.map(Z=>Z.conferenceSessionId)??[];this.setLockedGroups($,"locking-all-groups")}unlockAllGroups(){const $=this.groups.map(Z=>Z.conferenceSessionId)??[];this.setUnlockedGroups($,"unlocking-all-groups")}collapseGroup($){const Z=[this.rootGroup,...this.groups],B=Z.findIndex(G=>G.conferenceSessionId===$),ie=0===B;-1!==B&&(Z[B].collapsed=!0),ie?this.setRootGroup((0,U.Z)(Z[0])):this.setGroups((0,U.Z)(Z.slice(1)))}expandGroup($){const Z=[this.rootGroup,...this.groups],B=Z.findIndex(G=>G.conferenceSessionId===$),ie=0===B;-1!==B&&(Z[B].collapsed=!1),ie?this.setRootGroup((0,U.Z)(Z[0])):this.setGroups((0,U.Z)(Z.slice(1)))}collapseAllGroups(){const $=this.groups,Z=this.rootGroup;$.forEach(B=>B.collapsed=!0),Z.collapsed=!0,this.setGroups((0,U.Z)($),"collapsing-all-groups"),this.setRootGroup((0,U.Z)(Z))}expandAllGroups(){const $=this.groups,Z=this.rootGroup;$.forEach(B=>B.collapsed=!1),Z.collapsed=!1,this.setGroups((0,U.Z)($),"expanding-all-groups"),this.setRootGroup((0,U.Z)(Z))}setSelectedParticipants($,Z=""){this.setState({selectedParticipants:$},`participants-group_set-selected-participants-by_${Z}`)}addParticipantToSelected($){const Z=[...new Set([...this.selectedParticipants,$])];this.setSelectedParticipants(Z,"select-new-participant")}removeParticipantFromSelected($){const Z=this.selectedParticipants.filter(B=>B!==$);this.setSelectedParticipants(Z,"unselect-new-participant")}unselectAllParticipants(){this.setSelectedParticipants([],"unselect-all-participants")}setParticipantsGroupsMode($,Z=""){this.setState({participantsGroupsMode:$},`participants-groups_groups-mode-set-by_${Z}`)}setIsReadyToUpdateUnmapped($,Z=""){this.setState({isReadyToUpdateUnmapped:$},`participants-groups_set-ready-to-update-unmapped-by_${Z}`)}setSearchValue($){this.setState({searchValue:$},"participants-groups_participants-groups_search_value_set")}setFullRemoving($){this.setState({fullRemoving:$},"participants-groups_participants_groups_full_removing_set")}}return _e.\u0275fac=function($){return new($||_e)(a.LFG(k.x))},_e.\u0275prov=a.Yz7({token:_e,factory:_e.\u0275fac}),_e})();var fe=t(67756);let de=(()=>{class _e extends C.m{constructor($,Z){super($),this.loginService=Z}initUpdater(){}processCreate($){}}return _e.\u0275fac=function($){return new($||_e)(a.LFG(e.y_),a.LFG(e.r6))},_e.\u0275prov=a.Yz7({token:_e,factory:_e.\u0275fac,providedIn:"root"}),_e})(),re=(()=>{class _e extends p.F{get notificationText(){return this.getStateProperty("notificationText",!1)}get isNotificationBannerShown(){return this.getStateProperty("isNotificationsBannerShown",!1)}constructor($,Z){super({stateSliceSelector:B=>({notificationText:B?.notificationText,isNotificationsBannerShown:B?.isNotificationsBannerShown}),isolateAs:"BannerNotificationsStore"}),this.loginService=$,this.updater=Z,this.notificationText$=this.getReactiveStateProperty("notificationText"),this.isNotificationsBannerShown$=this.getReactiveStateProperty("isNotificationsBannerShown"),this.setInitialState()}setInitialState(){this.setState({notificationText:null,isNotificationsBannerShown:!0},"INIT_STATE")}setNotificationText($){this.setState({notificationText:$},"banner_notifications__set-notification-text")}setIsNotificationBannerShown($){this.setState({isNotificationsBannerShown:$},"banner_notifications__set-is-notification-shown")}}return _e.\u0275fac=function($){return new($||_e)(a.LFG(e.r6),a.LFG(de))},_e.\u0275prov=a.Yz7({token:_e,factory:_e.\u0275fac,providedIn:"root"}),_e})()},85762:(z,R,t)=>{t.d(R,{Y:()=>I});var e=t(37569),s=t(5469),h=t(50268),_=t(911),i=t(88002),f=t(87519),r=t(45435),p=t(39947),u=t(54355),a=t(87636),o=t(79898),l=t(75261);const c="mediaProfileId",d="micLevel",v="speakerLevel";let I=(()=>{class m extends p.F{constructor(E,n,S,C){super({stateSliceSelector:T=>({selectedMediaProfile:T?.selectedMediaProfile,selectedMic:T?.selectedMic,selectedCam:T?.selectedCam,selectedSpeaker:T?.selectedSpeaker,gainLevelPercent:T?.gainLevelPercent,volumeLevelPercent:T?.volumeLevelPercent,turnOnCamOnStart:T?.turnOnCamOnStart,turnOnMicOnStart:T?.turnOnMicOnStart})}),this.systemSettingsStoreService=E,this.mediaSourceService=n,this.mediaClientSettingsService=S,this.cookieService=C,this.volumeLevelPercent$=(0,_.Hxy)(this.stateChanged.pipe((0,i.U)(T=>T?.volumeLevelPercent),(0,f.x)())),this.selectedMic$=(0,_.Hxy)(this.stateChanged.pipe((0,i.U)(T=>T?.selectedMic))),this.selectedCam$=(0,_.Hxy)(this.stateChanged.pipe((0,i.U)(T=>T?.selectedCam))),this.selectedSpeaker$=(0,_.Hxy)(this.stateChanged.pipe((0,i.U)(T=>T?.selectedSpeaker))),this.turnOnCamOnStart$=this.stateChanged.pipe((0,i.U)(T=>T?.turnOnCamOnStart)),this.turnOnMicOnStart$=this.stateChanged.pipe((0,i.U)(T=>T?.turnOnMicOnStart)),this.selectedMediaProfile$=this.getReactiveStateProperty("selectedMediaProfile"),this.mediaProfileId=parseInt(this.cookieService.get(c),10),isNaN(this.mediaProfileId)&&(this.mediaProfileId=void 0),this.setState({gainLevelPercent:+this.cookieService.get(d)||50,volumeLevelPercent:+this.cookieService.get(v)||100,turnOnCamOnStart:!1,turnOnMicOnStart:!0},"set_initial_state"),this.systemSettingsStoreService.mediaInfo&&this.updateMediaProfile(this.systemSettingsStoreService.mediaInfo),this.systemSettingsStoreService.getPropChanged$(T=>T.mediaInfo).subscribe(T=>this.updateMediaProfile(T.current)),this.mediaSourceService.onAccessChanged$.pipe((0,r.h)(T=>T)).subscribe(()=>this.updateDefaultDevices())}get volumeLevelPercent(){return this.getStateProperty("volumeLevelPercent",!1)}get selectedMic(){return this.getStateProperty("selectedMic",!1)}get selectedCam(){return this.getStateProperty("selectedCam",!1)}get selectedSpeaker(){return this.getStateProperty("selectedSpeaker",!1)}get turnOnCamOnStart(){return this.getStateProperty("turnOnCamOnStart",!1)}get turnOnMicOnStart(){return this.getStateProperty("turnOnMicOnStart",!1)}get selectedMediaProfile(){return this.getStateProperty("selectedMediaProfile")}get turnOnCamOnRestore(){return"true"===this.cookieService.get(h.yl).toLowerCase()}get turnOnMicOnRestore(){return"true"===this.cookieService.get(h.Od).toLowerCase()}get turnOnMainVideoMutedOnRestore(){return"true"===this.cookieService.get(h.rY).toLowerCase()}setSelectedDevices(E,n,S){this.mediaClientSettingsService.updateSettings({defaultMicrophoneName:E?.label,defaultCameraName:n?.label,defaultSpeakerName:S?.label}),this.setState({selectedMic:E?{deviceId:E.deviceId,label:E.label}:null,selectedCam:n?{deviceId:n.deviceId,label:n.label}:null,selectedSpeaker:S?{deviceId:S.deviceId,label:S.label}:null},"media-source__update_selected_devices")}setGain(E){this.setState({gainLevelPercent:E},"media-source__set_gain_level"),this.cookieService.set(d,String(E),365,"/")}setVolume(E){this.setState({volumeLevelPercent:E},"media-source__set_volume_level"),this.cookieService.set(v,String(E),365,"/")}setSelectedMediaProfile(E){this.cookieService.set(c,E.id.toString(),365,"/"),this.setState({selectedMediaProfile:E},"media-source__set_selected_media_profile")}isExistSavedBroadcastDevices(){const E=this.mediaClientSettingsService.settings,n=!!this.mediaSourceService.audioInputDevices.find(T=>T.label===E.defaultMicrophoneName),S=!!this.mediaSourceService.videoInputDevices.find(T=>T.label===E.defaultCameraName),C=!!this.mediaSourceService.audioOutputDevices.find(T=>T.label===E.defaultSpeakerName);return n&&S&&C}setDevicesTurnOnStart(E,n){this.setState({turnOnCamOnStart:n,turnOnMicOnStart:E},"media-source__update_devices_turn_on_start")}setDevicesTurnOnStartCookies(E,n){this.cookieService.set(h.Du,String(E),365,"/"),this.cookieService.set(h.P4,String(n),365,"/")}setTurnOnCamOnRestore(E){this.cookieService.set(h.yl,String(E),365,"/")}setTurnOnMicOnRestore(E){this.cookieService.set(h.Od,String(E),365,"/")}setMuteOnRestore(E){this.cookieService.set(h.rY,String(E),365,"/")}updateDefaultDevices(){const E=this.mediaClientSettingsService.settings;let n=this.mediaSourceService.audioInputDevices.find(T=>T.label===E.defaultMicrophoneName);n||(n=this.mediaSourceService.audioInputDevices[0],this.mediaClientSettingsService.updateSettings({defaultMicrophoneName:n?.label}));let S=this.mediaSourceService.videoInputDevices.find(T=>T.label===E.defaultCameraName);S||(S=this.mediaSourceService.videoInputDevices[0],this.mediaClientSettingsService.updateSettings({defaultCameraName:S?.label}));let C=this.mediaSourceService.audioOutputDevices.find(T=>T.label===E.defaultSpeakerName);C||(C=this.mediaSourceService.audioOutputDevices[0],this.mediaClientSettingsService.updateSettings({defaultSpeakerName:C?.label})),this.setState({selectedMic:n?{deviceId:n.deviceId,label:n.label}:null,selectedCam:S?{deviceId:S.deviceId,label:S.label}:null,selectedSpeaker:C?{deviceId:C.deviceId,label:C.label}:null},"media-source__update_default_devices_when_access_allowed")}updateMediaProfile(E){if(!E)return;const n=E.mediaProfiles.find(N=>N.key===e.Dg.WEBRTC)?.value;if(!n||!n.length)return void console.error("There are no media profiles for WebRTC");const C=this.systemSettingsStoreService.getSystemSettingAsNumber(s._Z.settings.SYSTEM_SETTINGS_KEY__DEFAULT_PROFILE_WEBRTC),T=void 0===C?void 0:n[C],P=n.find(N=>N.id===s.ym),M=T||P||n[0];if(void 0===this.mediaProfileId)return void this.setSelectedMediaProfile(M);const L=n.find(N=>N.id===this.mediaProfileId);L||M?this.setSelectedMediaProfile(L||M):console.error("No media profiles found",{profileId:this.mediaProfileId,webRtcMediaProfiles:n})}}return m.\u0275fac=function(E){return new(E||m)(u.LFG(a.P),u.LFG(s.PI),u.LFG(o.C),u.LFG(l.N))},m.\u0275prov=u.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},48735:(z,R,t)=>{t.d(R,{x:()=>C});var e=t(87177),s=t(59600),h=t(94982),_=t(28728),i=t(70964),f=t(27598),r=t(49062),p=t(76610),u=t(13464),a=t(46782),o=t(43190),l=t(88002),c=t(45435),d=t(87519),v=t(68307),I=t(15257),m=t(54355),g=t(5469),E=t(39040),n=t(6190),S=t(23316);let C=(()=>{class T extends i.m{constructor(A,M,L,N,W,b){super(A),this.conferenceSessionStoreService=M,this.loginService=L,this.participantsGroupsApiService=N,this.translate=W,this.conferenceParticipantsListStoreService=b,this.subscriptions=new u.w}initUpdater(){this.cometService.getChildNumberedEventByClass$("ConferenceSessionChangedEvent").pipe((0,a.R)(this.takeUntilSubj)).subscribe(this.updateParticipantsGroup.bind(this)),this.cometService.getChildNumberedEventByClass$("ConferenceSessionAttentionRequestChangedEvent").pipe((0,a.R)(this.takeUntilSubj)).subscribe(this.handleAttentionRequest.bind(this)),this.cometService.getChildNumberedEventByClass$("ConferenceSessionRemovedEvent").pipe((0,a.R)(this.takeUntilSubj)).subscribe(this.handleGroupsRemoving.bind(this)),this.cometService.getChildNumberedEventByClass$("ConferenceSessionGroupsCreatedEvent").pipe((0,a.R)(this.takeUntilSubj)).subscribe(this.handleGroupsCreating.bind(this)),this.cometService.getChildNumberedEventByClass$("ConferenceSessionGroupParticipantsMoveEvent").pipe((0,a.R)(this.takeUntilSubj)).subscribe(this.handleParticipantMoving.bind(this)),this.cometService.getChildNumberedEventByClass$("ConferenceSessionParticipantsAddEvent").pipe((0,a.R)(this.takeUntilSubj)).subscribe(this.addInvitedParticipants.bind(this)),this.cometService.getChildNumberedEventByClass$("ConferenceSessionParticipantsRemoveEvent").pipe((0,a.R)(this.takeUntilSubj)).subscribe(this.removeInvitedParticipant.bind(this)),this.cometService.getChildNumberedEventByClass$("ConferenceSessionFinishedEvent").pipe((0,a.R)(this.takeUntilSubj)).subscribe(this.stopGroup.bind(this)),this.cometService.getChildNumberedEventByClass$("ParticipantChangeRoleEvent").pipe((0,o.w)(A=>this.conferenceSessionStoreService.conferenceMediaInfo$.pipe((0,l.U)(M=>M?.conferenceSession),(0,c.h)(M=>!!M),(0,l.U)(M=>({event:A,isGroupsEnabled:M.features?.includes(s.vs.GROUPS)??!1})))),(0,c.h)(({isGroupsEnabled:M})=>M),(0,l.U)(({event:A})=>A),(0,d.x)(),(0,a.R)(this.takeUntilSubj)).subscribe(this.updateParticipantRole.bind(this)),this.cometService.getChildNumberedEventByClass$("ConferenceSessionParticipantInterpretationLangPairChangeEvent").pipe((0,a.R)(this.takeUntilSubj)).subscribe(this.updateInterpreterLanguagePair.bind(this)),this.cometService.getChildNumberedEventByClass$("ConferenceSessionParticipantJoinEvent").pipe((0,a.R)(this.takeUntilSubj)).subscribe(this.addGuestParticipant.bind(this)),this.cometService.getChildNumberedEventByClass$("ConferenceSessionParticipantLeaveEvent").pipe((0,a.R)(this.takeUntilSubj)).subscribe(this.removeGuestParticipant.bind(this)),this.cometService.getChildNumberedEventByClass$("ConferenceSessionParticipantDataChangeEvent").pipe((0,a.R)(this.takeUntilSubj)).subscribe(this.updateParticipantCardInGroup.bind(this))}addGuestParticipant({participant:A}){if(!A.isInvited){const M=this.storeService.rootGroup;M&&this.reInitRootGroup(M.conferenceSessionId)}}removeGuestParticipant({}){const M=this.storeService.rootGroup;M&&this.reInitRootGroup(M.conferenceSessionId)}addInvitedParticipants(A){const M=A.conferenceSessionId;this.storeService.rootGroup?.conferenceSessionId===M&&this.reInitRootGroup(M)}removeInvitedParticipant(A){const M=this.storeService.groups,L=M.find(W=>W.conferenceSessionId===A.conferenceSessionId);A.conferenceSessionId===this.storeService.rootGroup?.conferenceSessionId?this.reInitRootGroup(A.conferenceSessionId):L&&(L.invitedParticipantsCount--,L.participants=new Array(L.invitedParticipantsCount).fill(null),this.storeService.setGroups((0,p.Z)(M)))}ngOnDestroy(){this.subscriptions.unsubscribe()}updateParticipantCardInGroup(A){const M=[this.storeService.rootGroup,...this.storeService.groups];if(!this.conferenceSessionStoreService.currentSession?.features?.includes(s.vs.GROUPS))return;const N=M.map(W=>W.participants).reduce((W,b)=>W.concat(b),[]).find(W=>W?.profileId===A.profileId);N&&(N.name=A.name,N.avatarResourceId=A.avatarResourceId,M.forEach(W=>{const b=W.participants.findIndex(V=>V?.profileId===N.profileId);if(b)return W.participants[b]=N,void(W.conferenceSessionId===A.conferenceSessionId?this.storeService.setRootGroup((0,p.Z)(W)):this.storeService.setGroups((0,p.Z)(M.slice(1))))}))}createRootGroup(A){const M=this.conferenceSessionStoreService.currentSession;return{conferenceSessionId:M.conferenceSessionId,conferenceId:M.conferenceId,name:this.translate.instant("GROUP_CONFERENCE.NOT_DISTRIBUTED"),createDate:Date.now(),state:_.TG.NO_STARTED,room:!1,deleted:!1,ownerProfileId:M.ownerProfileId,ownerName:M.ownerName,settings:{runType:_.VJ.MANUALLY,conferenceType:_.Lp.EQUITABLE_CONVERSATION,attendeeSubscribeLimit:_.Y8.NONE,sharingLevel:_.L_.ALL_PARTICIPANTS},rootFolderId:M.rootFolderId,invitedParticipantsCount:A,onlineParticipantsCount:0,groupedBy:M.conferenceSessionId,duration:0,attentionRequested:!1,participants:new Array(A).fill(null),collapsed:!1,opened:!1}}updateParticipantsListInRootGroupAfterMove(A,M){(A.length||M.length)&&this.reInitRootGroup(this.storeService.rootGroup.conferenceSessionId)}updateParticipantsListInGroupAfterMove(A,M,L){this.removeParticipantsFromGroupAfterMove(L,M),this.addParticipantsToGroupAfterMove(L,A)}removeParticipantsFromGroupAfterMove(A,M){let L=this.splitGroupParticipantsToBlocks(A.participants);M.forEach(N=>{let W=-1;const b=(0,p.Z)(L);b.flat(2).find(D=>D?.profileId===N.profileId)?(A.participants=A.participants.filter(D=>null===D||D?.profileId!==N.profileId),A.invitedParticipantsCount=A.participants.length):b.forEach((D,F)=>{let J=D.find(H=>null!==H[0]);if(J){J.push(N),J.sort((X,K)=>(0,f.m2)(X.name,K.name));const H=b.flat(2),Y=H.findIndex(X=>X?.profileId===N?.profileId);(null===H[Y-1]||F+1===b.length&&-1===W)&&(W=Y)}else W=0}),-1!==W&&(A.participants=L.flat(2).slice(0,W).concat(L.flat(2).slice(W+1)),A.invitedParticipantsCount=L.length)})}addParticipantsToGroupAfterMove(A,M){let L=this.splitGroupParticipantsToBlocks(A.participants);if(!L.length)return A.participants=[...M.sort((W,b)=>(0,f.m2)(W.name,b.name))],void(A.invitedParticipantsCount=A.participants.length??0);M.forEach(W=>{let b=!1;const V=(0,p.Z)(L);V.forEach(F=>{let J=F.find(H=>null!==H[0]);if(J){J.push(W),J.sort((X,K)=>(0,f.m2)(X.name,K.name));const H=V.flat(2),Y=H.findIndex(X=>X?.profileId===W?.profileId);if(null!==H[Y+1]&&null!==H[Y>1?Y-1:0])return b=!0,void(L=V)}});const D=L.flat(2);b||D.push(null),A.participants=D,A.invitedParticipantsCount=D.length??0})}getAffectedGroups(A){const M=new Map;return A.participants.forEach(L=>{const N=L.fromConferenceSessionId,W=L.toConferenceSessionId,b=L.participant,V=M.has(N),D=M.has(W);V?M.get(N).removedParticipants.push(b):M.set(N,{removedParticipants:[b],addedParticipants:[]}),D?M.get(W).addedParticipants.push(b):M.set(W,{removedParticipants:[],addedParticipants:[b]})}),M}getMovedParticipantsByGroup(A,M){return[A.get(M.conferenceSessionId)?.removedParticipants??[],A.get(M.conferenceSessionId)?.addedParticipants??[]]}getTotalParticipantsOfRootGroup(A){return this.participantsGroupsApiService.getGroupParticipants(A,{offset:0,limit:1,participantFilterType:h.F.UNMAPPED_TO_GROUPS,sortField:h.l.ROLE}).pipe((0,l.U)(M=>M.totalCount))}reInitRootGroup(A){const M=this.storeService.rootGroup;this.getTotalParticipantsOfRootGroup(A).pipe((0,v.b)(L=>this.updateRootGroupInStore(M,L)),(0,I.q)(1)).subscribe()}updateRootGroupInStore(A,M){A.invitedParticipantsCount=M,A.participants=new Array(M).fill(null),this.storeService.setRootGroup((0,p.Z)(A))}getUpdatedParticipantInfo(A){const M=[this.storeService.rootGroup,...this.storeService.groups],L=M.map(b=>b.participants).flat().find(b=>b?.participantId===A)||null;let N=-1,W=null;return M.forEach(b=>{N=b.participants.findIndex(V=>V?.profileId===L?.profileId),-1!==N&&L&&(W=b)}),{updatedParticipant:L,updatedParticipantsIndex:N,updatedParticipantsGroup:W}}fullGroupsReset(){this.storeService.setGroups([]),this.storeService.setRootGroup(null),this.storeService.setIsReadyToUpdateUnmapped(!1),this.storeService.setSelectedParticipants([]),this.storeService.setParticipantsGroupsMode(_.Ps.DEFAULT),this.storeService.setGroupsHasBeenFetchedState(!1),this.storeService.resetInitialDataFetched(),this.storeService.setSearchValue(null),this.storeService.setFullRemoving(!1),this.conferenceParticipantsListStoreService.setOpenedPane(r.Uj.LIST)}updateParticipantsGroup(A){let M=this.storeService.groups?.find(N=>A.conferenceSessionId===N.conferenceSessionId);if(A.conferenceSession.groupedBy===this.conferenceSessionStoreService.conferenceSessionId&&M){const N={...M,...A.conferenceSession};this.storeService.updateGroup(N)}}handleAttentionRequest(A){const M=this.storeService.groups?.find(L=>L.conferenceSessionId===A.conferenceSessionId);M&&(M.attentionRequested=A.attentionRequested,this.storeService.updateGroup(M))}handleGroupsRemoving(A){const M=this.storeService.fullRemoving,L=this.storeService.groups,N=this.storeService.rootGroup,W=L.find(b=>b.conferenceSessionId===A.conferenceSessionId);L.length<=1&&this.fullGroupsReset(),this.storeService.setIsReadyToUpdateUnmapped(!0),W&&this.storeService.removeGroupFromExisted(A.conferenceSessionId),N&&this.storeService.groups.length&&!M&&this.reInitRootGroup(N.conferenceSessionId)}handleGroupsCreating(A){if(A.messageOwnerProfileId!==this.loginService.profileId){if(this.storeService.groups.length){const N=this.storeService.groups;return A.groups.forEach(W=>{const b={participants:new Array(W.invitedParticipantsCount).fill(null),opened:!1,collapsed:!1,...W};N.push(b)}),N.sort((W,b)=>(0,f.m2)(W.name,b.name)),void this.storeService.setGroups((0,p.Z)(N))}this.subscriptions.add(this.getTotalParticipantsOfRootGroup(A.conferenceSessionId).pipe((0,l.U)(N=>this.createRootGroup(N)),(0,v.b)(N=>this.storeService.setRootGroup(N)),(0,v.b)(()=>{const W=[];A.groups.forEach(b=>{const V={participants:new Array(b.invitedParticipantsCount).fill(null),opened:!1,collapsed:!1,...b};W.push(V)}),W.sort((b,V)=>(0,f.m2)(b.name,V.name)),this.storeService.setGroups((0,p.Z)(W)),this.storeService.setGroupsHasBeenFetchedState(!0)})).subscribe())}}handleParticipantMoving(A){const M=this.getAffectedGroups(A),L=[this.storeService.rootGroup,...this.storeService.groups];L.forEach(W=>{const b=W.conferenceSessionId===this.storeService.rootGroup.conferenceSessionId,[V,D]=this.getMovedParticipantsByGroup(M,W);b?this.updateParticipantsListInRootGroupAfterMove(V,D):this.updateParticipantsListInGroupAfterMove(D,V,W)});const N=L.slice(1);this.storeService.setGroups((0,p.Z)(N))}splitGroupParticipantsToBlocks(A){const M=[],L=[];let N=[];for(let W=0;W<A.length;W++){const b=A[W],V=A[W+1];N.push(b),(null===b&&null!==V||W===A.length-1)&&(M.push([N]),N=[])}return M.forEach(W=>{const b=[],V=[],D=null===W.flat()[0];W.flat().forEach(F=>{null===F?V.push(null):b.push(F)}),W=(D?[V,b]:[b,V]).filter(F=>F.length),L.push(W)}),L}stopGroup(A){const M=this.storeService.fullRemoving;let L=this.storeService.groups?.find(N=>A.conferenceSessionId===N.conferenceSessionId);L&&!M&&(L.state=_.TG.STOPPED,this.storeService.updateGroup({...L,attentionRequested:!1}))}updateParticipantRole(A){const M=[this.storeService.rootGroup,...this.storeService.groups],L=this.loginService.profileId,N=M.map(V=>V?.participants).flat().find(V=>V?.participantId===A.participantId),W=N?L===N.profileId:null,b=A.roles;if(b.includes(e.oG.MODERATOR)||this.fullGroupsReset(),!1===W){let V=!1,D=-1;M.forEach(F=>{if(D=F.participants.findIndex(J=>J?.profileId===N?.profileId),-1!==D&&N)return F.participants[D]={...N,roles:b},void(F.conferenceSessionId===this.storeService.rootGroup?.conferenceSessionId&&(V=!0))}),V?this.storeService.setRootGroup((0,p.Z)(M[0])):this.storeService.setGroups((0,p.Z)(M.slice(1)))}}updateInterpreterLanguagePair(A){const{updatedParticipant:M,updatedParticipantsIndex:L,updatedParticipantsGroup:N}=this.getUpdatedParticipantInfo(A.participantId),W=[this.storeService.rootGroup,...this.storeService.groups];if(M&&N)if(M.settings={interpreterLanguagesPair:A.interpreterLanguagesPair},N.participants[L]=M,N?.conferenceSessionId===A.conferenceSessionId)this.storeService.setRootGroup((0,p.Z)(N));else{const V=W.slice(1).findIndex(D=>D.conferenceSessionId===N.conferenceSessionId);W[V]=N,this.storeService.setGroups((0,p.Z)(W))}}}return T.\u0275fac=function(A){return new(A||T)(m.LFG(g.y_),m.LFG(_.mK),m.LFG(g.r6),m.LFG(E.f),m.LFG(n.sK),m.LFG(S.C))},T.\u0275prov=m.Yz7({token:T,factory:T.\u0275fac}),T})()},29878:(z,R,t)=>{t.d(R,{a:()=>o,j:()=>a});var e=t(5469),s=t(39947),h=t(33870),_=t(48701),i=t(911),f=t(88002),r=t(87519),p=t(66111),u=t(54355),a=(()=>((a=a||{}).SELECTED_INFO_FIELDS="EVENT_PARTICIPANT_REPORT__SELECTED_INFO_FIELDS",a.SELECTED_GRID_FIELDS="EVENT_PARTICIPANT_REPORT__SELECTED_GRID_FIELDS",a))();let o=(()=>{class l extends s.F{get data(){return this.getStateProperty("data",!1)}get gridPaginationInfo(){return this.getStateProperty("gridPaginationInfo",!1)}get gridFilter(){return this.getStateProperty("gridFilter",!1)}get selectedInfoFields(){return this.getStateProperty("selectedInfoFields",!1)}get selectedGridFields(){return this.getStateProperty("selectedGridFields",!1)}get conferenceSessionInfo(){return this.getStateProperty("conferenceSessionInfo",!1)}get participantId(){return this.getStateProperty("participantId",!1)}constructor(){super({stateSliceSelector:d=>({conferenceSessionInfo:d?.conferenceSessionInfo,participantId:d?.participantId,data:d?.data,gridPaginationInfo:d?.gridPaginationInfo,gridFilter:d?.gridFilter,selectedInfoFields:d?.selectedInfoFields,selectedGridFields:d?.selectedGridFields,isDataFetching:d?.isDataFetching,isFirstDataFetching:d?.isFirstDataFetching}),isolateAs:"EventParticipantReport"}),this.data$=this.stateChanged.pipe((0,f.U)(d=>d.data),(0,r.x)()),this.gridFilter$=this.stateChanged.pipe((0,f.U)(d=>d.gridFilter),(0,r.x)()),this.isDataFetching$=this.stateChanged.pipe((0,f.U)(d=>d.isDataFetching),(0,r.x)()),this.isFirstDataFetching$=this.stateChanged.pipe((0,f.U)(d=>d.isFirstDataFetching),(0,r.x)()),this.conferenceSessionInfo$=this.stateChanged.pipe((0,f.U)(d=>d.conferenceSessionInfo)),this.setInitialState()}setInitialState(){const d=(0,_.WJ)(a.SELECTED_INFO_FIELDS,h.E.filter(I=>I.isDisabled)),v=(0,_.WJ)(a.SELECTED_GRID_FIELDS,p.U.filter(I=>I.isDisabled));this.setState({data:null,gridPaginationInfo:{currentPage:1,rowsPerPage:e._Z.settings.REPORTS_ROWS_PER_PAGE[0]},gridFilter:{startDate:i.IjF.updateDateTime(i.IjF.createDate(),{hours:0,minutes:0,seconds:0,ms:0}),startTime:108e5,endDate:i.IjF.updateDateTime(i.IjF.createDate(),{hours:0,minutes:0,seconds:0,ms:0}),endTime:792e5},selectedInfoFields:d,selectedGridFields:v,isDataFetching:!1,isFirstDataFetching:!1,conferenceSessionInfo:null,participantId:null},"INITIAL_STATE")}setConferenceSessionInfo(d){this.setState({conferenceSessionInfo:d},"event-participant-report__set-conference-session-info")}setParticipantId(d){this.setState({participantId:d},"event-participant-report__participant-id")}setData(d){this.setState({data:d},"event-participant-report__set-data")}setGridPaginationInfo(d){this.setState({gridPaginationInfo:{...d}},"event-participant-report__set-grid-pagination-info")}setGridFilter(d){this.setState({gridFilter:{...d}},"event-participant-report__set-grid-filter")}setIsDataFetching(d){this.setState({isDataFetching:d},"event-participant-report__is-data-fetching")}setIsFirstDataFetching(d){this.setState({isFirstDataFetching:d},"event-participant-report__is-first-data-fetching")}setSelectedInfoFields(d){localStorage.setItem(a.SELECTED_INFO_FIELDS,JSON.stringify(d)),this.setState({selectedInfoFields:d},"event-participant-report__selected-info-fields")}setSelectedGridFields(d){localStorage.setItem(a.SELECTED_GRID_FIELDS,JSON.stringify(d)),this.setState({selectedGridFields:d},"event-participant-report__selected-grid-fields")}}return l.\u0275fac=function(d){return new(d||l)},l.\u0275prov=u.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()},33870:(z,R,t)=>{t.d(R,{E:()=>e});const e=[{value:"email",title:"SETTINGS__HEADER__SECTION_STATS__EVENT_PARTICIPANT_REPORT.COMMON_INFO.EMAIL",isDisabled:!0},{value:"phone",title:"SETTINGS__HEADER__SECTION_STATS__EVENT_PARTICIPANT_REPORT.COMMON_INFO.PHONE",isDisabled:!0},{value:"profileId",title:"SETTINGS__HEADER__SECTION_STATS__EVENT_PARTICIPANT_REPORT.COMMON_INFO.USER_ID"}]},53457:(z,R,t)=>{t.d(R,{M:()=>u,S:()=>a});var e=t(5469),s=t(39947),h=t(20619),_=t(48701),i=t(88002),f=t(87519),r=t(39137),p=t(54355),u=(()=>((u=u||{}).SELECTED_INFO_FIELDS="EVENT_REPORT__SELECTED_INFO_FIELDS",u.SELECTED_GRID_FIELDS="EVENT_REPORT__SELECTED_GRID_FIELDS",u))();let a=(()=>{class o extends s.F{get commonData(){return this.getStateProperty("commonData",!1)}get selectedInfoFields(){return this.getStateProperty("selectedInfoFields",!1)}get gridData(){return this.getStateProperty("gridData",!1)}get gridPaginationInfo(){return this.getStateProperty("gridPaginationInfo",!1)}get gridFilter(){return this.getStateProperty("gridFilter",!1)}get selectedGridFields(){return this.getStateProperty("selectedGridFields",!1)}get conferenceSessionId(){return this.getStateProperty("conferenceSessionId",!1)}get attendanceData(){return this.getStateProperty("attendanceData",!1)}get isAttendanceDataFetching(){return this.getStateProperty("isAttendanceDataFetching",!1)}constructor(){super({stateSliceSelector:c=>({conferenceSessionId:c?.conferenceSessionId,commonData:c?.commonData,isCommonDataFetching:c?.isCommonDataFetching,isCommonDataFetched:c?.isCommonDataFetched,selectedInfoFields:c?.selectedInfoFields,selectedGridFields:c?.selectedGridFields,gridData:c?.gridData,gridPaginationInfo:c?.gridPaginationInfo,gridFilter:c?.gridFilter,isGridDataFetching:c?.isGridDataFetching,attendanceData:c?.attendanceData,isAttendanceDataFetching:c?.isAttendanceDataFetching}),isolateAs:"EventReport"}),this.commonData$=this.stateChanged.pipe((0,i.U)(c=>c.commonData),(0,f.x)()),this.selectedInfoFields$=this.stateChanged.pipe((0,i.U)(c=>c.selectedInfoFields),(0,f.x)()),this.gridData$=this.stateChanged.pipe((0,i.U)(c=>c.gridData),(0,f.x)()),this.gridPaginationInfo$=this.stateChanged.pipe((0,i.U)(c=>c.gridPaginationInfo),(0,f.x)()),this.gridFilter$=this.stateChanged.pipe((0,i.U)(c=>c.gridFilter),(0,f.x)()),this.isGridDataFetching$=this.stateChanged.pipe((0,i.U)(c=>c.isGridDataFetching),(0,f.x)()),this.isCommonDataFetching$=this.stateChanged.pipe((0,i.U)(c=>c.isCommonDataFetching),(0,f.x)()),this.isCommonDataFetched$=this.stateChanged.pipe((0,i.U)(c=>c.isCommonDataFetched),(0,f.x)()),this.conferenceSessionId$=this.stateChanged.pipe((0,i.U)(c=>c.conferenceSessionId)),this.attendanceData$=this.stateChanged.pipe((0,i.U)(c=>c.attendanceData)),this.isAttendanceDataFetching$=this.stateChanged.pipe((0,i.U)(c=>c.isAttendanceDataFetching)),this.setInitialState()}setInitialState(){const c=(0,_.WJ)(u.SELECTED_INFO_FIELDS,h.Ei.filter(v=>v.isDisabled)),d=(0,_.WJ)(u.SELECTED_GRID_FIELDS,r.U.filter(v=>v.isDisabled));this.setState({conferenceSessionId:null,commonData:null,isCommonDataFetching:!1,isCommonDataFetched:!1,selectedInfoFields:c,selectedGridFields:d,gridData:null,gridPaginationInfo:{currentPage:1,rowsPerPage:e._Z.settings.REPORTS_ROWS_PER_PAGE[0]},gridFilter:{presenceStatus:h.wk.ALL},isGridDataFetching:!1},"INITIAL_STATE")}setConferenceSessionId(c){this.setState({conferenceSessionId:c},"event-report__set-conference-sessionId")}setCommonData(c){this.setState({commonData:c},"report__set-common-data")}setIsCommonDataFetching(c){this.setState({isCommonDataFetching:c},"event-report__is-common-data-fetching")}setIsCommonDataFetched(c){this.setState({isCommonDataFetched:c},"event-report__is-common-data-fetched")}setSelectedInfoFields(c){localStorage.setItem(u.SELECTED_INFO_FIELDS,JSON.stringify(c)),this.setState({selectedInfoFields:c},"event-report__selected-info-fields")}setSelectedGridFields(c){localStorage.setItem(u.SELECTED_GRID_FIELDS,JSON.stringify(c)),this.setState({selectedGridFields:c},"event-report__selected-grid-fields")}setGridPaginationInfo(c){this.setState({gridPaginationInfo:{...c}},"event-report__set-grid-pagination-info")}setGridData(c){this.setState({gridData:{...c}},"event-report__set-grid-data")}setGridFilter(c){this.setState({gridFilter:{...c}},"event-report__set-grid-filter")}setIsGridDataFetching(c){this.setState({isGridDataFetching:c},"event-report__is-grid-data-fetching")}setAttendanceData(c){this.setState({attendanceData:c},"event-report__set-attendance-data")}setIsAttendanceDataFetching(c){this.setState({isAttendanceDataFetching:c},"event-report__set-is-attendance-data-fetching")}}return o.\u0275fac=function(c){return new(c||o)},o.\u0275prov=p.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},20619:(z,R,t)=>{t.d(R,{Ei:()=>_,R2:()=>h,wk:()=>e});var e=(()=>((e=e||{})[e.ATTENDED=0]="ATTENDED",e[e.ABSENT=1]="ABSENT",e[e.ALL=2]="ALL",e))();const h=[{value:"uniqParticipants",title:"SETTINGS__HEADER__SECTION_STATS__EVENT_REPORT.COMMON_INFO_FIELDS.UNIQ_PARTICIPANTS"},{value:"percentageOfParticipation",title:"SETTINGS__HEADER__SECTION_STATS__EVENT_REPORT.COMMON_INFO_FIELDS.PERCENTAGE_OF_PARTICIPATION"},{value:"percentageOfParticipationForRegistered",title:"SETTINGS__HEADER__SECTION_STATS__EVENT_REPORT.COMMON_INFO_FIELDS.PERCENTAGE_OF_PARTICIPATION_FOR_REGISTERED"},{value:"percentageOfParticipationForGuests",title:"SETTINGS__HEADER__SECTION_STATS__EVENT_REPORT.COMMON_INFO_FIELDS.PERCENTAGE_OF_PARTICIPATION_FOR_GUESTS"},{value:"percentageOfInvolvement",title:"SETTINGS__HEADER__SECTION_STATS__EVENT_REPORT.COMMON_INFO_FIELDS.PERCENTAGE_OF_INVOLVEMENT"}],_=[{value:"name",title:"SETTINGS__HEADER__SECTION_STATS__EVENT_REPORT.COMMON_INFO_FIELDS.EVENT_NAME",isDisabled:!0},{value:"startDate",title:"SETTINGS__HEADER__SECTION_STATS__EVENT_REPORT.COMMON_INFO_FIELDS.START_DATE_TIME",isDisabled:!0},{value:"duration",title:"SETTINGS__HEADER__SECTION_STATS__EVENT_REPORT.COMMON_INFO_FIELDS.DURATION",isDisabled:!0},{value:"conferenceSessionId",title:"SETTINGS__HEADER__SECTION_STATS__EVENT_REPORT.COMMON_INFO_FIELDS.EVENT_ID"},...h]},14661:(z,R,t)=>{t.d(R,{G:()=>l,c:()=>c});var e=t(5469),s=t(39947),h=t(39380),_=t(48701),i=t(911),f=t(88002),r=t(87519),p=t(14145),u=t(92672),a=t(48112),o=t(54355),l=(()=>((l=l||{}).SELECTED_INFO_FIELDS="EVENTS_REPORT__SELECTED_INFO_FIELDS",l.SELECTED_GRID_FIELDS="EVENTS_REPORT__SELECTED_GRID_FIELDS",l.SELECTED_PARTICIPANT_INFO_FIELDS="EVENTS_REPORT__SELECTED_PARTICIPANT_INFO_FIELDS",l.SELECTED_PARTICIPANT_GRID_FIELDS="EVENTS_REPORT__SELECTED_PARTICIPANT_GRID_FIELDS",l))();let c=(()=>{class d extends s.F{get filter(){return this.getStateProperty("filter",!1)}get isFilterShown(){return this.getStateProperty("isFilterShown",!1)}get filterInfoType(){return this.getStateProperty("filterInfoType",!1)}get commonData(){return this.getStateProperty("commonData",!1)}get gridPaginationInfo(){return this.getStateProperty("gridPaginationInfo",!1)}get selectedParticipantInfoFields(){return this.getStateProperty("selectedParticipantInfoFields",!1)}get selectedGridFields(){return this.getStateProperty("selectedGridFields",!1)}get selectedInfoFields(){return this.getStateProperty("selectedInfoFields",!1)}get participantGridPaginationInfo(){return this.getStateProperty("participantGridPaginationInfo",!1)}get selectedParticipantGridFields(){return this.getStateProperty("selectedParticipantGridFields",!1)}get attendanceData(){return this.getStateProperty("attendanceData",!1)}constructor(){super({stateSliceSelector:I=>({filter:I?.filter,filterInfoType:I?.filterInfoType,isFilterShown:I?.isFilterShown,isGridDataFetching:I?.isGridDataFetching,isCommonDataFetching:I?.isCommonDataFetching,isParticipantCommonDataFetching:I?.isParticipantCommonDataFetching,isParticipantGridDataFetching:I?.isParticipantGridDataFetching,isCommonDataFetched:I?.isCommonDataFetched,gridData:I?.gridData,commonData:I?.commonData,participantCommonData:I?.participantCommonData,participantGridData:I?.participantGridData,gridPaginationInfo:I?.gridPaginationInfo,selectedInfoFields:I?.selectedInfoFields,selectedGridFields:I?.selectedGridFields,selectedParticipantInfoFields:I?.selectedParticipantInfoFields,selectedParticipantGridFields:I?.selectedParticipantGridFields,attendanceData:I?.attendanceData,isAttendanceDataFetching:I?.isAttendanceDataFetching,participantGridPaginationInfo:I?.participantGridPaginationInfo}),isolateAs:"EventsReport"}),this.filter$=this.stateChanged.pipe((0,f.U)(I=>I.filter),(0,r.x)()),this.isFilterShown$=this.stateChanged.pipe((0,f.U)(I=>I.isFilterShown),(0,r.x)()),this.filterInfoType$=this.stateChanged.pipe((0,f.U)(I=>I.filterInfoType),(0,r.x)()),this.gridData$=this.stateChanged.pipe((0,f.U)(I=>I.gridData),(0,r.x)()),this.commonData$=this.stateChanged.pipe((0,f.U)(I=>I.commonData),(0,r.x)()),this.participantCommonData$=this.stateChanged.pipe((0,f.U)(I=>I.participantCommonData),(0,r.x)()),this.participantGridData$=this.stateChanged.pipe((0,f.U)(I=>I.participantGridData),(0,r.x)()),this.isGridDataFetching$=this.stateChanged.pipe((0,f.U)(I=>I.isGridDataFetching),(0,r.x)()),this.isCommonDataFetching$=this.stateChanged.pipe((0,f.U)(I=>I.isCommonDataFetching),(0,r.x)()),this.isCommonDataFetched$=this.stateChanged.pipe((0,f.U)(I=>I.isCommonDataFetched),(0,r.x)()),this.isParticipantCommonDataFetching$=this.stateChanged.pipe((0,f.U)(I=>I.isParticipantCommonDataFetching),(0,r.x)()),this.isParticipantGridDataFetching$=this.stateChanged.pipe((0,f.U)(I=>I.isParticipantGridDataFetching),(0,r.x)()),this.gridPaginationInfo$=this.stateChanged.pipe((0,f.U)(I=>I.gridPaginationInfo),(0,r.x)()),this.selectedGridFields$=this.stateChanged.pipe((0,f.U)(I=>I.selectedGridFields),(0,r.x)()),this.selectedInfoFields$=this.stateChanged.pipe((0,f.U)(I=>I.selectedInfoFields),(0,r.x)()),this.participantGridPaginationInfo$=this.stateChanged.pipe((0,f.U)(I=>I.participantGridPaginationInfo),(0,r.x)()),this.attendanceData$=this.stateChanged.pipe((0,f.U)(I=>I.attendanceData)),this.isAttendanceDataFetching$=this.stateChanged.pipe((0,f.U)(I=>I.isAttendanceDataFetching)),this.setInitialState()}setInitialState(){const I=(0,_.WJ)(l.SELECTED_INFO_FIELDS,u.E.filter(n=>n.isDisabled)),m=(0,_.WJ)(l.SELECTED_GRID_FIELDS,a.U.filter(n=>n.isDisabled)),g=(0,_.WJ)(l.SELECTED_PARTICIPANT_INFO_FIELDS,h.hm.filter(n=>n.isDisabled)),E=(0,_.WJ)(l.SELECTED_PARTICIPANT_GRID_FIELDS,p.N.filter(n=>n.isDisabled));this.setState({filter:{conferenceType:h.XO,startDate:i.IjF.add(i.IjF.updateDateTime(i.IjF.createDate(),{hours:0,minutes:0,seconds:0,ms:0}),-1,"month"),endDate:i.IjF.updateDateTime(i.IjF.createDate(),{hours:23,minutes:59,seconds:59,ms:999}),searchCriteria:""},filterInfoType:h.go.NONE,isFilterShown:!1,isGridDataFetching:!1,isCommonDataFetching:!1,isCommonDataFetched:!1,gridData:null,commonData:null,gridPaginationInfo:{currentPage:1,rowsPerPage:e._Z.settings.REPORTS_ROWS_PER_PAGE[0]},participantGridPaginationInfo:{currentPage:1,rowsPerPage:e._Z.settings.REPORTS_ROWS_PER_PAGE[0]},selectedGridFields:m,selectedInfoFields:I,selectedParticipantInfoFields:g,selectedParticipantGridFields:E},"INIT")}setFilter(I){this.setState({filter:{...I}},"events-report__set-filter")}setIsFilterShown(I){this.setState({isFilterShown:I},"events-statistics-report__set-is-filter-collapsed")}setFilterInfoType(I){this.setState({filterInfoType:I},"events-statistics-report__set-filter-info-type")}setIsGridDataFetching(I){this.setState({isGridDataFetching:I},"events-report__set-is-grid-data-fetching")}setIsCommonInfoFetching(I){this.setState({isCommonDataFetching:I},"events-report__set-is-common-info-fetching")}setIsParticipantCommonInfoFetching(I){this.setState({isParticipantCommonDataFetching:I},"events-report__set-is-participant-common-info-fetching")}setIsParticipantGridDataFetching(I){this.setState({isParticipantGridDataFetching:I},"events-report__set-is-participant-grid-data-fetching")}setIsCommonDataFetched(I){this.setState({isCommonDataFetched:I},"events-report__is-common-data-fetched")}setGridData(I){this.setState({gridData:I},"events-report__set-grid-data-fetching")}setCommonData(I){this.setState({commonData:I},"events-report__set-common-data-fetching")}setParticipantCommonData(I){this.setState({participantCommonData:I},"events-report__set-participant-common-data-fetching")}setParticipantGridData(I){this.setState({participantGridData:I},"events-report__set-participant-grid-data-fetching")}setGridPaginationInfo(I){this.setState({gridPaginationInfo:I},"events-report__set-grid-pagination-info")}setParticipantGridPaginationInfo(I){this.setState({participantGridPaginationInfo:I},"events-report__set-participant-grid-pagination-info")}setSelectedInfoFields(I){localStorage.setItem(l.SELECTED_INFO_FIELDS,JSON.stringify(I)),this.setState({selectedInfoFields:I},"events-report__set-selected-info-fields")}setSelectedGridFields(I){localStorage.setItem(l.SELECTED_GRID_FIELDS,JSON.stringify(I)),this.setState({selectedGridFields:I},"events-report__set-selected-grid-fields")}setSelectedParticipantInfoFields(I){localStorage.setItem(l.SELECTED_PARTICIPANT_INFO_FIELDS,JSON.stringify(I)),this.setState({selectedParticipantInfoFields:I},"events-report__selected-participant-info-fields")}setSelectedParticipantGridFields(I){localStorage.setItem(l.SELECTED_PARTICIPANT_GRID_FIELDS,JSON.stringify(I)),this.setState({selectedParticipantGridFields:I},"events-report__set-selected-participant-grid-fields")}setAttendanceData(I){this.setState({attendanceData:I},"events-report__set-attendance-data")}setIsAttendanceDataFetching(I){this.setState({isAttendanceDataFetching:I},"events-report__set-is-attendance-data-fetching")}}return d.\u0275fac=function(I){return new(I||d)},d.\u0275prov=o.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()},39380:(z,R,t)=>{t.d(R,{XO:()=>e,go:()=>s,hm:()=>h});const e="ALL";var s=(()=>((s=s||{})[s.NONE=0]="NONE",s[s.START_DATE=1]="START_DATE",s[s.END_DATE=2]="END_DATE",s[s.OWNER=3]="OWNER",s[s.PARTICIPANT=4]="PARTICIPANT",s[s.EVENT_TYPE=5]="EVENT_TYPE",s))();const h=[{value:"email",title:"SETTINGS__HEADER__SECTION_STATS__EVENTS_REPORT.COMMON_DATA.EMAIL",isDisabled:!0},{value:"phone",title:"SETTINGS__HEADER__SECTION_STATS__EVENTS_REPORT.COMMON_DATA.PHONE",isDisabled:!0},{value:"participationRatio",title:"SETTINGS__HEADER__SECTION_STATS__EVENTS_REPORT.COMMON_DATA.PERCENT_PRESENCE",isDisabled:!0},{value:"profileId",title:"SETTINGS__HEADER__SECTION_STATS__EVENTS_REPORT.COMMON_DATA.PARTICIPANT_ID"}]},99649:(z,R,t)=>{t.d(R,{k:()=>f});var e=t(39947),s=t(76036),h=t(88002),_=t(87519),i=t(54355);let f=(()=>{class r extends e.F{get eventParticipantReportProfileId(){return this.getStateProperty("eventParticipantReportProfileId",!1)}constructor(){super({stateSliceSelector:u=>({reportType:u?.reportType,eventParticipantReportProfileId:u?.eventParticipantReportProfileId}),isolateAs:"Reports"}),this.reportType$=this.stateChanged.pipe((0,h.U)(u=>u.reportType),(0,_.x)()),this.setInitialState()}setInitialState(){this.setState({reportType:s.C.EVENTS_REPORT},"REPORTS_STORE_INIT")}setReportType(u){this.setState({reportType:u},"reports__set-report-type")}setEventParticipantReportProfileId(u){this.setState({eventParticipantReportProfileId:u},"reports__set-event-participant-report-profile-id")}}return r.\u0275fac=function(u){return new(u||r)},r.\u0275prov=i.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})()},76036:(z,R,t)=>{t.d(R,{C:()=>e});var e=(()=>((e=e||{}).EVENTS_REPORT="EVENTS_REPORT",e.EVENT_REPORT="EVENT_REPORT",e.EVENT_PARTICIPANT_REPORT="EVENT_PARTICIPANT_REPORT",e))()},10824:(z,R,t)=>{t.d(R,{_:()=>a});var e=t(87177),s=t(5469),h=t(35672),_=t(97591),i=t(54355),f=t(80127),r=t(18853),p=t(12841),u=t(12487);let a=(()=>{class o extends h.l{get draft(){return this.getStateProperty("draft")}get editDraft(){return this.getStateProperty("editDraft")}constructor(c,d,v,I,m){super(v,I,m,"RoomsStoreService",g=>({draft:g?.draft,editDraft:g?.editDraft}),[{getStoreValue:g=>g.infoViewMode,setStoreValue:g=>({infoViewMode:g}),getQueryParamsValue:g=>g.roomInfoViewMode??_.D.INFO,setQueryParamsValue:g=>({roomInfoViewMode:g})}],d),this.roomDraftPersistenceService=c,this.draft$=this.getReactiveStateProperty("draft"),this.editDraft$=this.getReactiveStateProperty("editDraft"),this.selectedItemQueryParamName="roomItemId",this.selectedConferenceSessionIdQueryParamName="roomItem_ConferenceSessionId",this.setInitialState(),this.initFromRoutes()}setInitialState(){super.setInitialState(),this.setState({hasPreviousPage:!1,draft:this.roomDraftPersistenceService.getDraftFromLocalStorage(s._Z.settings.ROOM_DRAFT_LOCAL_STORE_NAME),editDraft:this.roomDraftPersistenceService.getDraftFromLocalStorage(s._Z.settings.ROOM_EDIT_DRAFT_LOCAL_STORE_NAME)},"INIT_STATE")}normalizeConferences(c){const d=c.filter(v=>v.state===e.Kv.ACTIVE).map(this.initComputedConference.bind(this)).sort(this.compareRooms.bind(this));return this.updateIsFirstDate(d),d}compareRooms(c,d){return this.compareByOnlineParticipants(c,d)||this.compareByLastActiveDate(c,d)||this.compareByName(c,d)}compareByOnlineParticipants(c,d){const v=c.onlineParticipantsCount>0,I=d.onlineParticipantsCount>0;return v===I?0:+I-+v}compareByLastActiveDate(c,d){const v=c.lastMediaSessionStartDate||c.createDate,I=d.lastMediaSessionStartDate||d.createDate;return v===I?0:(I||0)-(v||0)}compareByName(c,d){return c.name>d.name?1:d.name>c.name?-1:0}setDraft(c){this.setState({draft:c},"rooms__set-draft")}getSavedDraft(){return this.roomDraftPersistenceService.getDraftFromLocalStorage(s._Z.settings.ROOM_DRAFT_LOCAL_STORE_NAME)}setDraftAndSave(c){this.roomDraftPersistenceService.setDraftToLocalStorage(s._Z.settings.ROOM_DRAFT_LOCAL_STORE_NAME,c),this.setDraft(c)}setEditDraft(c){this.setState({editDraft:c},"rooms__set-conference-session-edit-draft")}getSavedEditDraft(){return this.roomDraftPersistenceService.getDraftFromLocalStorage(s._Z.settings.ROOM_EDIT_DRAFT_LOCAL_STORE_NAME)}setEditDraftAndSave(c){this.roomDraftPersistenceService.setDraftToLocalStorage(s._Z.settings.ROOM_EDIT_DRAFT_LOCAL_STORE_NAME,c),this.setEditDraft(c)}}return o.\u0275fac=function(c){return new(c||o)(i.LFG(f.O),i.LFG(r.D),i.LFG(p.gz),i.LFG(p.F0),i.LFG(u.U))},o.\u0275prov=i.Yz7({token:o,factory:o.\u0275fac}),o})()},18853:(z,R,t)=>{t.d(R,{D:()=>i});var e=t(21152),s=t(54355),h=t(5469),_=t(31585);let i=(()=>{class f extends e.v{constructor(p,u,a){super(p,u,a),this.conferencesPredicate=o=>o.conferenceSession.room}}return f.\u0275fac=function(p){return new(p||f)(s.LFG(h.y_),s.LFG(h.r6),s.LFG(_.A))},f.\u0275prov=s.Yz7({token:f,factory:f.\u0275fac}),f})()},56288:(z,R,t)=>{t.d(R,{Q:()=>e});var e=(()=>((e=e||{}).PROFILE="PROFILE",e.DEVICES="DEVICES",e.NOTIFICATIONS="NOTIFICATIONS",e.GENERAL="GENERAL",e.STORAGE_MANAGEMENT="STORAGE_MANAGEMENT",e.ABOUT="ABOUT",e.STATS="STATS",e))()},82668:(z,R,t)=>{t.d(R,{S:()=>a});var e=t(72556),s=t(39947),h=t(9112),_=t(88002),i=t(54355),f=t(70964),r=t(46782),p=t(5469);let u=(()=>{class o extends f.m{constructor(c){super(c)}initUpdater(){this.cometService.getChildNumberedEventByClass$("ConferenceSessionDocumentCreateEvent").pipe((0,r.R)(this.takeUntilSubj))}}return o.\u0275fac=function(c){return new(c||o)(i.LFG(p.y_))},o.\u0275prov=i.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),a=(()=>{class o extends s.F{get documents(){return this.getStateProperty("documents",!1)}get isDocumentsNextPageFetching(){return this.getStateProperty("isDocumentsNextPageFetching",!1)}get searchValue(){return this.getStateProperty("searchValue",!1)}get sortField(){return this.getStateProperty("sortField",!1)}get orderAsc(){return this.getStateProperty("orderAsc",!1)}get openedDocumentId(){return this.getStateProperty("openedDocumentId",!1)}get currentDocumentPages(){return this.getStateProperty("currentDocumentPages",!1)}constructor(c){super({stateSliceSelector:d=>({documents:d?.documents,isDocumentsFetching:d?.isDocumentsFetching,isDocumentsNextPageFetching:d?.isDocumentsNextPageFetching,sortField:d?.sortField,orderAsc:d?.orderAsc,searchValue:d?.searchValue,isNextDocumentPagesFetchingUntil:d?.isNextDocumentPagesFetchingUntil,isNextDocumentPagesFetching:d?.isNextDocumentPagesFetching,openedDocumentId:d?.openedDocumentId,currentDocumentPages:d?.currentDocumentPages})},c),this.updater=c,this.documents$=this.getReactiveStateProperty("documents"),this.documentsList$=this.documents$.pipe((0,_.U)(d=>d.data)),this.isDocumentsFetching$=this.getReactiveStateProperty("isDocumentsFetching"),this.isDocumentsNextPageFetching$=this.getReactiveStateProperty("isDocumentsNextPageFetching"),this.searchValue$=this.getReactiveStateProperty("searchValue"),this.sortField$=this.getReactiveStateProperty("sortField"),this.orderAsc$=this.getReactiveStateProperty("orderAsc"),this.openedDocumentId$=this.getReactiveStateProperty("openedDocumentId"),this.openedDocument$=(0,h.aj)([this.documentsList$,this.openedDocumentId$]).pipe((0,_.U)(([d,v])=>d.find(I=>I.nodeId===v))),this.currentDocumentPages$=this.getReactiveStateProperty("currentDocumentPages"),this.isNextDocumentPagesFetchingUntil$=this.getReactiveStateProperty("isNextDocumentPagesFetchingUntil"),this.isNextDocumentPagesFetching$=this.getReactiveStateProperty("isNextDocumentPagesFetching"),this.setInitialState()}setInitialState(){this.setState({documents:{data:[],hasNext:!0,totalCount:0},isDocumentsNextPageFetching:!1,sortField:e.A.SIZE,orderAsc:!0,searchValue:"",isNextDocumentPagesFetchingUntil:!1,openedDocumentId:null,currentDocumentPages:null},"INIT_STATE")}setGridData(c){this.setState({documents:c},"storage_management__set_grid_data")}appendGridData(c){const d=this.documents;d&&(d.data.push(...c.data),d.hasNext=c.hasNext,d.totalCount=c.totalCount,this.setGridData(d))}setIsDocumentsFetching(c){this.setState({isDocumentsFetching:c},"storage_management__set_is_documents_fetching")}setIsDocumentsNextPageFetching(c){this.setState({isDocumentsNextPageFetching:c},"storage_management__set_is_documents-next-page-fetching")}setOrderAsc(c){this.setState({orderAsc:c},"storage_management__set_order_asc")}setSortField(c){this.setState({sortField:c},"storage_management__set_sort_field")}setSearchValue(c){this.setState({searchValue:c},"storage_management__set_search_value")}setOpenedDocumentId(c){this.setState({openedDocumentId:c},"storage_management__set_opened_document_id")}setIsNextDocumentPagesFetchingUntil(c){this.setState({isNextDocumentPagesFetchingUntil:c},"storage_management__set_is_next_document_pages_fetching_until")}setIsNextDocumentPagesFetching(c){this.setState({isNextDocumentPagesFetching:c},"storage_management__set_is_next_document_pages_fetching")}setCurrentDocumentPages(c){this.setState({currentDocumentPages:c},"storage_management__set_current_document_pages")}}return o.\u0275fac=function(c){return new(c||o)(i.LFG(u))},o.\u0275prov=i.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},87636:(z,R,t)=>{t.d(R,{R:()=>r,P:()=>u});var e=t(37569),s=t(88002),h=t(39947),_=t(54355),i=t(5469),f=t(32352);const r="HeaderSettings";let u=(()=>{class a extends h.F{get systemInfo(){return this.getStateProperty("systemInfo",!1)}get domainSettings(){return this.systemInfo.domain}get mediaInfo(){return this.getStateProperty("mediaInfo",!1)}get webRtcMediaProfiles(){return this.mediaInfo?.mediaProfiles.find(l=>l.key===e.Dg.WEBRTC)?.value}get screenSharePresets(){return this.mediaInfo?.screenSharePresets.find(l=>l.key===e.Dg.WEBRTC)?.value}get presetImages(){return this.getStateProperty("presetImages",!1)}get branding(){return this.getStateProperty("branding",!1)}constructor(l,c){super({stateSliceSelector:d=>({systemInfo:d?.systemInfo,mediaInfo:d?.mediaInfo,presetImages:d?.presetImages,branding:d?.branding})}),this.mediaProfilesMapService=l,this.resourceUrlService=c,this.systemInfo$=this.getReactiveStateProperty("systemInfo"),this.branding$=this.getReactiveStateProperty("branding"),this.domainSettings$=this.systemInfo$.pipe((0,s.U)(d=>d.domain)),this.presetImages$=this.getReactiveStateProperty("presetImages"),this.setInitialState()}setInitialState(){this.setState({presetImages:[],branding:{logo:"assets/icons/logo2.svg",favicon:"assets/favicon.ico",serviceCopyright:{RU:"",EN:""},serviceDescription:{RU:"",EN:""},serviceName:{RU:"",EN:""},servicePromoLink:""}},"SYSTEM_SETTINGS_STORE_INIT")}getPresetImages(){return(this.getSystemSetting("VIRTUAL_BACKGROUNDS")??"").split(",").map(d=>({id:d,data:this.resourceUrlService.getResourceUrl(d,{useDirectStyle:!0}),createdAt:new Date(0).getTime()}))}getBranding(){const l=this.getSystemSetting("SERVICE_NAME"),c=this.getSystemSetting("SERVICE_DESCRIPTION"),d=this.getSystemSetting("SERVICE_COPYRIGHT"),v=this.getSystemSetting("FAVICON")??"",I=this.getSystemSetting("SERVICE_LOGO")??"",m=l?JSON.parse(l):"",g=c?JSON.parse(c):"",E=d?JSON.parse(d):"",n=this.getSystemSetting("SERVICE_PROMOSITE_ADDRESS");return{favicon:this.resourceUrlService.getResourceUrl(v,{useDirectStyle:!0}),logo:this.resourceUrlService.getResourceUrl(I,{useDirectStyle:!0}),serviceName:m,serviceDescription:g,serviceCopyright:E,servicePromoLink:n}}setSystemInfo(l){this.setState({systemInfo:l},"set_system_info");const c=this.getPresetImages();this.setState({presetImages:c},"set_preset_images");const d=this.getBranding();this.setState({branding:d},"set_branding")}setMediaInfo(l){const c=l.mediaProfiles.find(d=>d.key===e.Dg.WEBRTC);c&&(c.value=this.enrichWebRtcMediaProfiles(c.value)),this.setState({mediaInfo:l},"update_media_info")}getSystemSetting(l){return this.systemInfo.systemSettings.find(c=>c.key===l)?.value}getSystemSettingAsNumber(l){const c=this.systemInfo.systemSettings.find(v=>v.key===l)?.value;if(!c)return;const d=parseFloat(c);return isNaN(d)?void 0:d}getSystemSettingAsBoolean(l){const c=this.systemInfo.systemSettings.find(d=>d.key===l)?.value;if(c)return"true"===c}getConferencePresetLevel(l){return this.mediaInfo.conferencePresets.find(({key:c})=>c===e.Dg.WEBRTC).value.levels.find(({key:c})=>c===l).value}enrichWebRtcMediaProfiles(l){const c=this.mediaProfilesMapService.MEDIA_PROFILE_MAP,d=[];for(const v of l){const I=c.find(m=>m.mediaProfileId===v.id);I&&(v.name=I.title,v.hint=I.hint,d.push(v))}return d}}return a.\u0275fac=function(l){return new(l||a)(_.LFG(i.Sh),_.LFG(f.Z))},a.\u0275prov=_.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()},92314:(z,R,t)=>{t.d(R,{FE:()=>h,_m:()=>r,eH:()=>_,mT:()=>f});var e=t(89466);const h=["firefox","chrome","edge-chromium"],_=["chrome","edge-chromium","yandexbrowser","opera"],f=["safari","crios","opera","yandexbrowser","ios"],r=[e.OS.IOS,e.OS.Android]},43839:(z,R,t)=>{t.d(R,{e:()=>s});var e=t(5469);function s(h,_,i){return h?1===_.length?_[0].name:_.filter(f=>f.profileId!==i).map(f=>f.name).join(", ").substring(0,e._Z.settings.CHAT_MAX_NAME_LENGTH):_.find(f=>f.profileId!==i)?.name??""}},24826:(z,R,t)=>{function e(s){return s.hasOwnProperty("resourceId")}t.d(R,{X:()=>e})},2706:(z,R,t)=>{function e(s){return s.hasOwnProperty("deleted")}t.d(R,{M:()=>e})},28970:(z,R,t)=>{t.d(R,{J:()=>_,Yw:()=>h,eO:()=>s});var e=t(23e3);function s(i){switch(i.interlocutorType){case e.x.FOREIGN_CONTACT:case e.x.NOTE_CONTACT:return{contactId:i.contact.contactId};case e.x.COMPANY_CONTACT:return i.contact?.contactId?{contactId:i.contact.contactId}:{profileId:i.profile.profileId};case e.x.DIRECTORY_USER:return{ldapUserId:i.ldapUser.ldapUserId};case e.x.GUEST_USER:return{name:i.name,email:i.email,phone:i.phone};case e.x.DOMAIN_USER:case e.x.CHAT_BOT:return{profileId:i.profile.profileId}}}function h(i){switch(i.interlocutorType){case e.x.FOREIGN_CONTACT:case e.x.NOTE_CONTACT:return i.contact.contactId;case e.x.COMPANY_CONTACT:return i.contact?.contactId||i.profile.profileId;case e.x.DIRECTORY_USER:return i.ldapUser.ldapUserId;case e.x.GUEST_USER:return`${i.name}_${i.email}_${i.phone}`;case e.x.DOMAIN_USER:case e.x.CHAT_BOT:return i.profile.profileId}}function _(i){return h(i.profileId?{interlocutorType:e.x.DOMAIN_USER,profile:{profileId:i.profileId}}:i.contactId?{interlocutorType:e.x.COMPANY_CONTACT,contact:{contactId:i.contactId}}:i.ldapUserId?{interlocutorType:e.x.DIRECTORY_USER,ldapUser:{ldapUserId:i.ldapUserId}}:{interlocutorType:e.x.GUEST_USER,name:i.name,email:i.email,phone:i.phone})}},20429:(z,R,t)=>{t.d(R,{Od:()=>n,NE:()=>E});var e=t(8239),s=t(91585),h=t(31686),_=t.n(h),i=t(26215),f=t(45435),r=t(88002),p=t(77463),u=(()=>((u=u||{}).NOT_STARTED="NOT_STARTED",u.LIVE="LIVE",u.CONNECTING="CONNECTING",u.RECONNECTING="RECONNECTING",u))();const c={12:null,6:2,4:1.5,2:1.2,1:1.1,.2:1.05,[-.1]:1,[-.3]:.9,[-.5]:.8,[-1/0]:.6},d={"-0.1":.95,"-0.3":.9,"-0.5":.8,"-Infinity":.6},v=["decodedFrames","droppedFrames","speed"],g={speed:0,url:""};var E=(()=>((E=E||{}).FIRST_USER_INTERACTION="FIRST_USER_INTERACTION",E))();class n{get lastState(){return this._lastState$.value}get status(){return this._status}get videoEl(){return this._videoEl}get containerEl(){return this._containerEl}constructor(C){this.name=C,this.reconnectingInterval=100,this.interval=500,this.bufferSizeMin=1,this.bufferSizeMax=3,this.speedUpConfig=c,this.speedDownConfig=d,this.statsParams=v,this.speed=1,this.delay=0,this.bufferSizeStart=Math.min(2*this.bufferSizeMin,this.bufferSizeMax),this.bufferSizeSeek=2*this.bufferSizeMax,this._lastState$=new i.X(g),this.lastState$=this._lastState$.asObservable(),this._status=u.NOT_STARTED,this._onError$=new i.X(null),this.onError$=this._onError$.asObservable(),this._isConnected$=new i.X(!1),this.isConnected$=this._isConnected$.asObservable(),this.onConnected$=this.isConnected$.pipe((0,f.h)(T=>!!T),(0,r.U)(()=>{})),this.onDisconnected$=this.isConnected$.pipe((0,f.h)(T=>!T),(0,r.U)(()=>{})),this._isVideoPlaying$=new i.X(!1),this.isVideoPlaying$=this._isVideoPlaying$.asObservable(),this.id=`flv_${(0,p.Z)().replace(/-/g,"")}`,this.containerId=`container-flv_${(0,p.Z)().replace(/-/g,"")}`,this.onVideoPlaying=()=>this._isVideoPlaying$.next(0!==this.videoEl.buffered.length),this.onVideoPause=()=>this._isVideoPlaying$.next(!1),this.createInitialVideoEl()}releaseVideoEl(C){this.containerEl.append(C),this.videoElOwner=void 0}createInitialVideoEl(){const C=document.createElement("div");C.id=this.containerId,C.style.display="none",document.body.append(C),this._containerEl=C;const T=document.createElement("video");T.id=this.id,T.autoplay=!0,C.append(T),T.addEventListener("playing",this.onVideoPlaying),T.addEventListener("pause",this.onVideoPause),this._videoEl=T}removeVideoEl(){this.videoEl.remove()}log(...C){console.log(`FLV PLAYER | ${this.name} |`,...C)}logStats(){this.log("STATE: "),console.table(this.lastState)}onStateChange(C){this.log(`State is changing to ${C}`)}connect(C){var T=this;return(0,e.Z)(function*(){if(T._status!==u.NOT_STARTED||!_().isSupported())return;T._onError$.next(null),T.streamId=C,T.videoEl.setAttribute("autoplay",""),T.player=_().createPlayer({type:"flv",isLive:!0,url:C},{enableStashBuffer:!1,accurateSeek:!0});const P=T.player;P.attachMediaElement(T.videoEl),P.load(),T.player.on(_().Events.ERROR,()=>T.handlePlaybackError()),T.setStatus(u.CONNECTING);const A=Date.now();T.bufferSizeStart=Math.min(2*T.bufferSizeMin,T.bufferSizeMax),T.bufferSizeSeek=2*T.bufferSizeMax;try{yield P.play()}catch(L){if(T.log(L),"NotAllowedError"===L.name||"AbortError"===L.name&&T.status!==u.RECONNECTING)return T.log("First user interaction play error"),void T._onError$.next(new Error(E.FIRST_USER_INTERACTION));T.handlePlaybackError()}const M=Date.now();T.log(`Play started in ${M-A} ms`),P.pause(),T.log("Player paused"),T.scheduleCheckBuffer(),T._isConnected$.next(!0)})()}handlePlaybackError(){this.scheduleReconnecting(this.reconnectingInterval,this.streamId),this.reconnectingInterval=2*this.reconnectingInterval>3e3?this.reconnectingInterval:2*this.reconnectingInterval}disconnect(){this._status!==u.NOT_STARTED&&(window.clearTimeout(this.bufferChecking),this.player&&(this._status!==u.RECONNECTING&&this.player.pause(),this.player.unload(),this.player.detachMediaElement(),this.player.destroy(),this.player=void 0),this._lastState$.next(g),this.setStatus(u.NOT_STARTED),this.streamId=void 0,this._isConnected$.next(!1))}isSubscribed(C){return!!this.player&&(!C||this.player.statisticsInfo&&this.player.statisticsInfo.url===C)&&this.status===u.LIVE}setBufferSizeMax(C){this.bufferSizeMax=C,this.bufferSizeStart=Math.min(2*this.bufferSizeMin,this.bufferSizeMax),this.bufferSizeSeek=2*this.bufferSizeMax}setBufferSizeMin(C){this.bufferSizeMin=C,this.bufferSizeStart=Math.min(2*this.bufferSizeMin,this.bufferSizeMax)}addLogListener(C){_().LoggingControl.addLogListener(C)}setStatus(C){C!==this._status&&(this.onStateChange(C),this._status=C,this.log(`State changed to ${C}`))}scheduleCheckBuffer(){this.bufferChecking&&window.clearTimeout(this.bufferChecking),this.bufferChecking=window.setTimeout(()=>this.checkBuffer(),this.interval)}scheduleReconnecting(C,T){this._status!==u.RECONNECTING&&(this.setStatus(u.RECONNECTING),window.setTimeout(()=>{this.streamId!==T||this._status!==u.RECONNECTING||(this.disconnect(),this.connect(T))},C))}checkBuffer(){const C=this.videoEl.buffered,T=this.videoEl.currentTime;if(0===C.length)this.log("Buffer is empty!");else if(this.videoEl.paused)C.end(C.length-1)-this.videoEl.currentTime>this.bufferSizeStart&&(this.player?.play(),this.setStatus(u.LIVE));else{this._isVideoPlaying$.next(!0);const P=C.end(C.length-1);let L,A=-1,M=-1;if(C.length>1){for(let b=0;b<C.length;b++)T>=C.start(b)&&T<=C.end(b)&&(A=M=b),L&&A>-1&&Math.abs(C.start(b)-L.end)>.1&&A<b&&(this.log("We found gap in playback!!!"),M=b),L={start:C.start(b),end:C.end(b)};A!==M&&(this.log(`Seek to range index ${M}`),this.videoEl.currentTime=Math.max(C.end(M)-this.bufferSizeMax,C.start(M)))}const N=P-T;(this.lastState.delay<=0&&N<=0||this.previousPlaybackTime===T)&&N===this.delay&&T>0&&this.handlePlaybackError(),this.handleDelay(N)}this._lastState$.next(this.makeStats(T)),this.scheduleCheckBuffer()}roundDoubleSafe(C){if(C)return isNaN(C)?C:Math.abs(C)%1>0?parseFloat(C.toFixed(2)):C}makeStats(C){this.previousPlaybackTime=C;const T=this.videoEl,P=this.player,A=this.statsParams,M={url:this.streamId,currentTime:T?this.roundDoubleSafe(C):void 0,maxPlayed:T&&T.played.length?this.roundDoubleSafe(T.played.end(T.played.length-1)):void 0,minBuffered:T&&T.buffered.length?this.roundDoubleSafe(T.buffered.start(0)):void 0,maxBuffered:T&&T.buffered.length?this.roundDoubleSafe(T.buffered.end(T.buffered.length-1)):void 0,speed:this.speed,delay:this.roundDoubleSafe(this.delay),bandwidth:void 0,videoQuality:""},L=P.statisticsInfo;for(const b of A){const V=L[b];"speed"!==b?(V||0===V)&&(M[b]=this.roundDoubleSafe(V)):M.bandwidth=this.roundDoubleSafe(8e3*V)}const N=P.mediaInfo;return N&&(M.videoQuality=`${N.width} x ${N.height} x ${P.mediaInfo.fps}`),M}getSpeedChange(C,T){const P=(0,s._)(T).sort((A,M)=>M-A);for(const A of P)if(C>=A)return T[A];return 1}handleDelay(C){if(this.delay=C,this.delay>this.bufferSizeSeek){this.speed=1;const T=this.videoEl.buffered,P=Math.max(T.end(T.length-1)-this.bufferSizeMax,T.start(T.length-1));this.videoEl.currentTime=P,this.log(`Seek to ${P} because delay is more than ${this.delay-this.bufferSizeSeek}`)}else this.delay>this.bufferSizeMax?(this.speed=this.getSpeedChange(this.delay-this.bufferSizeMax,this.speedUpConfig)??1,this.log(`Speed up - ${this.speed}`),this.logBuffered(),this.videoEl.playbackRate=this.speed):this.delay<this.bufferSizeMin?(this.speed=this.getSpeedChange(this.delay-this.bufferSizeMin,this.speedDownConfig)??1,this.log(`Speed down - ${this.speed}`),this.logBuffered(),this.videoEl.playbackRate=this.speed):(this.speed=1,this.videoEl.playbackRate=this.speed)}logBuffered(){this.log("Buffered: ");for(let C=0;C<this.videoEl.buffered.length;C++)this.log("start",this.videoEl.buffered.start(C),"end",this.videoEl.buffered.end(C))}flush(){this.disconnect(),this.videoEl.removeEventListener("playing",this.onVideoPlaying),this.videoEl.removeEventListener("pause",this.onVideoPause),this.removeVideoEl(),this.log("Flushed")}}},48701:(z,R,t)=>{let e;function s(){return e||(e=new AudioContext),e}function h(m){m.forEach(g=>localStorage.removeItem(g))}t.d(R,{mT:()=>_.mT,_m:()=>_._m,NE:()=>i.NE,UA:()=>v,b2:()=>r.b,Jo:()=>r.J,FE:()=>_.FE,eH:()=>_.eH,IZ:()=>I.IZ,xK:()=>h,kq:()=>s,AB:()=>c,WJ:()=>f,mC:()=>a,X7:()=>I.X7});var _=t(92314),i=t(20429);function f(m,g=void 0){const E=localStorage.getItem(m);return E?JSON.parse(E):g}var r=t(70219),p=t(79765);const u=3e3;function a(m,g,E){const n={onComplete$:new p.xQ,onError$:new p.xQ,onRemoteSdp$:new p.xQ,onRemoteIceCandidate$:new p.xQ,abort:()=>{}},S=setTimeout(()=>{C.abort(),n.onError$.next(null)},u),C=new XMLHttpRequest;C.open("POST",m,!0);let T=0;return C.onreadystatechange=P=>{if((3===C.readyState||4===C.readyState)&&0!==C.status)if(C.status>=200&&C.status<300){if(!C.onprogress)return;C.onprogress(null)}else n.onError$.next(null),n.onComplete$.complete(),n.onError$.complete(),n.onRemoteSdp$.complete(),n.onRemoteIceCandidate$.complete(),C.onreadystatechange=C.onerror=null},C.onerror=P=>{C.onreadystatechange=C.onerror=null,n.onError$.next(P)},C.onprogress=()=>{if(void 0===C.status||200===C.status)for(clearTimeout(S);;){const P=C.responseText.substring(T),A=P.indexOf("\n");if(-1===A)break;const M=P.substring(0,A+1),L=o(M);L&&(L.remoteSdp&&n.onRemoteSdp$.next(L.remoteSdp),L.remoteIceCandidate&&n.onRemoteIceCandidate$.next(L.remoteIceCandidate)),T+=M.length}},C.onload=C.onprogress,C.send(JSON.stringify({sdp:g.sdp,content:"PRIMARY",candidates:E})),n.abort=()=>C.abort(),n}function o(m){if(m.trim().length){const g=JSON.parse(m);return g.sdp?g.type?{remoteSdp:new RTCSessionDescription(g)}:{remoteSdp:new RTCSessionDescription({sdp:g.sdp,type:"answer"})}:{remoteIceCandidate:g.candidate}}return{}}var l=t(87177);function c(m){switch(m){case l.oG.ATTENDEE:return"PARTICIPANT";case l.oG.MODERATOR:return"MODERATOR";case l.oG.SPEAKER:return"SPEAKER";case l.oG.INTERPRETER:return"INTERPRETER"}}var d=t(26738);class v extends d.UA{constructor(g){super(g),this.error=null,void 0!==g.error&&(this.error=g.error)}}var I=t(64629)},70219:(z,R,t)=>{t.d(R,{J:()=>r,b:()=>p});var e=t(8239),s=t(20429),h=t(26215),_=t(45435),i=t(88002),f=t(64629),r=(()=>((r=r||{})[r.WebRtc=0]="WebRtc",r[r.Flv=1]="Flv",r))();class p{get clientType(){return this._clientType$.value}set clientType(a){this._clientType$.next(a)}constructor(a,o=!1){this.name=a,this.fakeConnect=o,this.flvMediaClient=new s.Od(this.name),this.webRtcMediaClient=new f.IZ(this.name),this._clientType$=new h.X(r.WebRtc),this.clientType$=this._clientType$.asObservable(),this.isConnected$=new h.X(!1),this.isConnecting$=new h.X(!1),this.onConnected$=this.isConnected$.pipe((0,_.h)(l=>!!l),(0,i.U)(()=>{})),this.onDisconnected$=this.isConnected$.pipe((0,_.h)(l=>!l),(0,i.U)(()=>{})),this.subscriptions=[],this.subscriptions.push(this.webRtcMediaClient.isConnected$.pipe((0,_.h)(()=>this.clientType===r.WebRtc)).subscribe(this.isConnected$)),this.subscriptions.push(this.flvMediaClient.isConnected$.pipe((0,_.h)(()=>this.clientType===r.Flv)).subscribe(this.isConnected$))}connect(a){var o=this;return(0,e.Z)(function*(){if(o.isConnecting$.next(!0),o.fakeConnect)return o.isConnecting$.next(!1),new Promise(l=>l());switch(o.clientType){case r.WebRtc:yield o.webRtcMediaClient.connect(a);break;case r.Flv:yield o.flvMediaClient.connect(a)}o.isConnecting$.next(!1)})()}disconnect(){switch(this.clientType){case r.WebRtc:return this.webRtcMediaClient.disconnect();case r.Flv:return this.flvMediaClient.disconnect()}}switchClientTo(a,o,l=!0){var c=this;return(0,e.Z)(function*(){a===c.clientType&&l||(c.disconnect(),c._clientType$.next(a),yield c.connect(o))})()}flush(){this.webRtcMediaClient.flush(),this.flvMediaClient.flush(),this.subscriptions.forEach(a=>a.unsubscribe())}}},91585:(z,R,t)=>{function e(s){return Object.keys(s)}t.d(R,{_:()=>e})},36612:(z,R,t)=>{function e(s){return s?`/?forcedV1=true#conference:${s}`:"/?forcedV1=true"}t.d(R,{Z:()=>e})},89466:(z,R,t)=>{t.d(R,{OS:()=>e});var e=(()=>((e=e||{}).IOS="iOS",e.Android="Android OS",e.Blackberry="BlackBerry OS",e.WinMobile="Windows Mobile",e.AmazonOs="Amazon OS",e.Win311="Windows 3.11",e.Win95="Windows 95",e.Win98="Windows 98",e.Win2000="Windows 2000",e.WinXP="Windows XP",e.WinServer2003="Windows Server 2003",e.WinVista="Windows Vista",e.Win7="Windows 7",e.Win8="Windows 8",e.Win81="Windows 8.1",e.Win10="Windows 10",e.WinME="Windows ME",e.OpenBSD="Open BSD",e.SunOS="Sun OS",e.Linux="Linux",e.MacOS="Mac OS",e.QNX="QNX",e.BeOS="BeOS",e.OS2="OS/2",e.ChromeOS="Chrome OS",e))()},17302:(z,R,t)=>{t.d(R,{F:()=>s});const e=4;function s(_=e){const i=Math.pow(10,_-1),f=Math.pow(10,_)-1;return Math.floor(function h(_,i){return Math.random()*(i-_)+_}(i,f)).toString()}},59721:(z,R,t)=>{t.d(R,{r:()=>s});var e=t(911);function s(h){const _=h.startValueInMin*e.wnR,i=h.endValueInMin*e.wnR,f=h.stepInMin*e.wnR,r=[],p=_===e.wnR;p&&r.push(_);for(let u=p?f:_;u<=i;u+=f)r.push(u);return r}},42775:(z,R,t)=>{t.d(R,{d:()=>I});var e=t(8239),s=t(48701),h=t(8040);const _="fake-video",i="assets/cut.mp4";function r(){return(r=(0,e.Z)(function*(){const g=document.createElement("video");return g.id=_,g.src=i,g.style.display="none",g.muted=!0,"staging"===h.N.name&&(g.autoplay=!0,g.loop=!0,g.play()),document.body.appendChild(g),new Promise(E=>g.onloadeddata=()=>E(g))})).apply(this,arguments)}function a(){return a=(0,e.Z)(function*(g){const E=function p(){return document.querySelector(`video#${_}`)}()||(yield function f(){return r.apply(this,arguments)}());return E.captureStream?E.captureStream(g):E.mozCaptureStream(g)}),a.apply(this,arguments)}const o="fake-canvas";var v=t(97057);function I(g){return m.apply(this,arguments)}function m(){return m=(0,e.Z)(function*(g){const E=(0,v.qY)()?.name||"",n=(0,v.qY)()?.os;if(s.mT.includes(E)||s._m.includes(n))return function d(g){const S=(0,s.kq)().createMediaStreamDestination().stream.getAudioTracks()[0],T=(function l(){return document.querySelector(`canvas#${o}`)}()||function c(){const g=document.createElement("canvas");return g.id=o,g.style.display="none",document.body.appendChild(g),g}()).captureStream(g);return T.addTrack(S),T}(g);if(s.FE.includes(E))return function u(g){return a.apply(this,arguments)}(g);throw new Error("Unsupported browser to create fake stream")}),m.apply(this,arguments)}},64629:(z,R,t)=>{t.d(R,{IZ:()=>v,X7:()=>I});var e=t(8239),s=t(29514),h=t(97057),_=t(911),i=t(26215),f=t(79765),r=t(45435),p=t(88002),u=t(42775),a=t(75585);class o{constructor(g){this.webRtcClient=g,this.statistics$=new i.X(null),this.statisticsInterval=null}stopStatisticsListening(){null!==this.statisticsInterval&&clearTimeout(this.statisticsInterval)}startStatisticsListening(g){var E=this;let n,S,C,T;this.stopStatisticsListening(),this.statisticsInterval=window.setInterval((0,e.Z)(function*(){let P=[],A=[],M=[],L=[];const N=E.webRtcClient.getSender("video");if(N){const D=yield E.getReport(N);P=E.getVideoStats(D,n),n=D}const W=E.webRtcClient.getReceiver("video");if(W){const D=yield E.getReport(W);A=E.getVideoStats(D,S),S=D}const b=E.webRtcClient.getSender("audio");if(b){const D=yield E.getReport(b);M=E.getVideoStats(D,C),C=D}const V=E.webRtcClient.getReceiver("audio");if(V){const D=yield E.getReport(V);L=E.getVideoStats(D,T),T=D}E.statistics$.next({sender:{video:P,audio:M},receiver:{video:A,audio:L}})}),g)}getReport(g){return(0,e.Z)(function*(){const E=yield g.getStats(),n=[];E.forEach(P=>n.push(P));const S=g instanceof RTCRtpSender?"outbound-rtp":"inbound-rtp",C=n.filter(P=>P.type===S),T=new Map(C.map(P=>[P.id,P]));return{timestamp:Date.now(),layers:T}})()}getVideoStats(g,E){if(!E)return[];const n=E.timestamp-g.timestamp,S=g.layers.keys();return Array.from(S).filter(T=>E.layers.has(T)).map(T=>{const P=E.layers.get(T),A=g.layers.get(T),M=this.getBytes(P),L=this.getBytes(A),N=this.getHeaderBytes(P),W=this.getHeaderBytes(A),b=this.getFrames(P),V=this.getFrames(A);return{id:T,bitrate:M&&L?_.cK$*_.jdZ*(M-L)/n:0,headerrate:N&&W?_.cK$*_.jdZ*(N-W)/n:0,frameWidth:A.frameWidth||0,frameHeight:A.frameHeight||0,fps:b&&V?(0,a.Z)((b-V)/n*_.cK$,2):0}})}getAudioStats(g,E){if(!E)return[];const n=E.timestamp-g.timestamp,S=g.layers.keys();return Array.from(S).filter(T=>E.layers.has(T)).map(T=>{const P=E.layers.get(T),A=g.layers.get(T),M=this.getBytes(P),L=this.getBytes(A),N=this.getHeaderBytes(P),W=this.getHeaderBytes(A);return{id:T,bitrate:M&&L?_.cK$*_.jdZ*(M-L)/n:0,headerrate:N&&W?_.cK$*_.jdZ*(N-W)/n:0,voiceActivityFlag:1}})}getBytes(g){return("inbound-rtp"===g.type?g.bytesReceived:g.bytesSent)||0}getHeaderBytes(g){return("inbound-rtp"===g.type?g.headerBytesReceived:g.headerBytesSent)||0}getFrames(g){return("inbound-rtp"===g.type?g.framesReceived:g.framesSent)||0}}const c="firefox"===(0,h.qY)()?.name;class v{get isConnected(){return"connected"===this._state||"completed"===this._state}get state(){return this._state}constructor(g){this.name=g,this.isConnected$=new i.X(!1),this.onConnected$=this.isConnected$.pipe((0,r.h)(E=>!!E),(0,p.U)(()=>{})),this.onDisconnected$=this.isConnected$.pipe((0,r.h)(E=>!E),(0,p.U)(()=>{})),this.onTrackEnabilityChanged$=new f.xQ,this.statistics=new o(this),this.iceCandidatesTimeoutMs=1e3,this.reconnectTimeoutMs=1e3,this.useSimulcast=!1,this.iceServers=[],this.useFakeStreams=!0,this.originVideoStream$=new i.X(null),this.originAudioStream$=new i.X(null),this.remoteMediaStream$=new i.X(null),this._caller=null,this.signalResult=null,this.connectSubscriptions=[],this._onError$=new i.X(null),this.onError$=this._onError$.asObservable(),window.webRtcClients=window.webRtcClients??{},window.webRtcClients[`${this.name}`]=this}connect(g){var E=this;return(0,e.Z)(function*(){if(E.log("connecting"),E.isConnected)return;if(!E.signalGetter)return void E.warn("signalGetter is not defined");E.log("signalGetter start");const n=E.signalGetter(g);E.log("signalGetter end"),n?yield E.connectWith(E.iceServers,n,E.useFakeStreams):E.log("no signal results")})()}connectWith(g,E,n=!0){var S=this;return(0,e.Z)(function*(){S.log("connecting with...");const C=s._.settings.CONFERENCE_SESSION_RECONNECT_WHEN_NO_ICE_CANDIDATES_FOUND,T=s._.settings.CONFERENCE_SESSION_STOP_WHEN_NO_ICE_CANDIDATES_FOUND;if(S.disconnect(),S.log("creating RTCPeerConnection"),S._caller=new RTCPeerConnection({iceServers:g,bundlePolicy:"max-bundle"}),S.log("creating RTCPeerConnection finished"),n){S.log("fake stream creating"),S.localMediaStream=yield(0,u.d)(30),S.log("fake stream creating finished"),S.log("replacing localMediaStream tracks to fake stream tracks");const L=S.localMediaStream.getTracks();L.forEach(N=>N.enabled=!1),L.forEach(N=>S._caller.addTrack(N,S.localMediaStream)),S.log("replacing localMediaStream tracks to fake stream tracks finished")}else S.localMediaStream&&(S.log("adding localMediaStream tracks"),S.localMediaStream.getTracks().forEach(N=>S._caller.addTrack(N,S.localMediaStream)),S.log("adding localMediaStream tracks finished"));S._caller.ontrack=L=>{S.log("ontrack",L.streams),S.remoteMediaStream$.next(L.streams[0])},S._caller.onicecandidate=()=>{},S.log("creating offer");const P=yield S._caller.createOffer({offerToReceiveVideo:!0,offerToReceiveAudio:!0});S.log("creating offer finished"),S.useSimulcast&&(S.log("Simulcast is enabled, patch sdp"),P.sdp=P.sdp?function l(m){const g=m.split("\r\n");let E=!1;const n=[-1],S=[-1];let C=null,T=null,P=null,A=null,M=-1;for(let N=0;N<g.length;N++){const W=g[N].match(/m=(\w+) */);if(W){if("video"===W[1]){if(!(+n[0]<0)){M=N;break}E=!0}else if(+n[0]>-1){M=N;break}continue}if(!E)continue;const b=g[N].match(/a=ssrc-group:FID (\d+) (\d+)/);if(b)n[0]=b[1],S[0]=b[2],g.splice(N,1),N--;else{if(n[0]){let V=g[N].match("a=ssrc:"+n[0]+" cname:(.+)");if(V&&(C=V[1]),V=g[N].match("a=ssrc:"+n[0]+" msid:(.+)"),V&&(T=V[1]),V=g[N].match("a=ssrc:"+n[0]+" mslabel:(.+)"),V&&(P=V[1]),V=g[N].match("a=ssrc:"+n[0]+" label:(.+)"),V&&(A=V[1]),0===g[N].indexOf("a=ssrc:"+S[0])){g.splice(N,1),N--;continue}if(0===g[N].indexOf("a=ssrc:"+n[0])){g.splice(N,1),N--;continue}}g[N].length||(g.splice(N,1),N--)}}if(+n[0]<0){M=-1,E=!1;for(let N=0;N<g.length;N++){const W=g[N].match(/m=(\w+) */);if(W){if("video"===W[1]){if(!(+n[0]<0)){M=N;break}E=!0}else if(+n[0]>-1){M=N;break}}else if(E){if(+n[0]<0){const b=g[N].match(/a=ssrc:(\d+)/);if(b){n[0]=b[1],g.splice(N,1),N--;continue}}else{let b=g[N].match("a=ssrc:"+n[0]+" cname:(.+)");if(b&&(C=b[1]),b=g[N].match("a=ssrc:"+n[0]+" msid:(.+)"),b&&(T=b[1]),b=g[N].match("a=ssrc:"+n[0]+" mslabel:(.+)"),b&&(P=b[1]),b=g[N].match("a=ssrc:"+n[0]+" label:(.+)"),b&&(A=b[1]),0===g[N].indexOf("a=ssrc:"+S[0])){g.splice(N,1),N--;continue}if(0===g[N].indexOf("a=ssrc:"+n[0])){g.splice(N,1),N--;continue}}if(!g[N].length){g.splice(N,1),N--;continue}}}}if(+n[0]<0)return console.log("Couldn't find the video SSRC, simulcasting NOT enabled"),m;M<0&&(M=g.length),n[1]=Math.floor(4294967295*Math.random()),n[2]=Math.floor(4294967295*Math.random()),S[1]=Math.floor(4294967295*Math.random()),S[2]=Math.floor(4294967295*Math.random());for(let N=0;N<n.length;N++)C&&(g.splice(M,0,"a=ssrc:"+n[N]+" cname:"+C),M++),T&&(g.splice(M,0,"a=ssrc:"+n[N]+" msid:"+T),M++),P&&(g.splice(M,0,"a=ssrc:"+n[N]+" mslabel:"+P),M++),A&&(g.splice(M,0,"a=ssrc:"+n[N]+" label:"+A),M++),C&&(g.splice(M,0,"a=ssrc:"+S[N]+" cname:"+C),M++),T&&(g.splice(M,0,"a=ssrc:"+S[N]+" msid:"+T),M++),P&&(g.splice(M,0,"a=ssrc:"+S[N]+" mslabel:"+P),M++),A&&(g.splice(M,0,"a=ssrc:"+S[N]+" label:"+A),M++);g.splice(M,0,"a=ssrc-group:FID "+n[2]+" "+S[2]),g.splice(M,0,"a=ssrc-group:FID "+n[1]+" "+S[1]),g.splice(M,0,"a=ssrc-group:FID "+n[0]+" "+S[0]),g.splice(M,0,"a=ssrc-group:SIM "+n[0]+" "+n[1]+" "+n[2]);let L=g.join("\r\n");return L.endsWith("\r\n")||(L+="\r\n"),L}(P.sdp):P.sdp),P.sdp=P.sdp?P.sdp.replaceAll("packetization-mode=","sps-pps-idr-in-keyframe=1;packetization-mode="):P.sdp,c&&(S.log("Firefox is detected, patch sdp"),P.sdp=P.sdp?P.sdp.replaceAll("m=audio 0","m=audio 9").replaceAll("m=video 0","m=video 9"):P.sdp),S.log("using SDP",P.sdp),S.log("creating RTCSessionDescription");const A=new RTCSessionDescription(P);S.log("creating RTCSessionDescription finished"),S.log("setting local description"),yield S._caller.setLocalDescription(A),S.log("setting local description finished");const M=yield new Promise(L=>{const N=[],W=setTimeout(()=>{S.log("onicecandidate timeout"),L(N),S._caller&&(S._caller.onicecandidate=null)},S.iceCandidatesTimeoutMs);S._caller.onicecandidate=b=>{if(S.log("onicecandidate",b),!b.candidate)return clearTimeout(W),S.log("onicecandidate success (no candidate in event)"),void L(N);S.isValidIceCandidate(b.candidate)?N.push(b.candidate):S.log(`Local udp ice candidate was skipped: ${b.candidate.candidate}`)}});if(S.log(`found ${M.length} ice candidates`),!M.length){if(C)return S.warn(`No local ice candidates found by ${S.iceCandidatesTimeoutMs}ms. Reconnect...`),void S.reconnect(g,E);if(T)return void S.warn(`No local ice candidates found by ${S.iceCandidatesTimeoutMs}ms. Stopped...`)}S.log("start signaling"),S.signalResult=E(A,M),S.log("finish signaling"),S.connectSubscriptions.push(S.signalResult.onRemoteSdp$.subscribe(L=>{S.log("onRemoteSdp"),S._caller?.setRemoteDescription(L)}),S.signalResult.onRemoteIceCandidate$.subscribe(L=>{S.log("onRemoteIceCandidate"),S.isValidIceCandidate(L)?S._caller?.addIceCandidate(L):S.log(`Remote udp ice candidate was skipped: ${L.candidate}`)}),S.signalResult.onError$.subscribe(()=>{S.warn("Signaling is failed. Reconnect..."),S.reconnect(g,E)})),S._caller?S._caller.oniceconnectionstatechange=()=>{S._state=S._caller.iceConnectionState,S.log("oniceconnectionstatechange",S._state),("failed"===S._state||"disconnected"===S._state)&&(S.warn(`Ice connection status is ${S._state}. Reconnect...`),S.reconnect(g,E)),"connected"===S._state&&S.isConnected$.next(!0)}:S.log("no caller, exiting")})()}isValidIceCandidate(g){const E=s._.settings.IGNORE_UDP_ICE_CANDIDATES;return!g.candidate.toLowerCase().includes("udp")||!E}disconnect(){this.log("disconnecting"),window.clearTimeout(this.connectTimeout),this.connectSubscriptions.forEach(g=>g.unsubscribe()),this.connectSubscriptions=[],this.isConnected$.next(!1),this._caller&&(this._caller.oniceconnectionstatechange=()=>{},this.log("closing caller"),this._caller.close(),this.log("closing caller finished"),this._caller=null),this.signalResult&&(this.log("aborting signal"),this.signalResult.abort(),this.log("aborting signal finished"),this.signalResult=null),this._state="disconnected",this.statistics.stopStatisticsListening()}flush(){this.disconnect(),this.flushOriginStream("audio"),this.flushOriginStream("video"),I(this.localMediaStream),this.remoteMediaStream$.complete(),this.originVideoStream$.complete(),this.originAudioStream$.complete(),this.isConnected$.complete()}reconnect(g,E){this.log("reconnect"),this.disconnect(),this.connectTimeout=window.setTimeout(()=>this.connectWith(g,E,!1),this.reconnectTimeoutMs)}flushOriginStream(g){switch(g){case"audio":if(!this.originAudioStream$.value)return;I(this.originAudioStream$.value);break;case"video":if(!this.originVideoStream$.value)return;I(this.originVideoStream$.value)}}replaceTrackByStream(g,E){var n=this;return(0,e.Z)(function*(){let S;switch(g){case"audio":n.originAudioStream$.next(E),S=E.getAudioTracks()[0];break;case"video":n.originVideoStream$.next(E),S=E.getVideoTracks()[0];break;default:S=null}S?(yield n.replaceTrack(S),n.info(`Track with kind ${g} was replaced`)):n.warn(`Attempt to replace track which does not exist in source stream. Track kind: ${g}`)})()}replaceTrack(g){var E=this;return(0,e.Z)(function*(){const n=E._caller?.getSenders().find(S=>S.track?.kind===g.kind);if(E.log(`Replacing track with kind ${g.kind}`),E.dir(g),n)return n.replaceTrack(g);E.warn(`Sender for kind ${g.kind} was not found during replaceTrack`)})()}getTrack(g){return this.getSender(g)?.track||null}getTrackEnability(g){return!!this.getTrack(g)?.enabled}setTrackEnability(g,E){var n=this;return(0,e.Z)(function*(){const S=n.getTrack(g);if(!S)return;const C=(0,h.qY)();E&&C&&"firefox"===C.name?(yield(0,_.VsW)(100),S.enabled=!1,yield(0,_.VsW)(100),S.enabled=!0):S.enabled=E,n.onTrackEnabilityChanged$.next(S)})()}getReceiver(g){if(!this._caller)return null;const E=this._caller.getReceivers().find(n=>n.track.kind===g);if(!E)throw new Error(`Receiver with kind ${g} does not exist`);return E}getSender(g){return this._caller?this._caller.getSenders().find(E=>E.track?.kind===g):null}setBitrate(g,E){var n=this;return(0,e.Z)(function*(){const S=n.getSender(g);if(!S)return void n.warn(`Attempt to set bitrate for track with kind ${g} but there is no sender with that kind`);const C=S.getParameters();C.encodings=C.encodings||[{}],null==E?(n.info(`Reset bitrate for track with kind ${g}`),delete C.encodings[0].maxBitrate):(n.info(`Set bitrate ${E} for track with kind ${g}`),C.encodings[0].maxBitrate=1e3*E*.9765625),yield S.setParameters(C)})()}postConsoleMessage(g,...E){s._.settings.WEBRTC_CLIENT_LOG_ENABLED&&console[g](`WEB-RTC | ${this.name} |`,...E,this.getSender("video"))}log(...g){this.postConsoleMessage("log",...g)}warn(...g){this.postConsoleMessage("warn",...g)}info(...g){this.postConsoleMessage("warn",...g)}dir(...g){this.postConsoleMessage("dir",...g)}}function I(m){m?.getTracks().forEach(g=>g.stop())}},51011:(z,R,t)=>{t.d(R,{$:()=>i});var e=t(8040);const h=["log","warn","info","dir","debug","time","timeEnd","trace"],_={};for(const f of h){const r=window.console[f];_[f]=r,window.console[f]=(...p)=>{("staging"===e.N.name||window.settings?.LOG_ENABLED)&&r(...p)}}const i=_.log},4147:z=>{z.exports={i8:"15.5.0"}}},z=>{z.O(0,[736],()=>z(z.s=12638)),z.O()}]);